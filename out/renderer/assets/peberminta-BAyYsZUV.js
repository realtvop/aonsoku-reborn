function t(t,n){return(n,o)=>{let e,r=o;return o<n.tokens.length&&(e=t(n.tokens[o],n,o),void 0!==e&&r++),void 0===e?{matched:!1}:{matched:!0,position:r,value:e}}}function n(t,n){return t.matched?{matched:!0,position:t.position,value:n(t.value,t.position)}:t}function o(t,n){return t.matched?n(t):t}function e(t,o){return(e,r)=>n(t(e,r),(t,n)=>o(t,e,r,n))}function r(t,n){return(o,e)=>{const r=t(o,e);return r.matched?r:{matched:!0,position:e,value:n}}}function u(...t){return(n,o)=>{for(const e of t){const t=e(n,o);if(t.matched)return t}return{matched:!1}}}function i(t,n){return(o,e)=>{const r=t(o,e);return r.matched?r:n(o,e)}}function a(t){return function(t,n){return(o,e)=>{const r=[];let u=!0;do{const i=t(o,e);i.matched&&n(i.value,r.length+1,o,e,i.position)?(r.push(i.value),e=i.position):u=!1}while(u);return{matched:!0,position:e,value:r}}}(t,()=>!0)}function c(t){return s(t,a(t),(t,n)=>[t,...n])}function s(t,e,r){return(u,i)=>o(t(u,i),t=>n(e(u,t.position),(n,o)=>r(t.value,n,u,i,o)))}function f(t,n){return s(t,n,t=>t)}function l(t,n){return s(t,n,(t,n)=>n)}function h(t,e,r,u){return(i,a)=>o(t(i,a),t=>o(e(i,t.position),o=>n(r(i,o.position),(n,e)=>u(t.value,o.value,n,i,a,e))))}function d(t,n,o){return h(t,n,o,(t,n)=>n)}function p(...t){return n=function(...t){return(n,o)=>{const e=[];let r=o;for(const u of t){const t=u(n,r);if(!t.matched)return{matched:!1};e.push(t.value),r=t.position}return{matched:!0,position:r,value:e}}}(...t),e(n,t=>t.flatMap(t=>t));var n}function v(t,n,r){return u=t,i=t=>{return o=t,u=s(n,r,(t,n)=>[t,n]),i=(t,[n,o])=>n(t,o),function(t,n){return(o,e)=>{let r=!0,u=t,i=e;do{const t=n(u,o,i)(o,i);t.matched?(u=t.value,i=t.position):r=!1}while(r);return{matched:!0,position:i,value:u}}}(o,t=>e(u,(n,o,e,r)=>i(t,n,o,e,r)));var o,u,i},(t,n)=>o(u(t,n),o=>i(o.value,t,n,o.position)(t,o.position));var u,i}export{e as a,a as b,u as c,i as d,s as e,p as f,c as g,h,f as i,v as l,d as m,r as o,l as r,t};
