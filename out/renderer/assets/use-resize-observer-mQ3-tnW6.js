import{r as e}from"./react-BohqOKG4.js";function r(e,r,n){return e[r]?e[r][0]?e[r][0][n]:e[r][n]:"contentBoxSize"===r?e.contentRect["inlineSize"===n?"width":"height"]:void 0}function n(n){void 0===n&&(n={});var t=n.onResize,u=e.useRef(void 0);u.current=t;var c=n.round||Math.round,i=e.useRef(),o=e.useState({width:void 0,height:void 0}),f=o[0],s=o[1],a=e.useRef(!1);e.useEffect(function(){return a.current=!1,function(){a.current=!0}},[]);var l=e.useRef({width:void 0,height:void 0}),h=function(r,n){var t=e.useRef(null),u=e.useRef(null);u.current=n;var c=e.useRef(null);e.useEffect(function(){i()});var i=e.useCallback(function(){var e=c.current,n=u.current,i=e||(n?n instanceof Element?n:n.current:null);t.current&&t.current.element===i&&t.current.subscriber===r||(t.current&&t.current.cleanup&&t.current.cleanup(),t.current={element:i,subscriber:r,cleanup:i?r(i):void 0})},[r]);return e.useEffect(function(){return function(){t.current&&t.current.cleanup&&(t.current.cleanup(),t.current=null)}},[]),e.useCallback(function(e){c.current=e,i()},[i])}(e.useCallback(function(e){return i.current&&i.current.box===n.box&&i.current.round===c||(i.current={box:n.box,round:c,instance:new ResizeObserver(function(e){var t=e[0],i="border-box"===n.box?"borderBoxSize":"device-pixel-content-box"===n.box?"devicePixelContentBoxSize":"contentBoxSize",o=r(t,i,"inlineSize"),f=r(t,i,"blockSize"),h=o?c(o):void 0,d=f?c(f):void 0;if(l.current.width!==h||l.current.height!==d){var b={width:h,height:d};l.current.width=h,l.current.height=d,u.current?u.current(b):a.current||s(b)}})}),i.current.instance.observe(e,{box:n.box}),function(){i.current&&i.current.instance.unobserve(e)}},[n.box,c]),n.ref);return e.useMemo(function(){return{ref:h,width:f.width,height:f.height}},[h,f.width,f.height])}export{n as u};
