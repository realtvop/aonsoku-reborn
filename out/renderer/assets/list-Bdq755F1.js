import{r as t,j as e}from"./react-BohqOKG4.js";import{u as s}from"./@tanstack-3eZgfo06.js";import{S as r,H as a}from"./header-title-BpiRIAyn.js";import{l as i,R as o,k as m,aK as l,aL as n,aM as c,aA as d,b as j}from"./index-Dw_5HS3q.js";import{P as p}from"./card-_SOi_N1H.js";import{u}from"./use-song-list-BzlADPub.js";import{u as x}from"./react-i18next-CJXO39OJ.js";import{G as h}from"./grid-view-wrapper-Dkq5DQS_.js";import{D as f}from"./data-table-list-CEoMo1BX.js";import{L as g}from"./react-router-dom-DLqO9Z-p.js";import{C as y}from"./cover-image-zpWg5P0A.js";import{T as b}from"./like-button-BExMQkwT.js";import{P as w}from"./play-button-BMYlYUiF.js";import{D as v}from"./data-table-column-header-Bz-4KByJ.js";import{i as T}from"./i18next-CM37CVQ3.js";import{q as k}from"./queryKeys-DxXuT4IC.js";import"./crypto-js-jXt9otfP.js";import"./react-dom-DeCT9Zg9.js";import"./scheduler-CuPG8W_I.js";import"./lucide-react-DrCvGt71.js";import"./react-lazy-load-image-component-DTPOgetJ.js";import"./react-toastify-Dcxz3wpx.js";import"./clsx-BeLtu-UY.js";import"./i18next-browser-languagedetector-F0gxWJsw.js";import"./react-device-detect-CHs-JbVH.js";import"./ua-parser-js-oxSasMdn.js";import"./tailwind-extended-shadows-merge-DdKC4l0c.js";import"./tailwind-merge-5Glu2Zmz.js";import"./@radix-ui-LgTM4vlv.js";import"./aria-hidden-DyxP-6dL.js";import"./react-remove-scroll-yCREhh_0.js";import"./tslib-Bc9CN1Ef.js";import"./react-remove-scroll-bar-BNI7vDx9.js";import"./react-style-singleton-C1oTdtRg.js";import"./get-nonce-BYiZHLe3.js";import"./use-sidecar-DQWw4Coi.js";import"./use-callback-ref-DIudPNPV.js";import"./@floating-ui-VDk0qcgD.js";import"./use-sync-external-store-C4iHanJs.js";import"./class-variance-authority-DO3vQtTq.js";import"./lodash-DSAJ3Ow_.js";import"./zustand-Bqgea8iK.js";import"./immer-Dwi4ZIhD.js";import"./dayjs-BG2b1roC.js";import"./idb-keyval-PpvEIwUC.js";import"./fast-average-color-Dy3p1ZbH.js";import"./@hookform-CXDBdaWi.js";import"./react-hook-form-C23o4OKy.js";import"./use-debounce-CVLZIJWc.js";import"./zod-DxP4i6Pi.js";import"./react-country-flag-DV3c0LTu.js";import"./@remix-run-C5FxfqAA.js";import"./react-router-C-_aAzNf.js";import"./@virtual-grid-CgdFuaQH.js";import"./use-deep-compare-uuuBiybQ.js";import"./dequal-DoBxDInM.js";import"./use-resize-observer-mQ3-tnW6.js";import"./gridTools-sj1_E2oR.js";import"./scrollPageToTop-WHsCYcia.js";import"./react-hotkeys-hook-qKPfarcW.js";import"./equalizer-bars-BP_G2EY6.js";import"./cmdk-DpOb1GNg.js";import"./command-9rYDq5Wc.js";const A=t.memo(function({artist:s}){const{t:r}=x(),{getArtistAllSongs:a}=u(),{setSongList:l}=i(),n=t.useCallback(async()=>{const t=await a(s.name);t&&l(t,0)},[s.name,a,l]);return e.jsxs(p.Root,{className:"flex flex-col w-full h-full",children:[e.jsxs(p.ImageWrapper,{link:o.ARTIST.PAGE(s.id),children:[e.jsx(p.Image,{src:m(s.coverArt,"artist"),alt:s.name}),e.jsx(p.PlayButton,{onClick:n})]}),e.jsxs(p.InfoWrapper,{children:[e.jsx(p.Title,{link:o.ARTIST.PAGE(s.id),children:s.name}),e.jsx(p.Subtitle,{enableLink:!1,children:r("artist.info.albumsCount",{count:s.albumCount})})]})]})});const S=t.memo(function({artist:t}){return e.jsxs("div",{className:"flex gap-2 items-center min-w-[200px] 2xl:min-w-[350px]",children:[e.jsx(y,{coverArt:t.coverArt,coverArtType:"artist",altText:t.name}),e.jsx("div",{className:"flex flex-col justify-center items-center",children:e.jsx(g,{to:o.ARTIST.PAGE(t.id),className:"hover:underline flex w-fit",children:e.jsx("p",{children:t.name})})})]})}),P=t.memo(w),C=t.memo(v),I=t.memo(b);const N=t.memo(r),K=t.memo(a),q=t.memo(c),R=t.memo(f),G=t.memo(d);function L(){const{t:t}=x(),{getArtistAllSongs:r}=u(),{setSongList:a}=i(),{artistsPageViewType:o,setArtistsPageViewType:m,isTableView:c,isGridView:d}=l(),p=[{id:"index",accessorKey:"index",style:{width:48,minWidth:"48px"},header:()=>e.jsx("div",{className:"w-full text-center",children:"#"}),cell:({row:t,table:s})=>{const r=t.index+1,a=t.original;return e.jsx(P,{trackNumber:r,trackId:a.id,handlePlayButton:()=>s.options.meta?.handlePlaySong?.(t)})}},{id:"name",accessorKey:"name",enableSorting:!0,sortingFn:"customSortFn",style:{flex:1,minWidth:100},header:({column:t,table:s})=>e.jsx(C,{column:t,table:s,children:T.t("table.columns.name")}),cell:({row:t})=>e.jsx(S,{artist:t.original})},{id:"albumCount",accessorKey:"albumCount",enableSorting:!0,sortingFn:"basic",style:{width:"15%",maxWidth:"15%"},header:({column:t,table:s})=>e.jsx(C,{column:t,table:s,children:T.t("table.columns.albumCount")})},{id:"starred",accessorKey:"starred",header:"",style:{width:48,maxWidth:48},cell:({row:t})=>{const{starred:s,id:r}=t.original;return e.jsx(I,{type:"artist",entityId:r,starred:"string"==typeof s})}}],{data:f,isLoading:g}=s({queryKey:[k.artist.all],queryFn:j.artists.getAll});return g?e.jsx(n,{}):f?e.jsxs("div",{className:"w-full h-content",children:[e.jsxs(N,{showGlassEffect:!1,fixed:!1,className:"relative w-full justify-between items-center",children:[e.jsx(K,{title:t("sidebar.artists"),count:f.length}),e.jsx(q,{viewType:o,setViewType:m})]}),c&&e.jsx("div",{className:"w-full h-[calc(100%-80px)]",children:e.jsx(R,{columns:p,data:f,handlePlaySong:t=>async function(t){const e=await r(t.name);e&&a(e,0)}(t.original),allowRowSelection:!1,dataType:"artist"})}),d&&e.jsx(G,{className:"pt-shadow-header-distance px-0",children:e.jsx(h,{list:f,"data-testid":"artists-grid",type:"artists",children:t=>e.jsx(A,{artist:t})})})]}):null}export{L as default};
