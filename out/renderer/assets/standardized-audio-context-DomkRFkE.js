import{A as e,c as t,a as n,b as o,d as r,e as a,f as i,g as s}from"./automation-events-CuFXW5ty.js";const c=new WeakSet,l=new WeakMap,u=new WeakMap,d=new WeakMap,h=new WeakMap,p=new WeakMap,f=new WeakMap,v=new WeakMap,m=new WeakMap,g={construct:()=>g},w=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,C=(e,t)=>{const n=[];let o=e.replace(/^[\s]+/,""),r=o.match(w);for(;null!==r;){const e=r[1].slice(1,-1),a=r[0].replace(/([\s]+)?;?$/,"").replace(e,new URL(e,t).toString());n.push(a),o=o.slice(r[0].length).replace(/^[\s]+/,""),r=o.match(w)}return[n.join(";"),o]},y=e=>{if(void 0!==e&&!Array.isArray(e))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},_=e=>{if(!(e=>{try{new new Proxy(e,g)}catch{return!1}return!0})(e))throw new TypeError("The given value for processorCtor should be a constructor.");if(null===e.prototype||"object"!=typeof e.prototype)throw new TypeError("The given value for processorCtor should have a prototype.")},M=(e,t)=>{const n=e.get(t);if(void 0===n)throw new Error("A value with the given key could not be found.");return n},A=(e,t)=>{const n=Array.from(e).filter(t);if(n.length>1)throw Error("More than one element was found.");if(0===n.length)throw Error("No element was found.");const[o]=n;return e.delete(o),o},b=(e,t,n,o)=>{const r=M(e,t),a=A(r,e=>e[0]===n&&e[1]===o);return 0===r.size&&e.delete(t),a},x=e=>M(f,e),O=e=>{if(c.has(e))throw new Error("The AudioNode is already stored.");c.add(e),x(e).forEach(e=>e(!0))},N=e=>"port"in e,I=e=>{if(!c.has(e))throw new Error("The AudioNode is not stored.");c.delete(e),x(e).forEach(e=>e(!1))},T=(e,t)=>{!N(e)&&t.every(e=>0===e.size)&&I(e)},S={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},k=(e,t)=>e.context===t,E=e=>{try{e.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},D=()=>new DOMException("","IndexSizeError"),R=e=>{e.getChannelData=(t=>n=>{try{return t.call(e,n)}catch(o){if(12===o.code)throw D();throw o}})(e.getChannelData)},P={numberOfChannels:1},F=-34028234663852886e22,W=-F,B=e=>c.has(e),V={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},L=e=>M(l,e),q=e=>M(d,e),X=(e,t)=>{const{activeInputs:n}=L(e);n.forEach(n=>n.forEach(([n])=>{t.includes(e)||X(n,[...t,e])}));const o=(e=>"playbackRate"in e)(e)?[e.playbackRate]:N(e)?Array.from(e.parameters.values()):(e=>"frequency"in e&&"gain"in e)(e)?[e.Q,e.detune,e.frequency,e.gain]:(e=>"offset"in e)(e)?[e.offset]:(e=>!("frequency"in e)&&"gain"in e)(e)?[e.gain]:(e=>"detune"in e&&"frequency"in e&&!("gain"in e))(e)?[e.detune,e.frequency]:(e=>"pan"in e)(e)?[e.pan]:[];for(const r of o){const e=q(r);void 0!==e&&e.activeInputs.forEach(([e])=>X(e,t))}B(e)&&I(e)},Y=e=>"context"in e,Z=e=>Y(e[0]),j=(e,t,n,o)=>{for(const r of e)if(n(r)){if(o)return!1;throw Error("The set contains at least one similar element.")}return e.add(t),!0},z=(e,t,[n,o],r)=>{j(e,[t,n,o],e=>e[0]===t&&e[1]===n,r)},G=(e,[t,n,o],r)=>{const a=e.get(t);void 0===a?e.set(t,new Set([[n,o]])):j(a,[n,o],e=>e[0]===n,r)},U=e=>"inputs"in e,Q=(e,t,n,o)=>{if(U(t)){const r=t.inputs[o];return e.connect(r,n,0),[r,n,0]}return e.connect(t,n,o),[t,n,o]},$=(e,t,n)=>{for(const o of e)if(o[0]===t&&o[1]===n)return e.delete(o),o;return null},H=(e,t)=>{if(!x(e).delete(t))throw new Error("Missing the expected event listener.")},J=(e,t,n)=>{const o=M(e,t),r=A(o,e=>e[0]===n);return 0===o.size&&e.delete(t),r},K=(e,t,n,o)=>{U(t)?e.disconnect(t.inputs[o],n,0):e.disconnect(t,n,o)},ee=e=>M(u,e),te=e=>M(h,e),ne=e=>v.has(e),oe=e=>!c.has(e),re=(e,t)=>new Promise(n=>{if(null!==t)n(!0);else{const t=e.createScriptProcessor(256,1,1),o=e.createGain(),r=e.createBuffer(1,2,44100),a=r.getChannelData(0);a[0]=1,a[1]=1;const i=e.createBufferSource();i.buffer=r,i.loop=!0,i.connect(t).connect(e.destination),i.connect(o),i.disconnect(o),t.onaudioprocess=o=>{const r=o.inputBuffer.getChannelData(0);Array.prototype.some.call(r,e=>1===e)?n(!0):n(!1),i.stop(),t.onaudioprocess=null,i.disconnect(t),t.disconnect(e.destination)},i.start()}}),ae=(e,t)=>{const n=new Map;for(const o of e)for(const e of o){const t=n.get(e);n.set(e,void 0===t?1:t+1)}n.forEach((e,n)=>t(n,e))},ie=e=>"context"in e,se=(e,t,n,o)=>{const{activeInputs:r,passiveInputs:a}=q(t),{outputs:i}=L(e),s=x(e),c=i=>{const s=ee(e),c=te(t);if(i){const t=J(a,e,n);z(r,e,t,!1),o||ne(e)||s.connect(c,n)}else{const t=((e,t,n)=>A(e,e=>e[0]===t&&e[1]===n))(r,e,n);G(a,t,!1),o||ne(e)||s.disconnect(c,n)}};return!!j(i,[t,n],e=>e[0]===t&&e[1]===n,!0)&&(s.add(c),B(e)?z(r,e,[n,c],!0):G(a,[e,n,c],!0),!0)},ce=(e,t,n,o,r)=>{const[a,i]=((e,t,n,o)=>{const{activeInputs:r,passiveInputs:a}=L(t),i=$(r[o],e,n);if(null===i)return[b(a,e,n,o)[2],!1];return[i[2],!0]})(e,n,o,r);if(null!==a&&(H(e,a),!i||t||ne(e)||K(ee(e),ee(n),o,r)),B(n)){const{activeInputs:e}=L(n);T(n,e)}},le=(e,t,n,o)=>{const[r,a]=((e,t,n)=>{const{activeInputs:o,passiveInputs:r}=q(t),a=$(o,e,n);if(null===a)return[J(r,e,n)[1],!1];return[a[2],!0]})(e,n,o);null!==r&&(H(e,r),!a||t||ne(e)||ee(e).disconnect(te(n),o))},ue={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},de={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},he={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},pe={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},fe={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},ve=e=>{const{port1:t,port2:n}=new MessageChannel;return new Promise(o=>{const r=()=>{n.onmessage=null,t.close(),n.close(),o()};n.onmessage=()=>r();try{t.postMessage(e,[e])}catch{}finally{r()}})},me={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},ge={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},we={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},Ce=()=>new DOMException("","InvalidStateError"),ye=()=>new DOMException("","InvalidAccessError"),_e={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},Me=(e,t,n,o,r,a,i,s,c,l,u)=>{const d=l.length;let h=s;for(let p=0;p<d;p+=1){let s=n[0]*l[p];for(let t=1;t<r;t+=1){const o=h-t&c-1;s+=n[t]*a[o],s-=e[t]*i[o]}for(let e=r;e<o;e+=1)s+=n[e]*a[h-e&c-1];for(let n=r;n<t;n+=1)s-=e[n]*i[h-n&c-1];a[h]=l[p],i[h]=s,h=h+1&c-1,u[p]=s}return h},Ae={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},be=e=>{const t=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const n=e.decodeAudioData(t.buffer,()=>{});return void 0!==n&&(n.catch(()=>{}),!0)}catch{}return!1},xe=(e,t,n)=>{const o=t[n];void 0!==o&&o!==e[n]&&(e[n]=o)},Oe=(e,t)=>{xe(e,t,"channelCount"),xe(e,t,"channelCountMode"),xe(e,t,"channelInterpretation")},Ne=e=>"function"==typeof e.getFloatTimeDomainData,Ie=(e,t,n)=>{const o=t[n];void 0!==o&&o!==e[n].value&&(e[n].value=o)},Te=e=>{e.start=(t=>(n=0,o=0,r)=>{if("number"==typeof r&&r<0||o<0||n<0)throw new RangeError("The parameters can't be negative.");t.call(e,n,o,r)})(e.start)},Se=e=>{e.stop=(t=>(n=0)=>{if(n<0)throw new RangeError("The parameter can't be negative.");t.call(e,n)})(e.stop)},ke=(e,t)=>{const n=e.createBiquadFilter();return Oe(n,t),Ie(n,t,"Q"),Ie(n,t,"detune"),Ie(n,t,"frequency"),Ie(n,t,"gain"),xe(n,t,"type"),n},Ee=(e,t)=>{const n=e.createChannelSplitter(t.numberOfOutputs);return Oe(n,t),(e=>{const t=e.numberOfOutputs;Object.defineProperty(e,"channelCount",{get:()=>t,set:e=>{if(e!==t)throw Ce()}}),Object.defineProperty(e,"channelCountMode",{get:()=>"explicit",set:e=>{if("explicit"!==e)throw Ce()}}),Object.defineProperty(e,"channelInterpretation",{get:()=>"discrete",set:e=>{if("discrete"!==e)throw Ce()}})})(n),n},De=(e,t)=>(e.connect=t.connect.bind(t),e.disconnect=t.disconnect.bind(t),e),Re=(e,t)=>{const n=e.createDelay(t.maxDelayTime);return Oe(n,t),Ie(n,t,"delayTime"),n},Pe=(e,t)=>{const n=e.createGain();return Oe(n,t),Ie(n,t,"gain"),n};function Fe(e,t){const n=t[0]*t[0]+t[1]*t[1];return[(e[0]*t[0]+e[1]*t[1])/n,(e[1]*t[0]-e[0]*t[1])/n]}function We(e,t){return[e[0]*t[0]-e[1]*t[1],e[0]*t[1]+e[1]*t[0]]}function Be(e,t){let n=[0,0];for(let o=e.length-1;o>=0;o-=1)n=We(n,t),n[0]+=e[o];return n}const Ve=(e,t,n,o)=>e.createScriptProcessor(t,n,o),Le=()=>new DOMException("","NotSupportedError"),qe={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},Xe={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},Ye={disableNormalization:!1},Ze={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},je={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},ze=(e,t,n)=>void 0===e.copyFromChannel?e.getChannelData(n)[0]:(e.copyFromChannel(t,n),t[0]),Ge=e=>{if(null===e)return!1;const t=e.length;return t%2!=0?0!==e[Math.floor(t/2)]:e[t/2-1]+e[t/2]!==0},Ue=(e,t,n,o)=>{let r=e;for(;!r.hasOwnProperty(t);)r=Object.getPrototypeOf(r);const{get:a,set:i}=Object.getOwnPropertyDescriptor(r,t);Object.defineProperty(e,t,{get:n(a),set:o(i)})},Qe=(e,t,n)=>{try{e.setValueAtTime(t,n)}catch(o){if(9!==o.code)throw o;Qe(e,t,n+1e-7)}},$e=e=>{const t=e.createOscillator();try{t.start(-1)}catch(n){return n instanceof RangeError}return!1},He=e=>{const t=e.createBuffer(1,1,44100),n=e.createBufferSource();n.buffer=t,n.start(),n.stop();try{return n.stop(),!0}catch{return!1}},Je=e=>{const t=e.createOscillator();try{t.stop(-1)}catch(n){return n instanceof RangeError}return!1},Ke=(e,t)=>{const n=t.createGain();e.connect(n);const o=(t=>()=>{t.call(e,n),e.removeEventListener("ended",o)})(e.disconnect);e.addEventListener("ended",o),De(e,n),e.stop=(t=>{let o=!1;return(r=0)=>{if(o)try{t.call(e,r)}catch{n.gain.setValueAtTime(0,r)}else t.call(e,r),o=!0}})(e.stop)},et=(e,t)=>n=>{const o={value:e};return Object.defineProperties(n,{currentTarget:o,target:o}),"function"==typeof t?t.call(e,n):t.handleEvent.call(e,n)},tt=(nt=j,(e,t,[n,o,r],a)=>{nt(e[o],[t,n,r],e=>e[0]===t&&e[1]===n,a)});var nt;const ot=(e=>(t,n,[o,r,a],i)=>{const s=t.get(o);void 0===s?t.set(o,new Set([[r,n,a]])):e(s,[r,n,a],e=>e[0]===r&&e[1]===n,i)})(j),rt=(at=A,(e,t,n,o)=>at(e[o],e=>e[0]===t&&e[1]===n));var at;const it=new WeakMap,st=(ct=it,e=>{var t;return null!==(t=ct.get(e))&&void 0!==t?t:0});var ct;const lt=(ut=new Map,dt=new WeakMap,(e,t)=>{const n=dt.get(e);if(void 0!==n)return n;const o=ut.get(e);if(void 0!==o)return o;try{const n=t();return n instanceof Promise?(ut.set(e,n),n.catch(()=>!1).then(t=>(ut.delete(e),dt.set(e,t),t))):(dt.set(e,n),n)}catch{return dt.set(e,!1),!1}});var ut,dt;const ht="undefined"==typeof window?null:window,pt=(ft=lt,vt=D,(e,t)=>{const n=e.createAnalyser();if(Oe(n,t),!(t.maxDecibels>t.minDecibels))throw vt();return xe(n,t,"fftSize"),xe(n,t,"maxDecibels"),xe(n,t,"minDecibels"),xe(n,t,"smoothingTimeConstant"),ft(Ne,()=>Ne(n))||(e=>{e.getFloatTimeDomainData=t=>{const n=new Uint8Array(t.length);e.getByteTimeDomainData(n);const o=Math.max(n.length,e.fftSize);for(let e=0;e<o;e+=1)t[e]=.0078125*(n[e]-128);return t}})(n),n});var ft,vt;const mt=(gt=L,e=>{const t=gt(e);if(null===t.renderer)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return t.renderer});var gt;const wt=((e,t,n)=>async(o,r,a)=>{const i=e(o);await Promise.all(i.activeInputs.map((e,i)=>Array.from(e).map(async([e,s])=>{const c=t(e),l=await c.render(e,r),u=o.context.destination;n(e)||o===u&&n(o)||l.connect(a,s,i)})).reduce((e,t)=>[...e,...t],[]))})(L,mt,ne),Ct=(yt=pt,_t=ee,Mt=wt,()=>{const e=new WeakMap;return{render(t,n){const o=e.get(n);return void 0!==o?Promise.resolve(o):(async(t,n)=>{let o=_t(t);if(!k(o,n)){const e={channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,fftSize:o.fftSize,maxDecibels:o.maxDecibels,minDecibels:o.minDecibels,smoothingTimeConstant:o.smoothingTimeConstant};o=yt(n,e)}return e.set(n,o),await Mt(t,n,o),o})(t,n)}}});var yt,_t,Mt;const At=(bt=p,e=>{const t=bt.get(e);if(void 0===t)throw Ce();return t});var bt;const xt=null===(Ot=ht)?null:Ot.hasOwnProperty("OfflineAudioContext")?Ot.OfflineAudioContext:Ot.hasOwnProperty("webkitOfflineAudioContext")?Ot.webkitOfflineAudioContext:null;var Ot;const Nt=(It=xt,e=>null!==It&&e instanceof It);var It;const Tt=new WeakMap,St=(kt=et,class{constructor(e){this._nativeEventTarget=e,this._listeners=new WeakMap}addEventListener(e,t,n){if(null!==t){let o=this._listeners.get(t);void 0===o&&(o=kt(this,t),"function"==typeof t&&this._listeners.set(t,o)),this._nativeEventTarget.addEventListener(e,o,n)}}dispatchEvent(e){return this._nativeEventTarget.dispatchEvent(e)}removeEventListener(e,t,n){const o=null===t?void 0:this._listeners.get(t);this._nativeEventTarget.removeEventListener(e,void 0===o?null:o,n)}});var kt;const Et=(e=>null===e?null:e.hasOwnProperty("AudioContext")?e.AudioContext:e.hasOwnProperty("webkitAudioContext")?e.webkitAudioContext:null)(ht),Dt=(Rt=Et,e=>null!==Rt&&e instanceof Rt);var Rt;const Pt=(e=>t=>null!==e&&"function"==typeof e.AudioNode&&t instanceof e.AudioNode)(ht),Ft=(e=>t=>null!==e&&"function"==typeof e.AudioParam&&t instanceof e.AudioParam)(ht),Wt=(e=>null===e?null:e.hasOwnProperty("AudioWorkletNode")?e.AudioWorkletNode:null)(ht),Bt=((e,t,n,o,r,a,i,s,c,l,d,h,p,v,m,g)=>class extends l{constructor(t,o,r,a){super(r),this._context=t,this._nativeAudioNode=r;const i=d(t);h(i)&&!0!==n(re,()=>re(i,g))&&(e=>{const t=new Map;e.connect=(e=>(n,o=0,r=0)=>{const a=ie(n)?e(n,o,r):e(n,o),i=t.get(n);return void 0===i?t.set(n,[{input:r,output:o}]):i.every(e=>e.input!==r||e.output!==o)&&i.push({input:r,output:o}),a})(e.connect.bind(e)),e.disconnect=(n=>(o,r,a)=>{if(n.apply(e),void 0===o)t.clear();else if("number"==typeof o)for(const[e,n]of t){const r=n.filter(e=>e.output!==o);0===r.length?t.delete(e):t.set(e,r)}else if(t.has(o))if(void 0===r)t.delete(o);else{const e=t.get(o);if(void 0!==e){const n=e.filter(e=>e.output!==r&&(e.input!==a||void 0===a));0===n.length?t.delete(o):t.set(o,n)}}for(const[n,i]of t)i.forEach(t=>{ie(n)?e.connect(n,t.output,t.input):e.connect(n,t.output)})})(e.disconnect)})(r),u.set(this,r),f.set(this,new Set),"closed"!==t.state&&o&&O(this),e(this,a,r)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(e){this._nativeAudioNode.channelCount=e}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(e){this._nativeAudioNode.channelCountMode=e}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(e){this._nativeAudioNode.channelInterpretation=e}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(e,n=0,s=0){if(n<0||n>=this._nativeAudioNode.numberOfOutputs)throw r();const l=d(this._context),u=m(l);if(p(e)||v(e))throw a();if(Y(e)){const r=ee(e);try{const t=Q(this._nativeAudioNode,r,n,s),o=oe(this);(u||o)&&this._nativeAudioNode.disconnect(...t),"closed"!==this.context.state&&!o&&oe(e)&&O(e)}catch(f){if(12===f.code)throw a();throw f}if(t(this,e,n,s,u)){const t=c([this],e);ae(t,o(u))}return e}const h=te(e);if("playbackRate"===h.name&&1024===h.maxValue)throw i();try{this._nativeAudioNode.connect(h,n),(u||oe(this))&&this._nativeAudioNode.disconnect(h,n)}catch(f){if(12===f.code)throw a();throw f}if(se(this,e,n,u)){const t=c([this],e);ae(t,o(u))}}disconnect(e,t,n){let o;const i=d(this._context),l=m(i);if(void 0===e)o=((e,t)=>{const n=L(e),o=[];for(const r of n.outputs)Z(r)?ce(e,t,...r):le(e,t,...r),o.push(r[0]);return n.outputs.clear(),o})(this,l);else if("number"==typeof e){if(e<0||e>=this.numberOfOutputs)throw r();o=((e,t,n)=>{const o=L(e),r=[];for(const a of o.outputs)a[1]===n&&(Z(a)?ce(e,t,...a):le(e,t,...a),r.push(a[0]),o.outputs.delete(a));return r})(this,l,e)}else{if(void 0!==t&&(t<0||t>=this.numberOfOutputs))throw r();if(Y(e)&&void 0!==n&&(n<0||n>=e.numberOfInputs))throw r();if(o=((e,t,n,o,r)=>{const a=L(e);return Array.from(a.outputs).filter(e=>!(e[0]!==n||void 0!==o&&e[1]!==o||void 0!==r&&e[2]!==r)).map(n=>(Z(n)?ce(e,t,...n):le(e,t,...n),a.outputs.delete(n),n[0]))})(this,l,e,t,n),0===o.length)throw a()}for(const r of o){const e=c([this],r);ae(e,s)}}})((Vt=l,(e,t,n)=>{const o=[];for(let r=0;r<n.numberOfInputs;r+=1)o.push(new Set);Vt.set(e,{activeInputs:o,outputs:new Set,passiveInputs:new WeakMap,renderer:t})}),((e,t,n,o,r,a,i,s,c,l,u,d,h)=>{const p=new WeakMap;return(f,v,m,g,w)=>{const{activeInputs:C,passiveInputs:y}=a(v),{outputs:_}=a(f),M=s(f),A=a=>{const s=c(v),l=c(f);if(a){const t=b(y,f,m,g);e(C,f,t,!1),w||d(f)||n(l,s,m,g),h(v)&&O(v)}else{const e=o(C,f,m,g);t(y,g,e,!1),w||d(f)||r(l,s,m,g);const n=i(v);if(0===n)u(v)&&T(v,C);else{const e=p.get(v);void 0!==e&&clearTimeout(e),p.set(v,setTimeout(()=>{u(v)&&T(v,C)},1e3*n))}}};return!!l(_,[v,m,g],e=>e[0]===v&&e[1]===m&&e[2]===g,!0)&&(M.add(A),u(f)?e(C,f,[m,g,A],!0):t(y,g,[f,m,A],!0),!0)}})(tt,ot,Q,rt,K,L,st,x,ee,j,B,ne,oe),lt,((e,t,n,o,r,a)=>i=>(s,c)=>{const l=e.get(s);if(void 0===l){if(!i&&a(s)){const e=o(s),{outputs:a}=n(s);for(const n of a)if(Z(n)){const r=o(n[0]);t(e,r,n[1],n[2])}else{const t=r(n[0]);e.disconnect(t,n[1])}}e.set(s,c)}else e.set(s,l+c)})(v,K,L,ee,te,B),D,ye,Le,((e,t,n,o,r,a,i,s)=>(c,l)=>{const u=t.get(c);if(void 0===u)throw new Error("Missing the expected cycle count.");const d=a(c.context),h=s(d);if(u===l){if(t.delete(c),!h&&i(c)){const t=o(c),{outputs:a}=n(c);for(const n of a)if(Z(n)){const r=o(n[0]);e(t,r,n[1],n[2])}else{const e=r(n[0]);t.connect(e,n[1])}}}else t.set(c,u-l)})(Q,v,L,ee,te,At,B,Nt),((e,t,n)=>function o(r,a){const i=Y(a)?a:n(e,a);if((e=>"delayTime"in e)(i))return[];if(r[0]===i)return[r];if(r.includes(i))return[];const{outputs:s}=t(i);return Array.from(s).map(e=>o([...r,i],e[0])).reduce((e,t)=>e.concat(t),[])})(Tt,L,M),St,At,Dt,Pt,Ft,Nt,Wt);var Vt;const Lt=((e,t,n,o,r,a)=>class extends e{constructor(e,n){const i=r(e),s={...S,...n},c=o(i,s);super(e,!1,c,a(i)?t():null),this._nativeAnalyserNode=c}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(e){this._nativeAnalyserNode.fftSize=e}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(e){const t=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=e,!(e>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=t,n()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(e){const t=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=e,!(this._nativeAnalyserNode.maxDecibels>e))throw this._nativeAnalyserNode.minDecibels=t,n()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(e){this._nativeAnalyserNode.smoothingTimeConstant=e}getByteFrequencyData(e){this._nativeAnalyserNode.getByteFrequencyData(e)}getByteTimeDomainData(e){this._nativeAnalyserNode.getByteTimeDomainData(e)}getFloatFrequencyData(e){this._nativeAnalyserNode.getFloatFrequencyData(e)}getFloatTimeDomainData(e){this._nativeAnalyserNode.getFloatTimeDomainData(e)}})(Bt,Ct,D,pt,At,Nt),qt=new WeakSet,Xt=(e=>null===e?null:e.hasOwnProperty("AudioBuffer")?e.AudioBuffer:null)(ht),Yt=(Zt=new Uint32Array(1),e=>(Zt[0]=e,Zt[0]));var Zt;const jt=((e,t)=>n=>{n.copyFromChannel=(o,r,a=0)=>{const i=e(a),s=e(r);if(s>=n.numberOfChannels)throw t();const c=n.length,l=n.getChannelData(s),u=o.length;for(let e=i<0?-i:0;e+i<c&&e<u;e+=1)o[e]=l[e+i]},n.copyToChannel=(o,r,a=0)=>{const i=e(a),s=e(r);if(s>=n.numberOfChannels)throw t();const c=n.length,l=n.getChannelData(s),u=o.length;for(let e=i<0?-i:0;e+i<c&&e<u;e+=1)l[e+i]=o[e]}})(Yt,D),zt=(Gt=Yt,e=>{e.copyFromChannel=(t=>(n,o,r=0)=>{const a=Gt(r),i=Gt(o);if(a<e.length)return t.call(e,n,i,a)})(e.copyFromChannel),e.copyToChannel=(t=>(n,o,r=0)=>{const a=Gt(r),i=Gt(o);if(a<e.length)return t.call(e,n,i,a)})(e.copyToChannel)});var Gt;const Ut=((e,t,n,o,r,a,i,s)=>{let c=null;return class l{constructor(l){if(null===r)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:u,numberOfChannels:d,sampleRate:h}={...P,...l};null===c&&(c=new r(1,1,44100));const p=null!==o&&t(a,a)?new o({length:u,numberOfChannels:d,sampleRate:h}):c.createBuffer(d,u,h);if(0===p.numberOfChannels)throw n();return"function"!=typeof p.copyFromChannel?(i(p),R(p)):t(E,()=>E(p))||s(p),e.add(p),p}static[Symbol.hasInstance](t){return null!==t&&"object"==typeof t&&Object.getPrototypeOf(t)===l.prototype||e.has(t)}}})(qt,lt,Le,Xt,xt,(Qt=Xt,()=>{if(null===Qt)return!1;try{new Qt({length:1,sampleRate:44100})}catch{return!1}return!0}),jt,zt);var Qt;const $t=(Ht=Pe,(e,t)=>{const n=Ht(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});t.connect(n).connect(e.destination);const o=()=>{t.removeEventListener("ended",o),t.disconnect(n),n.disconnect()};t.addEventListener("ended",o)});var Ht;const Jt=(Kt=mt,en=q,tn=ne,async(e,t,n)=>{const o=en(e);await Promise.all(Array.from(o.activeInputs).map(async([e,o])=>{const r=Kt(e),a=await r.render(e,t);tn(e)||a.connect(n,o)}))});var Kt,en,tn;const nn=(on=Jt,(e,t,n)=>on(t,e,n));var on;const rn=((e,t,n,o,r,a,i,s,c,l,u)=>(d,h)=>{const p=d.createBufferSource();return Oe(p,h),Ie(p,h,"playbackRate"),xe(p,h,"buffer"),xe(p,h,"loop"),xe(p,h,"loopEnd"),xe(p,h,"loopStart"),t(n,()=>n(d))||(e=>{e.start=(t=>{let n=!1;return(o=0,r=0,a)=>{if(n)throw Ce();t.call(e,o,r,a),n=!0}})(e.start)})(p),t(o,()=>o(d))||c(p),t(r,()=>r(d))||l(p,d),t(a,()=>a(d))||Te(p),t(i,()=>i(d))||u(p,d),t(s,()=>s(d))||Se(p),e(d,p),p})($t,lt,e=>{const t=e.createBufferSource();t.start();try{t.start()}catch{return!0}return!1},e=>{const t=e.createBufferSource(),n=e.createBuffer(1,1,44100);t.buffer=n;try{t.start(0,1)}catch{return!1}return!0},e=>{const t=e.createBufferSource();t.start();try{t.stop()}catch{return!1}return!0},$e,He,Je,e=>{e.start=(t=>(n=0,o=0,r)=>{const a=e.buffer,i=null===a?o:Math.min(a.duration,o);null!==a&&i>a.duration-.5/e.context.sampleRate?t.call(e,n,0,0):t.call(e,n,i,r)})(e.start)},(an=Ue,(e,t)=>{const n=t.createBuffer(1,1,44100);null===e.buffer&&(e.buffer=n),an(e,"buffer",t=>()=>{const o=t.call(e);return o===n?null:o},t=>o=>t.call(e,null===o?n:o))}),Ke);var an;const sn=((e,t)=>(n,o,r)=>(e(o).replay(r),t(o,n,r)))((e=>t=>{const n=e(t);if(null===n.renderer)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return n.renderer})(q),Jt),cn=((e,t,n,o,r)=>()=>{const a=new WeakMap;let i=null,s=null;return{set start(e){i=e},set stop(e){s=e},render(c,l){const u=a.get(l);return void 0!==u?Promise.resolve(u):(async(c,l)=>{let u=n(c);const d=k(u,l);if(!d){const e={buffer:u.buffer,channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,loop:u.loop,loopEnd:u.loopEnd,loopStart:u.loopStart,playbackRate:u.playbackRate.value};u=t(l,e),null!==i&&u.start(...i),null!==s&&u.stop(s)}return a.set(l,u),d?await e(l,c.playbackRate,u.playbackRate):await o(l,c.playbackRate,u.playbackRate),await r(c,l,u),u})(c,l)}}})(nn,rn,ee,sn,wt),ln=((t,n,o,r,a,i,s,c,l,u,d,h,p)=>(f,v,m,g=null,w=null)=>{const C=m.value,y=new e(C),_=v?r(y):null,M={get defaultValue(){return C},get maxValue(){return null===g?m.maxValue:g},get minValue(){return null===w?m.minValue:w},get value(){return m.value},set value(e){m.value=e,M.setValueAtTime(e,f.context.currentTime)},cancelAndHoldAtTime(e){if("function"==typeof m.cancelAndHoldAtTime)null===_&&y.flush(f.context.currentTime),y.add(a(e)),m.cancelAndHoldAtTime(e);else{const t=Array.from(y).pop();null===_&&y.flush(f.context.currentTime),y.add(a(e));const n=Array.from(y).pop();m.cancelScheduledValues(e),t!==n&&void 0!==n&&("exponentialRampToValue"===n.type?m.exponentialRampToValueAtTime(n.value,n.endTime):"linearRampToValue"===n.type?m.linearRampToValueAtTime(n.value,n.endTime):"setValue"===n.type?m.setValueAtTime(n.value,n.startTime):"setValueCurve"===n.type&&m.setValueCurveAtTime(n.values,n.startTime,n.duration))}return M},cancelScheduledValues:e=>(null===_&&y.flush(f.context.currentTime),y.add(i(e)),m.cancelScheduledValues(e),M),exponentialRampToValueAtTime(e,t){if(0===e)throw new RangeError;if(!Number.isFinite(t)||t<0)throw new RangeError;const n=f.context.currentTime;return null===_&&y.flush(n),0===Array.from(y).length&&(y.add(u(C,n)),m.setValueAtTime(C,n)),y.add(s(e,t)),m.exponentialRampToValueAtTime(e,t),M},linearRampToValueAtTime(e,t){const n=f.context.currentTime;return null===_&&y.flush(n),0===Array.from(y).length&&(y.add(u(C,n)),m.setValueAtTime(C,n)),y.add(c(e,t)),m.linearRampToValueAtTime(e,t),M},setTargetAtTime:(e,t,n)=>(null===_&&y.flush(f.context.currentTime),y.add(l(e,t,n)),m.setTargetAtTime(e,t,n),M),setValueAtTime:(e,t)=>(null===_&&y.flush(f.context.currentTime),y.add(u(e,t)),m.setValueAtTime(e,t),M),setValueCurveAtTime(e,t,n){const o=e instanceof Float32Array?e:new Float32Array(e);if(null!==h&&"webkitAudioContext"===h.name){const e=t+n,r=f.context.sampleRate,a=Math.ceil(t*r),i=Math.floor(e*r),s=i-a,c=new Float32Array(s);for(let u=0;u<s;u+=1){const e=(o.length-1)/n*((a+u)/r-t),i=Math.floor(e),s=Math.ceil(e);c[u]=i===s?o[i]:(1-(e-i))*o[i]+(1-(s-e))*o[s]}null===_&&y.flush(f.context.currentTime),y.add(d(c,t,n)),m.setValueCurveAtTime(c,t,n);const l=i/r;l<e&&p(M,c[c.length-1],l),p(M,o[o.length-1],e)}else null===_&&y.flush(f.context.currentTime),y.add(d(o,t,n)),m.setValueCurveAtTime(o,t,n);return M}};return o.set(M,m),n.set(M,f),t(M,_),M})((un=d,(e,t)=>{un.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:t})}),Tt,h,e=>({replay(t){for(const n of e)if("exponentialRampToValue"===n.type){const{endTime:e,value:o}=n;t.exponentialRampToValueAtTime(o,e)}else if("linearRampToValue"===n.type){const{endTime:e,value:o}=n;t.linearRampToValueAtTime(o,e)}else if("setTarget"===n.type){const{startTime:e,target:o,timeConstant:r}=n;t.setTargetAtTime(o,e,r)}else if("setValue"===n.type){const{startTime:e,value:o}=n;t.setValueAtTime(o,e)}else{if("setValueCurve"!==n.type)throw new Error("Can't apply an unknown automation.");{const{duration:e,startTime:o,values:r}=n;t.setValueCurveAtTime(r,o,e)}}}}),s,i,a,r,o,n,t,Et,Qe);var un;const dn=((e,t,n,o,r,a,i,s)=>class extends e{constructor(e,o){const s=a(e),c={...V,...o},l=r(s,c),u=i(s),d=u?t():null;super(e,!1,l,d),this._audioBufferSourceNodeRenderer=d,this._isBufferNullified=!1,this._isBufferSet=null!==c.buffer,this._nativeAudioBufferSourceNode=l,this._onended=null,this._playbackRate=n(this,u,l.playbackRate,W,F)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(e){if(this._nativeAudioBufferSourceNode.buffer=e,null!==e){if(this._isBufferSet)throw o();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(e){this._nativeAudioBufferSourceNode.loop=e}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(e){this._nativeAudioBufferSourceNode.loopEnd=e}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(e){this._nativeAudioBufferSourceNode.loopStart=e}get onended(){return this._onended}set onended(e){const t="function"==typeof e?s(this,e):null;this._nativeAudioBufferSourceNode.onended=t;const n=this._nativeAudioBufferSourceNode.onended;this._onended=null!==n&&n===t?e:n}get playbackRate(){return this._playbackRate}start(e=0,t=0,n){if(this._nativeAudioBufferSourceNode.start(e,t,n),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.start=void 0===n?[e,t]:[e,t,n]),"closed"!==this.context.state){O(this);const e=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",e),B(this)&&I(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",e)}}stop(e=0){this._nativeAudioBufferSourceNode.stop(e),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.stop=e)}})(Bt,cn,ln,Ce,rn,At,Nt,et),hn=((e,t,n,o,r,a,i,s)=>class extends e{constructor(e,n){const o=a(e),c=i(o),l=r(o,n,c);super(e,!1,l,c?t(s):null),this._isNodeOfNativeOfflineAudioContext=c,this._nativeAudioDestinationNode=l}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(e){if(this._isNodeOfNativeOfflineAudioContext)throw o();if(e>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=e}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(e){if(this._isNodeOfNativeOfflineAudioContext)throw o();this._nativeAudioDestinationNode.channelCountMode=e}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}})(Bt,e=>{const t=new WeakMap;return{render(n,o){const r=t.get(o);return void 0!==r?Promise.resolve(r):(async(n,o)=>{const r=o.destination;return t.set(o,r),await e(n,o,r),r})(n,o)}}},D,Ce,((e,t)=>(n,o,r)=>{const a=n.destination;if(a.channelCount!==o)try{a.channelCount=o}catch{}r&&"explicit"!==a.channelCountMode&&(a.channelCountMode="explicit"),0===a.maxChannelCount&&Object.defineProperty(a,"maxChannelCount",{value:o});const i=e(n,{channelCount:o,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,gain:1});return t(i,"channelCount",e=>()=>e.call(i),e=>t=>{e.call(i,t);try{a.channelCount=t}catch(n){if(t>a.maxChannelCount)throw n}}),t(i,"channelCountMode",e=>()=>e.call(i),e=>t=>{e.call(i,t),a.channelCountMode=t}),t(i,"channelInterpretation",e=>()=>e.call(i),e=>t=>{e.call(i,t),a.channelInterpretation=t}),Object.defineProperty(i,"maxChannelCount",{get:()=>a.maxChannelCount}),i.connect(a),i})(Pe,Ue),At,Nt,wt),pn=((e,t,n,o,r)=>()=>{const a=new WeakMap;return{render(i,s){const c=a.get(s);return void 0!==c?Promise.resolve(c):(async(i,s)=>{let c=n(i);const l=k(c,s);if(!l){const e={Q:c.Q.value,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,detune:c.detune.value,frequency:c.frequency.value,gain:c.gain.value,type:c.type};c=t(s,e)}return a.set(s,c),l?(await e(s,i.Q,c.Q),await e(s,i.detune,c.detune),await e(s,i.frequency,c.frequency),await e(s,i.gain,c.gain)):(await o(s,i.Q,c.Q),await o(s,i.detune,c.detune),await o(s,i.frequency,c.frequency),await o(s,i.gain,c.gain)),await r(i,s,c),c})(i,s)}}})(nn,ke,ee,sn,wt),fn=(e=>(t,n)=>e.set(t,n))(it),vn=(mn=Bt,gn=ln,wn=pn,Cn=ye,yn=ke,_n=At,Mn=Nt,An=fn,class extends mn{constructor(e,t){const n=_n(e),o={...ue,...t},r=yn(n,o),a=Mn(n);super(e,!1,r,a?wn():null),this._Q=gn(this,a,r.Q,W,F),this._detune=gn(this,a,r.detune,1200*Math.log2(W),-1200*Math.log2(W)),this._frequency=gn(this,a,r.frequency,e.sampleRate/2,0),this._gain=gn(this,a,r.gain,40*Math.log10(W),F),this._nativeBiquadFilterNode=r,An(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(e){this._nativeBiquadFilterNode.type=e}getFrequencyResponse(e,t,n){try{this._nativeBiquadFilterNode.getFrequencyResponse(e,t,n)}catch(o){if(11===o.code)throw Cn();throw o}if(e.length!==t.length||t.length!==n.length)throw Cn()}});var mn,gn,wn,Cn,yn,_n,Mn,An;const bn=((e,t)=>(n,o,r)=>{const a=new Set;return n.connect=(r=>(i,s=0,c=0)=>{const l=0===a.size;if(t(i))return r.call(n,i,s,c),e(a,[i,s,c],e=>e[0]===i&&e[1]===s&&e[2]===c,!0),l&&o(),i;r.call(n,i,s),e(a,[i,s],e=>e[0]===i&&e[1]===s,!0),l&&o()})(n.connect),n.disconnect=(e=>(o,i,s)=>{const c=a.size>0;if(void 0===o)e.apply(n),a.clear();else if("number"==typeof o){e.call(n,o);for(const e of a)e[1]===o&&a.delete(e)}else{t(o)?e.call(n,o,i,s):e.call(n,o,i);for(const e of a)e[0]!==o||void 0!==i&&e[1]!==i||void 0!==s&&e[2]!==s||a.delete(e)}const l=0===a.size;c&&l&&r()})(n.disconnect),n})(j,Pt);var xn,On;const Nn=((e,t)=>(n,o)=>{const r=n.createChannelMerger(o.numberOfInputs);return null!==e&&"webkitAudioContext"===e.name&&t(n,r),Oe(r,o),r})(Et,(xn=Ce,On=bn,(e,t)=>{t.channelCount=1,t.channelCountMode="explicit",Object.defineProperty(t,"channelCount",{get:()=>1,set:()=>{throw xn()}}),Object.defineProperty(t,"channelCountMode",{get:()=>"explicit",set:()=>{throw xn()}});const n=e.createBufferSource();On(t,()=>{const e=t.numberOfInputs;for(let o=0;o<e;o+=1)n.connect(t,0,o)},()=>n.disconnect(t))})),In=((e,t,n)=>()=>{const o=new WeakMap;return{render(r,a){const i=o.get(a);return void 0!==i?Promise.resolve(i):(async(r,a)=>{let i=t(r);if(!k(i,a)){const t={channelCount:i.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,numberOfInputs:i.numberOfInputs};i=e(a,t)}return o.set(a,i),await n(r,a,i),i})(r,a)}}})(Nn,ee,wt),Tn=((e,t,n,o,r)=>class extends e{constructor(e,a){const i=o(e),s={...de,...a};super(e,!1,n(i,s),r(i)?t():null)}})(Bt,In,Nn,At,Nt),Sn=((e,t,n)=>()=>{const o=new WeakMap;return{render(r,a){const i=o.get(a);return void 0!==i?Promise.resolve(i):(async(r,a)=>{let i=t(r);if(!k(i,a)){const t={channelCount:i.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,numberOfOutputs:i.numberOfOutputs};i=e(a,t)}return o.set(a,i),await n(r,a,i),i})(r,a)}}})(Ee,ee,wt),kn=((e,t,n,o,r,a)=>class extends e{constructor(e,i){const s=o(e),c=a({...he,...i});super(e,!1,n(s,c),r(s)?t():null)}})(Bt,Sn,Ee,At,Nt,e=>({...e,channelCount:e.numberOfOutputs})),En=((e,t,n,o)=>(r,{offset:a,...i})=>{const s=r.createBuffer(1,2,44100),c=t(r,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),l=n(r,{...i,gain:a}),u=s.getChannelData(0);u[0]=1,u[1]=1,c.buffer=s,c.loop=!0;const d={get bufferSize(){},get channelCount(){return l.channelCount},set channelCount(e){l.channelCount=e},get channelCountMode(){return l.channelCountMode},set channelCountMode(e){l.channelCountMode=e},get channelInterpretation(){return l.channelInterpretation},set channelInterpretation(e){l.channelInterpretation=e},get context(){return l.context},get inputs(){return[]},get numberOfInputs(){return c.numberOfInputs},get numberOfOutputs(){return l.numberOfOutputs},get offset(){return l.gain},get onended(){return c.onended},set onended(e){c.onended=e},addEventListener:(...e)=>c.addEventListener(e[0],e[1],e[2]),dispatchEvent:(...e)=>c.dispatchEvent(e[0]),removeEventListener:(...e)=>c.removeEventListener(e[0],e[1],e[2]),start(e=0){c.start.call(c,e)},stop(e=0){c.stop.call(c,e)}};return e(r,c),o(De(d,l),()=>c.connect(l),()=>c.disconnect(l))})($t,rn,Pe,bn),Dn=((e,t,n,o,r)=>(a,i)=>{if(void 0===a.createConstantSource)return n(a,i);const s=a.createConstantSource();return Oe(s,i),Ie(s,i,"offset"),t(o,()=>o(a))||Te(s),t(r,()=>r(a))||Se(s),e(a,s),s})($t,lt,En,$e,Je),Rn=((e,t,n,o,r)=>()=>{const a=new WeakMap;let i=null,s=null;return{set start(e){i=e},set stop(e){s=e},render(c,l){const u=a.get(l);return void 0!==u?Promise.resolve(u):(async(c,l)=>{let u=n(c);const d=k(u,l);if(!d){const e={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,offset:u.offset.value};u=t(l,e),null!==i&&u.start(i),null!==s&&u.stop(s)}return a.set(l,u),d?await e(l,c.offset,u.offset):await o(l,c.offset,u.offset),await r(c,l,u),u})(c,l)}}})(nn,Dn,ee,sn,wt),Pn=((e,t,n,o,r,a,i)=>class extends e{constructor(e,i){const s=r(e),c={...pe,...i},l=o(s,c),u=a(s),d=u?n():null;super(e,!1,l,d),this._constantSourceNodeRenderer=d,this._nativeConstantSourceNode=l,this._offset=t(this,u,l.offset,W,F),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(e){const t="function"==typeof e?i(this,e):null;this._nativeConstantSourceNode.onended=t;const n=this._nativeConstantSourceNode.onended;this._onended=null!==n&&n===t?e:n}start(e=0){if(this._nativeConstantSourceNode.start(e),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.start=e),"closed"!==this.context.state){O(this);const e=()=>{this._nativeConstantSourceNode.removeEventListener("ended",e),B(this)&&I(this)};this._nativeConstantSourceNode.addEventListener("ended",e)}}stop(e=0){this._nativeConstantSourceNode.stop(e),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.stop=e)}})(Bt,ln,Rn,Dn,At,Nt,et),Fn=((e,t)=>(n,o)=>{const r=n.createConvolver();if(Oe(r,o),o.disableNormalization===r.normalize&&(r.normalize=!o.disableNormalization),xe(r,o,"buffer"),o.channelCount>2)throw e();if(t(r,"channelCount",e=>()=>e.call(r),t=>n=>{if(n>2)throw e();return t.call(r,n)}),"max"===o.channelCountMode)throw e();return t(r,"channelCountMode",e=>()=>e.call(r),t=>n=>{if("max"===n)throw e();return t.call(r,n)}),r})(Le,Ue),Wn=((e,t,n)=>()=>{const o=new WeakMap;return{render(r,a){const i=o.get(a);return void 0!==i?Promise.resolve(i):(async(r,a)=>{let i=t(r);if(!k(i,a)){const t={buffer:i.buffer,channelCount:i.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,disableNormalization:!i.normalize};i=e(a,t)}return o.set(a,i),U(i)?await n(r,a,i.inputs[0]):await n(r,a,i),i})(r,a)}}})(Fn,ee,wt),Bn=((e,t,n,o,r,a)=>class extends e{constructor(e,i){const s=o(e),c={...fe,...i},l=n(s,c);super(e,!1,l,r(s)?t():null),this._isBufferNullified=!1,this._nativeConvolverNode=l,null!==c.buffer&&a(this,c.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(e){if(this._nativeConvolverNode.buffer=e,null===e&&null!==this._nativeConvolverNode.buffer){const e=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=e.createBuffer(1,1,e.sampleRate),this._isBufferNullified=!0,a(this,0)}else this._isBufferNullified=!1,a(this,null===this._nativeConvolverNode.buffer?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(e){this._nativeConvolverNode.normalize=e}})(Bt,Wn,Fn,At,Nt,fn),Vn=((e,t,n,o,r)=>a=>{const i=new WeakMap;return{render(s,c){const l=i.get(c);return void 0!==l?Promise.resolve(l):(async(s,c)=>{let l=n(s);const u=k(l,c);if(!u){const e={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,delayTime:l.delayTime.value,maxDelayTime:a};l=t(c,e)}return i.set(c,l),u?await e(c,s.delayTime,l.delayTime):await o(c,s.delayTime,l.delayTime),await r(s,c,l),l})(s,c)}}})(nn,Re,ee,sn,wt),Ln=((e,t,n,o,r,a,i)=>class extends e{constructor(e,s){const c=r(e),l={...me,...s},u=o(c,l),d=a(c);super(e,!1,u,d?n(l.maxDelayTime):null),this._delayTime=t(this,d,u.delayTime),i(this,l.maxDelayTime)}get delayTime(){return this._delayTime}})(Bt,ln,Vn,Re,At,Nt,fn),qn=(Xn=Le,(e,t)=>{const n=e.createDynamicsCompressor();if(Oe(n,t),t.channelCount>2)throw Xn();if("max"===t.channelCountMode)throw Xn();return Ie(n,t,"attack"),Ie(n,t,"knee"),Ie(n,t,"ratio"),Ie(n,t,"release"),Ie(n,t,"threshold"),n});var Xn;const Yn=((e,t,n,o,r)=>()=>{const a=new WeakMap;return{render(i,s){const c=a.get(s);return void 0!==c?Promise.resolve(c):(async(i,s)=>{let c=n(i);const l=k(c,s);if(!l){const e={attack:c.attack.value,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,knee:c.knee.value,ratio:c.ratio.value,release:c.release.value,threshold:c.threshold.value};c=t(s,e)}return a.set(s,c),l?(await e(s,i.attack,c.attack),await e(s,i.knee,c.knee),await e(s,i.ratio,c.ratio),await e(s,i.release,c.release),await e(s,i.threshold,c.threshold)):(await o(s,i.attack,c.attack),await o(s,i.knee,c.knee),await o(s,i.ratio,c.ratio),await o(s,i.release,c.release),await o(s,i.threshold,c.threshold)),await r(i,s,c),c})(i,s)}}})(nn,qn,ee,sn,wt),Zn=((e,t,n,o,r,a,i,s)=>class extends e{constructor(e,r){const c=a(e),l={...ge,...r},u=o(c,l),d=i(c);super(e,!1,u,d?n():null),this._attack=t(this,d,u.attack),this._knee=t(this,d,u.knee),this._nativeDynamicsCompressorNode=u,this._ratio=t(this,d,u.ratio),this._release=t(this,d,u.release),this._threshold=t(this,d,u.threshold),s(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(e){const t=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=e,e>2)throw this._nativeDynamicsCompressorNode.channelCount=t,r()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(e){const t=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=e,"max"===e)throw this._nativeDynamicsCompressorNode.channelCountMode=t,r()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return"number"==typeof this._nativeDynamicsCompressorNode.reduction.value?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}})(Bt,ln,Yn,qn,Le,At,Nt,fn),jn=((e,t,n,o,r)=>()=>{const a=new WeakMap;return{render(i,s){const c=a.get(s);return void 0!==c?Promise.resolve(c):(async(i,s)=>{let c=n(i);const l=k(c,s);if(!l){const e={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,gain:c.gain.value};c=t(s,e)}return a.set(s,c),l?await e(s,i.gain,c.gain):await o(s,i.gain,c.gain),await r(i,s,c),c})(i,s)}}})(nn,Pe,ee,sn,wt),zn=((e,t,n,o,r,a)=>class extends e{constructor(e,i){const s=r(e),c={...we,...i},l=o(s,c),u=a(s);super(e,!1,l,u?n():null),this._gain=t(this,u,l.gain,W,F)}get gain(){return this._gain}})(Bt,ln,jn,Pe,At,Nt),Gn=((e,t,n,o)=>(r,a,{channelCount:i,channelCountMode:s,channelInterpretation:c,feedback:l,feedforward:u})=>{const d=((e,t)=>null===e?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(e*t))))))(a,r.sampleRate),h=l instanceof Float64Array?l:new Float64Array(l),p=u instanceof Float64Array?u:new Float64Array(u),f=h.length,v=p.length,m=Math.min(f,v);if(0===f||f>20)throw o();if(0===h[0])throw t();if(0===v||v>20)throw o();if(0===p[0])throw t();if(1!==h[0]){for(let e=0;e<v;e+=1)p[e]/=h[0];for(let e=1;e<f;e+=1)h[e]/=h[0]}const g=n(r,d,i,i);g.channelCount=i,g.channelCountMode=s,g.channelInterpretation=c;const w=[],C=[],y=[];for(let e=0;e<i;e+=1){w.push(0);const e=new Float32Array(32),t=new Float32Array(32);e.fill(0),t.fill(0),C.push(e),y.push(t)}g.onaudioprocess=e=>{const t=e.inputBuffer,n=e.outputBuffer,o=t.numberOfChannels;for(let r=0;r<o;r+=1){const e=t.getChannelData(r),o=n.getChannelData(r);w[r]=Me(h,f,p,v,m,C[r],y[r],w[r],32,e,o)}};const _=r.sampleRate/2;return De({get bufferSize(){return d},get channelCount(){return g.channelCount},set channelCount(e){g.channelCount=e},get channelCountMode(){return g.channelCountMode},set channelCountMode(e){g.channelCountMode=e},get channelInterpretation(){return g.channelInterpretation},set channelInterpretation(e){g.channelInterpretation=e},get context(){return g.context},get inputs(){return[g]},get numberOfInputs(){return g.numberOfInputs},get numberOfOutputs(){return g.numberOfOutputs},addEventListener:(...e)=>g.addEventListener(e[0],e[1],e[2]),dispatchEvent:(...e)=>g.dispatchEvent(e[0]),getFrequencyResponse(t,n,o){if(t.length!==n.length||n.length!==o.length)throw e();const r=t.length;for(let e=0;e<r;e+=1){const r=-Math.PI*(t[e]/_),a=[Math.cos(r),Math.sin(r)],i=Fe(Be(p,a),Be(h,a));n[e]=Math.sqrt(i[0]*i[0]+i[1]*i[1]),o[e]=Math.atan2(i[1],i[0])}},removeEventListener:(...e)=>g.removeEventListener(e[0],e[1],e[2])},g)})(ye,Ce,Ve,Le),Un=((e,t,n,o)=>r=>e(be,()=>be(r))?Promise.resolve(e(o,o)).then(e=>{if(!e){const e=n(r,512,0,1);r.oncomplete=()=>{e.onaudioprocess=null,e.disconnect()},e.onaudioprocess=()=>r.currentTime,e.connect(r.destination)}return r.startRendering()}):new Promise(e=>{const n=t(r,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});r.oncomplete=t=>{n.disconnect(),e(t.renderedBuffer)},n.connect(r.destination),r.startRendering()}))(lt,Pe,Ve,((e,t)=>()=>{if(null===t)return Promise.resolve(!1);const n=new t(1,1,44100),o=e(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(e=>{n.oncomplete=()=>{o.disconnect(),e(0!==n.currentTime)},n.startRendering()})})(Pe,xt)),Qn=((e,t,n,o,r)=>(a,i)=>{const s=new WeakMap;let c=null;const l=async(l,u)=>{let d=null,h=t(l);const p=k(h,u);if(void 0===u.createIIRFilter?d=e(u,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):p||(h=u.createIIRFilter(i,a)),s.set(u,null===d?h:d),null!==d){if(null===c){if(null===n)throw new Error("Missing the native OfflineAudioContext constructor.");const e=new n(l.context.destination.channelCount,l.context.length,u.sampleRate);c=(async()=>{await o(l,e,e.destination);return((e,t,n,o)=>{const r=n instanceof Float64Array?n:new Float64Array(n),a=o instanceof Float64Array?o:new Float64Array(o),i=r.length,s=a.length,c=Math.min(i,s);if(1!==r[0]){for(let e=0;e<i;e+=1)a[e]/=r[0];for(let e=1;e<s;e+=1)r[e]/=r[0]}const l=new Float32Array(32),u=new Float32Array(32),d=t.createBuffer(e.numberOfChannels,e.length,e.sampleRate),h=e.numberOfChannels;for(let p=0;p<h;p+=1){const t=e.getChannelData(p),n=d.getChannelData(p);l.fill(0),u.fill(0),Me(r,i,a,s,c,l,u,0,32,t,n)}return d})(await r(e),u,a,i)})()}const e=await c;return d.buffer=e,d.start(0),d}return await o(l,u,h),h};return{render(e,t){const n=s.get(t);return void 0!==n?Promise.resolve(n):l(e,t)}}})(rn,ee,xt,wt,Un);var $n;const Hn=((e,t,n,o,r,a)=>class extends e{constructor(e,i){const s=o(e),c=r(s),l={..._e,...i},u=t(s,c?null:e.baseLatency,l);super(e,!1,u,c?n(l.feedback,l.feedforward):null),(e=>{e.getFrequencyResponse=(t=>(n,o,r)=>{if(n.length!==o.length||o.length!==r.length)throw ye();return t.call(e,n,o,r)})(e.getFrequencyResponse)})(u),this._nativeIIRFilterNode=u,a(this,1)}getFrequencyResponse(e,t,n){return this._nativeIIRFilterNode.getFrequencyResponse(e,t,n)}})(Bt,($n=Gn,(e,t,n)=>{if(void 0===e.createIIRFilter)return $n(e,t,n);const o=e.createIIRFilter(n.feedforward,n.feedback);return Oe(o,n),o}),Qn,At,Nt,fn),Jn=((e,t,n,o,r,a,i,s)=>(c,l)=>{const u=l.listener,{forwardX:d,forwardY:h,forwardZ:p,positionX:f,positionY:v,positionZ:m,upX:g,upY:w,upZ:C}=void 0===u.forwardX?(()=>{const d=new Float32Array(1),h=t(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),p=i(l);let f=!1,v=[0,0,-1,0,1,0],m=[0,0,0];const g=()=>{if(f)return;f=!0;const e=o(l,256,9,0);e.onaudioprocess=({inputBuffer:e})=>{const t=[a(e,d,0),a(e,d,1),a(e,d,2),a(e,d,3),a(e,d,4),a(e,d,5)];t.some((e,t)=>e!==v[t])&&(u.setOrientation(...t),v=t);const n=[a(e,d,6),a(e,d,7),a(e,d,8)];n.some((e,t)=>e!==m[t])&&(u.setPosition(...n),m=n)},h.connect(e)},w=e=>t=>{t!==v[e]&&(v[e]=t,u.setOrientation(...v))},C=e=>t=>{t!==m[e]&&(m[e]=t,u.setPosition(...m))},y=(t,o,a)=>{const i=n(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:o});i.connect(h,0,t),i.start(),Object.defineProperty(i.offset,"defaultValue",{get:()=>o});const u=e({context:c},p,i.offset,W,F);var d,f,v,m,w,C,y;return s(u,"value",e=>()=>e.call(u),e=>t=>{try{e.call(u,t)}catch(n){if(9!==n.code)throw n}g(),p&&a(t)}),u.cancelAndHoldAtTime=(d=u.cancelAndHoldAtTime,p?()=>{throw r()}:(...e)=>{const t=d.apply(u,e);return g(),t}),u.cancelScheduledValues=(f=u.cancelScheduledValues,p?()=>{throw r()}:(...e)=>{const t=f.apply(u,e);return g(),t}),u.exponentialRampToValueAtTime=(v=u.exponentialRampToValueAtTime,p?()=>{throw r()}:(...e)=>{const t=v.apply(u,e);return g(),t}),u.linearRampToValueAtTime=(m=u.linearRampToValueAtTime,p?()=>{throw r()}:(...e)=>{const t=m.apply(u,e);return g(),t}),u.setTargetAtTime=(w=u.setTargetAtTime,p?()=>{throw r()}:(...e)=>{const t=w.apply(u,e);return g(),t}),u.setValueAtTime=(C=u.setValueAtTime,p?()=>{throw r()}:(...e)=>{const t=C.apply(u,e);return g(),t}),u.setValueCurveAtTime=(y=u.setValueCurveAtTime,p?()=>{throw r()}:(...e)=>{const t=y.apply(u,e);return g(),t}),u};return{forwardX:y(0,0,w(0)),forwardY:y(1,0,w(1)),forwardZ:y(2,-1,w(2)),positionX:y(6,0,C(0)),positionY:y(7,0,C(1)),positionZ:y(8,0,C(2)),upX:y(3,0,w(3)),upY:y(4,1,w(4)),upZ:y(5,0,w(5))}})():u;return{get forwardX(){return d},get forwardY(){return h},get forwardZ(){return p},get positionX(){return f},get positionY(){return v},get positionZ(){return m},get upX(){return g},get upY(){return w},get upZ(){return C}}})(ln,Nn,Dn,Ve,Le,ze,Nt,Ue),Kn=((e,t,n,o,r,a)=>class extends n{constructor(n,a){super(n),this._nativeContext=n,p.set(this,n),o(n)&&r.set(n,new Set),this._destination=new e(this,a),this._listener=t(this,n),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(e){const t="function"==typeof e?a(this,e):null;this._nativeContext.onstatechange=t;const n=this._nativeContext.onstatechange;this._onstatechange=null!==n&&n===t?e:n}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}})(hn,Jn,St,Nt,new WeakMap,et),eo=((e,t,n,o,r,a)=>(i,s)=>{const c=i.createOscillator();return Oe(c,s),Ie(c,s,"detune"),Ie(c,s,"frequency"),void 0!==s.periodicWave?c.setPeriodicWave(s.periodicWave):xe(c,s,"type"),t(n,()=>n(i))||Te(c),t(o,()=>o(i))||a(c,i),t(r,()=>r(i))||Se(c),e(i,c),c})($t,lt,$e,He,Je,Ke),to=((e,t,n,o,r)=>()=>{const a=new WeakMap;let i=null,s=null,c=null;return{set periodicWave(e){i=e},set start(e){s=e},set stop(e){c=e},render(l,u){const d=a.get(u);return void 0!==d?Promise.resolve(d):(async(l,u)=>{let d=n(l);const h=k(d,u);if(!h){const e={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,detune:d.detune.value,frequency:d.frequency.value,periodicWave:null===i?void 0:i,type:d.type};d=t(u,e),null!==s&&d.start(s),null!==c&&d.stop(c)}return a.set(u,d),h?(await e(u,l.detune,d.detune),await e(u,l.frequency,d.frequency)):(await o(u,l.detune,d.detune),await o(u,l.frequency,d.frequency)),await r(l,u,d),d})(l,u)}}})(nn,eo,ee,sn,wt),no=((e,t,n,o,r,a,i)=>class extends e{constructor(e,i){const s=r(e),c={...qe,...i},l=n(s,c),u=a(s),d=u?o():null,h=e.sampleRate/2;super(e,!1,l,d),this._detune=t(this,u,l.detune,153600,-153600),this._frequency=t(this,u,l.frequency,h,-h),this._nativeOscillatorNode=l,this._onended=null,this._oscillatorNodeRenderer=d,null!==this._oscillatorNodeRenderer&&void 0!==c.periodicWave&&(this._oscillatorNodeRenderer.periodicWave=c.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(e){const t="function"==typeof e?i(this,e):null;this._nativeOscillatorNode.onended=t;const n=this._nativeOscillatorNode.onended;this._onended=null!==n&&n===t?e:n}get type(){return this._nativeOscillatorNode.type}set type(e){this._nativeOscillatorNode.type=e,null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(e){this._nativeOscillatorNode.setPeriodicWave(e),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=e)}start(e=0){if(this._nativeOscillatorNode.start(e),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.start=e),"closed"!==this.context.state){O(this);const e=()=>{this._nativeOscillatorNode.removeEventListener("ended",e),B(this)&&I(this)};this._nativeOscillatorNode.addEventListener("ended",e)}}stop(e=0){this._nativeOscillatorNode.stop(e),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.stop=e)}})(Bt,ln,eo,to,At,Nt,et),oo=(ro=rn,(e,t)=>{const n=ro(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),o=e.createBuffer(1,2,44100);return n.buffer=o,n.loop=!0,n.connect(t),n.start(),()=>{n.stop(),n.disconnect(t)}});var ro;const ao=((e,t,n,o,r)=>(a,{curve:i,oversample:s,...c})=>{const l=a.createWaveShaper(),u=a.createWaveShaper();Oe(l,c),Oe(u,c);const d=n(a,{...c,gain:1}),h=n(a,{...c,gain:-1}),p=n(a,{...c,gain:1}),f=n(a,{...c,gain:-1});let v=null,m=!1,g=null;const w={get bufferSize(){},get channelCount(){return l.channelCount},set channelCount(e){d.channelCount=e,h.channelCount=e,l.channelCount=e,p.channelCount=e,u.channelCount=e,f.channelCount=e},get channelCountMode(){return l.channelCountMode},set channelCountMode(e){d.channelCountMode=e,h.channelCountMode=e,l.channelCountMode=e,p.channelCountMode=e,u.channelCountMode=e,f.channelCountMode=e},get channelInterpretation(){return l.channelInterpretation},set channelInterpretation(e){d.channelInterpretation=e,h.channelInterpretation=e,l.channelInterpretation=e,p.channelInterpretation=e,u.channelInterpretation=e,f.channelInterpretation=e},get context(){return l.context},get curve(){return g},set curve(n){if(null!==n&&n.length<2)throw t();if(null===n)l.curve=n,u.curve=n;else{const e=n.length,t=new Float32Array(e+2-e%2),o=new Float32Array(e+2-e%2);t[0]=n[0],o[0]=-n[e-1];const r=Math.ceil((e+1)/2),a=(e+1)/2-1;for(let i=1;i<r;i+=1){const s=i/r*a,c=Math.floor(s),l=Math.ceil(s);t[i]=c===l?n[c]:(1-(s-c))*n[c]+(1-(l-s))*n[l],o[i]=c===l?-n[e-1-c]:-(1-(s-c))*n[e-1-c]-(1-(l-s))*n[e-1-l]}t[r]=e%2==1?n[r-1]:(n[r-2]+n[r-1])/2,l.curve=t,u.curve=o}g=n,m&&(o(g)&&null===v?v=e(a,d):null!==v&&(v(),v=null))},get inputs(){return[d]},get numberOfInputs(){return l.numberOfInputs},get numberOfOutputs(){return l.numberOfOutputs},get oversample(){return l.oversample},set oversample(e){l.oversample=e,u.oversample=e},addEventListener:(...e)=>d.addEventListener(e[0],e[1],e[2]),dispatchEvent:(...e)=>d.dispatchEvent(e[0]),removeEventListener:(...e)=>d.removeEventListener(e[0],e[1],e[2])};null!==i&&(w.curve=i instanceof Float32Array?i:new Float32Array(i)),s!==w.oversample&&(w.oversample=s);return r(De(w,p),()=>{d.connect(l).connect(p),d.connect(h).connect(u).connect(f).connect(p),m=!0,o(g)&&(v=e(a,d))},()=>{d.disconnect(l),l.disconnect(p),d.disconnect(h),h.disconnect(u),u.disconnect(f),f.disconnect(p),m=!1,null!==v&&(v(),v=null)})})(oo,Ce,Pe,Ge,bn),io=((e,t,n,o,r,a,i)=>(s,c)=>{const l=s.createWaveShaper();if(null!==a&&"webkitAudioContext"===a.name&&void 0===s.createGain().gain.automationRate)return n(s,c);Oe(l,c);const u=null===c.curve||c.curve instanceof Float32Array?c.curve:new Float32Array(c.curve);if(null!==u&&u.length<2)throw t();xe(l,{curve:u},"curve"),xe(l,c,"oversample");let d=null,h=!1;i(l,"curve",e=>()=>e.call(l),t=>n=>(t.call(l,n),h&&(o(n)&&null===d?d=e(s,l):o(n)||null===d||(d(),d=null)),n));return r(l,()=>{h=!0,o(l.curve)&&(d=e(s,l))},()=>{h=!1,null!==d&&(d(),d=null)})})(oo,Ce,ao,Ge,bn,Et,Ue),so=((e,t,n,o,r,a,i,s,c,l)=>(u,{coneInnerAngle:d,coneOuterAngle:h,coneOuterGain:p,distanceModel:f,maxDistance:v,orientationX:m,orientationY:g,orientationZ:w,panningModel:C,positionX:y,positionY:_,positionZ:M,refDistance:A,rolloffFactor:b,...x})=>{const O=u.createPanner();if(x.channelCount>2)throw i();if("max"===x.channelCountMode)throw i();Oe(O,x);const N={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},I=n(u,{...N,channelInterpretation:"speakers",numberOfInputs:6}),T=o(u,{...x,gain:1}),S=o(u,{...N,gain:1}),k=o(u,{...N,gain:0}),E=o(u,{...N,gain:0}),D=o(u,{...N,gain:0}),R=o(u,{...N,gain:0}),P=o(u,{...N,gain:0}),F=r(u,256,6,1),W=a(u,{...N,curve:new Float32Array([1,1]),oversample:"none"});let B=[m,g,w],V=[y,_,M];const L=new Float32Array(1);F.onaudioprocess=({inputBuffer:e})=>{const t=[c(e,L,0),c(e,L,1),c(e,L,2)];t.some((e,t)=>e!==B[t])&&(O.setOrientation(...t),B=t);const n=[c(e,L,3),c(e,L,4),c(e,L,5)];n.some((e,t)=>e!==V[t])&&(O.setPosition(...n),V=n)},Object.defineProperty(k.gain,"defaultValue",{get:()=>0}),Object.defineProperty(E.gain,"defaultValue",{get:()=>0}),Object.defineProperty(D.gain,"defaultValue",{get:()=>0}),Object.defineProperty(R.gain,"defaultValue",{get:()=>0}),Object.defineProperty(P.gain,"defaultValue",{get:()=>0});const q={get bufferSize(){},get channelCount(){return O.channelCount},set channelCount(e){if(e>2)throw i();T.channelCount=e,O.channelCount=e},get channelCountMode(){return O.channelCountMode},set channelCountMode(e){if("max"===e)throw i();T.channelCountMode=e,O.channelCountMode=e},get channelInterpretation(){return O.channelInterpretation},set channelInterpretation(e){T.channelInterpretation=e,O.channelInterpretation=e},get coneInnerAngle(){return O.coneInnerAngle},set coneInnerAngle(e){O.coneInnerAngle=e},get coneOuterAngle(){return O.coneOuterAngle},set coneOuterAngle(e){O.coneOuterAngle=e},get coneOuterGain(){return O.coneOuterGain},set coneOuterGain(e){if(e<0||e>1)throw t();O.coneOuterGain=e},get context(){return O.context},get distanceModel(){return O.distanceModel},set distanceModel(e){O.distanceModel=e},get inputs(){return[T]},get maxDistance(){return O.maxDistance},set maxDistance(e){if(e<0)throw new RangeError;O.maxDistance=e},get numberOfInputs(){return O.numberOfInputs},get numberOfOutputs(){return O.numberOfOutputs},get orientationX(){return S.gain},get orientationY(){return k.gain},get orientationZ(){return E.gain},get panningModel(){return O.panningModel},set panningModel(e){O.panningModel=e},get positionX(){return D.gain},get positionY(){return R.gain},get positionZ(){return P.gain},get refDistance(){return O.refDistance},set refDistance(e){if(e<0)throw new RangeError;O.refDistance=e},get rolloffFactor(){return O.rolloffFactor},set rolloffFactor(e){if(e<0)throw new RangeError;O.rolloffFactor=e},addEventListener:(...e)=>T.addEventListener(e[0],e[1],e[2]),dispatchEvent:(...e)=>T.dispatchEvent(e[0]),removeEventListener:(...e)=>T.removeEventListener(e[0],e[1],e[2])};d!==q.coneInnerAngle&&(q.coneInnerAngle=d),h!==q.coneOuterAngle&&(q.coneOuterAngle=h),p!==q.coneOuterGain&&(q.coneOuterGain=p),f!==q.distanceModel&&(q.distanceModel=f),v!==q.maxDistance&&(q.maxDistance=v),m!==q.orientationX.value&&(q.orientationX.value=m),g!==q.orientationY.value&&(q.orientationY.value=g),w!==q.orientationZ.value&&(q.orientationZ.value=w),C!==q.panningModel&&(q.panningModel=C),y!==q.positionX.value&&(q.positionX.value=y),_!==q.positionY.value&&(q.positionY.value=_),M!==q.positionZ.value&&(q.positionZ.value=M),A!==q.refDistance&&(q.refDistance=A),b!==q.rolloffFactor&&(q.rolloffFactor=b),1===B[0]&&0===B[1]&&0===B[2]||O.setOrientation(...B),0===V[0]&&0===V[1]&&0===V[2]||O.setPosition(...V);return l(De(q,O),()=>{T.connect(O),e(T,W,0,0),W.connect(S).connect(I,0,0),W.connect(k).connect(I,0,1),W.connect(E).connect(I,0,2),W.connect(D).connect(I,0,3),W.connect(R).connect(I,0,4),W.connect(P).connect(I,0,5),I.connect(F).connect(u.destination)},()=>{T.disconnect(O),s(T,W,0,0),W.disconnect(S),S.disconnect(I),W.disconnect(k),k.disconnect(I),W.disconnect(E),E.disconnect(I),W.disconnect(D),D.disconnect(I),W.disconnect(R),R.disconnect(I),W.disconnect(P),P.disconnect(I),I.disconnect(F),F.disconnect(u.destination)})})(Q,Ce,Nn,Pe,Ve,io,Le,K,ze,bn),co=(lo=so,(e,t)=>{const n=e.createPanner();return void 0===n.orientationX?lo(e,t):(Oe(n,t),Ie(n,t,"orientationX"),Ie(n,t,"orientationY"),Ie(n,t,"orientationZ"),Ie(n,t,"positionX"),Ie(n,t,"positionY"),Ie(n,t,"positionZ"),xe(n,t,"coneInnerAngle"),xe(n,t,"coneOuterAngle"),xe(n,t,"coneOuterGain"),xe(n,t,"distanceModel"),xe(n,t,"maxDistance"),xe(n,t,"panningModel"),xe(n,t,"refDistance"),xe(n,t,"rolloffFactor"),n)});var lo;const uo=((e,t,n,o,r,a,i,s,c,l)=>()=>{const u=new WeakMap;let d=null;return{render(h,p){const f=u.get(p);return void 0!==f?Promise.resolve(f):(async(h,p)=>{let f=null,v=a(h);const m={channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation},g={...m,coneInnerAngle:v.coneInnerAngle,coneOuterAngle:v.coneOuterAngle,coneOuterGain:v.coneOuterGain,distanceModel:v.distanceModel,maxDistance:v.maxDistance,panningModel:v.panningModel,refDistance:v.refDistance,rolloffFactor:v.rolloffFactor},w=k(v,p);if("bufferSize"in v)f=o(p,{...m,gain:1});else if(!w){const e={...g,orientationX:v.orientationX.value,orientationY:v.orientationY.value,orientationZ:v.orientationZ.value,positionX:v.positionX.value,positionY:v.positionY.value,positionZ:v.positionZ.value};v=r(p,e)}if(u.set(p,null===f?v:f),null!==f){if(null===d){if(null===i)throw new Error("Missing the native OfflineAudioContext constructor.");const e=new i(6,h.context.length,p.sampleRate),o=t(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});o.connect(e.destination),d=(async()=>{const t=await Promise.all([h.orientationX,h.orientationY,h.orientationZ,h.positionX,h.positionY,h.positionZ].map(async(t,o)=>{const r=n(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:0===o?1:0});return await s(e,t,r.offset),r}));for(let e=0;e<6;e+=1)t[e].connect(o,0,e),t[e].start(0);return l(e)})()}const e=await d,a=o(p,{...m,gain:1});await c(h,p,a);const u=[];for(let t=0;t<e.numberOfChannels;t+=1)u.push(e.getChannelData(t));let v=[u[0][0],u[1][0],u[2][0]],w=[u[3][0],u[4][0],u[5][0]],C=o(p,{...m,gain:1}),y=r(p,{...g,orientationX:v[0],orientationY:v[1],orientationZ:v[2],positionX:w[0],positionY:w[1],positionZ:w[2]});a.connect(C).connect(y.inputs[0]),y.connect(f);for(let t=128;t<e.length;t+=128){const e=[u[0][t],u[1][t],u[2][t]],n=[u[3][t],u[4][t],u[5][t]];if(e.some((e,t)=>e!==v[t])||n.some((e,t)=>e!==w[t])){v=e,w=n;const i=t/p.sampleRate;C.gain.setValueAtTime(0,i),C=o(p,{...m,gain:0}),y=r(p,{...g,orientationX:v[0],orientationY:v[1],orientationZ:v[2],positionX:w[0],positionY:w[1],positionZ:w[2]}),C.gain.setValueAtTime(1,i),a.connect(C).connect(y.inputs[0]),y.connect(f)}}return f}return w?(await e(p,h.orientationX,v.orientationX),await e(p,h.orientationY,v.orientationY),await e(p,h.orientationZ,v.orientationZ),await e(p,h.positionX,v.positionX),await e(p,h.positionY,v.positionY),await e(p,h.positionZ,v.positionZ)):(await s(p,h.orientationX,v.orientationX),await s(p,h.orientationY,v.orientationY),await s(p,h.orientationZ,v.orientationZ),await s(p,h.positionX,v.positionX),await s(p,h.positionY,v.positionY),await s(p,h.positionZ,v.positionZ)),U(v)?await c(h,p,v.inputs[0]):await c(h,p,v),v})(h,p)}}})(nn,Nn,Dn,Pe,co,ee,xt,sn,wt,Un),ho=((e,t,n,o,r,a,i)=>class extends e{constructor(e,s){const c=r(e),l={...Xe,...s},u=n(c,l),d=a(c);super(e,!1,u,d?o():null),this._nativePannerNode=u,this._orientationX=t(this,d,u.orientationX,W,F),this._orientationY=t(this,d,u.orientationY,W,F),this._orientationZ=t(this,d,u.orientationZ,W,F),this._positionX=t(this,d,u.positionX,W,F),this._positionY=t(this,d,u.positionY,W,F),this._positionZ=t(this,d,u.positionZ,W,F),i(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(e){this._nativePannerNode.coneInnerAngle=e}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(e){this._nativePannerNode.coneOuterAngle=e}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(e){this._nativePannerNode.coneOuterGain=e}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(e){this._nativePannerNode.distanceModel=e}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(e){this._nativePannerNode.maxDistance=e}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(e){this._nativePannerNode.panningModel=e}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(e){this._nativePannerNode.refDistance=e}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(e){this._nativePannerNode.rolloffFactor=e}})(Bt,ln,co,uo,At,Nt,fn),po=(e=>(t,{disableNormalization:n,imag:o,real:r})=>{const a=o instanceof Float32Array?o:new Float32Array(o),i=r instanceof Float32Array?r:new Float32Array(r),s=t.createPeriodicWave(i,a,{disableNormalization:n});if(Array.from(o).length<2)throw e();return s})(D),fo=((e,t,n,o)=>class r{constructor(r,a){const i=t(r),s=o({...Ye,...a}),c=e(i,s);return n.add(c),c}static[Symbol.hasInstance](e){return null!==e&&"object"==typeof e&&Object.getPrototypeOf(e)===r.prototype||n.has(e)}})(po,At,new WeakSet,e=>{const{imag:t,real:n}=e;return void 0===t?void 0===n?{...e,imag:[0,0],real:[0,0]}:{...e,imag:Array.from(n,()=>0),real:n}:void 0===n?{...e,imag:t,real:Array.from(t,()=>0)}:{...e,imag:t,real:n}}),vo=((e,t,n,o,r,a)=>{const i=16385,s=new Float32Array([1,1]),c=Math.PI/2,l={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},u={...l,oversample:"none"},d=(e,a,d,h,p)=>{if(1===a)return((e,t,r,a)=>{const d=new Float32Array(i),h=new Float32Array(i);for(let n=0;n<i;n+=1){const e=n/16384*c;d[n]=Math.cos(e),h[n]=Math.sin(e)}const p=n(e,{...l,gain:0}),f=o(e,{...u,curve:d}),v=o(e,{...u,curve:s}),m=n(e,{...l,gain:0}),g=o(e,{...u,curve:h});return{connectGraph(){t.connect(p),t.connect(void 0===v.inputs?v:v.inputs[0]),t.connect(m),v.connect(r),r.connect(void 0===f.inputs?f:f.inputs[0]),r.connect(void 0===g.inputs?g:g.inputs[0]),f.connect(p.gain),g.connect(m.gain),p.connect(a,0,0),m.connect(a,0,1)},disconnectGraph(){t.disconnect(p),t.disconnect(void 0===v.inputs?v:v.inputs[0]),t.disconnect(m),v.disconnect(r),r.disconnect(void 0===f.inputs?f:f.inputs[0]),r.disconnect(void 0===g.inputs?g:g.inputs[0]),f.disconnect(p.gain),g.disconnect(m.gain),p.disconnect(a,0,0),m.disconnect(a,0,1)}}})(e,d,h,p);if(2===a)return((e,r,a,d)=>{const h=new Float32Array(i),p=new Float32Array(i),f=new Float32Array(i),v=new Float32Array(i),m=Math.floor(8192.5);for(let t=0;t<i;t+=1)if(t>m){const e=(t-m)/(16384-m)*c;h[t]=Math.cos(e),p[t]=Math.sin(e),f[t]=0,v[t]=1}else{const e=t/(16384-m)*c;h[t]=1,p[t]=0,f[t]=Math.cos(e),v[t]=Math.sin(e)}const g=t(e,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),w=n(e,{...l,gain:0}),C=o(e,{...u,curve:h}),y=n(e,{...l,gain:0}),_=o(e,{...u,curve:p}),M=o(e,{...u,curve:s}),A=n(e,{...l,gain:0}),b=o(e,{...u,curve:f}),x=n(e,{...l,gain:0}),O=o(e,{...u,curve:v});return{connectGraph(){r.connect(g),r.connect(void 0===M.inputs?M:M.inputs[0]),g.connect(w,0),g.connect(y,0),g.connect(A,1),g.connect(x,1),M.connect(a),a.connect(void 0===C.inputs?C:C.inputs[0]),a.connect(void 0===_.inputs?_:_.inputs[0]),a.connect(void 0===b.inputs?b:b.inputs[0]),a.connect(void 0===O.inputs?O:O.inputs[0]),C.connect(w.gain),_.connect(y.gain),b.connect(A.gain),O.connect(x.gain),w.connect(d,0,0),A.connect(d,0,0),y.connect(d,0,1),x.connect(d,0,1)},disconnectGraph(){r.disconnect(g),r.disconnect(void 0===M.inputs?M:M.inputs[0]),g.disconnect(w,0),g.disconnect(y,0),g.disconnect(A,1),g.disconnect(x,1),M.disconnect(a),a.disconnect(void 0===C.inputs?C:C.inputs[0]),a.disconnect(void 0===_.inputs?_:_.inputs[0]),a.disconnect(void 0===b.inputs?b:b.inputs[0]),a.disconnect(void 0===O.inputs?O:O.inputs[0]),C.disconnect(w.gain),_.disconnect(y.gain),b.disconnect(A.gain),O.disconnect(x.gain),w.disconnect(d,0,0),A.disconnect(d,0,0),y.disconnect(d,0,1),x.disconnect(d,0,1)}}})(e,d,h,p);throw r()};return(t,{channelCount:o,channelCountMode:i,pan:s,...c})=>{if("max"===i)throw r();const l=e(t,{...c,channelCount:1,channelCountMode:i,numberOfInputs:2}),u=n(t,{...c,channelCount:o,channelCountMode:i,gain:1}),h=n(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:s});let{connectGraph:p,disconnectGraph:f}=d(t,o,u,h,l);Object.defineProperty(h.gain,"defaultValue",{get:()=>0}),Object.defineProperty(h.gain,"maxValue",{get:()=>1}),Object.defineProperty(h.gain,"minValue",{get:()=>-1});const v={get bufferSize(){},get channelCount(){return u.channelCount},set channelCount(e){u.channelCount!==e&&(m&&f(),({connectGraph:p,disconnectGraph:f}=d(t,e,u,h,l)),m&&p()),u.channelCount=e},get channelCountMode(){return u.channelCountMode},set channelCountMode(e){if("clamped-max"===e||"max"===e)throw r();u.channelCountMode=e},get channelInterpretation(){return u.channelInterpretation},set channelInterpretation(e){u.channelInterpretation=e},get context(){return u.context},get inputs(){return[u]},get numberOfInputs(){return u.numberOfInputs},get numberOfOutputs(){return u.numberOfOutputs},get pan(){return h.gain},addEventListener:(...e)=>u.addEventListener(e[0],e[1],e[2]),dispatchEvent:(...e)=>u.dispatchEvent(e[0]),removeEventListener:(...e)=>u.removeEventListener(e[0],e[1],e[2])};let m=!1;return a(De(v,l),()=>{p(),m=!0},()=>{f(),m=!1})}})(Nn,Ee,Pe,io,Le,bn),mo=((e,t)=>(n,o)=>{const r=o.channelCountMode;if("clamped-max"===r)throw t();if(void 0===n.createStereoPanner)return e(n,o);const a=n.createStereoPanner();return Oe(a,o),Ie(a,o,"pan"),Object.defineProperty(a,"channelCountMode",{get:()=>r,set:e=>{if(e!==r)throw t()}}),a})(vo,Le),go=((e,t,n,o,r)=>()=>{const a=new WeakMap;return{render(i,s){const c=a.get(s);return void 0!==c?Promise.resolve(c):(async(i,s)=>{let c=n(i);const l=k(c,s);if(!l){const e={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,pan:c.pan.value};c=t(s,e)}return a.set(s,c),l?await e(s,i.pan,c.pan):await o(s,i.pan,c.pan),U(c)?await r(i,s,c.inputs[0]):await r(i,s,c),c})(i,s)}}})(nn,mo,ee,sn,wt),wo=((e,t,n,o,r,a)=>class extends e{constructor(e,i){const s=r(e),c={...Ze,...i},l=n(s,c),u=a(s);super(e,!1,l,u?o():null),this._pan=t(this,u,l.pan)}get pan(){return this._pan}})(Bt,ln,mo,go,At,Nt),Co=((e,t,n)=>()=>{const o=new WeakMap;return{render(r,a){const i=o.get(a);return void 0!==i?Promise.resolve(i):(async(r,a)=>{let i=t(r);if(!k(i,a)){const t={channelCount:i.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,curve:i.curve,oversample:i.oversample};i=e(a,t)}return o.set(a,i),U(i)?await n(r,a,i.inputs[0]):await n(r,a,i),i})(r,a)}}})(io,ee,wt),yo=((e,t,n,o,r,a,i)=>class extends e{constructor(e,t){const s=r(e),c={...je,...t},l=n(s,c);super(e,!0,l,a(s)?o():null),this._isCurveNullified=!1,this._nativeWaveShaperNode=l,i(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(e){if(null===e)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(e.length<2)throw t();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=e}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(e){this._nativeWaveShaperNode.oversample=e}})(Bt,Ce,io,Co,At,Nt,fn),_o=(e=>null!==e&&e.isSecureContext)(ht),Mo=(e=>(t,n,o)=>{Object.defineProperties(e,{currentFrame:{configurable:!0,get:()=>Math.round(t*n)},currentTime:{configurable:!0,get:()=>t}});try{return o()}finally{null!==e&&(delete e.currentFrame,delete e.currentTime)}})(ht),Ao=((e,t)=>n=>{let o=e.get(n);if(void 0!==o)return o;if(null===t)throw new Error("Missing the native OfflineAudioContext constructor.");return o=new t(1,1,44100),e.set(n,o),o})(new WeakMap,xt),bo=_o?((e,t,n,o,r,a,i,s,c,l,u,d,h)=>{let p=0;return(f,v,g={credentials:"omit"})=>{const w=u.get(f);if(void 0!==w&&w.has(v))return Promise.resolve();const M=l.get(f);if(void 0!==M){const e=M.get(v);if(void 0!==e)return e}const A=a(f),b=void 0===A.audioWorklet?r(v).then(([e,t])=>{const[o,r]=C(e,t);return n(`${o};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${r}\n})})(window,'_AWGS')`)}).then(()=>{const e=h._AWGS.pop();if(void 0===e)throw new SyntaxError;o(A.currentTime,A.sampleRate,()=>e(class{},void 0,(e,n)=>{if(""===e.trim())throw t();const o=m.get(A);if(void 0!==o){if(o.has(e))throw t();_(n),y(n.parameterDescriptors),o.set(e,n)}else _(n),y(n.parameterDescriptors),m.set(A,new Map([[e,n]]))},A.sampleRate,void 0,void 0))}):Promise.all([r(v),Promise.resolve(e(d,d))]).then(([[e,t],n])=>{const o=p+1;p=o;const[r,a]=C(e,t),l=new Blob([`${r};((AudioWorkletProcessor,registerProcessor)=>{${a}\n})(${n?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${n?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${n?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${o}',class extends AudioWorkletProcessor{process(){return !1}})`],{type:"application/javascript; charset=utf-8"}),u=URL.createObjectURL(l);return A.audioWorklet.addModule(u,g).then(()=>{if(s(A))return A;const e=i(A);return e.audioWorklet.addModule(u,g).then(()=>e)}).then(e=>{if(null===c)throw new SyntaxError;try{new c(e,`__sac${o}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(u))});return void 0===M?l.set(f,new Map([[v,b]])):M.set(v,b),b.then(()=>{const e=u.get(f);void 0===e?u.set(f,new Set([v])):e.add(v)}).finally(()=>{const e=l.get(f);void 0!==e&&e.delete(v)}),b}})(lt,Le,(e=>t=>new Promise((n,o)=>{if(null===e)return void o(new SyntaxError);const r=e.document.head;if(null===r)o(new SyntaxError);else{const a=e.document.createElement("script"),i=new Blob([t],{type:"application/javascript"}),s=URL.createObjectURL(i),c=e.onerror,l=()=>{e.onerror=c,URL.revokeObjectURL(s)};e.onerror=(t,n,r,a,i)=>n===s||n===e.location.href&&1===r&&1===a?(l(),o(i),!1):null!==c?c(t,n,r,a,i):void 0,a.onerror=()=>{l(),o(new SyntaxError)},a.onload=()=>{l(),n()},a.src=s,a.type="module",r.appendChild(a)}}))(ht),Mo,(xo=()=>new DOMException("","AbortError"),async e=>{try{const t=await fetch(e);if(t.ok)return[await t.text(),t.url]}catch{}throw xo()}),At,Ao,Nt,Wt,new WeakMap,new WeakMap,((e,t)=>async()=>{if(null===e)return!0;if(null===t)return!1;const n=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),o=new t(1,128,44100),r=URL.createObjectURL(n);let a=!1,i=!1;try{await o.audioWorklet.addModule(r);const t=new e(o,"a",{numberOfOutputs:0}),n=o.createOscillator();t.port.onmessage=()=>a=!0,t.onprocessorerror=()=>i=!0,n.connect(t),n.start(0),await o.startRendering(),await new Promise(e=>setTimeout(e))}catch{}finally{URL.revokeObjectURL(r)}return a&&!i})(Wt,xt),ht):void 0;var xo;const Oo=((e,t)=>n=>e(n)||t(n))(Dt,Nt),No=((e,t,n,o,r,a,i,s,c,l,u)=>(d,h)=>{const p=i(d)?d:a(d);if(r.has(h)){const e=n();return Promise.reject(e)}try{r.add(h)}catch{}return t(c,()=>c(p))?p.decodeAudioData(h).then(n=>(ve(h).catch(()=>{}),t(s,()=>s(n))||u(n),e.add(n),n)):new Promise((t,n)=>{const r=async()=>{try{await ve(h)}catch{}},a=e=>{n(e),r()};try{p.decodeAudioData(h,n=>{"function"!=typeof n.copyFromChannel&&(l(n),R(n)),e.add(n),r().then(()=>t(n))},e=>{a(null===e?o():e)})}catch(i){a(i)}})})(qt,lt,()=>new DOMException("","DataCloneError"),()=>new DOMException("","EncodingError"),new WeakSet,At,Oo,E,be,jt,zt),Io=(To=bo,So=Lt,ko=Ut,Eo=dn,Do=vn,Ro=Tn,Po=kn,Fo=Pn,Wo=Bn,Bo=No,Vo=Ln,Lo=Zn,qo=zn,Xo=Hn,Yo=Kn,Zo=no,jo=ho,zo=fo,Go=wo,Uo=yo,class extends Yo{constructor(e,t){super(e,t),this._nativeContext=e,this._audioWorklet=void 0===To?void 0:{addModule:(e,t)=>To(this,e,t)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new So(this)}createBiquadFilter(){return new Do(this)}createBuffer(e,t,n){return new ko({length:t,numberOfChannels:e,sampleRate:n})}createBufferSource(){return new Eo(this)}createChannelMerger(e=6){return new Ro(this,{numberOfInputs:e})}createChannelSplitter(e=6){return new Po(this,{numberOfOutputs:e})}createConstantSource(){return new Fo(this)}createConvolver(){return new Wo(this)}createDelay(e=1){return new Vo(this,{maxDelayTime:e})}createDynamicsCompressor(){return new Lo(this)}createGain(){return new qo(this)}createIIRFilter(e,t){return new Xo(this,{feedback:t,feedforward:e})}createOscillator(){return new Zo(this)}createPanner(){return new jo(this)}createPeriodicWave(e,t,n={disableNormalization:!1}){return new zo(this,{...n,imag:t,real:e})}createStereoPanner(){return new Go(this)}createWaveShaper(){return new Uo(this)}decodeAudioData(e,t,n){return Bo(this._nativeContext,e).then(e=>("function"==typeof t&&t(e),e),e=>{throw"function"==typeof n&&n(e),e})}});var To,So,ko,Eo,Do,Ro,Po,Fo,Wo,Bo,Vo,Lo,qo,Xo,Yo,Zo,jo,zo,Go,Uo;const Qo=((e,t,n,o)=>class extends e{constructor(e,r){const a=n(e),i=t(a,r);if(o(a))throw TypeError();super(e,!0,i,null),this._nativeMediaElementAudioSourceNode=i}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}})(Bt,(e,t)=>e.createMediaElementSource(t.mediaElement),At,Nt),$o=((e,t,n,o)=>class extends e{constructor(e,r){const a=n(e);if(o(a))throw new TypeError;const i={...Ae,...r},s=t(a,i);super(e,!1,s,null),this._nativeMediaStreamAudioDestinationNode=s}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}})(Bt,(e,t)=>{const n=e.createMediaStreamDestination();return Oe(n,t),1===n.numberOfOutputs&&Object.defineProperty(n,"numberOfOutputs",{get:()=>0}),n},At,Nt),Ho=((e,t,n,o)=>class extends e{constructor(e,r){const a=n(e),i=t(a,r);if(o(a))throw new TypeError;super(e,!0,i,null),this._nativeMediaStreamAudioSourceNode=i}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}})(Bt,(e,{mediaStream:t})=>{const n=t.getAudioTracks();n.sort((e,t)=>e.id<t.id?-1:e.id>t.id?1:0);const o=n.slice(0,1),r=e.createMediaStreamSource(new MediaStream(o));return Object.defineProperty(r,"mediaStream",{value:t}),r},At,Nt),Jo=((e,t)=>(n,{mediaStreamTrack:o})=>{if("function"==typeof n.createMediaStreamTrackSource)return n.createMediaStreamTrackSource(o);const r=new MediaStream([o]),a=n.createMediaStreamSource(r);if("audio"!==o.kind)throw e();if(t(n))throw new TypeError;return a})(Ce,Nt),Ko=((e,t,n)=>class extends e{constructor(e,o){const r=n(e);super(e,!0,t(r,o),null)}})(Bt,Jo,At),er=((e,t,n,o,r,a,i,s,c)=>class extends e{constructor(e={}){if(null===c)throw new Error("Missing the native AudioContext constructor.");let t;try{t=new c(e)}catch(i){if(12===i.code&&"sampleRate is not in range"===i.message)throw n();throw i}if(null===t)throw o();if(!(e=>void 0===e||"number"==typeof e||"string"==typeof e&&("balanced"===e||"interactive"===e||"playback"===e))(e.latencyHint))throw new TypeError(`The provided value '${e.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(void 0!==e.sampleRate&&t.sampleRate!==e.sampleRate)throw n();super(t,2);const{latencyHint:r}=e,{sampleRate:a}=t;if(this._baseLatency="number"==typeof t.baseLatency?t.baseLatency:"balanced"===r?512/a:"interactive"===r||void 0===r?256/a:"playback"===r?1024/a:128*Math.max(2,Math.min(128,Math.round(r*a/128)))/a,this._nativeAudioContext=t,"webkitAudioContext"===c.name?(this._nativeGainNode=t.createGain(),this._nativeOscillatorNode=t.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(t.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,"running"===t.state){this._state="suspended";const e=()=>{"suspended"===this._state&&(this._state=null),t.removeEventListener("statechange",e)};t.addEventListener("statechange",e)}}get baseLatency(){return this._baseLatency}get state(){return null!==this._state?this._state:this._nativeAudioContext.state}close(){return"closed"===this.state?this._nativeAudioContext.close().then(()=>{throw t()}):("suspended"===this._state&&(this._state=null),this._nativeAudioContext.close().then(()=>{null!==this._nativeGainNode&&null!==this._nativeOscillatorNode&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),X(this.destination,[])}))}createMediaElementSource(e){return new r(this,{mediaElement:e})}createMediaStreamDestination(){return new a(this)}createMediaStreamSource(e){return new i(this,{mediaStream:e})}createMediaStreamTrackSource(e){return new s(this,{mediaStreamTrack:e})}resume(){return"suspended"===this._state?new Promise((e,t)=>{const n=()=>{this._nativeAudioContext.removeEventListener("statechange",n),"running"===this._nativeAudioContext.state?e():this.resume().then(e,t)};this._nativeAudioContext.addEventListener("statechange",n)}):this._nativeAudioContext.resume().catch(e=>{if(void 0===e||15===e.code)throw t();throw e})}suspend(){return this._nativeAudioContext.suspend().catch(e=>{if(void 0===e)throw t();throw e})}})(Io,Ce,Le,()=>new DOMException("","UnknownError"),Qo,$o,Ho,Ko,Et);export{er as a};
