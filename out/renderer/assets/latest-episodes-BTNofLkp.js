import{j as e,r as s}from"./react-BohqOKG4.js";import{b as t,u as i}from"./@tanstack-3eZgfo06.js";import{S as r,H as o}from"./header-title-BpiRIAyn.js";import{aA as a,R as m,B as l,bc as d}from"./index-Dw_5HS3q.js";import{L as n}from"./react-router-dom-DLqO9Z-p.js";import{E as c}from"./empty-wrapper-DCqAaDSN.js";import{u as p}from"./react-i18next-CJXO39OJ.js";import{c as j}from"./clsx-BeLtu-UY.js";import{b as x}from"./react-lazy-load-image-component-DTPOgetJ.js";import{E as u}from"./equalizer-bars-BP_G2EY6.js";import{c as h,a as f,b as g,u as y}from"./use-podcast-playing-DKljUg_d.js";import{p as b}from"./parseTexts-Bb18-_77.js";import{P as N,a as v,E as w}from"./episode-card-B3VqFz9P.js";import{aj as P,m as E,n as k}from"./lucide-react-DrCvGt71.js";import{g as S}from"./scrollPageToTop-WHsCYcia.js";import{p as z}from"./podcasts-CyXJRW_v.js";import{q as T}from"./queryKeys-DxXuT4IC.js";import"./crypto-js-jXt9otfP.js";import"./react-dom-DeCT9Zg9.js";import"./scheduler-CuPG8W_I.js";import"./react-toastify-Dcxz3wpx.js";import"./i18next-CM37CVQ3.js";import"./i18next-browser-languagedetector-F0gxWJsw.js";import"./react-device-detect-CHs-JbVH.js";import"./ua-parser-js-oxSasMdn.js";import"./tailwind-extended-shadows-merge-DdKC4l0c.js";import"./tailwind-merge-5Glu2Zmz.js";import"./@radix-ui-LgTM4vlv.js";import"./aria-hidden-DyxP-6dL.js";import"./react-remove-scroll-yCREhh_0.js";import"./tslib-Bc9CN1Ef.js";import"./react-remove-scroll-bar-BNI7vDx9.js";import"./react-style-singleton-C1oTdtRg.js";import"./get-nonce-BYiZHLe3.js";import"./use-sidecar-DQWw4Coi.js";import"./use-callback-ref-DIudPNPV.js";import"./@floating-ui-VDk0qcgD.js";import"./use-sync-external-store-C4iHanJs.js";import"./class-variance-authority-DO3vQtTq.js";import"./lodash-DSAJ3Ow_.js";import"./zustand-Bqgea8iK.js";import"./immer-Dwi4ZIhD.js";import"./dayjs-BG2b1roC.js";import"./idb-keyval-PpvEIwUC.js";import"./fast-average-color-Dy3p1ZbH.js";import"./@hookform-CXDBdaWi.js";import"./react-hook-form-C23o4OKy.js";import"./use-debounce-CVLZIJWc.js";import"./zod-DxP4i6Pi.js";import"./react-country-flag-DV3c0LTu.js";import"./@remix-run-C5FxfqAA.js";import"./react-router-C-_aAzNf.js";import"./convertSecondsToTime-B1d9sDyx.js";import"./html-to-text-CBZxtrEf.js";import"./@selderee-RfmdOesI.js";import"./selderee-BSueesG9.js";import"./parseley-BjfzG1td.js";import"./leac-BhF3pvOC.js";import"./peberminta-BAyYsZUV.js";import"./domhandler-BfnXUw5w.js";import"./domelementtype-wvvL8fxI.js";import"./htmlparser2-BkjpP7DB.js";import"./entities-C7W22rEe.js";import"./deepmerge-Clcdar8H.js";import"./dom-serializer-BRtYF6lV.js";import"./linkify-it-CKPG3_41.js";import"./uc.micro-CVDs0LYO.js";function q(){const{t:s}=p();return e.jsxs("div",{className:"w-full h-content",children:[e.jsx(r,{children:e.jsx(o,{title:s("podcasts.form.latestEpisodes")})}),e.jsx(a,{className:"pt-[--shadow-header-distance] h-full",children:e.jsx(c,{children:e.jsxs("div",{className:"text-center max-w-[500px]",children:[e.jsx("h3",{className:"text-2xl font-semibold tracking-tight",children:s("podcasts.latestEpisodes.emptyPage.message")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s("podcasts.latestEpisodes.emptyPage.description")}),e.jsx(n,{to:m.LIBRARY.PODCASTS,children:e.jsx(l,{size:"sm",variant:"default",className:"mt-4",children:e.jsx("span",{children:s("podcasts.latestEpisodes.emptyPage.goToPodcasts")})})})]})})})]})}const D=s.memo(x.LazyLoadImage),I=s.memo(N),L=s.memo(v);function R({episode:s}){return e.jsx(n,{to:m.EPISODES.PAGE(s.id),children:e.jsx("div",{className:"w-full bg-skeleton aspect-square rounded-md overflow-hidden shadow-custom-3",children:e.jsx(D,{src:s.image_url,alt:s.title,className:"bg-contain aspect-square",width:"100%",height:"100%"})})})}function A({episode:s}){const{episodeReleaseDate:t}=h(s.published_at),{isPlaying:i,isEpisodePlaying:r}=f({id:s.id});return e.jsxs("div",{className:"flex gap-1 items-center mt-3 max-h-4",children:[r&&i&&e.jsx(u,{size:14,className:"text-muted-foreground mb-1"}),e.jsx("span",{className:"text-xs text-muted-foreground font-medium uppercase w-fit",children:t})]})}function C({episode:s}){const{isEpisodePlaying:t}=f({id:s.id});return e.jsxs("div",{className:"flex flex-col",children:[e.jsx(n,{to:m.EPISODES.PAGE(s.id),children:e.jsx("h3",{className:j("text-sm font-medium truncate mt-1 hover:underline",t&&"text-primary"),children:s.title})}),e.jsx("p",{className:"line-clamp-2 text-muted-foreground text-xs mt-1",children:b(s.description)})]})}function F({children:s,episode:t,...i}){const{isPlaying:r,isEpisodePlaying:o,isNotPlaying:a}=f({id:t.id});return e.jsxs(l,{...i,size:"sm",className:"h-8 px-2",children:[o&&r&&e.jsx(E,{className:"w-3 h-3 mr-2 fill-primary-foreground",strokeWidth:1}),a&&e.jsx(k,{className:"w-3 h-3 mr-2 fill-primary-foreground"}),s]})}function O({episode:s}){const{t:t}=p(),{handlePlayEpisode:i}=g({id:s.id}),{episodeDuration:r,hasPlaybackData:o,isEpisodeCompleted:a,listeningProgressPercentage:m,remainingTimeText:l}=y({duration:s.duration,playback:s.playback});return o?a?e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(P,{className:"w-5 h-5 fill-foreground stroke-background"}),e.jsx("span",{className:"text-xs",children:t("podcasts.list.progress.completed")})]}):e.jsx(F,{onClick:i,episode:s,children:e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("div",{className:"min-w-8 w-full h-1 rounded-full relative bg-background/50 overflow-hidden",children:e.jsx("div",{className:"absolute z-10 bg-primary-foreground h-full",style:{width:`${m}%`}})}),e.jsx("span",{className:"text-xs",children:l})]})}):e.jsx(F,{onClick:i,episode:s,children:e.jsx("span",{className:"text-xs",children:r})})}const G=s.memo(w);function K({episodes:i}){const r=S(),o=s.useRef(r),a=t({count:i.length,getScrollElement:()=>o.current,estimateSize:()=>124,overscan:5}),m=a.getVirtualItems();return e.jsx("div",{style:{height:a.getTotalSize(),position:"relative"},children:m.map(s=>{const t=i[s.index];return e.jsx(G,{episode:t,latest:!0,style:{position:"absolute",top:s.start,width:"100%"}},s.index)})})}const M=s.memo(r),_=s.memo(o),B=s.memo(function({episode:s}){return e.jsxs("div",{className:"flex flex-col p-4 bg-background border rounded-lg relative",children:[e.jsx(R,{episode:s}),e.jsx(A,{episode:s}),e.jsx(C,{episode:s}),e.jsxs("div",{className:"flex justify-between mt-4",children:[e.jsx(O,{episode:s}),e.jsx(I,{featured:!0,children:e.jsx(L,{episode:s,latest:!0})})]})]})});function H(){const{t:t}=p(),{data:r,isFetched:o,isFetching:m,isLoading:l}=i({queryKey:[T.episode.latest],queryFn:z.getLatest}),n=s.useMemo(()=>r?r.slice(5):[],[r]),c=s.useMemo(()=>r?r.slice(0,5):[],[r]);return l?e.jsx(d,{}):m||!o||r&&0!==r.length?e.jsxs("div",{className:"w-full",children:[e.jsx(M,{children:e.jsx(_,{title:t("podcasts.form.latestEpisodes")})}),e.jsxs(a,{className:"px-4 pt-[--shadow-header-distance]",children:[e.jsx("div",{className:"grid grid-cols-5 gap-4 px-4 mb-6",children:c.map(s=>e.jsx(B,{episode:s},s.id))}),e.jsx(K,{episodes:n})]})]}):e.jsx(q,{})}export{H as default};
