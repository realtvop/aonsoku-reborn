import{r as e,j as s}from"./react-BohqOKG4.js";import{L as a}from"./react-router-dom-DLqO9Z-p.js";import{c as t,B as r,l,R as i,k as o,b as n}from"./index-Dw_5HS3q.js";import{P as c}from"./card-_SOi_N1H.js";import{u as d}from"./embla-carousel-react-C1VFpNTw.js";import{B as m,C as u}from"./lucide-react-DrCvGt71.js";import{u as x}from"./react-i18next-CJXO39OJ.js";const f=e.createContext(null);function h(){const s=e.useContext(f);if(!s)throw new Error("useCarousel must be used within a <Carousel />");return s}const p=e.forwardRef(({orientation:a="horizontal",opts:r,setApi:l,plugins:i,className:o,children:n,...c},m)=>{const[u,x]=d({...r,axis:"horizontal"===a?"x":"y"},i),[h,p]=e.useState(!1),[j,v]=e.useState(!1),N=e.useCallback(e=>{e&&(p(e.canScrollPrev()),v(e.canScrollNext()))},[]),w=e.useCallback(()=>{x?.scrollPrev()},[x]),b=e.useCallback(()=>{x?.scrollNext()},[x]),y=e.useCallback(e=>{"ArrowLeft"===e.key?(e.preventDefault(),w()):"ArrowRight"===e.key&&(e.preventDefault(),b())},[w,b]);return e.useEffect(()=>{x&&l&&l(x)},[x,l]),e.useEffect(()=>{if(x)return N(x),x.on("reInit",N),x.on("select",N),()=>{x?.off("select",N)}},[x,N]),s.jsx(f.Provider,{value:{carouselRef:u,api:x,opts:r,orientation:a||("y"===r?.axis?"vertical":"horizontal"),scrollPrev:w,scrollNext:b,canScrollPrev:h,canScrollNext:j},children:s.jsx("div",{ref:m,onKeyDownCapture:y,className:t("relative",o),role:"region","aria-roledescription":"carousel",...c,children:n})})});p.displayName="Carousel";const j=e.forwardRef(({className:e,...a},r)=>{const{carouselRef:l,orientation:i}=h();return s.jsx("div",{ref:l,className:"overflow-hidden",style:a.style,children:s.jsx("div",{ref:r,className:t("flex","horizontal"===i?"-ml-4":"-mt-4 flex-col",e),...a})})});j.displayName="CarouselContent";const v=e.forwardRef(({className:e,...a},r)=>{const{orientation:l}=h();return s.jsx("div",{ref:r,role:"group","aria-roledescription":"slide",className:t("min-w-0 shrink-0 grow-0 basis-full","horizontal"===l?"pl-4":"pt-4",e),...a})});v.displayName="CarouselItem";e.forwardRef(({className:e,variant:a="outline",size:l="icon",...i},o)=>{const{orientation:n,scrollPrev:c,canScrollPrev:d}=h();return s.jsxs(r,{ref:o,variant:a,size:l,className:t("absolute  h-8 w-8 rounded-full","horizontal"===n?"-left-12 top-1/2 -translate-y-1/2":"-top-12 left-1/2 -translate-x-1/2 rotate-90",e),disabled:!d,onClick:c,...i,children:[s.jsx(m,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Previous slide"})]})}).displayName="CarouselPrevious";e.forwardRef(({className:e,variant:a="outline",size:l="icon",...i},o)=>{const{orientation:n,scrollNext:c,canScrollNext:d}=h();return s.jsxs(r,{ref:o,variant:a,size:l,className:t("absolute h-8 w-8 rounded-full","horizontal"===n?"-right-12 top-1/2 -translate-y-1/2":"-bottom-12 left-1/2 -translate-x-1/2 rotate-90",e),disabled:!d,onClick:c,...i,children:[s.jsx(u,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Next slide"})]})}).displayName="CarouselNext";const N=e.forwardRef(({className:e,variant:a="outline",size:l="icon",direction:i,...o},n)=>s.jsx(r,{ref:n,variant:a,size:l,className:t("h-8 w-8 rounded-full shadow-sm",e),...o,children:"prev"===i?s.jsxs(s.Fragment,{children:[s.jsx(m,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Previous slide"})]}):s.jsxs(s.Fragment,{children:[s.jsx(u,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Next slide"})]})}));function w({list:t,title:r,showMore:d=!0,moreTitle:m,moreRoute:u}){const[f,h]=e.useState(),[w,b]=e.useState(),[y,g]=e.useState(),{setSongList:C}=l(),{t:P}=x();return m=m||P("generic.seeMore"),t.length>16&&(t=t.slice(0,16)),e.useEffect(()=>{f&&(b(f.canScrollPrev()),g(f.canScrollNext()),f.on("select",()=>{b(f.canScrollPrev()),g(f.canScrollNext())}))},[f]),s.jsxs("div",{className:"w-full flex flex-col mt-4",children:[s.jsxs("div",{className:"my-4 flex justify-between items-center",children:[s.jsx("h3",{className:"scroll-m-20 text-2xl font-semibold tracking-tight","data-testid":"preview-list-title",children:r}),s.jsxs("div",{className:"flex items-center gap-4",children:[d&&u&&s.jsx(a,{to:u,"data-testid":"preview-list-show-more",children:s.jsx("p",{className:"leading-7 text-sm truncate hover:underline text-muted-foreground hover:text-primary",children:m})}),s.jsxs("div",{className:"flex gap-2 hidden sm:flex",children:[s.jsx(N,{direction:"prev",disabled:!w,onClick:()=>f?.scrollPrev(),"data-testid":"preview-list-prev-button"}),s.jsx(N,{direction:"next",disabled:!y,onClick:()=>f?.scrollNext(),"data-testid":"preview-list-next-button"})]})]})]}),s.jsx("div",{className:"transform-gpu",children:s.jsx(p,{opts:{align:"start",slidesToScroll:"auto"},setApi:h,"data-testid":"preview-list-carousel",children:s.jsx(j,{children:t.map((e,a)=>s.jsx(v,{className:"basis-1/4 sm:basis-1/6 2xl:basis-1/8","data-testid":`preview-list-carousel-item-${a}`,children:s.jsxs(c.Root,{children:[s.jsxs(c.ImageWrapper,{link:i.ALBUM.PAGE(e.id),children:[s.jsx(c.Image,{src:o(e.coverArt,"album"),alt:e.name}),window.innerWidth>640&&s.jsx(c.PlayButton,{onClick:()=>async function(e){const s=await n.albums.getOne(e.id);s&&C(s.song,0)}(e)})]}),s.jsxs(c.InfoWrapper,{children:[s.jsx(c.Title,{link:i.ALBUM.PAGE(e.id),children:e.name}),s.jsx(c.Subtitle,{enableLink:void 0!==e.artistId,link:i.ARTIST.PAGE(e.artistId??""),children:e.artist})]})]})},e.id))})})})]})}N.displayName="CarouselButton";export{N as C,w as P,p as a,j as b,v as c};
