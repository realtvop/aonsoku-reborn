import{j as t,r as s}from"./react-BohqOKG4.js";import{D as e,I as i}from"./data-table-C37ukUF7.js";import{L as r}from"./react-router-dom-DLqO9Z-p.js";import{s as o}from"./songs-columns-DLWRqf9R.js";import{l as a,R as n,b as l,ay as m,a5 as c,aw as u,k as p,az as d,aA as j,aJ as x,aB as f}from"./index-Dw_5HS3q.js";import{u as h}from"./react-i18next-CJXO39OJ.js";import{C as g,s as y}from"./album-QeQcH2md.js";import{u as b,c as S,d as v}from"./@tanstack-3eZgfo06.js";import{q as A}from"./queryKeys-DxXuT4IC.js";import{A as k}from"./actions-CD5wk-PF.js";import{u as w}from"./use-song-list-BzlADPub.js";import{O as C}from"./equalizer-bars-BP_G2EY6.js";import{c as I}from"./play-button-BMYlYUiF.js";import{P as T}from"./card-_SOi_N1H.js";import{C as N,a as P,b as B,c as F,P as L}from"./preview-list-BZKLP10E.js";import R from"./error-page-BuqrGUN1.js";import{h as q}from"./react-router-C-_aAzNf.js";import"./crypto-js-jXt9otfP.js";import"./@chriscodesthings-bGFwLvh6.js";import"./clsx-BeLtu-UY.js";import"./react-lazy-load-image-component-DTPOgetJ.js";import"./dot-Ccno5lbS.js";import"./lightbox-B7s_JddE.js";import"./yet-another-react-lightbox-DMOFwxG4.js";import"./react-dom-DeCT9Zg9.js";import"./scheduler-CuPG8W_I.js";import"./song-title-ClQcdcyq.js";import"./cover-image-zpWg5P0A.js";import"./react-device-detect-CHs-JbVH.js";import"./ua-parser-js-oxSasMdn.js";import"./react-hotkeys-hook-qKPfarcW.js";import"./options-hS6iO596.js";import"./lucide-react-DrCvGt71.js";import"./@remix-run-C5FxfqAA.js";import"./action-button-BoxuniMX.js";import"./like-button-BExMQkwT.js";import"./data-table-column-header-Bz-4KByJ.js";import"./convertSecondsToTime-B1d9sDyx.js";import"./i18next-CM37CVQ3.js";import"./react-toastify-Dcxz3wpx.js";import"./i18next-browser-languagedetector-F0gxWJsw.js";import"./tailwind-extended-shadows-merge-DdKC4l0c.js";import"./tailwind-merge-5Glu2Zmz.js";import"./@radix-ui-LgTM4vlv.js";import"./aria-hidden-DyxP-6dL.js";import"./react-remove-scroll-yCREhh_0.js";import"./tslib-Bc9CN1Ef.js";import"./react-remove-scroll-bar-BNI7vDx9.js";import"./react-style-singleton-C1oTdtRg.js";import"./get-nonce-BYiZHLe3.js";import"./use-sidecar-DQWw4Coi.js";import"./use-callback-ref-DIudPNPV.js";import"./@floating-ui-VDk0qcgD.js";import"./use-sync-external-store-C4iHanJs.js";import"./class-variance-authority-DO3vQtTq.js";import"./lodash-DSAJ3Ow_.js";import"./zustand-Bqgea8iK.js";import"./immer-Dwi4ZIhD.js";import"./dayjs-BG2b1roC.js";import"./idb-keyval-PpvEIwUC.js";import"./fast-average-color-Dy3p1ZbH.js";import"./@hookform-CXDBdaWi.js";import"./react-hook-form-C23o4OKy.js";import"./use-debounce-CVLZIJWc.js";import"./zod-DxP4i6Pi.js";import"./react-country-flag-DV3c0LTu.js";import"./parseTexts-Bb18-_77.js";import"./html-to-text-CBZxtrEf.js";import"./@selderee-RfmdOesI.js";import"./selderee-BSueesG9.js";import"./parseley-BjfzG1td.js";import"./leac-BhF3pvOC.js";import"./peberminta-BAyYsZUV.js";import"./domhandler-BfnXUw5w.js";import"./domelementtype-wvvL8fxI.js";import"./htmlparser2-BkjpP7DB.js";import"./entities-C7W22rEe.js";import"./deepmerge-Clcdar8H.js";import"./dom-serializer-BRtYF6lV.js";import"./linkify-it-CKPG3_41.js";import"./uc.micro-CVDs0LYO.js";import"./cmdk-DpOb1GNg.js";import"./command-9rYDq5Wc.js";import"./embla-carousel-react-C1VFpNTw.js";import"./embla-carousel-reactive-utils-P2_yCQ-B.js";import"./embla-carousel-B8ffWQHD.js";function z({topSongs:s,artist:i}){const{t:l}=h(),{setSongList:m}=a(),c=o(),u=s.length>10?s.slice(0,10):s,{id:p,name:d}=i;return t.jsxs("div",{className:"w-full mb-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"scroll-m-20 text-2xl font-semibold tracking-tight",children:l("artist.topSongs")}),t.jsx(r,{to:n.SONGS.ARTIST_TRACKS(p,d),className:"h-full","data-testid":"view-all-tracks-link",children:t.jsx("p",{className:"leading-7 text-sm truncate hover:underline text-muted-foreground hover:text-primary",children:l("generic.viewAll")})})]}),t.jsx(e,{columns:c,data:u,handlePlaySong:t=>m(u,t.index),columnFilter:["index","title","album","year","duration","playCount","played","contentType","select"],variant:"modern"})]})}const K=t=>b({queryKey:[A.artist.info,t],queryFn:()=>l.artists.getInfo(t),enabled:!!t});function D({artist:s}){const{getArtistAllSongs:e}=w(),{playLast:i,playNext:r,startDownload:o}=I();async function a(t){const i=await e(s.name);i&&t(i)}return t.jsx(t.Fragment,{children:t.jsxs(m,{children:[t.jsx(C.PlayNext,{onClick:async function(){await a(r)}}),t.jsx(C.PlayLast,{onClick:async function(){await a(i)}}),t.jsx(c,{}),t.jsx(C.Download,{onClick:function(){o(s.id)}})]})})}function E({artist:s,showInfoButton:e,isArtistEmpty:i}){const{t:r}=h(),{setSongList:o}=a(),{showInfoPanel:n,toggleShowInfoPanel:m}=u(),{getArtistAllSongs:c}=w(),p=void 0!==s.starred,d=S(),j=v({mutationFn:l.star.handleStarItem,onSuccess:()=>{d.invalidateQueries({queryKey:[A.artist.single,s.id]})}});async function x(t=!1){const e=await c(s?.name||"");e&&o(e,0,t)}const f={play:r("playlist.buttons.play",{name:s.name}),shuffle:r("playlist.buttons.shuffle",{name:s.name}),options:r("playlist.buttons.options",{name:s.name}),like:()=>r(p?"album.buttons.dislike":"album.buttons.like",{name:s.name}),info:()=>r(n?"generic.hideDetails":"generic.showDetails")};return i?t.jsx("div",{className:"h-8 w-full"}):t.jsxs(k.Container,{children:[t.jsx(k.Button,{tooltip:f.play,buttonStyle:"primary",onClick:()=>x(),children:t.jsx(k.PlayIcon,{})}),t.jsx(k.Button,{tooltip:f.shuffle,onClick:()=>x(!0),children:t.jsx(k.ShuffleIcon,{})}),t.jsx(k.Button,{tooltip:f.like(),onClick:function(){s&&j.mutate({id:s.id,starred:p})},children:t.jsx(k.LikeIcon,{isStarred:p})}),e&&t.jsx(k.Button,{tooltip:f.info(),onClick:m,children:t.jsx(k.InfoIcon,{})}),t.jsx(k.Dropdown,{tooltip:f.options,options:t.jsx(D,{artist:s})})]})}function G({artist:s}){const{data:e}=K(s.id),i=void 0!==e&&void 0!==e.biography,r=void 0===s.albumCount||0===s.albumCount;return t.jsxs(t.Fragment,{children:[t.jsx(E,{artist:s,showInfoButton:i,isArtistEmpty:r}),i&&t.jsx(g,{title:s.name,bio:e.biography,lastFmUrl:e.lastFmUrl,musicBrainzId:e.musicBrainzId,useStateInfo:!r})]})}function O({title:e,similarArtists:i}){const{getArtistAllSongs:r}=w(),[o,l]=s.useState(),[m,c]=s.useState(),[u,d]=s.useState(),{setSongList:j}=a();return i.length>16&&(i=i.slice(0,16)),s.useEffect(()=>{o&&(c(o.canScrollPrev()),d(o.canScrollNext()),o.on("select",()=>{c(o.canScrollPrev()),d(o.canScrollNext())}))},[o]),t.jsxs("div",{className:"w-full flex flex-col mb-4",children:[t.jsxs("div",{className:"my-4 flex justify-between items-center",children:[t.jsx("h3",{className:"scroll-m-20 text-2xl font-semibold tracking-tight",children:e}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(N,{direction:"prev",disabled:!m,onClick:()=>o?.scrollPrev()}),t.jsx(N,{direction:"next",disabled:!u,onClick:()=>o?.scrollNext()})]})]}),t.jsx("div",{className:"transform-gpu",children:t.jsx(P,{opts:{align:"start",slidesToScroll:"auto"},setApi:l,children:t.jsx(B,{children:i.map(s=>t.jsx(F,{className:"basis-1/6 2xl:basis-1/8",children:t.jsxs(T.Root,{children:[t.jsxs(T.ImageWrapper,{link:n.ARTIST.PAGE(s.id),children:[t.jsx(T.Image,{src:p(s.coverArt,"artist"),alt:s.name}),t.jsx(T.PlayButton,{onClick:()=>async function(t){const s=await r(t.name);s&&j(s,0)}(s)})]}),t.jsx(T.InfoWrapper,{children:t.jsx(T.Subtitle,{link:n.ARTIST.PAGE(s.id),className:"mt-2",children:s.name})})]})},s.id))})})})]})}function U(){const{t:s}=h(),{artistId:e}=q(),{data:r,isLoading:o,isFetched:a}=(t=>b({queryKey:[A.artist.single,t],queryFn:()=>l.artists.getOne(t),enabled:!!t}))(e),{data:m,isLoading:c}=K(e),{data:u,isLoading:p}=(g=r?.name,b({queryKey:[A.artist.topSongs,g],queryFn:()=>l.songs.getTopSongs(g??""),enabled:!!g}));var g;if(o)return t.jsx(d,{});if(a&&!r)return t.jsx(R,{status:404,statusText:"Not Found"});if(!r)return t.jsx(d,{});const S=r?void 0===r.albumCount||0===r.albumCount?null:s("artist.info.albumsCount",{count:r.albumCount}):null,v=function(){if(!r)return null;if(void 0===r.albumCount)return null;if(0===r.albumCount)return null;if(!r.album)return null;let t=0;return r.album.forEach(s=>{t+=s.songCount}),s("playlist.songCount",{count:t})}(),k=[{content:S,type:"link",link:n.ALBUMS.ARTIST(r.id,r.name)},{content:v,type:"link",link:n.SONGS.ARTIST_TRACKS(r.id,r.name)}],w=r.album?y(r.album):[];return t.jsxs("div",{className:"w-full",children:[t.jsx(i,{type:s("artist.headline"),title:r.name,coverArtId:r.coverArt,coverArtType:"artist",coverArtSize:"700",coverArtAlt:r.name,badges:k}),t.jsxs(j,{children:[t.jsx(G,{artist:r}),p&&t.jsx(x,{}),u&&!p&&t.jsx(z,{topSongs:u,artist:r}),w.length>0&&t.jsx(L,{title:s("artist.recentAlbums"),list:w,moreTitle:s("album.more.discography"),moreRoute:n.ALBUMS.ARTIST(r.id,r.name)}),c&&t.jsx(f,{}),m?.similarArtist&&!c&&t.jsx(O,{title:s("artist.relatedArtists"),similarArtists:m.similarArtist})]})]})}export{U as default};
