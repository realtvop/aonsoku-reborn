import{u as e,P as t,c as r,R as n,a as l,O as a,C as u}from"./@radix-ui-LgTM4vlv.js";import{r as i}from"./react-BohqOKG4.js";var o=.999,c=/[\\\/_+.#"@\[\(\{&]/,d=/[\\\/_+.#"@\[\(\{&]/g,s=/[\s-]/,f=/[\s-]/g;function v(e,t,r,n,l,a,u){if(a===t.length)return l===e.length?1:.99;var i=`${l},${a}`;if(void 0!==u[i])return u[i];for(var m,p,h,g,b=n.charAt(a),E=r.indexOf(b,l),w=0;E>=0;)(m=v(e,t,r,n,E+1,a+1,u))>w&&(E===l?m*=1:c.test(e.charAt(E-1))?(m*=.8,(h=e.slice(l,E-1).match(d))&&l>0&&(m*=Math.pow(o,h.length))):s.test(e.charAt(E-1))?(m*=.9,(g=e.slice(l,E-1).match(f))&&l>0&&(m*=Math.pow(o,g.length))):(m*=.17,l>0&&(m*=Math.pow(o,E-l))),e.charAt(E)!==t.charAt(a)&&(m*=.9999)),(m<.1&&r.charAt(E-1)===n.charAt(a+1)||n.charAt(a+1)===n.charAt(a)&&r.charAt(E-1)!==n.charAt(a))&&(.1*(p=v(e,t,r,n,E+1,a+2,u))>m&&(m=.1*p)),m>w&&(w=m),E=r.indexOf(b,E+1);return u[i]=w,w}function m(e){return e.toLowerCase().replace(f," ")}function p(e,t,r){return v(e=r&&r.length>0?""+(e+" "+r.join(" ")):e,t,m(e),m(t),0,0,{})}var h='[cmdk-group=""]',g='[cmdk-group-items=""]',b='[cmdk-item=""]',E=`${b}:not([aria-disabled="true"])`,w="cmdk-item-select",k="data-value",y=(e,t,r)=>p(e,t,r),S=i.createContext(void 0),C=()=>i.useContext(S),I=i.createContext(void 0),x=()=>i.useContext(I),A=i.createContext(void 0),R=i.forwardRef((r,n)=>{let l=B(()=>{var e,t;return{search:"",value:null!=(t=null!=(e=r.value)?e:r.defaultValue)?t:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),a=B(()=>new Set),u=B(()=>new Map),o=B(()=>new Map),c=B(()=>new Set),d=N(r),{label:s,children:f,value:v,onValueChange:m,filter:p,shouldFilter:C,loop:x,disablePointerSelection:A=!1,vimBindings:R=!0,...M}=r,D=e(),P=e(),$=e(),F=i.useRef(null),K=U();z(()=>{if(void 0!==v){let e=v.trim();l.current.value=e,O.emit()}},[v]),z(()=>{K(6,Q)},[]);let O=i.useMemo(()=>({subscribe:e=>(c.current.add(e),()=>c.current.delete(e)),snapshot:()=>l.current,setState:(e,t,r)=>{var n,a,u,i;if(!Object.is(l.current[e],t)){if(l.current[e]=t,"search"===e)J(),_(),K(1,H);else if("value"===e){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let e=document.getElementById($);e?e.focus():null==(n=document.getElementById(D))||n.focus()}if(K(7,()=>{var e;l.current.selectedItemId=null==(e=T())?void 0:e.id,O.emit()}),r||K(5,Q),void 0!==(null==(a=d.current)?void 0:a.value)){let e=null!=t?t:"";return void(null==(i=(u=d.current).onValueChange)||i.call(u,e))}}O.emit()}},emit:()=>{c.current.forEach(e=>e())}}),[]),j=i.useMemo(()=>({value:(e,t,r)=>{var n;t!==(null==(n=o.current.get(e))?void 0:n.value)&&(o.current.set(e,{value:t,keywords:r}),l.current.filtered.items.set(e,L(t,r)),K(2,()=>{_(),O.emit()}))},item:(e,t)=>(a.current.add(e),t&&(u.current.has(t)?u.current.get(t).add(e):u.current.set(t,new Set([e]))),K(3,()=>{J(),_(),l.current.value||H(),O.emit()}),()=>{o.current.delete(e),a.current.delete(e),l.current.filtered.items.delete(e);let t=T();K(4,()=>{J(),(null==t?void 0:t.getAttribute("id"))===e&&H(),O.emit()})}),group:e=>(u.current.has(e)||u.current.set(e,new Set),()=>{o.current.delete(e),u.current.delete(e)}),filter:()=>d.current.shouldFilter,label:s||r["aria-label"],getDisablePointerSelection:()=>d.current.disablePointerSelection,listId:D,inputId:$,labelId:P,listInnerRef:F}),[]);function L(e,t){var r,n;let a=null!=(n=null==(r=d.current)?void 0:r.filter)?n:y;return e?a(e,l.current.search,t):0}function _(){if(!l.current.search||!1===d.current.shouldFilter)return;let e=l.current.filtered.items,t=[];l.current.filtered.groups.forEach(r=>{let n=u.current.get(r),l=0;n.forEach(t=>{let r=e.get(t);l=Math.max(r,l)}),t.push([r,l])});let r=F.current;X().sort((t,r)=>{var n,l;let a=t.getAttribute("id"),u=r.getAttribute("id");return(null!=(n=e.get(u))?n:0)-(null!=(l=e.get(a))?l:0)}).forEach(e=>{let t=e.closest(g);t?t.appendChild(e.parentElement===t?e:e.closest(`${g} > *`)):r.appendChild(e.parentElement===r?e:e.closest(`${g} > *`))}),t.sort((e,t)=>t[1]-e[1]).forEach(e=>{var t;let r=null==(t=F.current)?void 0:t.querySelector(`${h}[${k}="${encodeURIComponent(e[0])}"]`);null==r||r.parentElement.appendChild(r)})}function H(){let e=X().find(e=>"true"!==e.getAttribute("aria-disabled")),t=null==e?void 0:e.getAttribute(k);O.setState("value",t||void 0)}function J(){var e,t,r,n;if(!l.current.search||!1===d.current.shouldFilter)return void(l.current.filtered.count=a.current.size);l.current.filtered.groups=new Set;let i=0;for(let u of a.current){let a=L(null!=(t=null==(e=o.current.get(u))?void 0:e.value)?t:"",null!=(n=null==(r=o.current.get(u))?void 0:r.keywords)?n:[]);l.current.filtered.items.set(u,a),a>0&&i++}for(let[a,o]of u.current)for(let e of o)if(l.current.filtered.items.get(e)>0){l.current.filtered.groups.add(a);break}l.current.filtered.count=i}function Q(){var e,t,r;let n=T();n&&((null==(e=n.parentElement)?void 0:e.firstChild)===n&&(null==(r=null==(t=n.closest(h))?void 0:t.querySelector('[cmdk-group-heading=""]'))||r.scrollIntoView({block:"nearest"})),n.scrollIntoView({block:"nearest"}))}function T(){var e;return null==(e=F.current)?void 0:e.querySelector(`${b}[aria-selected="true"]`)}function X(){var e;return Array.from((null==(e=F.current)?void 0:e.querySelectorAll(E))||[])}function Y(e){let t=X()[e];t&&O.setState("value",t.getAttribute(k))}function Z(e){var t;let r=T(),n=X(),l=n.findIndex(e=>e===r),a=n[l+e];null!=(t=d.current)&&t.loop&&(a=l+e<0?n[n.length-1]:l+e===n.length?n[0]:n[l+e]),a&&O.setState("value",a.getAttribute(k))}function ee(e){let t,r=T(),n=null==r?void 0:r.closest(h);for(;n&&!t;)n=e>0?V(n,h):q(n,h),t=null==n?void 0:n.querySelector(E);t?O.setState("value",t.getAttribute(k)):Z(e)}let te=()=>Y(X().length-1),re=e=>{e.preventDefault(),e.metaKey?te():e.altKey?ee(1):Z(1)},ne=e=>{e.preventDefault(),e.metaKey?Y(0):e.altKey?ee(-1):Z(-1)};return i.createElement(t.div,{ref:n,tabIndex:-1,...M,"cmdk-root":"",onKeyDown:e=>{var t;null==(t=M.onKeyDown)||t.call(M,e);let r=e.nativeEvent.isComposing||229===e.keyCode;if(!e.defaultPrevented&&!r)switch(e.key){case"n":case"j":R&&e.ctrlKey&&re(e);break;case"ArrowDown":re(e);break;case"p":case"k":R&&e.ctrlKey&&ne(e);break;case"ArrowUp":ne(e);break;case"Home":e.preventDefault(),Y(0);break;case"End":e.preventDefault(),te();break;case"Enter":{e.preventDefault();let t=T();if(t){let e=new Event(w);t.dispatchEvent(e)}}}}},i.createElement("label",{"cmdk-label":"",htmlFor:j.inputId,id:j.labelId,style:W},s),G(r,e=>i.createElement(I.Provider,{value:O},i.createElement(S.Provider,{value:j},e))))}),M=i.forwardRef((n,l)=>{var a,u;let o=e(),c=i.useRef(null),d=i.useContext(A),s=C(),f=N(n),v=null!=(u=null==(a=f.current)?void 0:a.forceMount)?u:null==d?void 0:d.forceMount;z(()=>{if(!v)return s.item(o,null==d?void 0:d.id)},[v]);let m=H(o,c,[n.value,n.children,c],n.keywords),p=x(),h=_(e=>e.value&&e.value===m.current),g=_(e=>!(!v&&!1!==s.filter())||(!e.search||e.filtered.items.get(o)>0));function b(){var e,t;E(),null==(t=(e=f.current).onSelect)||t.call(e,m.current)}function E(){p.setState("value",m.current,!0)}if(i.useEffect(()=>{let e=c.current;if(e&&!n.disabled)return e.addEventListener(w,b),()=>e.removeEventListener(w,b)},[g,n.onSelect,n.disabled]),!g)return null;let{disabled:k,value:y,onSelect:S,forceMount:I,keywords:R,...M}=n;return i.createElement(t.div,{ref:r(c,l),...M,id:o,"cmdk-item":"",role:"option","aria-disabled":!!k,"aria-selected":!!h,"data-disabled":!!k,"data-selected":!!h,onPointerMove:k||s.getDisablePointerSelection()?void 0:E,onClick:k?void 0:b},n.children)}),D=i.forwardRef((n,l)=>{let{heading:a,children:u,forceMount:o,...c}=n,d=e(),s=i.useRef(null),f=i.useRef(null),v=e(),m=C(),p=_(e=>!(!o&&!1!==m.filter())||(!e.search||e.filtered.groups.has(d)));z(()=>m.group(d),[]),H(d,s,[n.value,n.heading,f]);let h=i.useMemo(()=>({id:d,forceMount:o}),[o]);return i.createElement(t.div,{ref:r(s,l),...c,"cmdk-group":"",role:"presentation",hidden:!p||void 0},a&&i.createElement("div",{ref:f,"cmdk-group-heading":"","aria-hidden":!0,id:v},a),G(n,e=>i.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":a?v:void 0},i.createElement(A.Provider,{value:h},e))))}),P=i.forwardRef((e,n)=>{let{alwaysRender:l,...a}=e,u=i.useRef(null),o=_(e=>!e.search);return l||o?i.createElement(t.div,{ref:r(u,n),...a,"cmdk-separator":"",role:"separator"}):null}),$=i.forwardRef((e,r)=>{let{onValueChange:n,...l}=e,a=null!=e.value,u=x(),o=_(e=>e.search),c=_(e=>e.selectedItemId),d=C();return i.useEffect(()=>{null!=e.value&&u.setState("search",e.value)},[e.value]),i.createElement(t.input,{ref:r,...l,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":d.listId,"aria-labelledby":d.labelId,"aria-activedescendant":c,id:d.inputId,type:"text",value:a?e.value:o,onChange:e=>{a||u.setState("search",e.target.value),null==n||n(e.target.value)}})}),F=i.forwardRef((e,n)=>{let{children:l,label:a="Suggestions",...u}=e,o=i.useRef(null),c=i.useRef(null),d=_(e=>e.selectedItemId),s=C();return i.useEffect(()=>{if(c.current&&o.current){let e,t=c.current,r=o.current,n=new ResizeObserver(()=>{e=requestAnimationFrame(()=>{let e=t.offsetHeight;r.style.setProperty("--cmdk-list-height",e.toFixed(1)+"px")})});return n.observe(t),()=>{cancelAnimationFrame(e),n.unobserve(t)}}},[]),i.createElement(t.div,{ref:r(o,n),...u,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":d,"aria-label":a,id:s.listId},G(e,e=>i.createElement("div",{ref:r(c,s.listInnerRef),"cmdk-list-sizer":""},e)))}),K=i.forwardRef((e,t)=>{let{open:r,onOpenChange:o,overlayClassName:c,contentClassName:d,container:s,...f}=e;return i.createElement(n,{open:r,onOpenChange:o},i.createElement(l,{container:s},i.createElement(a,{"cmdk-overlay":"",className:c}),i.createElement(u,{"aria-label":e.label,"cmdk-dialog":"",className:d},i.createElement(R,{ref:t,...f}))))}),O=i.forwardRef((e,r)=>_(e=>0===e.filtered.count)?i.createElement(t.div,{ref:r,...e,"cmdk-empty":"",role:"presentation"}):null),j=i.forwardRef((e,r)=>{let{progress:n,children:l,label:a="Loading...",...u}=e;return i.createElement(t.div,{ref:r,...u,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":a},G(e,e=>i.createElement("div",{"aria-hidden":!0},e)))}),L=Object.assign(R,{List:F,Item:M,Input:$,Group:D,Separator:P,Dialog:K,Empty:O,Loading:j});function V(e,t){let r=e.nextElementSibling;for(;r;){if(r.matches(t))return r;r=r.nextElementSibling}}function q(e,t){let r=e.previousElementSibling;for(;r;){if(r.matches(t))return r;r=r.previousElementSibling}}function N(e){let t=i.useRef(e);return z(()=>{t.current=e}),t}var z="undefined"==typeof window?i.useEffect:i.useLayoutEffect;function B(e){let t=i.useRef();return void 0===t.current&&(t.current=e()),t}function _(e){let t=x(),r=()=>e(t.snapshot());return i.useSyncExternalStore(t.subscribe,r,r)}function H(e,t,r,n=[]){let l=i.useRef(),a=C();return z(()=>{var u;let i=(()=>{var e;for(let t of r){if("string"==typeof t)return t.trim();if("object"==typeof t&&"current"in t)return t.current?null==(e=t.current.textContent)?void 0:e.trim():l.current}})(),o=n.map(e=>e.trim());a.value(e,i,o),null==(u=t.current)||u.setAttribute(k,i),l.current=i}),l}var U=()=>{let[e,t]=i.useState(),r=B(()=>new Map);return z(()=>{r.current.forEach(e=>e()),r.current=new Map},[e]),(e,n)=>{r.current.set(e,n),t({})}};function G({asChild:e,children:t},r){return e&&i.isValidElement(t)?i.cloneElement(function(e){let t=e.type;return"function"==typeof t?t(e.props):"render"in t?t.render(e.props):e}(t),{ref:t.ref},r(t.props.children)):r(t)}var W={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};export{L as _,M as h};
