import{j as t}from"./react-BohqOKG4.js";import{u as e,e as r}from"./@tanstack-3eZgfo06.js";import{u as s}from"./react-router-dom-DLqO9Z-p.js";import{S as o,H as a}from"./header-title-BpiRIAyn.js";import{ah as i,b as m,l as n,aC as c,aD as l,aN as p}from"./index-Dw_5HS3q.js";import{D as j}from"./data-table-list-CEoMo1BX.js";import{b as u}from"./convertSecondsToTime-B1d9sDyx.js";import{q as d}from"./queryKeys-DxXuT4IC.js";import{s as f}from"./songs-columns-DLWRqf9R.js";import{g}from"./songs-B6goz9CI.js";import{u as y}from"./react-i18next-CJXO39OJ.js";import"./crypto-js-jXt9otfP.js";import"./react-dom-DeCT9Zg9.js";import"./scheduler-CuPG8W_I.js";import"./react-router-C-_aAzNf.js";import"./@remix-run-C5FxfqAA.js";import"./lucide-react-DrCvGt71.js";import"./react-lazy-load-image-component-DTPOgetJ.js";import"./react-toastify-Dcxz3wpx.js";import"./clsx-BeLtu-UY.js";import"./i18next-CM37CVQ3.js";import"./i18next-browser-languagedetector-F0gxWJsw.js";import"./react-device-detect-CHs-JbVH.js";import"./ua-parser-js-oxSasMdn.js";import"./tailwind-extended-shadows-merge-DdKC4l0c.js";import"./tailwind-merge-5Glu2Zmz.js";import"./@radix-ui-LgTM4vlv.js";import"./aria-hidden-DyxP-6dL.js";import"./react-remove-scroll-yCREhh_0.js";import"./tslib-Bc9CN1Ef.js";import"./react-remove-scroll-bar-BNI7vDx9.js";import"./react-style-singleton-C1oTdtRg.js";import"./get-nonce-BYiZHLe3.js";import"./use-sidecar-DQWw4Coi.js";import"./use-callback-ref-DIudPNPV.js";import"./@floating-ui-VDk0qcgD.js";import"./use-sync-external-store-C4iHanJs.js";import"./class-variance-authority-DO3vQtTq.js";import"./lodash-DSAJ3Ow_.js";import"./zustand-Bqgea8iK.js";import"./immer-Dwi4ZIhD.js";import"./dayjs-BG2b1roC.js";import"./idb-keyval-PpvEIwUC.js";import"./fast-average-color-Dy3p1ZbH.js";import"./@hookform-CXDBdaWi.js";import"./react-hook-form-C23o4OKy.js";import"./use-debounce-CVLZIJWc.js";import"./zod-DxP4i6Pi.js";import"./react-country-flag-DV3c0LTu.js";import"./react-hotkeys-hook-qKPfarcW.js";import"./play-button-BMYlYUiF.js";import"./equalizer-bars-BP_G2EY6.js";import"./cmdk-DpOb1GNg.js";import"./command-9rYDq5Wc.js";import"./song-title-ClQcdcyq.js";import"./dot-Ccno5lbS.js";import"./cover-image-zpWg5P0A.js";import"./action-button-BoxuniMX.js";import"./like-button-BExMQkwT.js";import"./data-table-column-header-Bz-4KByJ.js";async function h(){const t=i.getState().data.favoriteCount;if(t&&t>0)return t;return(await async function(){const t=await m.songs.getFavoriteSongs();return t?.song??[]}()).length}function x(){const{t:i}=y(),{setSongList:m}=n(),[x]=s(),{getSearchParam:b}=new c(x),v=f(),w=b(l.MainFilter,""),P=b(l.Query,""),N=b(l.ArtistId,"");const{data:k,isLoading:q,isFetchingNextPage:S,fetchNextPage:F,hasNextPage:T}=r({queryKey:[d.song.all,w,P,N],initialPageParam:0,queryFn:async function(){return g()},getNextPageParam:t=>t.nextOffset}),{data:C,isLoading:K}=e({queryKey:[d.favorites.count],queryFn:h,staleTime:u(5),gcTime:u(5)});if(q&&!S)return t.jsx(p,{});if(!k)return null;const z=k.pages.flatMap(t=>t.songs)??[],D=C??0;const I=i("sidebar.favorites");return t.jsxs("div",{className:"w-full h-content",children:[t.jsx(o,{showGlassEffect:!1,fixed:!1,className:"relative w-full justify-between items-center",children:t.jsx(a,{title:I,count:D,loading:K})}),t.jsx("div",{className:"w-full h-[calc(100%-80px)] overflow-auto",children:t.jsx(j,{columns:v,data:z,handlePlaySong:t=>{return e=t.index,void(z&&m(z,e));var e},columnFilter:["index","title","album","duration","playCount","played","contentType","select"],fetchNextPage:F,hasNextPage:T})})]})}export{x as default};
