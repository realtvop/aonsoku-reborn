import{r as e,j as a}from"./react-BohqOKG4.js";import{c as r}from"./clsx-BeLtu-UY.js";import{u as t}from"./react-router-dom-DLqO9Z-p.js";import{aC as s,aD as n,aF as o,al as i}from"./index-Dw_5HS3q.js";import{a0 as l,X as c}from"./lucide-react-DrCvGt71.js";function u({...u}){const[d,f]=t(),{getSearchParam:m}=new s(d),h=m(n.MainFilter,""),b=m(n.Query,""),[p,v]=e.useState(!1),[g,x]=e.useState(""),w=e.useRef(null),j=e.useRef(null),S=e.useCallback(e=>{const a=new URLSearchParams;e?(a.append(n.MainFilter,o.Search),a.append(n.Query,e),f(a)):j.current?.blur()},[f]),k=e.useCallback(()=>{v(!1),x(""),""===h&&""===b||f(new URLSearchParams),j.current&&(j.current.blur(),j.current.value="")},[h,b,f]),C=e.useCallback(()=>{p?k():v(!0)},[k,p]),y=e.useCallback(e=>{e.preventDefault(),S(g)},[g,S]);return e.useEffect(()=>{v(h===o.Search)},[h]),e.useEffect(()=>{x(b)},[b]),e.useEffect(()=>{j.current&&(h===o.Search&&""!==b&&j.current.focus(),j.current.value=b)},[h,b]),a.jsx("form",{onSubmit:y,children:a.jsxs("div",{ref:w,className:"relative inline-block w-fit min-w-9 h-9 align-bottom rounded-md overflow-hidden",children:[a.jsx(i,{id:"search",ref:j,onChange:e=>x(e.target.value),className:r("bg-background h-full z-10 left-auto duration-300","focus-visible:ring-transparent ring-offset-background","focus-visible:ring-offset-0 focus-visible:ring-0",p?"w-[260px] pr-9 text-foreground placeholder:opacity-100":"w-9 text-transparent placeholder:opacity-0"),...u}),a.jsxs("label",{htmlFor:"search",className:r("absolute w-9 h-9 m-0 right-0 top-0","inline-flex items-center justify-center","leading-10 cursor-pointer text-center z-30","hover:bg-accent rounded-md"),"aria-label":u.placeholder,onClick:C,children:[a.jsx(l,{"data-visible":p?"hide":"show",className:"w-4 h-4 text-muted-foreground pointer-events-none rotate-0 scale-100 transition-transform data-[visible=hide]:-rotate-90 data-[visible=hide]:scale-0"}),a.jsx(c,{"data-visible":p?"show":"hide",className:"absolute w-5 h-5 text-muted-foreground pointer-events-none rotate-90 scale-0 transition-transform data-[visible=show]:rotate-0 data-[visible=show]:scale-100"})]})]})})}export{u as E};
