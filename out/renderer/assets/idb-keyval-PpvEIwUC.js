function e(e){return new Promise((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)})}function t(t,n){let r;return(o,u)=>(()=>{if(r)return r;const o=indexedDB.open(t);return o.onupgradeneeded=()=>o.result.createObjectStore(n),r=e(o),r.then(e=>{e.onclose=()=>r=void 0},()=>{}),r})().then(e=>u(e.transaction(n,o).objectStore(n)))}let n;function r(){return n||(n=t("keyval-store","keyval")),n}function o(t,n=r()){return n("readonly",n=>e(n.get(t)))}function u(t,n,o=r()){return o("readwrite",r=>(r.put(n,t),e(r.transaction)))}function a(t,n=r()){return n("readwrite",n=>(n.delete(t),e(n.transaction)))}export{a as d,o as g,u as s};
