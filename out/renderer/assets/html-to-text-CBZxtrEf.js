import{h as e}from"./@selderee-RfmdOesI.js";import{p as t}from"./htmlparser2-BkjpP7DB.js";import{D as n}from"./selderee-BSueesG9.js";import{m as i}from"./deepmerge-Clcdar8H.js";import{r as s}from"./dom-serializer-BRtYF6lV.js";function r(e,t,n=()=>{}){if(void 0===e){const e=function(...n){return t(e,...n)};return e}return e>=0?function(...i){return t(r(e-1,t,n),...i)}:n}function a(e,t){let n=0,i=e.length;for(;n<i&&e[n]===t;)++n;for(;i>n&&e[i-1]===t;)--i;return n>0||i<e.length?e.substring(n,i):e}function o(e,t){const n=new Map;for(let s=e.length;s-- >0;){const r=e[s],a=t(r);n.set(a,n.has(a)?i(r,n.get(a),{arrayMerge:l}):r)}return[...n.values()].reverse()}const l=(e,t,n)=>[...t];function c(e,t){for(const n of t){if(!e)return;e=e[n]}return e}function h(e,t="a",n=26){const i=[];do{e-=1,i.push(e%n),e=e/n|0}while(e>0);const s=t.charCodeAt(0);return i.reverse().map(e=>String.fromCharCode(s+e)).join("")}const d=["I","X","C","M"],p=["V","L","D"];function f(e){return[...e+""].map(e=>+e).reverse().map((e,t)=>e%5<4?(e<5?"":p[t])+d[t].repeat(e%5):d[t]+(e<5?p[t]:d[t+1])).reverse().join("")}class m{constructor(e,t=void 0){this.lines=[],this.nextLineWords=[],this.maxLineLength=t||e.wordwrap||Number.MAX_VALUE,this.nextLineAvailableChars=this.maxLineLength,this.wrapCharacters=c(e,["longWordSplit","wrapCharacters"])||[],this.forceWrapOnLimit=c(e,["longWordSplit","forceWrapOnLimit"])||!1,this.stashedSpace=!1,this.wordBreakOpportunity=!1}pushWord(e,t=!1){this.nextLineAvailableChars<=0&&!t&&this.startNewLine();const n=0===this.nextLineWords.length,i=e.length+(n?0:1);if(i<=this.nextLineAvailableChars||t)this.nextLineWords.push(e),this.nextLineAvailableChars-=i;else{const[t,...i]=this.splitLongWord(e);n||this.startNewLine(),this.nextLineWords.push(t),this.nextLineAvailableChars-=t.length;for(const e of i)this.startNewLine(),this.nextLineWords.push(e),this.nextLineAvailableChars-=e.length}}popWord(){const e=this.nextLineWords.pop();if(void 0!==e){const t=0===this.nextLineWords.length,n=e.length+(t?0:1);this.nextLineAvailableChars+=n}return e}concatWord(e,t=!1){if(this.wordBreakOpportunity&&e.length>this.nextLineAvailableChars)this.pushWord(e,t),this.wordBreakOpportunity=!1;else{const n=this.popWord();this.pushWord(n?n.concat(e):e,t)}}startNewLine(e=1){this.lines.push(this.nextLineWords),e>1&&this.lines.push(...Array.from({length:e-1},()=>[])),this.nextLineWords=[],this.nextLineAvailableChars=this.maxLineLength}isEmpty(){return 0===this.lines.length&&0===this.nextLineWords.length}clear(){this.lines.length=0,this.nextLineWords.length=0,this.nextLineAvailableChars=this.maxLineLength}toString(){return[...this.lines,this.nextLineWords].map(e=>e.join(" ")).join("\n")}splitLongWord(e){const t=[];let n=0;for(;e.length>this.maxLineLength;){const i=e.substring(0,this.maxLineLength),s=e.substring(this.maxLineLength),r=i.lastIndexOf(this.wrapCharacters[n]);if(r>-1)e=i.substring(r+1)+s,t.push(i.substring(0,r+1));else{if(n++,!(n<this.wrapCharacters.length)){if(this.forceWrapOnLimit){if(t.push(i),(e=s).length>this.maxLineLength)continue}else e=i+s;break}e=i+s}}return t.push(e),t}}class u{constructor(e=null){this.next=e}getRoot(){return this.next?this.next:this}}class g extends u{constructor(e,t=null,n=1,i=void 0){super(t),this.leadingLineBreaks=n,this.inlineTextBuilder=new m(e,i),this.rawText="",this.stashedLineBreaks=0,this.isPre=t&&t.isPre,this.isNoWrap=t&&t.isNoWrap}}class k extends g{constructor(e,t=null,{interRowLineBreaks:n=1,leadingLineBreaks:i=2,maxLineLength:s,maxPrefixLength:r=0,prefixAlign:a="left"}={}){super(e,t,i,s),this.maxPrefixLength=r,this.prefixAlign=a,this.interRowLineBreaks=n}}class L extends g{constructor(e,t=null,{leadingLineBreaks:n=1,maxLineLength:i,prefix:s=""}={}){super(e,t,n,i),this.prefix=s}}class B extends u{constructor(e=null){super(e),this.rows=[],this.isPre=e&&e.isPre,this.isNoWrap=e&&e.isNoWrap}}class x extends u{constructor(e=null){super(e),this.cells=[],this.isPre=e&&e.isPre,this.isNoWrap=e&&e.isNoWrap}}class w extends u{constructor(e,t=null,n=void 0){super(t),this.inlineTextBuilder=new m(e,n),this.rawText="",this.stashedLineBreaks=0,this.isPre=t&&t.isPre,this.isNoWrap=t&&t.isNoWrap}}class b extends u{constructor(e=null,t){super(e),this.transform=t}}class W{constructor(e){this.whitespaceChars=e.preserveNewlines?e.whitespaceCharacters.replace(/\n/g,""):e.whitespaceCharacters;const t=(n=this.whitespaceChars,[...n].map(e=>"\\u"+e.charCodeAt(0).toString(16).padStart(4,"0")).join(""));var n;if(this.leadingWhitespaceRe=new RegExp(`^[${t}]`),this.trailingWhitespaceRe=new RegExp(`[${t}]$`),this.allWhitespaceOrEmptyRe=new RegExp(`^[${t}]*$`),this.newlineOrNonWhitespaceRe=new RegExp(`(\\n|[^\\n${t}])`,"g"),this.newlineOrNonNewlineStringRe=new RegExp("(\\n|[^\\n]+)","g"),e.preserveNewlines){const e=new RegExp(`\\n|[^\\n${t}]+`,"gm");this.shrinkWrapAdd=function(t,n,i=e=>e,s=!1){if(!t)return;const r=n.stashedSpace;let a=!1,o=e.exec(t);if(o)for(a=!0,"\n"===o[0]?n.startNewLine():r||this.testLeadingWhitespace(t)?n.pushWord(i(o[0]),s):n.concatWord(i(o[0]),s);null!==(o=e.exec(t));)"\n"===o[0]?n.startNewLine():n.pushWord(i(o[0]),s);n.stashedSpace=r&&!a||this.testTrailingWhitespace(t)}}else{const e=new RegExp(`[^${t}]+`,"g");this.shrinkWrapAdd=function(t,n,i=e=>e,s=!1){if(!t)return;const r=n.stashedSpace;let a=!1,o=e.exec(t);if(o)for(a=!0,r||this.testLeadingWhitespace(t)?n.pushWord(i(o[0]),s):n.concatWord(i(o[0]),s);null!==(o=e.exec(t));)n.pushWord(i(o[0]),s);n.stashedSpace=r&&!a||this.testTrailingWhitespace(t)}}}addLiteral(e,t,n=!0){if(!e)return;const i=t.stashedSpace;let s=!1,r=this.newlineOrNonNewlineStringRe.exec(e);if(r)for(s=!0,"\n"===r[0]?t.startNewLine():i?t.pushWord(r[0],n):t.concatWord(r[0],n);null!==(r=this.newlineOrNonNewlineStringRe.exec(e));)"\n"===r[0]?t.startNewLine():t.pushWord(r[0],n);t.stashedSpace=i&&!s}testLeadingWhitespace(e){return this.leadingWhitespaceRe.test(e)}testTrailingWhitespace(e){return this.trailingWhitespaceRe.test(e)}testContainsWords(e){return!this.allWhitespaceOrEmptyRe.test(e)}countNewlinesNoWords(e){this.newlineOrNonWhitespaceRe.lastIndex=0;let t,n=0;for(;null!==(t=this.newlineOrNonWhitespaceRe.exec(e));){if("\n"!==t[0])return 0;n++}return n}}class I{constructor(e,t,n=void 0){this.options=e,this.picker=t,this.metadata=n,this.whitespaceProcessor=new W(e),this._stackItem=new g(e),this._wordTransformer=void 0}pushWordTransform(e){this._wordTransformer=new b(this._wordTransformer,e)}popWordTransform(){if(!this._wordTransformer)return;const e=this._wordTransformer.transform;return this._wordTransformer=this._wordTransformer.next,e}startNoWrap(){this._stackItem.isNoWrap=!0}stopNoWrap(){this._stackItem.isNoWrap=!1}_getCombinedWordTransformer(){const e=this._wordTransformer?e=>N(e,this._wordTransformer):void 0,t=this.options.encodeCharacters;return e?t?n=>t(e(n)):e:t}_popStackItem(){const e=this._stackItem;return this._stackItem=e.next,e}addLineBreak(){(this._stackItem instanceof g||this._stackItem instanceof L||this._stackItem instanceof w)&&(this._stackItem.isPre?this._stackItem.rawText+="\n":this._stackItem.inlineTextBuilder.startNewLine())}addWordBreakOpportunity(){(this._stackItem instanceof g||this._stackItem instanceof L||this._stackItem instanceof w)&&(this._stackItem.inlineTextBuilder.wordBreakOpportunity=!0)}addInline(e,{noWordTransform:t=!1}={}){if(this._stackItem instanceof g||this._stackItem instanceof L||this._stackItem instanceof w)if(this._stackItem.isPre)this._stackItem.rawText+=e;else if(0!==e.length&&(!this._stackItem.stashedLineBreaks||this.whitespaceProcessor.testContainsWords(e))){if(this.options.preserveNewlines){const t=this.whitespaceProcessor.countNewlinesNoWords(e);if(t>0)return void this._stackItem.inlineTextBuilder.startNewLine(t)}this._stackItem.stashedLineBreaks&&this._stackItem.inlineTextBuilder.startNewLine(this._stackItem.stashedLineBreaks),this.whitespaceProcessor.shrinkWrapAdd(e,this._stackItem.inlineTextBuilder,t?void 0:this._getCombinedWordTransformer(),this._stackItem.isNoWrap),this._stackItem.stashedLineBreaks=0}}addLiteral(e){(this._stackItem instanceof g||this._stackItem instanceof L||this._stackItem instanceof w)&&0!==e.length&&(this._stackItem.isPre?this._stackItem.rawText+=e:(this._stackItem.stashedLineBreaks&&this._stackItem.inlineTextBuilder.startNewLine(this._stackItem.stashedLineBreaks),this.whitespaceProcessor.addLiteral(e,this._stackItem.inlineTextBuilder,this._stackItem.isNoWrap),this._stackItem.stashedLineBreaks=0))}openBlock({leadingLineBreaks:e=1,reservedLineLength:t=0,isPre:n=!1}={}){const i=Math.max(20,this._stackItem.inlineTextBuilder.maxLineLength-t);this._stackItem=new g(this.options,this._stackItem,e,i),n&&(this._stackItem.isPre=!0)}closeBlock({trailingLineBreaks:e=1,blockTransform:t}={}){const n=this._popStackItem(),i=t?t(_(n)):_(n);T(this._stackItem,i,n.leadingLineBreaks,Math.max(n.stashedLineBreaks,e))}openList({maxPrefixLength:e=0,prefixAlign:t="left",interRowLineBreaks:n=1,leadingLineBreaks:i=2}={}){this._stackItem=new k(this.options,this._stackItem,{interRowLineBreaks:n,leadingLineBreaks:i,maxLineLength:this._stackItem.inlineTextBuilder.maxLineLength,maxPrefixLength:e,prefixAlign:t})}openListItem({prefix:e=""}={}){if(!(this._stackItem instanceof k))throw new Error("Can't add a list item to something that is not a list! Check the formatter.");const t=this._stackItem,n=Math.max(e.length,t.maxPrefixLength),i=Math.max(20,t.inlineTextBuilder.maxLineLength-n);this._stackItem=new L(this.options,t,{prefix:e,maxLineLength:i,leadingLineBreaks:t.interRowLineBreaks})}closeListItem(){const e=this._popStackItem(),t=e.next,n=Math.max(e.prefix.length,t.maxPrefixLength),i="\n"+" ".repeat(n);T(t,("right"===t.prefixAlign?e.prefix.padStart(n):e.prefix.padEnd(n))+_(e).replace(/\n/g,i),e.leadingLineBreaks,Math.max(e.stashedLineBreaks,t.interRowLineBreaks))}closeList({trailingLineBreaks:e=2}={}){const t=this._popStackItem(),n=_(t);n&&T(this._stackItem,n,t.leadingLineBreaks,e)}openTable(){this._stackItem=new B(this._stackItem)}openTableRow(){if(!(this._stackItem instanceof B))throw new Error("Can't add a table row to something that is not a table! Check the formatter.");this._stackItem=new x(this._stackItem)}openTableCell({maxColumnWidth:e}={}){if(!(this._stackItem instanceof x))throw new Error("Can't add a table cell to something that is not a table row! Check the formatter.");this._stackItem=new w(this.options,this._stackItem,e)}closeTableCell({colspan:e=1,rowspan:t=1}={}){const n=this._popStackItem(),i=a(_(n),"\n");n.next.cells.push({colspan:e,rowspan:t,text:i})}closeTableRow(){const e=this._popStackItem();e.next.rows.push(e.cells)}closeTable({tableToString:e,leadingLineBreaks:t=2,trailingLineBreaks:n=2}){const i=e(this._popStackItem().rows);i&&T(this._stackItem,i,t,n)}toString(){return _(this._stackItem.getRoot())}}function _(e){if(!(e instanceof g||e instanceof L||e instanceof w))throw new Error("Only blocks, list items and table cells can be requested for text contents.");return e.inlineTextBuilder.isEmpty()?e.rawText:e.rawText+e.inlineTextBuilder.toString()}function T(e,t,n,i){if(!(e instanceof g||e instanceof L||e instanceof w))throw new Error("Only blocks, list items and table cells can contain text.");const s=_(e),r=Math.max(e.stashedLineBreaks,n);e.inlineTextBuilder.clear(),s?e.rawText=s+"\n".repeat(r)+t:(e.rawText=t,e.leadingLineBreaks=r),e.stashedLineBreaks=i}function N(e,t){return t?N(t.transform(e),t.next):e}function C(i={}){const s=i.selectors.filter(e=>!e.format);if(s.length)throw new Error("Following selectors have no specified format: "+s.map(e=>`\`${e.selector}\``).join(", "));const a=new n(i.selectors.map(e=>[e.selector,e])).build(e);"function"!=typeof i.encodeCharacters&&(i.encodeCharacters=function(e){if(!e||0===Object.keys(e).length)return;const t=Object.entries(e).filter(([,e])=>!1!==e),n=new RegExp(t.map(([e])=>{return`(${t=[...e][0],t.replace(/[\s\S]/g,e=>"\\u"+e.charCodeAt().toString(16).padStart(4,"0"))})`;var t}).join("|"),"g"),i=t.map(([,e])=>e),s=(e,...t)=>i[t.findIndex(e=>e)];return e=>e.replace(n,s)}(i.encodeCharacters));const o=new n(i.baseElements.selectors.map((e,t)=>[e,t+1])).build(e);function l(e){return function(e,t,n){const i=[];function s(e,s){s=s.slice(0,t.limits.maxChildNodes);for(const r of s){if("tag"!==r.type)continue;const s=n.pick1(r);if(s>0?i.push({selectorIndex:s,element:r}):r.children&&e(r.children),i.length>=t.limits.maxBaseElements)return}}const a=r(t.limits.maxDepth,s);a(e),"occurrence"!==t.baseElements.orderBy&&i.sort((e,t)=>e.selectorIndex-t.selectorIndex);return t.baseElements.returnDomByDefault&&0===i.length?e:i.map(e=>e.element)}(e,i,o)}const c=r(i.limits.maxDepth,v,function(e,t){t.addInline(i.limits.ellipsis||"")});return function(e,n=void 0){return function(e,n,i,s,r,a){const o=i.limits.maxInputLength;o&&e&&e.length>o&&(console.warn(`Input length ${e.length} is above allowed limit of ${o}. Truncating without ellipsis.`),e=e.substring(0,o));const l=t(e,{decodeEntities:i.decodeEntities}),c=r(l.children),h=new I(i,s,n);return a(c,h),h.toString()}(e,n,i,a,l,c)}}function v(e,t,n){if(!t)return;const i=n.options;t.length>i.limits.maxChildNodes&&(t=t.slice(0,i.limits.maxChildNodes)).push({data:i.limits.ellipsis,type:"text"});for(const s of t)switch(s.type){case"text":n.addInline(s.data);break;case"tag":{const t=n.picker.pick1(s);(0,i.formatters[t.format])(s,e,n,t.options||{});break}}}function S(e){const t=e.attribs&&e.attribs.length?" "+Object.entries(e.attribs).map(([e,t])=>""===t?e:`${e}=${t.replace(/"/g,"&quot;")}`).join(" "):"";return`<${e.name}${t}>`}function E(e){return`</${e.name}>`}var y=Object.freeze({__proto__:null,block:function(e,t,n,i){n.openBlock({leadingLineBreaks:i.leadingLineBreaks||2}),t(e.children,n),n.closeBlock({trailingLineBreaks:i.trailingLineBreaks||2})},blockHtml:function(e,t,n,i){n.openBlock({leadingLineBreaks:i.leadingLineBreaks||2}),n.startNoWrap(),n.addLiteral(s(e,{decodeEntities:n.options.decodeEntities})),n.stopNoWrap(),n.closeBlock({trailingLineBreaks:i.trailingLineBreaks||2})},blockString:function(e,t,n,i){n.openBlock({leadingLineBreaks:i.leadingLineBreaks||2}),n.addLiteral(i.string||""),n.closeBlock({trailingLineBreaks:i.trailingLineBreaks||2})},blockTag:function(e,t,n,i){n.openBlock({leadingLineBreaks:i.leadingLineBreaks||2}),n.startNoWrap(),n.addLiteral(S(e)),n.stopNoWrap(),t(e.children,n),n.startNoWrap(),n.addLiteral(E(e)),n.stopNoWrap(),n.closeBlock({trailingLineBreaks:i.trailingLineBreaks||2})},inline:function(e,t,n,i){t(e.children,n)},inlineHtml:function(e,t,n,i){n.startNoWrap(),n.addLiteral(s(e,{decodeEntities:n.options.decodeEntities})),n.stopNoWrap()},inlineString:function(e,t,n,i){n.addLiteral(i.string||"")},inlineSurround:function(e,t,n,i){n.addLiteral(i.prefix||""),t(e.children,n),n.addLiteral(i.suffix||"")},inlineTag:function(e,t,n,i){n.startNoWrap(),n.addLiteral(S(e)),n.stopNoWrap(),t(e.children,n),n.startNoWrap(),n.addLiteral(E(e)),n.stopNoWrap()},skip:function(e,t,n,i){}});function R(e,t){return e[t]||(e[t]=[]),e[t]}function A(e,t=0){for(;e[t];)t++;return t}function O(e,t,n,i){for(let s=0;s<e.rowspan;s++){const r=R(t,n+s);for(let t=0;t<e.colspan;t++)r[i+t]=e}}function P(e,t){return void 0===e[t]&&(e[t]=0===t?0:1+P(e,t-1)),e[t]}function j(e,t,n,i){e[t+n]=Math.max(P(e,t+n),P(e,t)+i)}function $(e,t,n){const i=[];let s=0;const r=e.length,a=[0];for(let c=0;c<r;c++){const n=R(i,c),r=e[c];let o=0;for(let e=0;e<r.length;e++){const s=r[e];o=A(n,o),O(s,i,c,o),o+=s.colspan,s.lines=s.text.split("\n");const l=s.lines.length;j(a,c,s.rowspan,l+t)}s=n.length>s?n.length:s}!function(e,t){for(let n=0;n<t;n++){const t=R(e,n);for(let i=0;i<n;i++){const s=R(e,i);if(t[i]||s[n]){const e=t[i];t[i]=s[n],s[n]=e}}}}(i,r>s?r:s);const o=[],l=[0];for(let c=0;c<s;c++){let e,t=0;const s=Math.min(r,i[c].length);for(;t<s;)if(e=i[c][t],e){if(!e.rendered){let i=0;for(let n=0;n<e.lines.length;n++){const s=e.lines[n],r=a[t]+n;o[r]=(o[r]||"").padEnd(l[c])+s,i=s.length>i?s.length:i}j(l,c,e.colspan,i+n),e.rendered=!0}t+=e.rowspan}else{const e=a[t];o[e]=o[e]||"",t++}}return o.join("\n")}function D(e,t){if(!t)return e;return("string"==typeof t[0]?t[0]:"[")+e+("string"==typeof t[1]?t[1]:"]")}function M(e,t,n,i,s){const r="function"==typeof t?t(e,i,s):e;return"/"===r[0]&&n?function(e,t){let n=e.length;for(;n>0&&e[n-1]===t;)--n;return n<e.length?e.substring(0,n):e}(n,"/")+r:r}function U(e,t,n,i,s){const r="li"===c(e,["parent","name"]);let a=0;const o=(e.children||[]).filter(e=>"text"!==e.type||!/^\s*$/.test(e.data)).map(function(e){if("li"!==e.name)return{node:e,prefix:""};const t=r?s().trimStart():s();return t.length>a&&(a=t.length),{node:e,prefix:t}});if(o.length){n.openList({interRowLineBreaks:1,leadingLineBreaks:r?1:i.leadingLineBreaks||2,maxPrefixLength:a,prefixAlign:"left"});for(const{node:e,prefix:i}of o)n.openListItem({prefix:i}),t([e],n),n.closeListItem();n.closeList({trailingLineBreaks:r?1:i.trailingLineBreaks||2})}}function H(e,t,n,i){function s(e){const s=+c(e,["attribs","colspan"])||1,r=+c(e,["attribs","rowspan"])||1;n.openTableCell({maxColumnWidth:i.maxColumnWidth}),t(e.children,n),n.closeTableCell({colspan:s,rowspan:r})}n.openTable(),e.children.forEach(function e(t){if("tag"!==t.type)return;const r=!1!==i.uppercaseHeaderCells?e=>{n.pushWordTransform(e=>e.toUpperCase()),s(e),n.popWordTransform()}:s;switch(t.name){case"thead":case"tbody":case"tfoot":case"center":return void t.children.forEach(e);case"tr":n.openTableRow();for(const e of t.children)if("tag"===e.type)switch(e.name){case"th":r(e);break;case"td":s(e)}n.closeTableRow()}}),n.closeTable({tableToString:e=>$(e,i.rowSpacing??0,i.colSpacing??3),leadingLineBreaks:i.leadingLineBreaks,trailingLineBreaks:i.trailingLineBreaks})}var q=Object.freeze({__proto__:null,anchor:function(e,t,n,i){const s=function(){if(i.ignoreHref)return"";if(!e.attribs||!e.attribs.href)return"";let t=e.attribs.href.replace(/^mailto:/,"");return i.noAnchorUrl&&"#"===t[0]?"":(t=M(t,i.pathRewrite,i.baseUrl,n.metadata,e),t)}();if(s){let r="";n.pushWordTransform(e=>(e&&(r+=e),e)),t(e.children,n),n.popWordTransform();i.hideLinkHrefIfSameAsText&&s===r||n.addInline(r?" "+D(s,i.linkBrackets):s,{noWordTransform:!0})}else t(e.children,n)},blockquote:function(e,t,n,i){n.openBlock({leadingLineBreaks:i.leadingLineBreaks||2,reservedLineLength:2}),t(e.children,n),n.closeBlock({trailingLineBreaks:i.trailingLineBreaks||2,blockTransform:e=>(!1!==i.trimEmptyLines?a(e,"\n"):e).split("\n").map(e=>"> "+e).join("\n")})},dataTable:H,heading:function(e,t,n,i){n.openBlock({leadingLineBreaks:i.leadingLineBreaks||2}),!1!==i.uppercase?(n.pushWordTransform(e=>e.toUpperCase()),t(e.children,n),n.popWordTransform()):t(e.children,n),n.closeBlock({trailingLineBreaks:i.trailingLineBreaks||2})},horizontalLine:function(e,t,n,i){n.openBlock({leadingLineBreaks:i.leadingLineBreaks||2}),n.addInline("-".repeat(i.length||n.options.wordwrap||40)),n.closeBlock({trailingLineBreaks:i.trailingLineBreaks||2})},image:function(e,t,n,i){const s=e.attribs||{},r=s.alt?s.alt:"",a=s.src?M(s.src,i.pathRewrite,i.baseUrl,n.metadata,e):"",o=a?r?r+" "+D(a,i.linkBrackets):D(a,i.linkBrackets):r;n.addInline(o,{noWordTransform:!0})},lineBreak:function(e,t,n,i){n.addLineBreak()},orderedList:function(e,t,n,i){let s=Number(e.attribs.start||"1");const r=function(e="1"){switch(e){case"a":return e=>h(e,"a");case"A":return e=>h(e,"A");case"i":return e=>f(e).toLowerCase();case"I":return e=>f(e);default:return e=>e.toString()}}(e.attribs.type);return U(e,t,n,i,()=>" "+r(s++)+". ")},paragraph:function(e,t,n,i){n.openBlock({leadingLineBreaks:i.leadingLineBreaks||2}),t(e.children,n),n.closeBlock({trailingLineBreaks:i.trailingLineBreaks||2})},pre:function(e,t,n,i){n.openBlock({isPre:!0,leadingLineBreaks:i.leadingLineBreaks||2}),t(e.children,n),n.closeBlock({trailingLineBreaks:i.trailingLineBreaks||2})},table:function(e,t,n,i){return function(e,t){if(!0===t)return!0;if(!e)return!1;const{classes:n,ids:i}=function(e){const t=[],n=[];for(const i of e)i.startsWith(".")?t.push(i.substring(1)):i.startsWith("#")&&n.push(i.substring(1));return{classes:t,ids:n}}(t),s=(e.class||"").split(" "),r=(e.id||"").split(" ");return s.some(e=>n.includes(e))||r.some(e=>i.includes(e))}(e.attribs,n.options.tables)?H(e,t,n,i):function(e,t,n,i){n.openBlock({leadingLineBreaks:i.leadingLineBreaks}),t(e.children,n),n.closeBlock({trailingLineBreaks:i.trailingLineBreaks})}(e,t,n,i)},unorderedList:function(e,t,n,i){const s=i.itemPrefix||" * ";return U(e,t,n,i,()=>s)},wbr:function(e,t,n,i){n.addWordBreakOpportunity()}});const z={baseElements:{selectors:["body"],orderBy:"selectors",returnDomByDefault:!0},decodeEntities:!0,encodeCharacters:{},formatters:{},limits:{ellipsis:"...",maxBaseElements:void 0,maxChildNodes:void 0,maxDepth:void 0,maxInputLength:1<<24},longWordSplit:{forceWrapOnLimit:!1,wrapCharacters:[]},preserveNewlines:!1,selectors:[{selector:"*",format:"inline"},{selector:"a",format:"anchor",options:{baseUrl:null,hideLinkHrefIfSameAsText:!1,ignoreHref:!1,linkBrackets:["[","]"],noAnchorUrl:!0}},{selector:"article",format:"block",options:{leadingLineBreaks:1,trailingLineBreaks:1}},{selector:"aside",format:"block",options:{leadingLineBreaks:1,trailingLineBreaks:1}},{selector:"blockquote",format:"blockquote",options:{leadingLineBreaks:2,trailingLineBreaks:2,trimEmptyLines:!0}},{selector:"br",format:"lineBreak"},{selector:"div",format:"block",options:{leadingLineBreaks:1,trailingLineBreaks:1}},{selector:"footer",format:"block",options:{leadingLineBreaks:1,trailingLineBreaks:1}},{selector:"form",format:"block",options:{leadingLineBreaks:1,trailingLineBreaks:1}},{selector:"h1",format:"heading",options:{leadingLineBreaks:3,trailingLineBreaks:2,uppercase:!0}},{selector:"h2",format:"heading",options:{leadingLineBreaks:3,trailingLineBreaks:2,uppercase:!0}},{selector:"h3",format:"heading",options:{leadingLineBreaks:3,trailingLineBreaks:2,uppercase:!0}},{selector:"h4",format:"heading",options:{leadingLineBreaks:2,trailingLineBreaks:2,uppercase:!0}},{selector:"h5",format:"heading",options:{leadingLineBreaks:2,trailingLineBreaks:2,uppercase:!0}},{selector:"h6",format:"heading",options:{leadingLineBreaks:2,trailingLineBreaks:2,uppercase:!0}},{selector:"header",format:"block",options:{leadingLineBreaks:1,trailingLineBreaks:1}},{selector:"hr",format:"horizontalLine",options:{leadingLineBreaks:2,length:void 0,trailingLineBreaks:2}},{selector:"img",format:"image",options:{baseUrl:null,linkBrackets:["[","]"]}},{selector:"main",format:"block",options:{leadingLineBreaks:1,trailingLineBreaks:1}},{selector:"nav",format:"block",options:{leadingLineBreaks:1,trailingLineBreaks:1}},{selector:"ol",format:"orderedList",options:{leadingLineBreaks:2,trailingLineBreaks:2}},{selector:"p",format:"paragraph",options:{leadingLineBreaks:2,trailingLineBreaks:2}},{selector:"pre",format:"pre",options:{leadingLineBreaks:2,trailingLineBreaks:2}},{selector:"section",format:"block",options:{leadingLineBreaks:1,trailingLineBreaks:1}},{selector:"table",format:"table",options:{colSpacing:3,leadingLineBreaks:2,maxColumnWidth:60,rowSpacing:0,trailingLineBreaks:2,uppercaseHeaderCells:!0}},{selector:"ul",format:"unorderedList",options:{itemPrefix:" * ",leadingLineBreaks:2,trailingLineBreaks:2}},{selector:"wbr",format:"wbr"}],tables:[],whitespaceCharacters:" \t\r\n\fâ€‹",wordwrap:80},V=(e,t,n)=>[...t],X=(e,t,n)=>e.some(e=>"object"==typeof e)?((e,t)=>[...e,...t])(e,t):V(0,t);function F(e={}){return(e=i(z,e,{arrayMerge:V,customMerge:e=>"selectors"===e?X:void 0})).formatters=Object.assign({},y,q,e.formatters),e.selectors=o(e.selectors,e=>e.selector),function(e){if(e.tags){const t=Object.entries(e.tags).map(([e,t])=>({...t,selector:e||"*"}));e.selectors.push(...t),e.selectors=o(e.selectors,e=>e.selector)}function t(e,t,n){const i=t.pop();for(const s of t){let t=e[s];t||(t={},e[s]=t),e=t}e[i]=n}if(e.baseElement){const n=e.baseElement;t(e,["baseElements","selectors"],Array.isArray(n)?n:[n])}void 0!==e.returnDomByDefault&&t(e,["baseElements","returnDomByDefault"],e.returnDomByDefault);for(const n of e.selectors)"anchor"===n.format&&c(n,["options","noLinkBrackets"])&&t(n,["options","linkBrackets"],!1)}(e),C(e)}function G(e,t={},n=void 0){return F(t)(e,n)}export{G as c};
