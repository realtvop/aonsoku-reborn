import{j as t}from"./react-BohqOKG4.js";import{c as o,d as s,u as e}from"./@tanstack-3eZgfo06.js";import{I as r,D as i}from"./data-table-C37ukUF7.js";import{l as a,b as n,aY as l,aA as m}from"./index-Dw_5HS3q.js";import{A as p}from"./actions-CD5wk-PF.js";import{P as c}from"./options-hS6iO596.js";import{u as d}from"./react-i18next-CJXO39OJ.js";import{B as j}from"./react-toastify-Dcxz3wpx.js";import{A as u,a as y,b as g,c as f,d as x,e as h,f as b,g as v}from"./alert-dialog-Dv-UtMUK.js";import{d as I}from"./play-button-BMYlYUiF.js";import{q as S}from"./queryKeys-DxXuT4IC.js";import C from"./error-page-BuqrGUN1.js";import{s as k}from"./songs-columns-DLWRqf9R.js";import{a as A}from"./convertSecondsToTime-B1d9sDyx.js";import{l as w}from"./react-device-detect-CHs-JbVH.js";import{h as D}from"./react-router-C-_aAzNf.js";import"./crypto-js-jXt9otfP.js";import"./react-dom-DeCT9Zg9.js";import"./scheduler-CuPG8W_I.js";import"./@chriscodesthings-bGFwLvh6.js";import"./clsx-BeLtu-UY.js";import"./react-lazy-load-image-component-DTPOgetJ.js";import"./react-router-dom-DLqO9Z-p.js";import"./@remix-run-C5FxfqAA.js";import"./dot-Ccno5lbS.js";import"./lightbox-B7s_JddE.js";import"./yet-another-react-lightbox-DMOFwxG4.js";import"./song-title-ClQcdcyq.js";import"./cover-image-zpWg5P0A.js";import"./react-hotkeys-hook-qKPfarcW.js";import"./lucide-react-DrCvGt71.js";import"./i18next-CM37CVQ3.js";import"./i18next-browser-languagedetector-F0gxWJsw.js";import"./tailwind-extended-shadows-merge-DdKC4l0c.js";import"./tailwind-merge-5Glu2Zmz.js";import"./@radix-ui-LgTM4vlv.js";import"./aria-hidden-DyxP-6dL.js";import"./react-remove-scroll-yCREhh_0.js";import"./tslib-Bc9CN1Ef.js";import"./react-remove-scroll-bar-BNI7vDx9.js";import"./react-style-singleton-C1oTdtRg.js";import"./get-nonce-BYiZHLe3.js";import"./use-sidecar-DQWw4Coi.js";import"./use-callback-ref-DIudPNPV.js";import"./@floating-ui-VDk0qcgD.js";import"./use-sync-external-store-C4iHanJs.js";import"./class-variance-authority-DO3vQtTq.js";import"./lodash-DSAJ3Ow_.js";import"./zustand-Bqgea8iK.js";import"./immer-Dwi4ZIhD.js";import"./dayjs-BG2b1roC.js";import"./idb-keyval-PpvEIwUC.js";import"./fast-average-color-Dy3p1ZbH.js";import"./@hookform-CXDBdaWi.js";import"./react-hook-form-C23o4OKy.js";import"./use-debounce-CVLZIJWc.js";import"./zod-DxP4i6Pi.js";import"./react-country-flag-DV3c0LTu.js";import"./ua-parser-js-oxSasMdn.js";import"./equalizer-bars-BP_G2EY6.js";import"./cmdk-DpOb1GNg.js";import"./command-9rYDq5Wc.js";import"./action-button-BoxuniMX.js";import"./like-button-BExMQkwT.js";import"./data-table-column-header-Bz-4KByJ.js";function T({playlist:o}){const{t:s}=d(),{setSongList:e}=a(),r={play:s("playlist.buttons.play",{name:o.name}),shuffle:s("playlist.buttons.shuffle",{name:o.name}),options:s("playlist.buttons.options",{name:o.name})};return t.jsxs(p.Container,{children:[t.jsx(p.Button,{tooltip:r.play,buttonStyle:"primary",onClick:()=>e(o.entry,0,!1,{playlistId:o.id}),disabled:!o.entry,children:t.jsx(p.PlayIcon,{})}),t.jsx(p.Button,{tooltip:r.shuffle,onClick:()=>e(o.entry,0,!0,{playlistId:o.id}),disabled:!o.entry,children:t.jsx(p.ShuffleIcon,{})}),t.jsx(p.Dropdown,{tooltip:r.options,options:t.jsx(c,{playlist:o,disablePlayNext:!o.entry,disableAddLast:!o.entry,disableDownload:!o.entry})})]})}function q(){const{t:e}=d(),{confirmDialogState:r,setConfirmDialogState:i,actionData:a}=I(),l=a.songIndexes.length,m=o(),p=s({mutationFn:n.playlists.update,onSuccess:()=>{m.invalidateQueries({queryKey:[S.playlist.single,a.playlistId]}),j.success(e("playlist.form.removeSong.toast.success",{count:l}))},onError:()=>{j.error(e("playlist.form.removeSong.toast.error",{count:l}))}});return t.jsx(u,{open:r,onOpenChange:t=>i(t),children:t.jsxs(y,{children:[t.jsxs(g,{children:[t.jsx(f,{children:e("playlist.form.removeSong.title",{count:l})}),t.jsx(x,{children:e("playlist.form.removeSong.description")})]}),t.jsxs(h,{children:[t.jsx(b,{children:e("logout.dialog.cancel")}),t.jsx(v,{onClick:async function(){await p.mutateAsync({playlistId:a.playlistId,songIndexToRemove:a.songIndexes})},children:e("logout.dialog.confirm")})]})]})})}function F(){const{playlistId:o}=D(),{t:s}=d(),p=k(),{setSongList:c}=a(),{data:j,isLoading:u,isFetching:y}=e({queryKey:[S.playlist.single,o],queryFn:()=>n.playlists.getOne(o)});if(y||u)return t.jsx(l,{});if(!j)return t.jsx(C,{status:404,statusText:"Not Found"});const g=w.isMobile?["title","select"]:["index","title","album","duration","playCount","contentType","select"],f=j.songCount>0,x=A(j.duration),h=[{content:f?s("playlist.songCount",{count:j.songCount}):null,type:"text"},{content:f?s("playlist.duration",{duration:x}):null,type:"text"}],b=j.songCount>0?j.coverArt:void 0;return t.jsxs("div",{className:"w-full",children:[t.jsx(r,{type:s("playlist.headline"),title:j.name,subtitle:j.comment,coverArtId:b,coverArtType:"album",coverArtSize:"700",coverArtAlt:j.name,badges:h,isPlaylist:!0}),t.jsxs(m,{children:[t.jsx(T,{playlist:j}),t.jsx(i,{columns:p,data:j.entry??[],handlePlaySong:t=>c(j.entry,t.index,!1,{playlistId:j.id}),columnFilter:g,noRowsMessage:s("playlist.noSongList"),variant:"modern"}),t.jsx(q,{})]})]},j.id)}export{F as default};
