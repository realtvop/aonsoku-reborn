{"version":3,"file":"index.js","sources":["../../node_modules/.pnpm/@electron-toolkit+utils@4.0.0_electron@36.9.5/node_modules/@electron-toolkit/utils/dist/index.mjs","../../node_modules/.pnpm/dot-prop@9.0.0/node_modules/dot-prop/index.js","../../node_modules/.pnpm/env-paths@3.0.0/node_modules/env-paths/index.js","../../node_modules/.pnpm/stubborn-utils@1.0.2/node_modules/stubborn-utils/dist/attemptify_async.js","../../node_modules/.pnpm/stubborn-utils@1.0.2/node_modules/stubborn-utils/dist/attemptify_sync.js","../../node_modules/.pnpm/stubborn-utils@1.0.2/node_modules/stubborn-utils/dist/retryify_async.js","../../node_modules/.pnpm/stubborn-utils@1.0.2/node_modules/stubborn-utils/dist/constants.js","../../node_modules/.pnpm/stubborn-utils@1.0.2/node_modules/stubborn-utils/dist/retryify_sync.js","../../node_modules/.pnpm/stubborn-fs@2.0.0/node_modules/stubborn-fs/dist/handlers.js","../../node_modules/.pnpm/stubborn-fs@2.0.0/node_modules/stubborn-fs/dist/constants.js","../../node_modules/.pnpm/stubborn-fs@2.0.0/node_modules/stubborn-fs/dist/index.js","../../node_modules/.pnpm/atomically@2.1.0/node_modules/atomically/dist/constants.js","../../node_modules/.pnpm/atomically@2.1.0/node_modules/atomically/dist/utils/lang.js","../../node_modules/.pnpm/when-exit@2.1.5/node_modules/when-exit/dist/node/constants.js","../../node_modules/.pnpm/when-exit@2.1.5/node_modules/when-exit/dist/node/signals.js","../../node_modules/.pnpm/when-exit@2.1.5/node_modules/when-exit/dist/node/interceptor.js","../../node_modules/.pnpm/when-exit@2.1.5/node_modules/when-exit/dist/node/index.js","../../node_modules/.pnpm/atomically@2.1.0/node_modules/atomically/dist/utils/temp.js","../../node_modules/.pnpm/atomically@2.1.0/node_modules/atomically/dist/index.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/compile/codegen/code.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/compile/codegen/scope.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/compile/codegen/index.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/compile/util.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/compile/names.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/compile/errors.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/compile/rules.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/compile/validate/applicability.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/compile/validate/dataType.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/vocabularies/code.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/compile/validate/keyword.js","../../node_modules/.pnpm/fast-deep-equal@3.1.3/node_modules/fast-deep-equal/index.js","../../node_modules/.pnpm/json-schema-traverse@1.0.0/node_modules/json-schema-traverse/index.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/compile/resolve.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/compile/validate/index.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/compile/validate/boolSchema.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/compile/validate/defaults.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/compile/validate/subschema.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/runtime/validation_error.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/compile/ref_error.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/compile/index.js","../../node_modules/.pnpm/fast-uri@3.1.0/node_modules/fast-uri/lib/utils.js","../../node_modules/.pnpm/fast-uri@3.1.0/node_modules/fast-uri/index.js","../../node_modules/.pnpm/fast-uri@3.1.0/node_modules/fast-uri/lib/schemes.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/core.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/runtime/uri.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/vocabularies/core/ref.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/vocabularies/core/index.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/vocabularies/core/id.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/vocabularies/validation/limitLength.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/runtime/ucs2length.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/vocabularies/validation/required.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/runtime/equal.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/vocabularies/validation/uniqueItems.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/vocabularies/validation/enum.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/vocabularies/validation/index.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/vocabularies/validation/limitNumber.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/vocabularies/validation/multipleOf.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/vocabularies/validation/pattern.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/vocabularies/validation/limitProperties.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/vocabularies/validation/limitItems.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/vocabularies/validation/const.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/vocabularies/applicator/additionalItems.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/vocabularies/applicator/items.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/vocabularies/applicator/contains.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/vocabularies/applicator/dependencies.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/vocabularies/applicator/additionalProperties.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/vocabularies/applicator/index.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/vocabularies/applicator/prefixItems.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/vocabularies/applicator/items2020.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/vocabularies/applicator/propertyNames.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/vocabularies/applicator/properties.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/vocabularies/applicator/patternProperties.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/vocabularies/applicator/not.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/vocabularies/applicator/anyOf.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/vocabularies/applicator/oneOf.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/vocabularies/applicator/allOf.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/vocabularies/applicator/if.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/vocabularies/applicator/thenElse.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/vocabularies/dynamic/dynamicAnchor.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/vocabularies/dynamic/dynamicRef.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/vocabularies/dynamic/index.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/vocabularies/dynamic/recursiveAnchor.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/vocabularies/dynamic/recursiveRef.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/vocabularies/next.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/vocabularies/validation/dependentRequired.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/vocabularies/applicator/dependentSchemas.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/vocabularies/validation/limitContains.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/vocabularies/unevaluated/unevaluatedProperties.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/vocabularies/unevaluated/unevaluatedItems.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/vocabularies/format/index.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/vocabularies/format/format.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/vocabularies/metadata.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/vocabularies/draft2020.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/vocabularies/unevaluated/index.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/vocabularies/discriminator/index.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/vocabularies/discriminator/types.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/2020.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/refs/json-schema-2020-12/index.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/ajv.js","../../node_modules/.pnpm/ajv@8.17.1/node_modules/ajv/dist/vocabularies/draft7.js","../../node_modules/.pnpm/ajv-formats@3.0.1_ajv@8.17.1/node_modules/ajv-formats/dist/index.js","../../node_modules/.pnpm/ajv-formats@3.0.1_ajv@8.17.1/node_modules/ajv-formats/dist/formats.js","../../node_modules/.pnpm/ajv-formats@3.0.1_ajv@8.17.1/node_modules/ajv-formats/dist/limit.js","../../node_modules/.pnpm/mimic-function@5.0.1/node_modules/mimic-function/index.js","../../node_modules/.pnpm/debounce-fn@6.0.0/node_modules/debounce-fn/index.js","../../node_modules/.pnpm/semver@7.7.3/node_modules/semver/internal/constants.js","../../node_modules/.pnpm/semver@7.7.3/node_modules/semver/internal/debug.js","../../node_modules/.pnpm/semver@7.7.3/node_modules/semver/internal/re.js","../../node_modules/.pnpm/semver@7.7.3/node_modules/semver/internal/parse-options.js","../../node_modules/.pnpm/semver@7.7.3/node_modules/semver/internal/identifiers.js","../../node_modules/.pnpm/semver@7.7.3/node_modules/semver/classes/semver.js","../../node_modules/.pnpm/semver@7.7.3/node_modules/semver/functions/parse.js","../../node_modules/.pnpm/semver@7.7.3/node_modules/semver/functions/compare.js","../../node_modules/.pnpm/semver@7.7.3/node_modules/semver/functions/compare-build.js","../../node_modules/.pnpm/semver@7.7.3/node_modules/semver/functions/gt.js","../../node_modules/.pnpm/semver@7.7.3/node_modules/semver/functions/lt.js","../../node_modules/.pnpm/semver@7.7.3/node_modules/semver/functions/eq.js","../../node_modules/.pnpm/semver@7.7.3/node_modules/semver/functions/neq.js","../../node_modules/.pnpm/semver@7.7.3/node_modules/semver/functions/gte.js","../../node_modules/.pnpm/semver@7.7.3/node_modules/semver/functions/lte.js","../../node_modules/.pnpm/semver@7.7.3/node_modules/semver/functions/cmp.js","../../node_modules/.pnpm/semver@7.7.3/node_modules/semver/classes/range.js","../../node_modules/.pnpm/semver@7.7.3/node_modules/semver/internal/lrucache.js","../../node_modules/.pnpm/semver@7.7.3/node_modules/semver/classes/comparator.js","../../node_modules/.pnpm/semver@7.7.3/node_modules/semver/functions/satisfies.js","../../node_modules/.pnpm/semver@7.7.3/node_modules/semver/ranges/outside.js","../../node_modules/.pnpm/semver@7.7.3/node_modules/semver/index.js","../../node_modules/.pnpm/semver@7.7.3/node_modules/semver/functions/valid.js","../../node_modules/.pnpm/semver@7.7.3/node_modules/semver/functions/clean.js","../../node_modules/.pnpm/semver@7.7.3/node_modules/semver/functions/inc.js","../../node_modules/.pnpm/semver@7.7.3/node_modules/semver/functions/diff.js","../../node_modules/.pnpm/semver@7.7.3/node_modules/semver/functions/major.js","../../node_modules/.pnpm/semver@7.7.3/node_modules/semver/functions/minor.js","../../node_modules/.pnpm/semver@7.7.3/node_modules/semver/functions/patch.js","../../node_modules/.pnpm/semver@7.7.3/node_modules/semver/functions/prerelease.js","../../node_modules/.pnpm/semver@7.7.3/node_modules/semver/functions/rcompare.js","../../node_modules/.pnpm/semver@7.7.3/node_modules/semver/functions/compare-loose.js","../../node_modules/.pnpm/semver@7.7.3/node_modules/semver/functions/sort.js","../../node_modules/.pnpm/semver@7.7.3/node_modules/semver/functions/rsort.js","../../node_modules/.pnpm/semver@7.7.3/node_modules/semver/functions/coerce.js","../../node_modules/.pnpm/semver@7.7.3/node_modules/semver/ranges/to-comparators.js","../../node_modules/.pnpm/semver@7.7.3/node_modules/semver/ranges/max-satisfying.js","../../node_modules/.pnpm/semver@7.7.3/node_modules/semver/ranges/min-satisfying.js","../../node_modules/.pnpm/semver@7.7.3/node_modules/semver/ranges/min-version.js","../../node_modules/.pnpm/semver@7.7.3/node_modules/semver/ranges/valid.js","../../node_modules/.pnpm/semver@7.7.3/node_modules/semver/ranges/gtr.js","../../node_modules/.pnpm/semver@7.7.3/node_modules/semver/ranges/ltr.js","../../node_modules/.pnpm/semver@7.7.3/node_modules/semver/ranges/intersects.js","../../node_modules/.pnpm/semver@7.7.3/node_modules/semver/ranges/simplify.js","../../node_modules/.pnpm/semver@7.7.3/node_modules/semver/ranges/subset.js","../../node_modules/.pnpm/uint8array-extras@1.5.0/node_modules/uint8array-extras/index.js","../../node_modules/.pnpm/conf@14.0.0/node_modules/conf/dist/source/index.js","../../node_modules/.pnpm/electron-store@10.1.0/node_modules/electron-store/index.js","../../electron/main/core/store.ts","../../electron/main/core/colors.ts","../../node_modules/.pnpm/path-exists@5.0.0/node_modules/path-exists/index.js","../../node_modules/.pnpm/unused-filename@4.0.1/node_modules/unused-filename/index.js","../../node_modules/.pnpm/escape-goat@4.0.0/node_modules/escape-goat/index.js","../../node_modules/.pnpm/pupa@3.3.0/node_modules/pupa/index.js","../../node_modules/.pnpm/ext-list@2.2.2/node_modules/ext-list/index.js","../../node_modules/.pnpm/mime-db@1.52.0/node_modules/mime-db/index.js","../../node_modules/.pnpm/sort-keys@1.1.2/node_modules/sort-keys/index.js","../../node_modules/.pnpm/is-plain-obj@1.1.0/node_modules/is-plain-obj/index.js","../../node_modules/.pnpm/ext-name@5.0.0/node_modules/ext-name/index.js","../../node_modules/.pnpm/sort-keys-length@1.0.1/node_modules/sort-keys-length/index.js","../../node_modules/.pnpm/electron-dl@4.0.0/node_modules/electron-dl/index.js","../../electron/preload/types.ts","../../electron/main/core/downloads.ts","../../electron/main/core/nativeIcons.ts","../../electron/main/core/playerEvents.ts","../../electron/main/core/playerState.ts","../../electron/main/core/taskbar.ts","../../electron/main/core/macMedia.ts","../../electron/main/tray.ts","../../node_modules/.pnpm/bindings@1.5.0/node_modules/bindings/bindings.js","../../node_modules/.pnpm/file-uri-to-path@1.0.0/node_modules/file-uri-to-path/index.js","../../node_modules/.pnpm/discord-rpc@4.0.1_bufferutil@4.0.9_encoding@0.1.13_utf-8-validate@6.0.5/node_modules/discord-rpc/src/util.js","../../node_modules/.pnpm/register-scheme@https+++codeload.github.com+devsnek+node-register-scheme+tar.gz+e7cc9a63a1f512565da44cb57316d9fb10750e17/node_modules/register-scheme/index.js","../../node_modules/.pnpm/webidl-conversions@3.0.1/node_modules/webidl-conversions/lib/index.js","../../node_modules/.pnpm/tr46@0.0.3/node_modules/tr46/index.js","../../node_modules/.pnpm/whatwg-url@5.0.0/node_modules/whatwg-url/lib/url-state-machine.js","../../node_modules/.pnpm/whatwg-url@5.0.0/node_modules/whatwg-url/lib/URL.js","../../node_modules/.pnpm/whatwg-url@5.0.0/node_modules/whatwg-url/lib/utils.js","../../node_modules/.pnpm/whatwg-url@5.0.0/node_modules/whatwg-url/lib/URL-impl.js","../../node_modules/.pnpm/whatwg-url@5.0.0/node_modules/whatwg-url/lib/public-api.js","../../node_modules/.pnpm/node-fetch@2.7.0_encoding@0.1.13/node_modules/node-fetch/lib/index.mjs","../../node_modules/.pnpm/discord-rpc@4.0.1_bufferutil@4.0.9_encoding@0.1.13_utf-8-validate@6.0.5/node_modules/discord-rpc/src/transports/ipc.js","../../node_modules/.pnpm/discord-rpc@4.0.1_bufferutil@4.0.9_encoding@0.1.13_utf-8-validate@6.0.5/node_modules/discord-rpc/src/constants.js","../../node_modules/.pnpm/ws@7.5.10_bufferutil@4.0.9_utf-8-validate@6.0.5/node_modules/ws/lib/constants.js","../../node_modules/.pnpm/node-gyp-build@4.8.4/node_modules/node-gyp-build/index.js","../../node_modules/.pnpm/node-gyp-build@4.8.4/node_modules/node-gyp-build/node-gyp-build.js","../../node_modules/.pnpm/bufferutil@4.0.9/node_modules/bufferutil/index.js","../../node_modules/.pnpm/bufferutil@4.0.9/node_modules/bufferutil/fallback.js","../../node_modules/.pnpm/ws@7.5.10_bufferutil@4.0.9_utf-8-validate@6.0.5/node_modules/ws/lib/buffer-util.js","../../node_modules/.pnpm/ws@7.5.10_bufferutil@4.0.9_utf-8-validate@6.0.5/node_modules/ws/lib/permessage-deflate.js","../../node_modules/.pnpm/ws@7.5.10_bufferutil@4.0.9_utf-8-validate@6.0.5/node_modules/ws/lib/limiter.js","../../node_modules/.pnpm/utf-8-validate@6.0.5/node_modules/utf-8-validate/index.js","../../node_modules/.pnpm/utf-8-validate@6.0.5/node_modules/utf-8-validate/fallback.js","../../node_modules/.pnpm/ws@7.5.10_bufferutil@4.0.9_utf-8-validate@6.0.5/node_modules/ws/lib/validation.js","../../node_modules/.pnpm/ws@7.5.10_bufferutil@4.0.9_utf-8-validate@6.0.5/node_modules/ws/lib/receiver.js","../../node_modules/.pnpm/ws@7.5.10_bufferutil@4.0.9_utf-8-validate@6.0.5/node_modules/ws/lib/sender.js","../../node_modules/.pnpm/ws@7.5.10_bufferutil@4.0.9_utf-8-validate@6.0.5/node_modules/ws/lib/extension.js","../../node_modules/.pnpm/ws@7.5.10_bufferutil@4.0.9_utf-8-validate@6.0.5/node_modules/ws/lib/websocket.js","../../node_modules/.pnpm/ws@7.5.10_bufferutil@4.0.9_utf-8-validate@6.0.5/node_modules/ws/lib/event-target.js","../../node_modules/.pnpm/ws@7.5.10_bufferutil@4.0.9_utf-8-validate@6.0.5/node_modules/ws/lib/websocket-server.js","../../node_modules/.pnpm/ws@7.5.10_bufferutil@4.0.9_utf-8-validate@6.0.5/node_modules/ws/index.js","../../node_modules/.pnpm/ws@7.5.10_bufferutil@4.0.9_utf-8-validate@6.0.5/node_modules/ws/lib/stream.js","../../node_modules/.pnpm/discord-rpc@4.0.1_bufferutil@4.0.9_encoding@0.1.13_utf-8-validate@6.0.5/node_modules/discord-rpc/src/transports/websocket.js","../../node_modules/.pnpm/discord-rpc@4.0.1_bufferutil@4.0.9_encoding@0.1.13_utf-8-validate@6.0.5/node_modules/discord-rpc/src/client.js","../../node_modules/.pnpm/discord-rpc@4.0.1_bufferutil@4.0.9_encoding@0.1.13_utf-8-validate@6.0.5/node_modules/discord-rpc/src/transports/index.js","../../node_modules/.pnpm/discord-rpc@4.0.1_bufferutil@4.0.9_encoding@0.1.13_utf-8-validate@6.0.5/node_modules/discord-rpc/src/index.js","../../electron/main/core/discord.ts","../../electron/main/core/settings.ts","../../electron/main/core/titleBarOverlay.ts","../../electron/main/core/events.ts","../../electron/main/core/discordRpc.ts","../../electron/main/core/icon.ts","../../electron/main/core/windowPosition.ts","../../electron/main/window.ts","../../electron/main/core/lanControlManager.ts","../../electron/main/index.ts","../../electron/main/core/menu.ts","../../electron/main/core/about.ts"],"sourcesContent":["import { app, session, ipcMain, BrowserWindow } from 'electron';\n\nconst is = {\n  dev: !app.isPackaged\n};\n\nconst platform = {\n  isWindows: process.platform === \"win32\",\n  isMacOS: process.platform === \"darwin\",\n  isLinux: process.platform === \"linux\"\n};\n\nconst electronApp = {\n  setAppUserModelId(id) {\n    if (platform.isWindows)\n      app.setAppUserModelId(is.dev ? process.execPath : id);\n  },\n  setAutoLaunch(auto) {\n    if (platform.isLinux)\n      return false;\n    const isOpenAtLogin = () => {\n      return app.getLoginItemSettings().openAtLogin;\n    };\n    if (isOpenAtLogin() !== auto) {\n      app.setLoginItemSettings({ openAtLogin: auto });\n      return isOpenAtLogin() === auto;\n    } else {\n      return true;\n    }\n  },\n  skipProxy() {\n    return session.defaultSession.setProxy({ mode: \"direct\" });\n  }\n};\n\nconst optimizer = {\n  watchWindowShortcuts(window, shortcutOptions) {\n    if (!window)\n      return;\n    const { webContents } = window;\n    const { escToCloseWindow = false, zoom = false } = shortcutOptions || {};\n    webContents.on(\"before-input-event\", (event, input) => {\n      if (input.type === \"keyDown\") {\n        if (!is.dev) {\n          if (input.code === \"KeyR\" && (input.control || input.meta))\n            event.preventDefault();\n          if (input.code === \"KeyI\" && (input.alt && input.meta || input.control && input.shift)) {\n            event.preventDefault();\n          }\n        } else {\n          if (input.code === \"F12\") {\n            if (webContents.isDevToolsOpened()) {\n              webContents.closeDevTools();\n            } else {\n              webContents.openDevTools({ mode: \"undocked\" });\n              console.log(\"Open dev tool...\");\n            }\n          }\n        }\n        if (escToCloseWindow) {\n          if (input.code === \"Escape\" && input.key !== \"Process\") {\n            window.close();\n            event.preventDefault();\n          }\n        }\n        if (!zoom) {\n          if (input.code === \"Minus\" && (input.control || input.meta))\n            event.preventDefault();\n          if (input.code === \"Equal\" && input.shift && (input.control || input.meta))\n            event.preventDefault();\n        }\n      }\n    });\n  },\n  registerFramelessWindowIpc() {\n    ipcMain.on(\"win:invoke\", (event, action) => {\n      const win = BrowserWindow.fromWebContents(event.sender);\n      if (win) {\n        if (action === \"show\") {\n          win.show();\n        } else if (action === \"showInactive\") {\n          win.showInactive();\n        } else if (action === \"min\") {\n          win.minimize();\n        } else if (action === \"max\") {\n          const isMaximized = win.isMaximized();\n          if (isMaximized) {\n            win.unmaximize();\n          } else {\n            win.maximize();\n          }\n        } else if (action === \"close\") {\n          win.close();\n        }\n      }\n    });\n  }\n};\n\nexport { electronApp, is, optimizer, platform };\n","const isObject = value => {\n\tconst type = typeof value;\n\treturn value !== null && (type === 'object' || type === 'function');\n};\n\nconst isEmptyObject = value => isObject(value) && Object.keys(value).length === 0;\n\nconst disallowedKeys = new Set([\n\t'__proto__',\n\t'prototype',\n\t'constructor',\n]);\n\nconst digits = new Set('0123456789');\n\nfunction getPathSegments(path) {\n\tconst parts = [];\n\tlet currentSegment = '';\n\tlet currentPart = 'start';\n\tlet isIgnoring = false;\n\n\tfor (const character of path) {\n\t\tswitch (character) {\n\t\t\tcase '\\\\': {\n\t\t\t\tif (currentPart === 'index') {\n\t\t\t\t\tthrow new Error('Invalid character in an index');\n\t\t\t\t}\n\n\t\t\t\tif (currentPart === 'indexEnd') {\n\t\t\t\t\tthrow new Error('Invalid character after an index');\n\t\t\t\t}\n\n\t\t\t\tif (isIgnoring) {\n\t\t\t\t\tcurrentSegment += character;\n\t\t\t\t}\n\n\t\t\t\tcurrentPart = 'property';\n\t\t\t\tisIgnoring = !isIgnoring;\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase '.': {\n\t\t\t\tif (currentPart === 'index') {\n\t\t\t\t\tthrow new Error('Invalid character in an index');\n\t\t\t\t}\n\n\t\t\t\tif (currentPart === 'indexEnd') {\n\t\t\t\t\tcurrentPart = 'property';\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tif (isIgnoring) {\n\t\t\t\t\tisIgnoring = false;\n\t\t\t\t\tcurrentSegment += character;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tif (disallowedKeys.has(currentSegment)) {\n\t\t\t\t\treturn [];\n\t\t\t\t}\n\n\t\t\t\tparts.push(currentSegment);\n\t\t\t\tcurrentSegment = '';\n\t\t\t\tcurrentPart = 'property';\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase '[': {\n\t\t\t\tif (currentPart === 'index') {\n\t\t\t\t\tthrow new Error('Invalid character in an index');\n\t\t\t\t}\n\n\t\t\t\tif (currentPart === 'indexEnd') {\n\t\t\t\t\tcurrentPart = 'index';\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tif (isIgnoring) {\n\t\t\t\t\tisIgnoring = false;\n\t\t\t\t\tcurrentSegment += character;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tif (currentPart === 'property') {\n\t\t\t\t\tif (disallowedKeys.has(currentSegment)) {\n\t\t\t\t\t\treturn [];\n\t\t\t\t\t}\n\n\t\t\t\t\tparts.push(currentSegment);\n\t\t\t\t\tcurrentSegment = '';\n\t\t\t\t}\n\n\t\t\t\tcurrentPart = 'index';\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase ']': {\n\t\t\t\tif (currentPart === 'index') {\n\t\t\t\t\tparts.push(Number.parseInt(currentSegment, 10));\n\t\t\t\t\tcurrentSegment = '';\n\t\t\t\t\tcurrentPart = 'indexEnd';\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tif (currentPart === 'indexEnd') {\n\t\t\t\t\tthrow new Error('Invalid character after an index');\n\t\t\t\t}\n\n\t\t\t\t// Falls through\n\t\t\t}\n\n\t\t\tdefault: {\n\t\t\t\tif (currentPart === 'index' && !digits.has(character)) {\n\t\t\t\t\tthrow new Error('Invalid character in an index');\n\t\t\t\t}\n\n\t\t\t\tif (currentPart === 'indexEnd') {\n\t\t\t\t\tthrow new Error('Invalid character after an index');\n\t\t\t\t}\n\n\t\t\t\tif (currentPart === 'start') {\n\t\t\t\t\tcurrentPart = 'property';\n\t\t\t\t}\n\n\t\t\t\tif (isIgnoring) {\n\t\t\t\t\tisIgnoring = false;\n\t\t\t\t\tcurrentSegment += '\\\\';\n\t\t\t\t}\n\n\t\t\t\tcurrentSegment += character;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (isIgnoring) {\n\t\tcurrentSegment += '\\\\';\n\t}\n\n\tswitch (currentPart) {\n\t\tcase 'property': {\n\t\t\tif (disallowedKeys.has(currentSegment)) {\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\tparts.push(currentSegment);\n\n\t\t\tbreak;\n\t\t}\n\n\t\tcase 'index': {\n\t\t\tthrow new Error('Index was not closed');\n\t\t}\n\n\t\tcase 'start': {\n\t\t\tparts.push('');\n\n\t\t\tbreak;\n\t\t}\n\t\t// No default\n\t}\n\n\treturn parts;\n}\n\nfunction isStringIndex(object, key) {\n\tif (typeof key !== 'number' && Array.isArray(object)) {\n\t\tconst index = Number.parseInt(key, 10);\n\t\treturn Number.isInteger(index) && object[index] === object[key];\n\t}\n\n\treturn false;\n}\n\nfunction assertNotStringIndex(object, key) {\n\tif (isStringIndex(object, key)) {\n\t\tthrow new Error('Cannot use string index');\n\t}\n}\n\nexport function getProperty(object, path, value) {\n\tif (!isObject(object) || typeof path !== 'string') {\n\t\treturn value === undefined ? object : value;\n\t}\n\n\tconst pathArray = getPathSegments(path);\n\tif (pathArray.length === 0) {\n\t\treturn value;\n\t}\n\n\tfor (let index = 0; index < pathArray.length; index++) {\n\t\tconst key = pathArray[index];\n\n\t\tif (isStringIndex(object, key)) {\n\t\t\tobject = index === pathArray.length - 1 ? undefined : null;\n\t\t} else {\n\t\t\tobject = object[key];\n\t\t}\n\n\t\tif (object === undefined || object === null) {\n\t\t\t// `object` is either `undefined` or `null` so we want to stop the loop, and\n\t\t\t// if this is not the last bit of the path, and\n\t\t\t// if it didn't return `undefined`\n\t\t\t// it would return `null` if `object` is `null`\n\t\t\t// but we want `get({foo: null}, 'foo.bar')` to equal `undefined`, or the supplied value, not `null`\n\t\t\tif (index !== pathArray.length - 1) {\n\t\t\t\treturn value;\n\t\t\t}\n\n\t\t\tbreak;\n\t\t}\n\t}\n\n\treturn object === undefined ? value : object;\n}\n\nexport function setProperty(object, path, value) {\n\tif (!isObject(object) || typeof path !== 'string') {\n\t\treturn object;\n\t}\n\n\tconst root = object;\n\tconst pathArray = getPathSegments(path);\n\n\tfor (let index = 0; index < pathArray.length; index++) {\n\t\tconst key = pathArray[index];\n\n\t\tassertNotStringIndex(object, key);\n\n\t\tif (index === pathArray.length - 1) {\n\t\t\tobject[key] = value;\n\t\t} else if (!isObject(object[key])) {\n\t\t\tobject[key] = typeof pathArray[index + 1] === 'number' ? [] : {};\n\t\t}\n\n\t\tobject = object[key];\n\t}\n\n\treturn root;\n}\n\nexport function deleteProperty(object, path) {\n\tif (!isObject(object) || typeof path !== 'string') {\n\t\treturn false;\n\t}\n\n\tconst pathArray = getPathSegments(path);\n\n\tfor (let index = 0; index < pathArray.length; index++) {\n\t\tconst key = pathArray[index];\n\n\t\tassertNotStringIndex(object, key);\n\n\t\tif (index === pathArray.length - 1) {\n\t\t\tdelete object[key];\n\t\t\treturn true;\n\t\t}\n\n\t\tobject = object[key];\n\n\t\tif (!isObject(object)) {\n\t\t\treturn false;\n\t\t}\n\t}\n}\n\nexport function hasProperty(object, path) {\n\tif (!isObject(object) || typeof path !== 'string') {\n\t\treturn false;\n\t}\n\n\tconst pathArray = getPathSegments(path);\n\tif (pathArray.length === 0) {\n\t\treturn false;\n\t}\n\n\tfor (const key of pathArray) {\n\t\tif (!isObject(object) || !(key in object) || isStringIndex(object, key)) {\n\t\t\treturn false;\n\t\t}\n\n\t\tobject = object[key];\n\t}\n\n\treturn true;\n}\n\n// TODO: Backslashes with no effect should not be escaped\nexport function escapePath(path) {\n\tif (typeof path !== 'string') {\n\t\tthrow new TypeError('Expected a string');\n\t}\n\n\treturn path.replaceAll(/[\\\\.[]/g, '\\\\$&');\n}\n\n// The keys returned by Object.entries() for arrays are strings\nfunction entries(value) {\n\tconst result = Object.entries(value);\n\tif (Array.isArray(value)) {\n\t\treturn result.map(([key, value]) => [Number(key), value]);\n\t}\n\n\treturn result;\n}\n\nfunction stringifyPath(pathSegments) {\n\tlet result = '';\n\n\tfor (let [index, segment] of entries(pathSegments)) {\n\t\tif (typeof segment === 'number') {\n\t\t\tresult += `[${segment}]`;\n\t\t} else {\n\t\t\tsegment = escapePath(segment);\n\t\t\tresult += index === 0 ? segment : `.${segment}`;\n\t\t}\n\t}\n\n\treturn result;\n}\n\nfunction * deepKeysIterator(object, currentPath = []) {\n\tif (!isObject(object) || isEmptyObject(object)) {\n\t\tif (currentPath.length > 0) {\n\t\t\tyield stringifyPath(currentPath);\n\t\t}\n\n\t\treturn;\n\t}\n\n\tfor (const [key, value] of entries(object)) {\n\t\tyield * deepKeysIterator(value, [...currentPath, key]);\n\t}\n}\n\nexport function deepKeys(object) {\n\treturn [...deepKeysIterator(object)];\n}\n","import path from 'node:path';\nimport os from 'node:os';\nimport process from 'node:process';\n\nconst homedir = os.homedir();\nconst tmpdir = os.tmpdir();\nconst {env} = process;\n\nconst macos = name => {\n\tconst library = path.join(homedir, 'Library');\n\n\treturn {\n\t\tdata: path.join(library, 'Application Support', name),\n\t\tconfig: path.join(library, 'Preferences', name),\n\t\tcache: path.join(library, 'Caches', name),\n\t\tlog: path.join(library, 'Logs', name),\n\t\ttemp: path.join(tmpdir, name),\n\t};\n};\n\nconst windows = name => {\n\tconst appData = env.APPDATA || path.join(homedir, 'AppData', 'Roaming');\n\tconst localAppData = env.LOCALAPPDATA || path.join(homedir, 'AppData', 'Local');\n\n\treturn {\n\t\t// Data/config/cache/log are invented by me as Windows isn't opinionated about this\n\t\tdata: path.join(localAppData, name, 'Data'),\n\t\tconfig: path.join(appData, name, 'Config'),\n\t\tcache: path.join(localAppData, name, 'Cache'),\n\t\tlog: path.join(localAppData, name, 'Log'),\n\t\ttemp: path.join(tmpdir, name),\n\t};\n};\n\n// https://specifications.freedesktop.org/basedir-spec/basedir-spec-latest.html\nconst linux = name => {\n\tconst username = path.basename(homedir);\n\n\treturn {\n\t\tdata: path.join(env.XDG_DATA_HOME || path.join(homedir, '.local', 'share'), name),\n\t\tconfig: path.join(env.XDG_CONFIG_HOME || path.join(homedir, '.config'), name),\n\t\tcache: path.join(env.XDG_CACHE_HOME || path.join(homedir, '.cache'), name),\n\t\t// https://wiki.debian.org/XDGBaseDirectorySpecification#state\n\t\tlog: path.join(env.XDG_STATE_HOME || path.join(homedir, '.local', 'state'), name),\n\t\ttemp: path.join(tmpdir, username, name),\n\t};\n};\n\nexport default function envPaths(name, {suffix = 'nodejs'} = {}) {\n\tif (typeof name !== 'string') {\n\t\tthrow new TypeError(`Expected a string, got ${typeof name}`);\n\t}\n\n\tif (suffix) {\n\t\t// Add suffix to prevent possible conflict with native apps\n\t\tname += `-${suffix}`;\n\t}\n\n\tif (process.platform === 'darwin') {\n\t\treturn macos(name);\n\t}\n\n\tif (process.platform === 'win32') {\n\t\treturn windows(name);\n\t}\n\n\treturn linux(name);\n}\n","/* IMPORT */\n/* MAIN */\nconst attemptifyAsync = (fn, options) => {\n    const { onError } = options;\n    return function attemptified(...args) {\n        return fn.apply(undefined, args).catch(onError);\n    }; //TSC\n};\n/* EXPORT */\nexport default attemptifyAsync;\n","/* IMPORT */\n/* MAIN */\nconst attemptifySync = (fn, options) => {\n    const { onError } = options;\n    return function attemptified(...args) {\n        try {\n            return fn.apply(undefined, args);\n        }\n        catch (error) {\n            return onError(error);\n        }\n    }; //TSC\n};\n/* EXPORT */\nexport default attemptifySync;\n","/* IMPORT */\nimport { RETRY_INTERVAL } from './constants.js';\n/* MAIN */\nconst retryifyAsync = (fn, options) => {\n    const { isRetriable } = options;\n    return function retryified(options) {\n        const { timeout } = options;\n        const interval = options.interval ?? RETRY_INTERVAL;\n        const timestamp = Date.now() + timeout;\n        return function attempt(...args) {\n            return fn.apply(undefined, args).catch((error) => {\n                if (!isRetriable(error))\n                    throw error;\n                if (Date.now() >= timestamp)\n                    throw error;\n                const delay = Math.round(interval * Math.random());\n                if (delay > 0) {\n                    const delayPromise = new Promise(resolve => setTimeout(resolve, delay));\n                    return delayPromise.then(() => attempt.apply(undefined, args));\n                }\n                else {\n                    return attempt.apply(undefined, args);\n                }\n            });\n        }; //TSC\n    };\n};\n/* EXPORT */\nexport default retryifyAsync;\n","/* MAIN */\nconst RETRY_INTERVAL = 250;\n/* EXPORT */\nexport { RETRY_INTERVAL };\n","/* IMPORT */\n/* MAIN */\nconst retryifySync = (fn, options) => {\n    const { isRetriable } = options;\n    return function retryified(options) {\n        const { timeout } = options;\n        const timestamp = Date.now() + timeout;\n        return function attempt(...args) {\n            while (true) {\n                try {\n                    return fn.apply(undefined, args);\n                }\n                catch (error) {\n                    if (!isRetriable(error))\n                        throw error;\n                    if (Date.now() >= timestamp)\n                        throw error;\n                    continue;\n                }\n            }\n        }; //TSC\n    };\n};\n/* EXPORT */\nexport default retryifySync;\n","/* IMPORT */\nimport { IS_USER_ROOT } from './constants.js';\n/* MAIN */\nconst Handlers = {\n    /* API */\n    isChangeErrorOk: (error) => {\n        if (!Handlers.isNodeError(error))\n            return false;\n        const { code } = error;\n        if (code === 'ENOSYS')\n            return true;\n        if (!IS_USER_ROOT && (code === 'EINVAL' || code === 'EPERM'))\n            return true;\n        return false;\n    },\n    isNodeError: (error) => {\n        return (error instanceof Error);\n    },\n    isRetriableError: (error) => {\n        if (!Handlers.isNodeError(error))\n            return false;\n        const { code } = error;\n        if (code === 'EMFILE' || code === 'ENFILE' || code === 'EAGAIN' || code === 'EBUSY' || code === 'EACCESS' || code === 'EACCES' || code === 'EACCS' || code === 'EPERM')\n            return true;\n        return false;\n    },\n    onChangeError: (error) => {\n        if (!Handlers.isNodeError(error))\n            throw error;\n        if (Handlers.isChangeErrorOk(error))\n            return;\n        throw error;\n    }\n};\n/* EXPORT */\nexport default Handlers;\n","/* IMPORT */\nimport process from 'node:process';\nimport Handlers from './handlers.js';\n/* MAIN */\nconst ATTEMPTIFY_CHANGE_ERROR_OPTIONS = {\n    onError: Handlers.onChangeError\n};\nconst ATTEMPTIFY_NOOP_OPTIONS = {\n    onError: () => undefined\n};\nconst IS_USER_ROOT = (process.getuid ? !process.getuid() : false);\nconst RETRYIFY_OPTIONS = {\n    isRetriable: Handlers.isRetriableError\n};\n/* EXPORT */\nexport { ATTEMPTIFY_CHANGE_ERROR_OPTIONS, ATTEMPTIFY_NOOP_OPTIONS, IS_USER_ROOT, RETRYIFY_OPTIONS };\n","/* IMPORT */\nimport fs from 'node:fs';\nimport { promisify } from 'node:util';\nimport { attemptifyAsync, attemptifySync } from 'stubborn-utils';\nimport { retryifyAsync, retryifySync } from 'stubborn-utils';\nimport { ATTEMPTIFY_CHANGE_ERROR_OPTIONS, ATTEMPTIFY_NOOP_OPTIONS, RETRYIFY_OPTIONS } from './constants.js';\n/* MAIN */\nconst FS = {\n    attempt: {\n        /* ASYNC */\n        chmod: attemptifyAsync(promisify(fs.chmod), ATTEMPTIFY_CHANGE_ERROR_OPTIONS),\n        chown: attemptifyAsync(promisify(fs.chown), ATTEMPTIFY_CHANGE_ERROR_OPTIONS),\n        close: attemptifyAsync(promisify(fs.close), ATTEMPTIFY_NOOP_OPTIONS),\n        fsync: attemptifyAsync(promisify(fs.fsync), ATTEMPTIFY_NOOP_OPTIONS),\n        mkdir: attemptifyAsync(promisify(fs.mkdir), ATTEMPTIFY_NOOP_OPTIONS),\n        realpath: attemptifyAsync(promisify(fs.realpath), ATTEMPTIFY_NOOP_OPTIONS),\n        stat: attemptifyAsync(promisify(fs.stat), ATTEMPTIFY_NOOP_OPTIONS),\n        unlink: attemptifyAsync(promisify(fs.unlink), ATTEMPTIFY_NOOP_OPTIONS),\n        /* SYNC */\n        chmodSync: attemptifySync(fs.chmodSync, ATTEMPTIFY_CHANGE_ERROR_OPTIONS),\n        chownSync: attemptifySync(fs.chownSync, ATTEMPTIFY_CHANGE_ERROR_OPTIONS),\n        closeSync: attemptifySync(fs.closeSync, ATTEMPTIFY_NOOP_OPTIONS),\n        existsSync: attemptifySync(fs.existsSync, ATTEMPTIFY_NOOP_OPTIONS),\n        fsyncSync: attemptifySync(fs.fsync, ATTEMPTIFY_NOOP_OPTIONS),\n        mkdirSync: attemptifySync(fs.mkdirSync, ATTEMPTIFY_NOOP_OPTIONS),\n        realpathSync: attemptifySync(fs.realpathSync, ATTEMPTIFY_NOOP_OPTIONS),\n        statSync: attemptifySync(fs.statSync, ATTEMPTIFY_NOOP_OPTIONS),\n        unlinkSync: attemptifySync(fs.unlinkSync, ATTEMPTIFY_NOOP_OPTIONS)\n    },\n    retry: {\n        /* ASYNC */\n        close: retryifyAsync(promisify(fs.close), RETRYIFY_OPTIONS),\n        fsync: retryifyAsync(promisify(fs.fsync), RETRYIFY_OPTIONS),\n        open: retryifyAsync(promisify(fs.open), RETRYIFY_OPTIONS),\n        readFile: retryifyAsync(promisify(fs.readFile), RETRYIFY_OPTIONS),\n        rename: retryifyAsync(promisify(fs.rename), RETRYIFY_OPTIONS),\n        stat: retryifyAsync(promisify(fs.stat), RETRYIFY_OPTIONS),\n        write: retryifyAsync(promisify(fs.write), RETRYIFY_OPTIONS),\n        writeFile: retryifyAsync(promisify(fs.writeFile), RETRYIFY_OPTIONS),\n        /* SYNC */\n        closeSync: retryifySync(fs.closeSync, RETRYIFY_OPTIONS),\n        fsyncSync: retryifySync(fs.fsyncSync, RETRYIFY_OPTIONS),\n        openSync: retryifySync(fs.openSync, RETRYIFY_OPTIONS),\n        readFileSync: retryifySync(fs.readFileSync, RETRYIFY_OPTIONS),\n        renameSync: retryifySync(fs.renameSync, RETRYIFY_OPTIONS),\n        statSync: retryifySync(fs.statSync, RETRYIFY_OPTIONS),\n        writeSync: retryifySync(fs.writeSync, RETRYIFY_OPTIONS),\n        writeFileSync: retryifySync(fs.writeFileSync, RETRYIFY_OPTIONS)\n    }\n};\n/* EXPORT */\nexport default FS;\n","/* IMPORT */\nimport process from 'node:process';\n/* MAIN */\nconst DEFAULT_ENCODING = 'utf8';\nconst DEFAULT_FILE_MODE = 0o666;\nconst DEFAULT_FOLDER_MODE = 0o777;\nconst DEFAULT_READ_OPTIONS = {};\nconst DEFAULT_WRITE_OPTIONS = {};\nconst DEFAULT_USER_UID = process.geteuid ? process.geteuid() : -1;\nconst DEFAULT_USER_GID = process.getegid ? process.getegid() : -1;\nconst DEFAULT_INTERVAL_ASYNC = 200;\nconst DEFAULT_TIMEOUT_ASYNC = 7500;\nconst DEFAULT_TIMEOUT_SYNC = 1000;\nconst IS_POSIX = !!process.getuid;\nconst IS_USER_ROOT = process.getuid ? !process.getuid() : false;\nconst LIMIT_BASENAME_LENGTH = 128; //TODO: Fetch the real limit from the filesystem //TODO: Fetch the whole-path length limit too\nconst NOOP = () => { };\n/* EXPORT */\nexport { DEFAULT_ENCODING, DEFAULT_FILE_MODE, DEFAULT_FOLDER_MODE, DEFAULT_READ_OPTIONS, DEFAULT_WRITE_OPTIONS, DEFAULT_USER_UID, DEFAULT_USER_GID, DEFAULT_INTERVAL_ASYNC, DEFAULT_TIMEOUT_ASYNC, DEFAULT_TIMEOUT_SYNC, IS_POSIX, IS_USER_ROOT, LIMIT_BASENAME_LENGTH, NOOP };\n","/* IMPORT */\n/* MAIN */\nconst isException = (value) => {\n    return (value instanceof Error) && ('code' in value);\n};\nconst isFunction = (value) => {\n    return (typeof value === 'function');\n};\nconst isString = (value) => {\n    return (typeof value === 'string');\n};\nconst isUndefined = (value) => {\n    return (value === undefined);\n};\n/* EXPORT */\nexport { isException, isFunction, isString, isUndefined };\n","/* IMPORT */\nimport process from 'node:process';\n/* MAIN */\nconst IS_LINUX = (process.platform === 'linux');\nconst IS_WINDOWS = (process.platform === 'win32');\n/* EXPORT */\nexport { IS_LINUX, IS_WINDOWS };\n","/* IMPORT */\nimport { IS_LINUX, IS_WINDOWS } from './constants.js';\n/* MAIN */\n//URL: https://github.com/tapjs/signal-exit/blob/458776d9cf8be89712aa1f7b45bb2163ce15ef4a/src/signals.ts\nconst Signals = ['SIGHUP', 'SIGINT', 'SIGTERM'];\nif (!IS_WINDOWS) {\n    Signals.push('SIGALRM', 'SIGABRT', 'SIGVTALRM', 'SIGXCPU', 'SIGXFSZ', 'SIGUSR2', 'SIGTRAP', 'SIGSYS', 'SIGQUIT', 'SIGIOT');\n}\nif (IS_LINUX) {\n    Signals.push('SIGIO', 'SIGPOLL', 'SIGPWR', 'SIGSTKFLT');\n}\n/* EXPORT */\nexport default Signals;\n","/* IMPORT */\nimport process from 'node:process';\nimport { IS_WINDOWS } from './constants.js';\nimport Signals from './signals.js';\n/* MAIN */\nclass Interceptor {\n    /* CONSTRUCTOR */\n    constructor() {\n        /* VARIABLES */\n        this.callbacks = new Set();\n        this.exited = false;\n        /* API */\n        this.exit = (signal) => {\n            if (this.exited)\n                return;\n            this.exited = true;\n            for (const callback of this.callbacks) {\n                callback();\n            }\n            if (signal) {\n                if (IS_WINDOWS && (signal !== 'SIGINT' && signal !== 'SIGTERM' && signal !== 'SIGKILL')) { // Windows doesn't support POSIX signals, but Node emulates these 3 signals for us\n                    process.kill(process.pid, 'SIGTERM');\n                }\n                else {\n                    process.kill(process.pid, signal);\n                }\n            }\n        };\n        this.hook = () => {\n            process.once('exit', () => this.exit());\n            for (const signal of Signals) {\n                try {\n                    process.once(signal, () => this.exit(signal));\n                }\n                catch {\n                    // Sometimes \"process.once\" can throw...\n                }\n            }\n        };\n        this.register = (callback) => {\n            this.callbacks.add(callback);\n            return () => {\n                this.callbacks.delete(callback);\n            };\n        };\n        this.hook();\n    }\n}\n/* EXPORT */\nexport default new Interceptor();\n","/* IMPORT */\nimport Interceptor from './interceptor.js';\n/* MAIN */\nconst whenExit = Interceptor.register;\n/* EXPORT */\nexport default whenExit;\n","/* IMPORT */\nimport path from 'node:path';\nimport fs from 'stubborn-fs';\nimport whenExit from 'when-exit';\nimport { LIMIT_BASENAME_LENGTH } from '../constants.js';\n/* MAIN */\n//TODO: Maybe publish this as a standalone package\nconst Temp = {\n    /* VARIABLES */\n    store: {}, // filePath => purge\n    /* API */\n    create: (filePath) => {\n        const randomness = `000000${Math.floor(Math.random() * 16777215).toString(16)}`.slice(-6); // 6 random-enough hex characters\n        const timestamp = Date.now().toString().slice(-10); // 10 precise timestamp digits\n        const prefix = 'tmp-';\n        const suffix = `.${prefix}${timestamp}${randomness}`;\n        const tempPath = `${filePath}${suffix}`;\n        return tempPath;\n    },\n    get: (filePath, creator, purge = true) => {\n        const tempPath = Temp.truncate(creator(filePath));\n        if (tempPath in Temp.store)\n            return Temp.get(filePath, creator, purge); // Collision found, try again\n        Temp.store[tempPath] = purge;\n        const disposer = () => delete Temp.store[tempPath];\n        return [tempPath, disposer];\n    },\n    purge: (filePath) => {\n        if (!Temp.store[filePath])\n            return;\n        delete Temp.store[filePath];\n        fs.attempt.unlink(filePath);\n    },\n    purgeSync: (filePath) => {\n        if (!Temp.store[filePath])\n            return;\n        delete Temp.store[filePath];\n        fs.attempt.unlinkSync(filePath);\n    },\n    purgeSyncAll: () => {\n        for (const filePath in Temp.store) {\n            Temp.purgeSync(filePath);\n        }\n    },\n    truncate: (filePath) => {\n        const basename = path.basename(filePath);\n        if (basename.length <= LIMIT_BASENAME_LENGTH)\n            return filePath; //FIXME: Rough and quick attempt at detecting ok lengths\n        const truncable = /^(\\.?)(.*?)((?:\\.[^.]+)?(?:\\.tmp-\\d{10}[a-f0-9]{6})?)$/.exec(basename);\n        if (!truncable)\n            return filePath; //FIXME: No truncable part detected, can't really do much without also changing the parent path, which is unsafe, hoping for the best here\n        const truncationLength = basename.length - LIMIT_BASENAME_LENGTH;\n        return `${filePath.slice(0, -basename.length)}${truncable[1]}${truncable[2].slice(0, -truncationLength)}${truncable[3]}`; //FIXME: The truncable part might be shorter than needed here\n    }\n};\n/* INIT */\nwhenExit(Temp.purgeSyncAll); // Ensuring purgeable temp files are purged on exit\n/* EXPORT */\nexport default Temp;\n","/* IMPORT */\nimport { once } from 'node:events';\nimport { createWriteStream } from 'node:fs';\nimport path from 'node:path';\nimport { Readable } from 'node:stream';\nimport fs from 'stubborn-fs';\nimport { DEFAULT_ENCODING, DEFAULT_FILE_MODE, DEFAULT_FOLDER_MODE, DEFAULT_READ_OPTIONS, DEFAULT_WRITE_OPTIONS, DEFAULT_USER_UID, DEFAULT_USER_GID, DEFAULT_INTERVAL_ASYNC, DEFAULT_TIMEOUT_ASYNC, DEFAULT_TIMEOUT_SYNC, IS_POSIX } from './constants.js';\nimport { isException, isFunction, isString, isUndefined } from './utils/lang.js';\nimport Scheduler from './utils/scheduler.js';\nimport Temp from './utils/temp.js';\nfunction readFile(filePath, options = DEFAULT_READ_OPTIONS) {\n    if (isString(options))\n        return readFile(filePath, { encoding: options });\n    const timeout = options.timeout ?? DEFAULT_TIMEOUT_ASYNC;\n    const retryOptions = { timeout, interval: DEFAULT_INTERVAL_ASYNC };\n    return fs.retry.readFile(retryOptions)(filePath, options);\n}\nfunction readFileSync(filePath, options = DEFAULT_READ_OPTIONS) {\n    if (isString(options))\n        return readFileSync(filePath, { encoding: options });\n    const timeout = options.timeout ?? DEFAULT_TIMEOUT_SYNC;\n    const retryOptions = { timeout };\n    return fs.retry.readFileSync(retryOptions)(filePath, options);\n}\nfunction writeFile(filePath, data, options, callback) {\n    if (isFunction(options))\n        return writeFile(filePath, data, DEFAULT_WRITE_OPTIONS, options);\n    const promise = writeFileAsync(filePath, data, options);\n    if (callback)\n        promise.then(callback, callback);\n    return promise;\n}\nasync function writeFileAsync(filePath, data, options = DEFAULT_WRITE_OPTIONS) {\n    if (isString(options))\n        return writeFileAsync(filePath, data, { encoding: options });\n    const timeout = options.timeout ?? DEFAULT_TIMEOUT_ASYNC;\n    const retryOptions = { timeout, interval: DEFAULT_INTERVAL_ASYNC };\n    let schedulerCustomDisposer = null;\n    let schedulerDisposer = null;\n    let tempDisposer = null;\n    let tempPath = null;\n    let fd = null;\n    try {\n        if (options.schedule)\n            schedulerCustomDisposer = await options.schedule(filePath);\n        schedulerDisposer = await Scheduler.schedule(filePath);\n        const filePathReal = await fs.attempt.realpath(filePath);\n        const filePathExists = !!filePathReal;\n        filePath = filePathReal || filePath;\n        [tempPath, tempDisposer] = Temp.get(filePath, options.tmpCreate || Temp.create, !(options.tmpPurge === false));\n        const useStatChown = IS_POSIX && isUndefined(options.chown);\n        const useStatMode = isUndefined(options.mode);\n        if (filePathExists && (useStatChown || useStatMode)) {\n            const stats = await fs.attempt.stat(filePath);\n            if (stats) {\n                options = { ...options };\n                if (useStatChown) {\n                    options.chown = { uid: stats.uid, gid: stats.gid };\n                }\n                if (useStatMode) {\n                    options.mode = stats.mode;\n                }\n            }\n        }\n        if (!filePathExists) {\n            const parentPath = path.dirname(filePath);\n            await fs.attempt.mkdir(parentPath, {\n                mode: DEFAULT_FOLDER_MODE,\n                recursive: true\n            });\n        }\n        fd = await fs.retry.open(retryOptions)(tempPath, 'w', options.mode || DEFAULT_FILE_MODE);\n        if (options.tmpCreated) {\n            options.tmpCreated(tempPath);\n        }\n        if (isString(data)) {\n            await fs.retry.write(retryOptions)(fd, data, 0, options.encoding || DEFAULT_ENCODING);\n        }\n        else if (data instanceof Readable) {\n            const writeStream = createWriteStream(tempPath, { fd, autoClose: false });\n            const finishPromise = once(writeStream, 'finish');\n            data.pipe(writeStream);\n            await finishPromise;\n        }\n        else if (!isUndefined(data)) {\n            await fs.retry.write(retryOptions)(fd, data, 0, data.length, 0);\n        }\n        if (options.fsync !== false) {\n            if (options.fsyncWait !== false) {\n                await fs.retry.fsync(retryOptions)(fd);\n            }\n            else {\n                fs.attempt.fsync(fd);\n            }\n        }\n        await fs.retry.close(retryOptions)(fd);\n        fd = null;\n        if (options.chown && (options.chown.uid !== DEFAULT_USER_UID || options.chown.gid !== DEFAULT_USER_GID)) {\n            await fs.attempt.chown(tempPath, options.chown.uid, options.chown.gid);\n        }\n        if (options.mode && options.mode !== DEFAULT_FILE_MODE) {\n            await fs.attempt.chmod(tempPath, options.mode);\n        }\n        try {\n            await fs.retry.rename(retryOptions)(tempPath, filePath);\n        }\n        catch (error) {\n            if (!isException(error))\n                throw error;\n            if (error.code !== 'ENAMETOOLONG')\n                throw error;\n            await fs.retry.rename(retryOptions)(tempPath, Temp.truncate(filePath));\n        }\n        tempDisposer();\n        tempPath = null;\n    }\n    finally {\n        if (fd)\n            await fs.attempt.close(fd);\n        if (tempPath)\n            Temp.purge(tempPath);\n        if (schedulerCustomDisposer)\n            schedulerCustomDisposer();\n        if (schedulerDisposer)\n            schedulerDisposer();\n    }\n}\nfunction writeFileSync(filePath, data, options = DEFAULT_WRITE_OPTIONS) {\n    if (isString(options))\n        return writeFileSync(filePath, data, { encoding: options });\n    const timeout = options.timeout ?? DEFAULT_TIMEOUT_SYNC;\n    const retryOptions = { timeout };\n    let tempDisposer = null;\n    let tempPath = null;\n    let fd = null;\n    try {\n        const filePathReal = fs.attempt.realpathSync(filePath);\n        const filePathExists = !!filePathReal;\n        filePath = filePathReal || filePath;\n        [tempPath, tempDisposer] = Temp.get(filePath, options.tmpCreate || Temp.create, !(options.tmpPurge === false));\n        const useStatChown = IS_POSIX && isUndefined(options.chown);\n        const useStatMode = isUndefined(options.mode);\n        if (filePathExists && (useStatChown || useStatMode)) {\n            const stats = fs.attempt.statSync(filePath);\n            if (stats) {\n                options = { ...options };\n                if (useStatChown) {\n                    options.chown = { uid: stats.uid, gid: stats.gid };\n                }\n                if (useStatMode) {\n                    options.mode = stats.mode;\n                }\n            }\n        }\n        if (!filePathExists) {\n            const parentPath = path.dirname(filePath);\n            fs.attempt.mkdirSync(parentPath, {\n                mode: DEFAULT_FOLDER_MODE,\n                recursive: true\n            });\n        }\n        fd = fs.retry.openSync(retryOptions)(tempPath, 'w', options.mode || DEFAULT_FILE_MODE);\n        if (options.tmpCreated) {\n            options.tmpCreated(tempPath);\n        }\n        if (isString(data)) {\n            fs.retry.writeSync(retryOptions)(fd, data, 0, options.encoding || DEFAULT_ENCODING);\n        }\n        else if (!isUndefined(data)) {\n            fs.retry.writeSync(retryOptions)(fd, data, 0, data.length, 0);\n        }\n        if (options.fsync !== false) {\n            if (options.fsyncWait !== false) {\n                fs.retry.fsyncSync(retryOptions)(fd);\n            }\n            else {\n                fs.attempt.fsync(fd);\n            }\n        }\n        fs.retry.closeSync(retryOptions)(fd);\n        fd = null;\n        if (options.chown && (options.chown.uid !== DEFAULT_USER_UID || options.chown.gid !== DEFAULT_USER_GID)) {\n            fs.attempt.chownSync(tempPath, options.chown.uid, options.chown.gid);\n        }\n        if (options.mode && options.mode !== DEFAULT_FILE_MODE) {\n            fs.attempt.chmodSync(tempPath, options.mode);\n        }\n        try {\n            fs.retry.renameSync(retryOptions)(tempPath, filePath);\n        }\n        catch (error) {\n            if (!isException(error))\n                throw error;\n            if (error.code !== 'ENAMETOOLONG')\n                throw error;\n            fs.retry.renameSync(retryOptions)(tempPath, Temp.truncate(filePath));\n        }\n        tempDisposer();\n        tempPath = null;\n    }\n    finally {\n        if (fd)\n            fs.attempt.closeSync(fd);\n        if (tempPath)\n            Temp.purge(tempPath);\n    }\n}\n/* EXPORT */\nexport { readFile, readFileSync, writeFile, writeFileSync };\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.regexpCode = exports.getEsmExportName = exports.getProperty = exports.safeStringify = exports.stringify = exports.strConcat = exports.addCodeArg = exports.str = exports._ = exports.nil = exports._Code = exports.Name = exports.IDENTIFIER = exports._CodeOrName = void 0;\n// eslint-disable-next-line @typescript-eslint/no-extraneous-class\nclass _CodeOrName {\n}\nexports._CodeOrName = _CodeOrName;\nexports.IDENTIFIER = /^[a-z$_][a-z$_0-9]*$/i;\nclass Name extends _CodeOrName {\n    constructor(s) {\n        super();\n        if (!exports.IDENTIFIER.test(s))\n            throw new Error(\"CodeGen: name must be a valid identifier\");\n        this.str = s;\n    }\n    toString() {\n        return this.str;\n    }\n    emptyStr() {\n        return false;\n    }\n    get names() {\n        return { [this.str]: 1 };\n    }\n}\nexports.Name = Name;\nclass _Code extends _CodeOrName {\n    constructor(code) {\n        super();\n        this._items = typeof code === \"string\" ? [code] : code;\n    }\n    toString() {\n        return this.str;\n    }\n    emptyStr() {\n        if (this._items.length > 1)\n            return false;\n        const item = this._items[0];\n        return item === \"\" || item === '\"\"';\n    }\n    get str() {\n        var _a;\n        return ((_a = this._str) !== null && _a !== void 0 ? _a : (this._str = this._items.reduce((s, c) => `${s}${c}`, \"\")));\n    }\n    get names() {\n        var _a;\n        return ((_a = this._names) !== null && _a !== void 0 ? _a : (this._names = this._items.reduce((names, c) => {\n            if (c instanceof Name)\n                names[c.str] = (names[c.str] || 0) + 1;\n            return names;\n        }, {})));\n    }\n}\nexports._Code = _Code;\nexports.nil = new _Code(\"\");\nfunction _(strs, ...args) {\n    const code = [strs[0]];\n    let i = 0;\n    while (i < args.length) {\n        addCodeArg(code, args[i]);\n        code.push(strs[++i]);\n    }\n    return new _Code(code);\n}\nexports._ = _;\nconst plus = new _Code(\"+\");\nfunction str(strs, ...args) {\n    const expr = [safeStringify(strs[0])];\n    let i = 0;\n    while (i < args.length) {\n        expr.push(plus);\n        addCodeArg(expr, args[i]);\n        expr.push(plus, safeStringify(strs[++i]));\n    }\n    optimize(expr);\n    return new _Code(expr);\n}\nexports.str = str;\nfunction addCodeArg(code, arg) {\n    if (arg instanceof _Code)\n        code.push(...arg._items);\n    else if (arg instanceof Name)\n        code.push(arg);\n    else\n        code.push(interpolate(arg));\n}\nexports.addCodeArg = addCodeArg;\nfunction optimize(expr) {\n    let i = 1;\n    while (i < expr.length - 1) {\n        if (expr[i] === plus) {\n            const res = mergeExprItems(expr[i - 1], expr[i + 1]);\n            if (res !== undefined) {\n                expr.splice(i - 1, 3, res);\n                continue;\n            }\n            expr[i++] = \"+\";\n        }\n        i++;\n    }\n}\nfunction mergeExprItems(a, b) {\n    if (b === '\"\"')\n        return a;\n    if (a === '\"\"')\n        return b;\n    if (typeof a == \"string\") {\n        if (b instanceof Name || a[a.length - 1] !== '\"')\n            return;\n        if (typeof b != \"string\")\n            return `${a.slice(0, -1)}${b}\"`;\n        if (b[0] === '\"')\n            return a.slice(0, -1) + b.slice(1);\n        return;\n    }\n    if (typeof b == \"string\" && b[0] === '\"' && !(a instanceof Name))\n        return `\"${a}${b.slice(1)}`;\n    return;\n}\nfunction strConcat(c1, c2) {\n    return c2.emptyStr() ? c1 : c1.emptyStr() ? c2 : str `${c1}${c2}`;\n}\nexports.strConcat = strConcat;\n// TODO do not allow arrays here\nfunction interpolate(x) {\n    return typeof x == \"number\" || typeof x == \"boolean\" || x === null\n        ? x\n        : safeStringify(Array.isArray(x) ? x.join(\",\") : x);\n}\nfunction stringify(x) {\n    return new _Code(safeStringify(x));\n}\nexports.stringify = stringify;\nfunction safeStringify(x) {\n    return JSON.stringify(x)\n        .replace(/\\u2028/g, \"\\\\u2028\")\n        .replace(/\\u2029/g, \"\\\\u2029\");\n}\nexports.safeStringify = safeStringify;\nfunction getProperty(key) {\n    return typeof key == \"string\" && exports.IDENTIFIER.test(key) ? new _Code(`.${key}`) : _ `[${key}]`;\n}\nexports.getProperty = getProperty;\n//Does best effort to format the name properly\nfunction getEsmExportName(key) {\n    if (typeof key == \"string\" && exports.IDENTIFIER.test(key)) {\n        return new _Code(`${key}`);\n    }\n    throw new Error(`CodeGen: invalid export name: ${key}, use explicit $id name mapping`);\n}\nexports.getEsmExportName = getEsmExportName;\nfunction regexpCode(rx) {\n    return new _Code(rx.toString());\n}\nexports.regexpCode = regexpCode;\n//# sourceMappingURL=code.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ValueScope = exports.ValueScopeName = exports.Scope = exports.varKinds = exports.UsedValueState = void 0;\nconst code_1 = require(\"./code\");\nclass ValueError extends Error {\n    constructor(name) {\n        super(`CodeGen: \"code\" for ${name} not defined`);\n        this.value = name.value;\n    }\n}\nvar UsedValueState;\n(function (UsedValueState) {\n    UsedValueState[UsedValueState[\"Started\"] = 0] = \"Started\";\n    UsedValueState[UsedValueState[\"Completed\"] = 1] = \"Completed\";\n})(UsedValueState || (exports.UsedValueState = UsedValueState = {}));\nexports.varKinds = {\n    const: new code_1.Name(\"const\"),\n    let: new code_1.Name(\"let\"),\n    var: new code_1.Name(\"var\"),\n};\nclass Scope {\n    constructor({ prefixes, parent } = {}) {\n        this._names = {};\n        this._prefixes = prefixes;\n        this._parent = parent;\n    }\n    toName(nameOrPrefix) {\n        return nameOrPrefix instanceof code_1.Name ? nameOrPrefix : this.name(nameOrPrefix);\n    }\n    name(prefix) {\n        return new code_1.Name(this._newName(prefix));\n    }\n    _newName(prefix) {\n        const ng = this._names[prefix] || this._nameGroup(prefix);\n        return `${prefix}${ng.index++}`;\n    }\n    _nameGroup(prefix) {\n        var _a, _b;\n        if (((_b = (_a = this._parent) === null || _a === void 0 ? void 0 : _a._prefixes) === null || _b === void 0 ? void 0 : _b.has(prefix)) || (this._prefixes && !this._prefixes.has(prefix))) {\n            throw new Error(`CodeGen: prefix \"${prefix}\" is not allowed in this scope`);\n        }\n        return (this._names[prefix] = { prefix, index: 0 });\n    }\n}\nexports.Scope = Scope;\nclass ValueScopeName extends code_1.Name {\n    constructor(prefix, nameStr) {\n        super(nameStr);\n        this.prefix = prefix;\n    }\n    setValue(value, { property, itemIndex }) {\n        this.value = value;\n        this.scopePath = (0, code_1._) `.${new code_1.Name(property)}[${itemIndex}]`;\n    }\n}\nexports.ValueScopeName = ValueScopeName;\nconst line = (0, code_1._) `\\n`;\nclass ValueScope extends Scope {\n    constructor(opts) {\n        super(opts);\n        this._values = {};\n        this._scope = opts.scope;\n        this.opts = { ...opts, _n: opts.lines ? line : code_1.nil };\n    }\n    get() {\n        return this._scope;\n    }\n    name(prefix) {\n        return new ValueScopeName(prefix, this._newName(prefix));\n    }\n    value(nameOrPrefix, value) {\n        var _a;\n        if (value.ref === undefined)\n            throw new Error(\"CodeGen: ref must be passed in value\");\n        const name = this.toName(nameOrPrefix);\n        const { prefix } = name;\n        const valueKey = (_a = value.key) !== null && _a !== void 0 ? _a : value.ref;\n        let vs = this._values[prefix];\n        if (vs) {\n            const _name = vs.get(valueKey);\n            if (_name)\n                return _name;\n        }\n        else {\n            vs = this._values[prefix] = new Map();\n        }\n        vs.set(valueKey, name);\n        const s = this._scope[prefix] || (this._scope[prefix] = []);\n        const itemIndex = s.length;\n        s[itemIndex] = value.ref;\n        name.setValue(value, { property: prefix, itemIndex });\n        return name;\n    }\n    getValue(prefix, keyOrRef) {\n        const vs = this._values[prefix];\n        if (!vs)\n            return;\n        return vs.get(keyOrRef);\n    }\n    scopeRefs(scopeName, values = this._values) {\n        return this._reduceValues(values, (name) => {\n            if (name.scopePath === undefined)\n                throw new Error(`CodeGen: name \"${name}\" has no value`);\n            return (0, code_1._) `${scopeName}${name.scopePath}`;\n        });\n    }\n    scopeCode(values = this._values, usedValues, getCode) {\n        return this._reduceValues(values, (name) => {\n            if (name.value === undefined)\n                throw new Error(`CodeGen: name \"${name}\" has no value`);\n            return name.value.code;\n        }, usedValues, getCode);\n    }\n    _reduceValues(values, valueCode, usedValues = {}, getCode) {\n        let code = code_1.nil;\n        for (const prefix in values) {\n            const vs = values[prefix];\n            if (!vs)\n                continue;\n            const nameSet = (usedValues[prefix] = usedValues[prefix] || new Map());\n            vs.forEach((name) => {\n                if (nameSet.has(name))\n                    return;\n                nameSet.set(name, UsedValueState.Started);\n                let c = valueCode(name);\n                if (c) {\n                    const def = this.opts.es5 ? exports.varKinds.var : exports.varKinds.const;\n                    code = (0, code_1._) `${code}${def} ${name} = ${c};${this.opts._n}`;\n                }\n                else if ((c = getCode === null || getCode === void 0 ? void 0 : getCode(name))) {\n                    code = (0, code_1._) `${code}${c}${this.opts._n}`;\n                }\n                else {\n                    throw new ValueError(name);\n                }\n                nameSet.set(name, UsedValueState.Completed);\n            });\n        }\n        return code;\n    }\n}\nexports.ValueScope = ValueScope;\n//# sourceMappingURL=scope.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.or = exports.and = exports.not = exports.CodeGen = exports.operators = exports.varKinds = exports.ValueScopeName = exports.ValueScope = exports.Scope = exports.Name = exports.regexpCode = exports.stringify = exports.getProperty = exports.nil = exports.strConcat = exports.str = exports._ = void 0;\nconst code_1 = require(\"./code\");\nconst scope_1 = require(\"./scope\");\nvar code_2 = require(\"./code\");\nObject.defineProperty(exports, \"_\", { enumerable: true, get: function () { return code_2._; } });\nObject.defineProperty(exports, \"str\", { enumerable: true, get: function () { return code_2.str; } });\nObject.defineProperty(exports, \"strConcat\", { enumerable: true, get: function () { return code_2.strConcat; } });\nObject.defineProperty(exports, \"nil\", { enumerable: true, get: function () { return code_2.nil; } });\nObject.defineProperty(exports, \"getProperty\", { enumerable: true, get: function () { return code_2.getProperty; } });\nObject.defineProperty(exports, \"stringify\", { enumerable: true, get: function () { return code_2.stringify; } });\nObject.defineProperty(exports, \"regexpCode\", { enumerable: true, get: function () { return code_2.regexpCode; } });\nObject.defineProperty(exports, \"Name\", { enumerable: true, get: function () { return code_2.Name; } });\nvar scope_2 = require(\"./scope\");\nObject.defineProperty(exports, \"Scope\", { enumerable: true, get: function () { return scope_2.Scope; } });\nObject.defineProperty(exports, \"ValueScope\", { enumerable: true, get: function () { return scope_2.ValueScope; } });\nObject.defineProperty(exports, \"ValueScopeName\", { enumerable: true, get: function () { return scope_2.ValueScopeName; } });\nObject.defineProperty(exports, \"varKinds\", { enumerable: true, get: function () { return scope_2.varKinds; } });\nexports.operators = {\n    GT: new code_1._Code(\">\"),\n    GTE: new code_1._Code(\">=\"),\n    LT: new code_1._Code(\"<\"),\n    LTE: new code_1._Code(\"<=\"),\n    EQ: new code_1._Code(\"===\"),\n    NEQ: new code_1._Code(\"!==\"),\n    NOT: new code_1._Code(\"!\"),\n    OR: new code_1._Code(\"||\"),\n    AND: new code_1._Code(\"&&\"),\n    ADD: new code_1._Code(\"+\"),\n};\nclass Node {\n    optimizeNodes() {\n        return this;\n    }\n    optimizeNames(_names, _constants) {\n        return this;\n    }\n}\nclass Def extends Node {\n    constructor(varKind, name, rhs) {\n        super();\n        this.varKind = varKind;\n        this.name = name;\n        this.rhs = rhs;\n    }\n    render({ es5, _n }) {\n        const varKind = es5 ? scope_1.varKinds.var : this.varKind;\n        const rhs = this.rhs === undefined ? \"\" : ` = ${this.rhs}`;\n        return `${varKind} ${this.name}${rhs};` + _n;\n    }\n    optimizeNames(names, constants) {\n        if (!names[this.name.str])\n            return;\n        if (this.rhs)\n            this.rhs = optimizeExpr(this.rhs, names, constants);\n        return this;\n    }\n    get names() {\n        return this.rhs instanceof code_1._CodeOrName ? this.rhs.names : {};\n    }\n}\nclass Assign extends Node {\n    constructor(lhs, rhs, sideEffects) {\n        super();\n        this.lhs = lhs;\n        this.rhs = rhs;\n        this.sideEffects = sideEffects;\n    }\n    render({ _n }) {\n        return `${this.lhs} = ${this.rhs};` + _n;\n    }\n    optimizeNames(names, constants) {\n        if (this.lhs instanceof code_1.Name && !names[this.lhs.str] && !this.sideEffects)\n            return;\n        this.rhs = optimizeExpr(this.rhs, names, constants);\n        return this;\n    }\n    get names() {\n        const names = this.lhs instanceof code_1.Name ? {} : { ...this.lhs.names };\n        return addExprNames(names, this.rhs);\n    }\n}\nclass AssignOp extends Assign {\n    constructor(lhs, op, rhs, sideEffects) {\n        super(lhs, rhs, sideEffects);\n        this.op = op;\n    }\n    render({ _n }) {\n        return `${this.lhs} ${this.op}= ${this.rhs};` + _n;\n    }\n}\nclass Label extends Node {\n    constructor(label) {\n        super();\n        this.label = label;\n        this.names = {};\n    }\n    render({ _n }) {\n        return `${this.label}:` + _n;\n    }\n}\nclass Break extends Node {\n    constructor(label) {\n        super();\n        this.label = label;\n        this.names = {};\n    }\n    render({ _n }) {\n        const label = this.label ? ` ${this.label}` : \"\";\n        return `break${label};` + _n;\n    }\n}\nclass Throw extends Node {\n    constructor(error) {\n        super();\n        this.error = error;\n    }\n    render({ _n }) {\n        return `throw ${this.error};` + _n;\n    }\n    get names() {\n        return this.error.names;\n    }\n}\nclass AnyCode extends Node {\n    constructor(code) {\n        super();\n        this.code = code;\n    }\n    render({ _n }) {\n        return `${this.code};` + _n;\n    }\n    optimizeNodes() {\n        return `${this.code}` ? this : undefined;\n    }\n    optimizeNames(names, constants) {\n        this.code = optimizeExpr(this.code, names, constants);\n        return this;\n    }\n    get names() {\n        return this.code instanceof code_1._CodeOrName ? this.code.names : {};\n    }\n}\nclass ParentNode extends Node {\n    constructor(nodes = []) {\n        super();\n        this.nodes = nodes;\n    }\n    render(opts) {\n        return this.nodes.reduce((code, n) => code + n.render(opts), \"\");\n    }\n    optimizeNodes() {\n        const { nodes } = this;\n        let i = nodes.length;\n        while (i--) {\n            const n = nodes[i].optimizeNodes();\n            if (Array.isArray(n))\n                nodes.splice(i, 1, ...n);\n            else if (n)\n                nodes[i] = n;\n            else\n                nodes.splice(i, 1);\n        }\n        return nodes.length > 0 ? this : undefined;\n    }\n    optimizeNames(names, constants) {\n        const { nodes } = this;\n        let i = nodes.length;\n        while (i--) {\n            // iterating backwards improves 1-pass optimization\n            const n = nodes[i];\n            if (n.optimizeNames(names, constants))\n                continue;\n            subtractNames(names, n.names);\n            nodes.splice(i, 1);\n        }\n        return nodes.length > 0 ? this : undefined;\n    }\n    get names() {\n        return this.nodes.reduce((names, n) => addNames(names, n.names), {});\n    }\n}\nclass BlockNode extends ParentNode {\n    render(opts) {\n        return \"{\" + opts._n + super.render(opts) + \"}\" + opts._n;\n    }\n}\nclass Root extends ParentNode {\n}\nclass Else extends BlockNode {\n}\nElse.kind = \"else\";\nclass If extends BlockNode {\n    constructor(condition, nodes) {\n        super(nodes);\n        this.condition = condition;\n    }\n    render(opts) {\n        let code = `if(${this.condition})` + super.render(opts);\n        if (this.else)\n            code += \"else \" + this.else.render(opts);\n        return code;\n    }\n    optimizeNodes() {\n        super.optimizeNodes();\n        const cond = this.condition;\n        if (cond === true)\n            return this.nodes; // else is ignored here\n        let e = this.else;\n        if (e) {\n            const ns = e.optimizeNodes();\n            e = this.else = Array.isArray(ns) ? new Else(ns) : ns;\n        }\n        if (e) {\n            if (cond === false)\n                return e instanceof If ? e : e.nodes;\n            if (this.nodes.length)\n                return this;\n            return new If(not(cond), e instanceof If ? [e] : e.nodes);\n        }\n        if (cond === false || !this.nodes.length)\n            return undefined;\n        return this;\n    }\n    optimizeNames(names, constants) {\n        var _a;\n        this.else = (_a = this.else) === null || _a === void 0 ? void 0 : _a.optimizeNames(names, constants);\n        if (!(super.optimizeNames(names, constants) || this.else))\n            return;\n        this.condition = optimizeExpr(this.condition, names, constants);\n        return this;\n    }\n    get names() {\n        const names = super.names;\n        addExprNames(names, this.condition);\n        if (this.else)\n            addNames(names, this.else.names);\n        return names;\n    }\n}\nIf.kind = \"if\";\nclass For extends BlockNode {\n}\nFor.kind = \"for\";\nclass ForLoop extends For {\n    constructor(iteration) {\n        super();\n        this.iteration = iteration;\n    }\n    render(opts) {\n        return `for(${this.iteration})` + super.render(opts);\n    }\n    optimizeNames(names, constants) {\n        if (!super.optimizeNames(names, constants))\n            return;\n        this.iteration = optimizeExpr(this.iteration, names, constants);\n        return this;\n    }\n    get names() {\n        return addNames(super.names, this.iteration.names);\n    }\n}\nclass ForRange extends For {\n    constructor(varKind, name, from, to) {\n        super();\n        this.varKind = varKind;\n        this.name = name;\n        this.from = from;\n        this.to = to;\n    }\n    render(opts) {\n        const varKind = opts.es5 ? scope_1.varKinds.var : this.varKind;\n        const { name, from, to } = this;\n        return `for(${varKind} ${name}=${from}; ${name}<${to}; ${name}++)` + super.render(opts);\n    }\n    get names() {\n        const names = addExprNames(super.names, this.from);\n        return addExprNames(names, this.to);\n    }\n}\nclass ForIter extends For {\n    constructor(loop, varKind, name, iterable) {\n        super();\n        this.loop = loop;\n        this.varKind = varKind;\n        this.name = name;\n        this.iterable = iterable;\n    }\n    render(opts) {\n        return `for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})` + super.render(opts);\n    }\n    optimizeNames(names, constants) {\n        if (!super.optimizeNames(names, constants))\n            return;\n        this.iterable = optimizeExpr(this.iterable, names, constants);\n        return this;\n    }\n    get names() {\n        return addNames(super.names, this.iterable.names);\n    }\n}\nclass Func extends BlockNode {\n    constructor(name, args, async) {\n        super();\n        this.name = name;\n        this.args = args;\n        this.async = async;\n    }\n    render(opts) {\n        const _async = this.async ? \"async \" : \"\";\n        return `${_async}function ${this.name}(${this.args})` + super.render(opts);\n    }\n}\nFunc.kind = \"func\";\nclass Return extends ParentNode {\n    render(opts) {\n        return \"return \" + super.render(opts);\n    }\n}\nReturn.kind = \"return\";\nclass Try extends BlockNode {\n    render(opts) {\n        let code = \"try\" + super.render(opts);\n        if (this.catch)\n            code += this.catch.render(opts);\n        if (this.finally)\n            code += this.finally.render(opts);\n        return code;\n    }\n    optimizeNodes() {\n        var _a, _b;\n        super.optimizeNodes();\n        (_a = this.catch) === null || _a === void 0 ? void 0 : _a.optimizeNodes();\n        (_b = this.finally) === null || _b === void 0 ? void 0 : _b.optimizeNodes();\n        return this;\n    }\n    optimizeNames(names, constants) {\n        var _a, _b;\n        super.optimizeNames(names, constants);\n        (_a = this.catch) === null || _a === void 0 ? void 0 : _a.optimizeNames(names, constants);\n        (_b = this.finally) === null || _b === void 0 ? void 0 : _b.optimizeNames(names, constants);\n        return this;\n    }\n    get names() {\n        const names = super.names;\n        if (this.catch)\n            addNames(names, this.catch.names);\n        if (this.finally)\n            addNames(names, this.finally.names);\n        return names;\n    }\n}\nclass Catch extends BlockNode {\n    constructor(error) {\n        super();\n        this.error = error;\n    }\n    render(opts) {\n        return `catch(${this.error})` + super.render(opts);\n    }\n}\nCatch.kind = \"catch\";\nclass Finally extends BlockNode {\n    render(opts) {\n        return \"finally\" + super.render(opts);\n    }\n}\nFinally.kind = \"finally\";\nclass CodeGen {\n    constructor(extScope, opts = {}) {\n        this._values = {};\n        this._blockStarts = [];\n        this._constants = {};\n        this.opts = { ...opts, _n: opts.lines ? \"\\n\" : \"\" };\n        this._extScope = extScope;\n        this._scope = new scope_1.Scope({ parent: extScope });\n        this._nodes = [new Root()];\n    }\n    toString() {\n        return this._root.render(this.opts);\n    }\n    // returns unique name in the internal scope\n    name(prefix) {\n        return this._scope.name(prefix);\n    }\n    // reserves unique name in the external scope\n    scopeName(prefix) {\n        return this._extScope.name(prefix);\n    }\n    // reserves unique name in the external scope and assigns value to it\n    scopeValue(prefixOrName, value) {\n        const name = this._extScope.value(prefixOrName, value);\n        const vs = this._values[name.prefix] || (this._values[name.prefix] = new Set());\n        vs.add(name);\n        return name;\n    }\n    getScopeValue(prefix, keyOrRef) {\n        return this._extScope.getValue(prefix, keyOrRef);\n    }\n    // return code that assigns values in the external scope to the names that are used internally\n    // (same names that were returned by gen.scopeName or gen.scopeValue)\n    scopeRefs(scopeName) {\n        return this._extScope.scopeRefs(scopeName, this._values);\n    }\n    scopeCode() {\n        return this._extScope.scopeCode(this._values);\n    }\n    _def(varKind, nameOrPrefix, rhs, constant) {\n        const name = this._scope.toName(nameOrPrefix);\n        if (rhs !== undefined && constant)\n            this._constants[name.str] = rhs;\n        this._leafNode(new Def(varKind, name, rhs));\n        return name;\n    }\n    // `const` declaration (`var` in es5 mode)\n    const(nameOrPrefix, rhs, _constant) {\n        return this._def(scope_1.varKinds.const, nameOrPrefix, rhs, _constant);\n    }\n    // `let` declaration with optional assignment (`var` in es5 mode)\n    let(nameOrPrefix, rhs, _constant) {\n        return this._def(scope_1.varKinds.let, nameOrPrefix, rhs, _constant);\n    }\n    // `var` declaration with optional assignment\n    var(nameOrPrefix, rhs, _constant) {\n        return this._def(scope_1.varKinds.var, nameOrPrefix, rhs, _constant);\n    }\n    // assignment code\n    assign(lhs, rhs, sideEffects) {\n        return this._leafNode(new Assign(lhs, rhs, sideEffects));\n    }\n    // `+=` code\n    add(lhs, rhs) {\n        return this._leafNode(new AssignOp(lhs, exports.operators.ADD, rhs));\n    }\n    // appends passed SafeExpr to code or executes Block\n    code(c) {\n        if (typeof c == \"function\")\n            c();\n        else if (c !== code_1.nil)\n            this._leafNode(new AnyCode(c));\n        return this;\n    }\n    // returns code for object literal for the passed argument list of key-value pairs\n    object(...keyValues) {\n        const code = [\"{\"];\n        for (const [key, value] of keyValues) {\n            if (code.length > 1)\n                code.push(\",\");\n            code.push(key);\n            if (key !== value || this.opts.es5) {\n                code.push(\":\");\n                (0, code_1.addCodeArg)(code, value);\n            }\n        }\n        code.push(\"}\");\n        return new code_1._Code(code);\n    }\n    // `if` clause (or statement if `thenBody` and, optionally, `elseBody` are passed)\n    if(condition, thenBody, elseBody) {\n        this._blockNode(new If(condition));\n        if (thenBody && elseBody) {\n            this.code(thenBody).else().code(elseBody).endIf();\n        }\n        else if (thenBody) {\n            this.code(thenBody).endIf();\n        }\n        else if (elseBody) {\n            throw new Error('CodeGen: \"else\" body without \"then\" body');\n        }\n        return this;\n    }\n    // `else if` clause - invalid without `if` or after `else` clauses\n    elseIf(condition) {\n        return this._elseNode(new If(condition));\n    }\n    // `else` clause - only valid after `if` or `else if` clauses\n    else() {\n        return this._elseNode(new Else());\n    }\n    // end `if` statement (needed if gen.if was used only with condition)\n    endIf() {\n        return this._endBlockNode(If, Else);\n    }\n    _for(node, forBody) {\n        this._blockNode(node);\n        if (forBody)\n            this.code(forBody).endFor();\n        return this;\n    }\n    // a generic `for` clause (or statement if `forBody` is passed)\n    for(iteration, forBody) {\n        return this._for(new ForLoop(iteration), forBody);\n    }\n    // `for` statement for a range of values\n    forRange(nameOrPrefix, from, to, forBody, varKind = this.opts.es5 ? scope_1.varKinds.var : scope_1.varKinds.let) {\n        const name = this._scope.toName(nameOrPrefix);\n        return this._for(new ForRange(varKind, name, from, to), () => forBody(name));\n    }\n    // `for-of` statement (in es5 mode replace with a normal for loop)\n    forOf(nameOrPrefix, iterable, forBody, varKind = scope_1.varKinds.const) {\n        const name = this._scope.toName(nameOrPrefix);\n        if (this.opts.es5) {\n            const arr = iterable instanceof code_1.Name ? iterable : this.var(\"_arr\", iterable);\n            return this.forRange(\"_i\", 0, (0, code_1._) `${arr}.length`, (i) => {\n                this.var(name, (0, code_1._) `${arr}[${i}]`);\n                forBody(name);\n            });\n        }\n        return this._for(new ForIter(\"of\", varKind, name, iterable), () => forBody(name));\n    }\n    // `for-in` statement.\n    // With option `ownProperties` replaced with a `for-of` loop for object keys\n    forIn(nameOrPrefix, obj, forBody, varKind = this.opts.es5 ? scope_1.varKinds.var : scope_1.varKinds.const) {\n        if (this.opts.ownProperties) {\n            return this.forOf(nameOrPrefix, (0, code_1._) `Object.keys(${obj})`, forBody);\n        }\n        const name = this._scope.toName(nameOrPrefix);\n        return this._for(new ForIter(\"in\", varKind, name, obj), () => forBody(name));\n    }\n    // end `for` loop\n    endFor() {\n        return this._endBlockNode(For);\n    }\n    // `label` statement\n    label(label) {\n        return this._leafNode(new Label(label));\n    }\n    // `break` statement\n    break(label) {\n        return this._leafNode(new Break(label));\n    }\n    // `return` statement\n    return(value) {\n        const node = new Return();\n        this._blockNode(node);\n        this.code(value);\n        if (node.nodes.length !== 1)\n            throw new Error('CodeGen: \"return\" should have one node');\n        return this._endBlockNode(Return);\n    }\n    // `try` statement\n    try(tryBody, catchCode, finallyCode) {\n        if (!catchCode && !finallyCode)\n            throw new Error('CodeGen: \"try\" without \"catch\" and \"finally\"');\n        const node = new Try();\n        this._blockNode(node);\n        this.code(tryBody);\n        if (catchCode) {\n            const error = this.name(\"e\");\n            this._currNode = node.catch = new Catch(error);\n            catchCode(error);\n        }\n        if (finallyCode) {\n            this._currNode = node.finally = new Finally();\n            this.code(finallyCode);\n        }\n        return this._endBlockNode(Catch, Finally);\n    }\n    // `throw` statement\n    throw(error) {\n        return this._leafNode(new Throw(error));\n    }\n    // start self-balancing block\n    block(body, nodeCount) {\n        this._blockStarts.push(this._nodes.length);\n        if (body)\n            this.code(body).endBlock(nodeCount);\n        return this;\n    }\n    // end the current self-balancing block\n    endBlock(nodeCount) {\n        const len = this._blockStarts.pop();\n        if (len === undefined)\n            throw new Error(\"CodeGen: not in self-balancing block\");\n        const toClose = this._nodes.length - len;\n        if (toClose < 0 || (nodeCount !== undefined && toClose !== nodeCount)) {\n            throw new Error(`CodeGen: wrong number of nodes: ${toClose} vs ${nodeCount} expected`);\n        }\n        this._nodes.length = len;\n        return this;\n    }\n    // `function` heading (or definition if funcBody is passed)\n    func(name, args = code_1.nil, async, funcBody) {\n        this._blockNode(new Func(name, args, async));\n        if (funcBody)\n            this.code(funcBody).endFunc();\n        return this;\n    }\n    // end function definition\n    endFunc() {\n        return this._endBlockNode(Func);\n    }\n    optimize(n = 1) {\n        while (n-- > 0) {\n            this._root.optimizeNodes();\n            this._root.optimizeNames(this._root.names, this._constants);\n        }\n    }\n    _leafNode(node) {\n        this._currNode.nodes.push(node);\n        return this;\n    }\n    _blockNode(node) {\n        this._currNode.nodes.push(node);\n        this._nodes.push(node);\n    }\n    _endBlockNode(N1, N2) {\n        const n = this._currNode;\n        if (n instanceof N1 || (N2 && n instanceof N2)) {\n            this._nodes.pop();\n            return this;\n        }\n        throw new Error(`CodeGen: not in block \"${N2 ? `${N1.kind}/${N2.kind}` : N1.kind}\"`);\n    }\n    _elseNode(node) {\n        const n = this._currNode;\n        if (!(n instanceof If)) {\n            throw new Error('CodeGen: \"else\" without \"if\"');\n        }\n        this._currNode = n.else = node;\n        return this;\n    }\n    get _root() {\n        return this._nodes[0];\n    }\n    get _currNode() {\n        const ns = this._nodes;\n        return ns[ns.length - 1];\n    }\n    set _currNode(node) {\n        const ns = this._nodes;\n        ns[ns.length - 1] = node;\n    }\n}\nexports.CodeGen = CodeGen;\nfunction addNames(names, from) {\n    for (const n in from)\n        names[n] = (names[n] || 0) + (from[n] || 0);\n    return names;\n}\nfunction addExprNames(names, from) {\n    return from instanceof code_1._CodeOrName ? addNames(names, from.names) : names;\n}\nfunction optimizeExpr(expr, names, constants) {\n    if (expr instanceof code_1.Name)\n        return replaceName(expr);\n    if (!canOptimize(expr))\n        return expr;\n    return new code_1._Code(expr._items.reduce((items, c) => {\n        if (c instanceof code_1.Name)\n            c = replaceName(c);\n        if (c instanceof code_1._Code)\n            items.push(...c._items);\n        else\n            items.push(c);\n        return items;\n    }, []));\n    function replaceName(n) {\n        const c = constants[n.str];\n        if (c === undefined || names[n.str] !== 1)\n            return n;\n        delete names[n.str];\n        return c;\n    }\n    function canOptimize(e) {\n        return (e instanceof code_1._Code &&\n            e._items.some((c) => c instanceof code_1.Name && names[c.str] === 1 && constants[c.str] !== undefined));\n    }\n}\nfunction subtractNames(names, from) {\n    for (const n in from)\n        names[n] = (names[n] || 0) - (from[n] || 0);\n}\nfunction not(x) {\n    return typeof x == \"boolean\" || typeof x == \"number\" || x === null ? !x : (0, code_1._) `!${par(x)}`;\n}\nexports.not = not;\nconst andCode = mappend(exports.operators.AND);\n// boolean AND (&&) expression with the passed arguments\nfunction and(...args) {\n    return args.reduce(andCode);\n}\nexports.and = and;\nconst orCode = mappend(exports.operators.OR);\n// boolean OR (||) expression with the passed arguments\nfunction or(...args) {\n    return args.reduce(orCode);\n}\nexports.or = or;\nfunction mappend(op) {\n    return (x, y) => (x === code_1.nil ? y : y === code_1.nil ? x : (0, code_1._) `${par(x)} ${op} ${par(y)}`);\n}\nfunction par(x) {\n    return x instanceof code_1.Name ? x : (0, code_1._) `(${x})`;\n}\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.checkStrictMode = exports.getErrorPath = exports.Type = exports.useFunc = exports.setEvaluated = exports.evaluatedPropsToName = exports.mergeEvaluated = exports.eachItem = exports.unescapeJsonPointer = exports.escapeJsonPointer = exports.escapeFragment = exports.unescapeFragment = exports.schemaRefOrVal = exports.schemaHasRulesButRef = exports.schemaHasRules = exports.checkUnknownRules = exports.alwaysValidSchema = exports.toHash = void 0;\nconst codegen_1 = require(\"./codegen\");\nconst code_1 = require(\"./codegen/code\");\n// TODO refactor to use Set\nfunction toHash(arr) {\n    const hash = {};\n    for (const item of arr)\n        hash[item] = true;\n    return hash;\n}\nexports.toHash = toHash;\nfunction alwaysValidSchema(it, schema) {\n    if (typeof schema == \"boolean\")\n        return schema;\n    if (Object.keys(schema).length === 0)\n        return true;\n    checkUnknownRules(it, schema);\n    return !schemaHasRules(schema, it.self.RULES.all);\n}\nexports.alwaysValidSchema = alwaysValidSchema;\nfunction checkUnknownRules(it, schema = it.schema) {\n    const { opts, self } = it;\n    if (!opts.strictSchema)\n        return;\n    if (typeof schema === \"boolean\")\n        return;\n    const rules = self.RULES.keywords;\n    for (const key in schema) {\n        if (!rules[key])\n            checkStrictMode(it, `unknown keyword: \"${key}\"`);\n    }\n}\nexports.checkUnknownRules = checkUnknownRules;\nfunction schemaHasRules(schema, rules) {\n    if (typeof schema == \"boolean\")\n        return !schema;\n    for (const key in schema)\n        if (rules[key])\n            return true;\n    return false;\n}\nexports.schemaHasRules = schemaHasRules;\nfunction schemaHasRulesButRef(schema, RULES) {\n    if (typeof schema == \"boolean\")\n        return !schema;\n    for (const key in schema)\n        if (key !== \"$ref\" && RULES.all[key])\n            return true;\n    return false;\n}\nexports.schemaHasRulesButRef = schemaHasRulesButRef;\nfunction schemaRefOrVal({ topSchemaRef, schemaPath }, schema, keyword, $data) {\n    if (!$data) {\n        if (typeof schema == \"number\" || typeof schema == \"boolean\")\n            return schema;\n        if (typeof schema == \"string\")\n            return (0, codegen_1._) `${schema}`;\n    }\n    return (0, codegen_1._) `${topSchemaRef}${schemaPath}${(0, codegen_1.getProperty)(keyword)}`;\n}\nexports.schemaRefOrVal = schemaRefOrVal;\nfunction unescapeFragment(str) {\n    return unescapeJsonPointer(decodeURIComponent(str));\n}\nexports.unescapeFragment = unescapeFragment;\nfunction escapeFragment(str) {\n    return encodeURIComponent(escapeJsonPointer(str));\n}\nexports.escapeFragment = escapeFragment;\nfunction escapeJsonPointer(str) {\n    if (typeof str == \"number\")\n        return `${str}`;\n    return str.replace(/~/g, \"~0\").replace(/\\//g, \"~1\");\n}\nexports.escapeJsonPointer = escapeJsonPointer;\nfunction unescapeJsonPointer(str) {\n    return str.replace(/~1/g, \"/\").replace(/~0/g, \"~\");\n}\nexports.unescapeJsonPointer = unescapeJsonPointer;\nfunction eachItem(xs, f) {\n    if (Array.isArray(xs)) {\n        for (const x of xs)\n            f(x);\n    }\n    else {\n        f(xs);\n    }\n}\nexports.eachItem = eachItem;\nfunction makeMergeEvaluated({ mergeNames, mergeToName, mergeValues, resultToName, }) {\n    return (gen, from, to, toName) => {\n        const res = to === undefined\n            ? from\n            : to instanceof codegen_1.Name\n                ? (from instanceof codegen_1.Name ? mergeNames(gen, from, to) : mergeToName(gen, from, to), to)\n                : from instanceof codegen_1.Name\n                    ? (mergeToName(gen, to, from), from)\n                    : mergeValues(from, to);\n        return toName === codegen_1.Name && !(res instanceof codegen_1.Name) ? resultToName(gen, res) : res;\n    };\n}\nexports.mergeEvaluated = {\n    props: makeMergeEvaluated({\n        mergeNames: (gen, from, to) => gen.if((0, codegen_1._) `${to} !== true && ${from} !== undefined`, () => {\n            gen.if((0, codegen_1._) `${from} === true`, () => gen.assign(to, true), () => gen.assign(to, (0, codegen_1._) `${to} || {}`).code((0, codegen_1._) `Object.assign(${to}, ${from})`));\n        }),\n        mergeToName: (gen, from, to) => gen.if((0, codegen_1._) `${to} !== true`, () => {\n            if (from === true) {\n                gen.assign(to, true);\n            }\n            else {\n                gen.assign(to, (0, codegen_1._) `${to} || {}`);\n                setEvaluated(gen, to, from);\n            }\n        }),\n        mergeValues: (from, to) => (from === true ? true : { ...from, ...to }),\n        resultToName: evaluatedPropsToName,\n    }),\n    items: makeMergeEvaluated({\n        mergeNames: (gen, from, to) => gen.if((0, codegen_1._) `${to} !== true && ${from} !== undefined`, () => gen.assign(to, (0, codegen_1._) `${from} === true ? true : ${to} > ${from} ? ${to} : ${from}`)),\n        mergeToName: (gen, from, to) => gen.if((0, codegen_1._) `${to} !== true`, () => gen.assign(to, from === true ? true : (0, codegen_1._) `${to} > ${from} ? ${to} : ${from}`)),\n        mergeValues: (from, to) => (from === true ? true : Math.max(from, to)),\n        resultToName: (gen, items) => gen.var(\"items\", items),\n    }),\n};\nfunction evaluatedPropsToName(gen, ps) {\n    if (ps === true)\n        return gen.var(\"props\", true);\n    const props = gen.var(\"props\", (0, codegen_1._) `{}`);\n    if (ps !== undefined)\n        setEvaluated(gen, props, ps);\n    return props;\n}\nexports.evaluatedPropsToName = evaluatedPropsToName;\nfunction setEvaluated(gen, props, ps) {\n    Object.keys(ps).forEach((p) => gen.assign((0, codegen_1._) `${props}${(0, codegen_1.getProperty)(p)}`, true));\n}\nexports.setEvaluated = setEvaluated;\nconst snippets = {};\nfunction useFunc(gen, f) {\n    return gen.scopeValue(\"func\", {\n        ref: f,\n        code: snippets[f.code] || (snippets[f.code] = new code_1._Code(f.code)),\n    });\n}\nexports.useFunc = useFunc;\nvar Type;\n(function (Type) {\n    Type[Type[\"Num\"] = 0] = \"Num\";\n    Type[Type[\"Str\"] = 1] = \"Str\";\n})(Type || (exports.Type = Type = {}));\nfunction getErrorPath(dataProp, dataPropType, jsPropertySyntax) {\n    // let path\n    if (dataProp instanceof codegen_1.Name) {\n        const isNumber = dataPropType === Type.Num;\n        return jsPropertySyntax\n            ? isNumber\n                ? (0, codegen_1._) `\"[\" + ${dataProp} + \"]\"`\n                : (0, codegen_1._) `\"['\" + ${dataProp} + \"']\"`\n            : isNumber\n                ? (0, codegen_1._) `\"/\" + ${dataProp}`\n                : (0, codegen_1._) `\"/\" + ${dataProp}.replace(/~/g, \"~0\").replace(/\\\\//g, \"~1\")`; // TODO maybe use global escapePointer\n    }\n    return jsPropertySyntax ? (0, codegen_1.getProperty)(dataProp).toString() : \"/\" + escapeJsonPointer(dataProp);\n}\nexports.getErrorPath = getErrorPath;\nfunction checkStrictMode(it, msg, mode = it.opts.strictSchema) {\n    if (!mode)\n        return;\n    msg = `strict mode: ${msg}`;\n    if (mode === true)\n        throw new Error(msg);\n    it.self.logger.warn(msg);\n}\nexports.checkStrictMode = checkStrictMode;\n//# sourceMappingURL=util.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"./codegen\");\nconst names = {\n    // validation function arguments\n    data: new codegen_1.Name(\"data\"), // data passed to validation function\n    // args passed from referencing schema\n    valCxt: new codegen_1.Name(\"valCxt\"), // validation/data context - should not be used directly, it is destructured to the names below\n    instancePath: new codegen_1.Name(\"instancePath\"),\n    parentData: new codegen_1.Name(\"parentData\"),\n    parentDataProperty: new codegen_1.Name(\"parentDataProperty\"),\n    rootData: new codegen_1.Name(\"rootData\"), // root data - same as the data passed to the first/top validation function\n    dynamicAnchors: new codegen_1.Name(\"dynamicAnchors\"), // used to support recursiveRef and dynamicRef\n    // function scoped variables\n    vErrors: new codegen_1.Name(\"vErrors\"), // null or array of validation errors\n    errors: new codegen_1.Name(\"errors\"), // counter of validation errors\n    this: new codegen_1.Name(\"this\"),\n    // \"globals\"\n    self: new codegen_1.Name(\"self\"),\n    scope: new codegen_1.Name(\"scope\"),\n    // JTD serialize/parse name for JSON string and position\n    json: new codegen_1.Name(\"json\"),\n    jsonPos: new codegen_1.Name(\"jsonPos\"),\n    jsonLen: new codegen_1.Name(\"jsonLen\"),\n    jsonPart: new codegen_1.Name(\"jsonPart\"),\n};\nexports.default = names;\n//# sourceMappingURL=names.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.extendErrors = exports.resetErrorsCount = exports.reportExtraError = exports.reportError = exports.keyword$DataError = exports.keywordError = void 0;\nconst codegen_1 = require(\"./codegen\");\nconst util_1 = require(\"./util\");\nconst names_1 = require(\"./names\");\nexports.keywordError = {\n    message: ({ keyword }) => (0, codegen_1.str) `must pass \"${keyword}\" keyword validation`,\n};\nexports.keyword$DataError = {\n    message: ({ keyword, schemaType }) => schemaType\n        ? (0, codegen_1.str) `\"${keyword}\" keyword must be ${schemaType} ($data)`\n        : (0, codegen_1.str) `\"${keyword}\" keyword is invalid ($data)`,\n};\nfunction reportError(cxt, error = exports.keywordError, errorPaths, overrideAllErrors) {\n    const { it } = cxt;\n    const { gen, compositeRule, allErrors } = it;\n    const errObj = errorObjectCode(cxt, error, errorPaths);\n    if (overrideAllErrors !== null && overrideAllErrors !== void 0 ? overrideAllErrors : (compositeRule || allErrors)) {\n        addError(gen, errObj);\n    }\n    else {\n        returnErrors(it, (0, codegen_1._) `[${errObj}]`);\n    }\n}\nexports.reportError = reportError;\nfunction reportExtraError(cxt, error = exports.keywordError, errorPaths) {\n    const { it } = cxt;\n    const { gen, compositeRule, allErrors } = it;\n    const errObj = errorObjectCode(cxt, error, errorPaths);\n    addError(gen, errObj);\n    if (!(compositeRule || allErrors)) {\n        returnErrors(it, names_1.default.vErrors);\n    }\n}\nexports.reportExtraError = reportExtraError;\nfunction resetErrorsCount(gen, errsCount) {\n    gen.assign(names_1.default.errors, errsCount);\n    gen.if((0, codegen_1._) `${names_1.default.vErrors} !== null`, () => gen.if(errsCount, () => gen.assign((0, codegen_1._) `${names_1.default.vErrors}.length`, errsCount), () => gen.assign(names_1.default.vErrors, null)));\n}\nexports.resetErrorsCount = resetErrorsCount;\nfunction extendErrors({ gen, keyword, schemaValue, data, errsCount, it, }) {\n    /* istanbul ignore if */\n    if (errsCount === undefined)\n        throw new Error(\"ajv implementation error\");\n    const err = gen.name(\"err\");\n    gen.forRange(\"i\", errsCount, names_1.default.errors, (i) => {\n        gen.const(err, (0, codegen_1._) `${names_1.default.vErrors}[${i}]`);\n        gen.if((0, codegen_1._) `${err}.instancePath === undefined`, () => gen.assign((0, codegen_1._) `${err}.instancePath`, (0, codegen_1.strConcat)(names_1.default.instancePath, it.errorPath)));\n        gen.assign((0, codegen_1._) `${err}.schemaPath`, (0, codegen_1.str) `${it.errSchemaPath}/${keyword}`);\n        if (it.opts.verbose) {\n            gen.assign((0, codegen_1._) `${err}.schema`, schemaValue);\n            gen.assign((0, codegen_1._) `${err}.data`, data);\n        }\n    });\n}\nexports.extendErrors = extendErrors;\nfunction addError(gen, errObj) {\n    const err = gen.const(\"err\", errObj);\n    gen.if((0, codegen_1._) `${names_1.default.vErrors} === null`, () => gen.assign(names_1.default.vErrors, (0, codegen_1._) `[${err}]`), (0, codegen_1._) `${names_1.default.vErrors}.push(${err})`);\n    gen.code((0, codegen_1._) `${names_1.default.errors}++`);\n}\nfunction returnErrors(it, errs) {\n    const { gen, validateName, schemaEnv } = it;\n    if (schemaEnv.$async) {\n        gen.throw((0, codegen_1._) `new ${it.ValidationError}(${errs})`);\n    }\n    else {\n        gen.assign((0, codegen_1._) `${validateName}.errors`, errs);\n        gen.return(false);\n    }\n}\nconst E = {\n    keyword: new codegen_1.Name(\"keyword\"),\n    schemaPath: new codegen_1.Name(\"schemaPath\"), // also used in JTD errors\n    params: new codegen_1.Name(\"params\"),\n    propertyName: new codegen_1.Name(\"propertyName\"),\n    message: new codegen_1.Name(\"message\"),\n    schema: new codegen_1.Name(\"schema\"),\n    parentSchema: new codegen_1.Name(\"parentSchema\"),\n};\nfunction errorObjectCode(cxt, error, errorPaths) {\n    const { createErrors } = cxt.it;\n    if (createErrors === false)\n        return (0, codegen_1._) `{}`;\n    return errorObject(cxt, error, errorPaths);\n}\nfunction errorObject(cxt, error, errorPaths = {}) {\n    const { gen, it } = cxt;\n    const keyValues = [\n        errorInstancePath(it, errorPaths),\n        errorSchemaPath(cxt, errorPaths),\n    ];\n    extraErrorProps(cxt, error, keyValues);\n    return gen.object(...keyValues);\n}\nfunction errorInstancePath({ errorPath }, { instancePath }) {\n    const instPath = instancePath\n        ? (0, codegen_1.str) `${errorPath}${(0, util_1.getErrorPath)(instancePath, util_1.Type.Str)}`\n        : errorPath;\n    return [names_1.default.instancePath, (0, codegen_1.strConcat)(names_1.default.instancePath, instPath)];\n}\nfunction errorSchemaPath({ keyword, it: { errSchemaPath } }, { schemaPath, parentSchema }) {\n    let schPath = parentSchema ? errSchemaPath : (0, codegen_1.str) `${errSchemaPath}/${keyword}`;\n    if (schemaPath) {\n        schPath = (0, codegen_1.str) `${schPath}${(0, util_1.getErrorPath)(schemaPath, util_1.Type.Str)}`;\n    }\n    return [E.schemaPath, schPath];\n}\nfunction extraErrorProps(cxt, { params, message }, keyValues) {\n    const { keyword, data, schemaValue, it } = cxt;\n    const { opts, propertyName, topSchemaRef, schemaPath } = it;\n    keyValues.push([E.keyword, keyword], [E.params, typeof params == \"function\" ? params(cxt) : params || (0, codegen_1._) `{}`]);\n    if (opts.messages) {\n        keyValues.push([E.message, typeof message == \"function\" ? message(cxt) : message]);\n    }\n    if (opts.verbose) {\n        keyValues.push([E.schema, schemaValue], [E.parentSchema, (0, codegen_1._) `${topSchemaRef}${schemaPath}`], [names_1.default.data, data]);\n    }\n    if (propertyName)\n        keyValues.push([E.propertyName, propertyName]);\n}\n//# sourceMappingURL=errors.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getRules = exports.isJSONType = void 0;\nconst _jsonTypes = [\"string\", \"number\", \"integer\", \"boolean\", \"null\", \"object\", \"array\"];\nconst jsonTypes = new Set(_jsonTypes);\nfunction isJSONType(x) {\n    return typeof x == \"string\" && jsonTypes.has(x);\n}\nexports.isJSONType = isJSONType;\nfunction getRules() {\n    const groups = {\n        number: { type: \"number\", rules: [] },\n        string: { type: \"string\", rules: [] },\n        array: { type: \"array\", rules: [] },\n        object: { type: \"object\", rules: [] },\n    };\n    return {\n        types: { ...groups, integer: true, boolean: true, null: true },\n        rules: [{ rules: [] }, groups.number, groups.string, groups.array, groups.object],\n        post: { rules: [] },\n        all: {},\n        keywords: {},\n    };\n}\nexports.getRules = getRules;\n//# sourceMappingURL=rules.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.shouldUseRule = exports.shouldUseGroup = exports.schemaHasRulesForType = void 0;\nfunction schemaHasRulesForType({ schema, self }, type) {\n    const group = self.RULES.types[type];\n    return group && group !== true && shouldUseGroup(schema, group);\n}\nexports.schemaHasRulesForType = schemaHasRulesForType;\nfunction shouldUseGroup(schema, group) {\n    return group.rules.some((rule) => shouldUseRule(schema, rule));\n}\nexports.shouldUseGroup = shouldUseGroup;\nfunction shouldUseRule(schema, rule) {\n    var _a;\n    return (schema[rule.keyword] !== undefined ||\n        ((_a = rule.definition.implements) === null || _a === void 0 ? void 0 : _a.some((kwd) => schema[kwd] !== undefined)));\n}\nexports.shouldUseRule = shouldUseRule;\n//# sourceMappingURL=applicability.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.reportTypeError = exports.checkDataTypes = exports.checkDataType = exports.coerceAndCheckDataType = exports.getJSONTypes = exports.getSchemaTypes = exports.DataType = void 0;\nconst rules_1 = require(\"../rules\");\nconst applicability_1 = require(\"./applicability\");\nconst errors_1 = require(\"../errors\");\nconst codegen_1 = require(\"../codegen\");\nconst util_1 = require(\"../util\");\nvar DataType;\n(function (DataType) {\n    DataType[DataType[\"Correct\"] = 0] = \"Correct\";\n    DataType[DataType[\"Wrong\"] = 1] = \"Wrong\";\n})(DataType || (exports.DataType = DataType = {}));\nfunction getSchemaTypes(schema) {\n    const types = getJSONTypes(schema.type);\n    const hasNull = types.includes(\"null\");\n    if (hasNull) {\n        if (schema.nullable === false)\n            throw new Error(\"type: null contradicts nullable: false\");\n    }\n    else {\n        if (!types.length && schema.nullable !== undefined) {\n            throw new Error('\"nullable\" cannot be used without \"type\"');\n        }\n        if (schema.nullable === true)\n            types.push(\"null\");\n    }\n    return types;\n}\nexports.getSchemaTypes = getSchemaTypes;\n// eslint-disable-next-line @typescript-eslint/no-redundant-type-constituents\nfunction getJSONTypes(ts) {\n    const types = Array.isArray(ts) ? ts : ts ? [ts] : [];\n    if (types.every(rules_1.isJSONType))\n        return types;\n    throw new Error(\"type must be JSONType or JSONType[]: \" + types.join(\",\"));\n}\nexports.getJSONTypes = getJSONTypes;\nfunction coerceAndCheckDataType(it, types) {\n    const { gen, data, opts } = it;\n    const coerceTo = coerceToTypes(types, opts.coerceTypes);\n    const checkTypes = types.length > 0 &&\n        !(coerceTo.length === 0 && types.length === 1 && (0, applicability_1.schemaHasRulesForType)(it, types[0]));\n    if (checkTypes) {\n        const wrongType = checkDataTypes(types, data, opts.strictNumbers, DataType.Wrong);\n        gen.if(wrongType, () => {\n            if (coerceTo.length)\n                coerceData(it, types, coerceTo);\n            else\n                reportTypeError(it);\n        });\n    }\n    return checkTypes;\n}\nexports.coerceAndCheckDataType = coerceAndCheckDataType;\nconst COERCIBLE = new Set([\"string\", \"number\", \"integer\", \"boolean\", \"null\"]);\nfunction coerceToTypes(types, coerceTypes) {\n    return coerceTypes\n        ? types.filter((t) => COERCIBLE.has(t) || (coerceTypes === \"array\" && t === \"array\"))\n        : [];\n}\nfunction coerceData(it, types, coerceTo) {\n    const { gen, data, opts } = it;\n    const dataType = gen.let(\"dataType\", (0, codegen_1._) `typeof ${data}`);\n    const coerced = gen.let(\"coerced\", (0, codegen_1._) `undefined`);\n    if (opts.coerceTypes === \"array\") {\n        gen.if((0, codegen_1._) `${dataType} == 'object' && Array.isArray(${data}) && ${data}.length == 1`, () => gen\n            .assign(data, (0, codegen_1._) `${data}[0]`)\n            .assign(dataType, (0, codegen_1._) `typeof ${data}`)\n            .if(checkDataTypes(types, data, opts.strictNumbers), () => gen.assign(coerced, data)));\n    }\n    gen.if((0, codegen_1._) `${coerced} !== undefined`);\n    for (const t of coerceTo) {\n        if (COERCIBLE.has(t) || (t === \"array\" && opts.coerceTypes === \"array\")) {\n            coerceSpecificType(t);\n        }\n    }\n    gen.else();\n    reportTypeError(it);\n    gen.endIf();\n    gen.if((0, codegen_1._) `${coerced} !== undefined`, () => {\n        gen.assign(data, coerced);\n        assignParentData(it, coerced);\n    });\n    function coerceSpecificType(t) {\n        switch (t) {\n            case \"string\":\n                gen\n                    .elseIf((0, codegen_1._) `${dataType} == \"number\" || ${dataType} == \"boolean\"`)\n                    .assign(coerced, (0, codegen_1._) `\"\" + ${data}`)\n                    .elseIf((0, codegen_1._) `${data} === null`)\n                    .assign(coerced, (0, codegen_1._) `\"\"`);\n                return;\n            case \"number\":\n                gen\n                    .elseIf((0, codegen_1._) `${dataType} == \"boolean\" || ${data} === null\n              || (${dataType} == \"string\" && ${data} && ${data} == +${data})`)\n                    .assign(coerced, (0, codegen_1._) `+${data}`);\n                return;\n            case \"integer\":\n                gen\n                    .elseIf((0, codegen_1._) `${dataType} === \"boolean\" || ${data} === null\n              || (${dataType} === \"string\" && ${data} && ${data} == +${data} && !(${data} % 1))`)\n                    .assign(coerced, (0, codegen_1._) `+${data}`);\n                return;\n            case \"boolean\":\n                gen\n                    .elseIf((0, codegen_1._) `${data} === \"false\" || ${data} === 0 || ${data} === null`)\n                    .assign(coerced, false)\n                    .elseIf((0, codegen_1._) `${data} === \"true\" || ${data} === 1`)\n                    .assign(coerced, true);\n                return;\n            case \"null\":\n                gen.elseIf((0, codegen_1._) `${data} === \"\" || ${data} === 0 || ${data} === false`);\n                gen.assign(coerced, null);\n                return;\n            case \"array\":\n                gen\n                    .elseIf((0, codegen_1._) `${dataType} === \"string\" || ${dataType} === \"number\"\n              || ${dataType} === \"boolean\" || ${data} === null`)\n                    .assign(coerced, (0, codegen_1._) `[${data}]`);\n        }\n    }\n}\nfunction assignParentData({ gen, parentData, parentDataProperty }, expr) {\n    // TODO use gen.property\n    gen.if((0, codegen_1._) `${parentData} !== undefined`, () => gen.assign((0, codegen_1._) `${parentData}[${parentDataProperty}]`, expr));\n}\nfunction checkDataType(dataType, data, strictNums, correct = DataType.Correct) {\n    const EQ = correct === DataType.Correct ? codegen_1.operators.EQ : codegen_1.operators.NEQ;\n    let cond;\n    switch (dataType) {\n        case \"null\":\n            return (0, codegen_1._) `${data} ${EQ} null`;\n        case \"array\":\n            cond = (0, codegen_1._) `Array.isArray(${data})`;\n            break;\n        case \"object\":\n            cond = (0, codegen_1._) `${data} && typeof ${data} == \"object\" && !Array.isArray(${data})`;\n            break;\n        case \"integer\":\n            cond = numCond((0, codegen_1._) `!(${data} % 1) && !isNaN(${data})`);\n            break;\n        case \"number\":\n            cond = numCond();\n            break;\n        default:\n            return (0, codegen_1._) `typeof ${data} ${EQ} ${dataType}`;\n    }\n    return correct === DataType.Correct ? cond : (0, codegen_1.not)(cond);\n    function numCond(_cond = codegen_1.nil) {\n        return (0, codegen_1.and)((0, codegen_1._) `typeof ${data} == \"number\"`, _cond, strictNums ? (0, codegen_1._) `isFinite(${data})` : codegen_1.nil);\n    }\n}\nexports.checkDataType = checkDataType;\nfunction checkDataTypes(dataTypes, data, strictNums, correct) {\n    if (dataTypes.length === 1) {\n        return checkDataType(dataTypes[0], data, strictNums, correct);\n    }\n    let cond;\n    const types = (0, util_1.toHash)(dataTypes);\n    if (types.array && types.object) {\n        const notObj = (0, codegen_1._) `typeof ${data} != \"object\"`;\n        cond = types.null ? notObj : (0, codegen_1._) `!${data} || ${notObj}`;\n        delete types.null;\n        delete types.array;\n        delete types.object;\n    }\n    else {\n        cond = codegen_1.nil;\n    }\n    if (types.number)\n        delete types.integer;\n    for (const t in types)\n        cond = (0, codegen_1.and)(cond, checkDataType(t, data, strictNums, correct));\n    return cond;\n}\nexports.checkDataTypes = checkDataTypes;\nconst typeError = {\n    message: ({ schema }) => `must be ${schema}`,\n    params: ({ schema, schemaValue }) => typeof schema == \"string\" ? (0, codegen_1._) `{type: ${schema}}` : (0, codegen_1._) `{type: ${schemaValue}}`,\n};\nfunction reportTypeError(it) {\n    const cxt = getTypeErrorContext(it);\n    (0, errors_1.reportError)(cxt, typeError);\n}\nexports.reportTypeError = reportTypeError;\nfunction getTypeErrorContext(it) {\n    const { gen, data, schema } = it;\n    const schemaCode = (0, util_1.schemaRefOrVal)(it, schema, \"type\");\n    return {\n        gen,\n        keyword: \"type\",\n        data,\n        schema: schema.type,\n        schemaCode,\n        schemaValue: schemaCode,\n        parentSchema: schema,\n        params: {},\n        it,\n    };\n}\n//# sourceMappingURL=dataType.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateUnion = exports.validateArray = exports.usePattern = exports.callValidateCode = exports.schemaProperties = exports.allSchemaProperties = exports.noPropertyInData = exports.propertyInData = exports.isOwnProperty = exports.hasPropFunc = exports.reportMissingProp = exports.checkMissingProp = exports.checkReportMissingProp = void 0;\nconst codegen_1 = require(\"../compile/codegen\");\nconst util_1 = require(\"../compile/util\");\nconst names_1 = require(\"../compile/names\");\nconst util_2 = require(\"../compile/util\");\nfunction checkReportMissingProp(cxt, prop) {\n    const { gen, data, it } = cxt;\n    gen.if(noPropertyInData(gen, data, prop, it.opts.ownProperties), () => {\n        cxt.setParams({ missingProperty: (0, codegen_1._) `${prop}` }, true);\n        cxt.error();\n    });\n}\nexports.checkReportMissingProp = checkReportMissingProp;\nfunction checkMissingProp({ gen, data, it: { opts } }, properties, missing) {\n    return (0, codegen_1.or)(...properties.map((prop) => (0, codegen_1.and)(noPropertyInData(gen, data, prop, opts.ownProperties), (0, codegen_1._) `${missing} = ${prop}`)));\n}\nexports.checkMissingProp = checkMissingProp;\nfunction reportMissingProp(cxt, missing) {\n    cxt.setParams({ missingProperty: missing }, true);\n    cxt.error();\n}\nexports.reportMissingProp = reportMissingProp;\nfunction hasPropFunc(gen) {\n    return gen.scopeValue(\"func\", {\n        // eslint-disable-next-line @typescript-eslint/unbound-method\n        ref: Object.prototype.hasOwnProperty,\n        code: (0, codegen_1._) `Object.prototype.hasOwnProperty`,\n    });\n}\nexports.hasPropFunc = hasPropFunc;\nfunction isOwnProperty(gen, data, property) {\n    return (0, codegen_1._) `${hasPropFunc(gen)}.call(${data}, ${property})`;\n}\nexports.isOwnProperty = isOwnProperty;\nfunction propertyInData(gen, data, property, ownProperties) {\n    const cond = (0, codegen_1._) `${data}${(0, codegen_1.getProperty)(property)} !== undefined`;\n    return ownProperties ? (0, codegen_1._) `${cond} && ${isOwnProperty(gen, data, property)}` : cond;\n}\nexports.propertyInData = propertyInData;\nfunction noPropertyInData(gen, data, property, ownProperties) {\n    const cond = (0, codegen_1._) `${data}${(0, codegen_1.getProperty)(property)} === undefined`;\n    return ownProperties ? (0, codegen_1.or)(cond, (0, codegen_1.not)(isOwnProperty(gen, data, property))) : cond;\n}\nexports.noPropertyInData = noPropertyInData;\nfunction allSchemaProperties(schemaMap) {\n    return schemaMap ? Object.keys(schemaMap).filter((p) => p !== \"__proto__\") : [];\n}\nexports.allSchemaProperties = allSchemaProperties;\nfunction schemaProperties(it, schemaMap) {\n    return allSchemaProperties(schemaMap).filter((p) => !(0, util_1.alwaysValidSchema)(it, schemaMap[p]));\n}\nexports.schemaProperties = schemaProperties;\nfunction callValidateCode({ schemaCode, data, it: { gen, topSchemaRef, schemaPath, errorPath }, it }, func, context, passSchema) {\n    const dataAndSchema = passSchema ? (0, codegen_1._) `${schemaCode}, ${data}, ${topSchemaRef}${schemaPath}` : data;\n    const valCxt = [\n        [names_1.default.instancePath, (0, codegen_1.strConcat)(names_1.default.instancePath, errorPath)],\n        [names_1.default.parentData, it.parentData],\n        [names_1.default.parentDataProperty, it.parentDataProperty],\n        [names_1.default.rootData, names_1.default.rootData],\n    ];\n    if (it.opts.dynamicRef)\n        valCxt.push([names_1.default.dynamicAnchors, names_1.default.dynamicAnchors]);\n    const args = (0, codegen_1._) `${dataAndSchema}, ${gen.object(...valCxt)}`;\n    return context !== codegen_1.nil ? (0, codegen_1._) `${func}.call(${context}, ${args})` : (0, codegen_1._) `${func}(${args})`;\n}\nexports.callValidateCode = callValidateCode;\nconst newRegExp = (0, codegen_1._) `new RegExp`;\nfunction usePattern({ gen, it: { opts } }, pattern) {\n    const u = opts.unicodeRegExp ? \"u\" : \"\";\n    const { regExp } = opts.code;\n    const rx = regExp(pattern, u);\n    return gen.scopeValue(\"pattern\", {\n        key: rx.toString(),\n        ref: rx,\n        code: (0, codegen_1._) `${regExp.code === \"new RegExp\" ? newRegExp : (0, util_2.useFunc)(gen, regExp)}(${pattern}, ${u})`,\n    });\n}\nexports.usePattern = usePattern;\nfunction validateArray(cxt) {\n    const { gen, data, keyword, it } = cxt;\n    const valid = gen.name(\"valid\");\n    if (it.allErrors) {\n        const validArr = gen.let(\"valid\", true);\n        validateItems(() => gen.assign(validArr, false));\n        return validArr;\n    }\n    gen.var(valid, true);\n    validateItems(() => gen.break());\n    return valid;\n    function validateItems(notValid) {\n        const len = gen.const(\"len\", (0, codegen_1._) `${data}.length`);\n        gen.forRange(\"i\", 0, len, (i) => {\n            cxt.subschema({\n                keyword,\n                dataProp: i,\n                dataPropType: util_1.Type.Num,\n            }, valid);\n            gen.if((0, codegen_1.not)(valid), notValid);\n        });\n    }\n}\nexports.validateArray = validateArray;\nfunction validateUnion(cxt) {\n    const { gen, schema, keyword, it } = cxt;\n    /* istanbul ignore if */\n    if (!Array.isArray(schema))\n        throw new Error(\"ajv implementation error\");\n    const alwaysValid = schema.some((sch) => (0, util_1.alwaysValidSchema)(it, sch));\n    if (alwaysValid && !it.opts.unevaluated)\n        return;\n    const valid = gen.let(\"valid\", false);\n    const schValid = gen.name(\"_valid\");\n    gen.block(() => schema.forEach((_sch, i) => {\n        const schCxt = cxt.subschema({\n            keyword,\n            schemaProp: i,\n            compositeRule: true,\n        }, schValid);\n        gen.assign(valid, (0, codegen_1._) `${valid} || ${schValid}`);\n        const merged = cxt.mergeValidEvaluated(schCxt, schValid);\n        // can short-circuit if `unevaluatedProperties/Items` not supported (opts.unevaluated !== true)\n        // or if all properties and items were evaluated (it.props === true && it.items === true)\n        if (!merged)\n            gen.if((0, codegen_1.not)(valid));\n    }));\n    cxt.result(valid, () => cxt.reset(), () => cxt.error(true));\n}\nexports.validateUnion = validateUnion;\n//# sourceMappingURL=code.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateKeywordUsage = exports.validSchemaType = exports.funcKeywordCode = exports.macroKeywordCode = void 0;\nconst codegen_1 = require(\"../codegen\");\nconst names_1 = require(\"../names\");\nconst code_1 = require(\"../../vocabularies/code\");\nconst errors_1 = require(\"../errors\");\nfunction macroKeywordCode(cxt, def) {\n    const { gen, keyword, schema, parentSchema, it } = cxt;\n    const macroSchema = def.macro.call(it.self, schema, parentSchema, it);\n    const schemaRef = useKeyword(gen, keyword, macroSchema);\n    if (it.opts.validateSchema !== false)\n        it.self.validateSchema(macroSchema, true);\n    const valid = gen.name(\"valid\");\n    cxt.subschema({\n        schema: macroSchema,\n        schemaPath: codegen_1.nil,\n        errSchemaPath: `${it.errSchemaPath}/${keyword}`,\n        topSchemaRef: schemaRef,\n        compositeRule: true,\n    }, valid);\n    cxt.pass(valid, () => cxt.error(true));\n}\nexports.macroKeywordCode = macroKeywordCode;\nfunction funcKeywordCode(cxt, def) {\n    var _a;\n    const { gen, keyword, schema, parentSchema, $data, it } = cxt;\n    checkAsyncKeyword(it, def);\n    const validate = !$data && def.compile ? def.compile.call(it.self, schema, parentSchema, it) : def.validate;\n    const validateRef = useKeyword(gen, keyword, validate);\n    const valid = gen.let(\"valid\");\n    cxt.block$data(valid, validateKeyword);\n    cxt.ok((_a = def.valid) !== null && _a !== void 0 ? _a : valid);\n    function validateKeyword() {\n        if (def.errors === false) {\n            assignValid();\n            if (def.modifying)\n                modifyData(cxt);\n            reportErrs(() => cxt.error());\n        }\n        else {\n            const ruleErrs = def.async ? validateAsync() : validateSync();\n            if (def.modifying)\n                modifyData(cxt);\n            reportErrs(() => addErrs(cxt, ruleErrs));\n        }\n    }\n    function validateAsync() {\n        const ruleErrs = gen.let(\"ruleErrs\", null);\n        gen.try(() => assignValid((0, codegen_1._) `await `), (e) => gen.assign(valid, false).if((0, codegen_1._) `${e} instanceof ${it.ValidationError}`, () => gen.assign(ruleErrs, (0, codegen_1._) `${e}.errors`), () => gen.throw(e)));\n        return ruleErrs;\n    }\n    function validateSync() {\n        const validateErrs = (0, codegen_1._) `${validateRef}.errors`;\n        gen.assign(validateErrs, null);\n        assignValid(codegen_1.nil);\n        return validateErrs;\n    }\n    function assignValid(_await = def.async ? (0, codegen_1._) `await ` : codegen_1.nil) {\n        const passCxt = it.opts.passContext ? names_1.default.this : names_1.default.self;\n        const passSchema = !((\"compile\" in def && !$data) || def.schema === false);\n        gen.assign(valid, (0, codegen_1._) `${_await}${(0, code_1.callValidateCode)(cxt, validateRef, passCxt, passSchema)}`, def.modifying);\n    }\n    function reportErrs(errors) {\n        var _a;\n        gen.if((0, codegen_1.not)((_a = def.valid) !== null && _a !== void 0 ? _a : valid), errors);\n    }\n}\nexports.funcKeywordCode = funcKeywordCode;\nfunction modifyData(cxt) {\n    const { gen, data, it } = cxt;\n    gen.if(it.parentData, () => gen.assign(data, (0, codegen_1._) `${it.parentData}[${it.parentDataProperty}]`));\n}\nfunction addErrs(cxt, errs) {\n    const { gen } = cxt;\n    gen.if((0, codegen_1._) `Array.isArray(${errs})`, () => {\n        gen\n            .assign(names_1.default.vErrors, (0, codegen_1._) `${names_1.default.vErrors} === null ? ${errs} : ${names_1.default.vErrors}.concat(${errs})`)\n            .assign(names_1.default.errors, (0, codegen_1._) `${names_1.default.vErrors}.length`);\n        (0, errors_1.extendErrors)(cxt);\n    }, () => cxt.error());\n}\nfunction checkAsyncKeyword({ schemaEnv }, def) {\n    if (def.async && !schemaEnv.$async)\n        throw new Error(\"async keyword in sync schema\");\n}\nfunction useKeyword(gen, keyword, result) {\n    if (result === undefined)\n        throw new Error(`keyword \"${keyword}\" failed to compile`);\n    return gen.scopeValue(\"keyword\", typeof result == \"function\" ? { ref: result } : { ref: result, code: (0, codegen_1.stringify)(result) });\n}\nfunction validSchemaType(schema, schemaType, allowUndefined = false) {\n    // TODO add tests\n    return (!schemaType.length ||\n        schemaType.some((st) => st === \"array\"\n            ? Array.isArray(schema)\n            : st === \"object\"\n                ? schema && typeof schema == \"object\" && !Array.isArray(schema)\n                : typeof schema == st || (allowUndefined && typeof schema == \"undefined\")));\n}\nexports.validSchemaType = validSchemaType;\nfunction validateKeywordUsage({ schema, opts, self, errSchemaPath }, def, keyword) {\n    /* istanbul ignore if */\n    if (Array.isArray(def.keyword) ? !def.keyword.includes(keyword) : def.keyword !== keyword) {\n        throw new Error(\"ajv implementation error\");\n    }\n    const deps = def.dependencies;\n    if (deps === null || deps === void 0 ? void 0 : deps.some((kwd) => !Object.prototype.hasOwnProperty.call(schema, kwd))) {\n        throw new Error(`parent schema must have dependencies of ${keyword}: ${deps.join(\",\")}`);\n    }\n    if (def.validateSchema) {\n        const valid = def.validateSchema(schema[keyword]);\n        if (!valid) {\n            const msg = `keyword \"${keyword}\" value is invalid at path \"${errSchemaPath}\": ` +\n                self.errorsText(def.validateSchema.errors);\n            if (opts.validateSchema === \"log\")\n                self.logger.error(msg);\n            else\n                throw new Error(msg);\n        }\n    }\n}\nexports.validateKeywordUsage = validateKeywordUsage;\n//# sourceMappingURL=keyword.js.map","'use strict';\n\n// do not edit .js files directly - edit src/index.jst\n\n\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  // true if both NaN, false otherwise\n  return a!==a && b!==b;\n};\n","'use strict';\n\nvar traverse = module.exports = function (schema, opts, cb) {\n  // Legacy support for v0.3.1 and earlier.\n  if (typeof opts == 'function') {\n    cb = opts;\n    opts = {};\n  }\n\n  cb = opts.cb || cb;\n  var pre = (typeof cb == 'function') ? cb : cb.pre || function() {};\n  var post = cb.post || function() {};\n\n  _traverse(opts, pre, post, schema, '', schema);\n};\n\n\ntraverse.keywords = {\n  additionalItems: true,\n  items: true,\n  contains: true,\n  additionalProperties: true,\n  propertyNames: true,\n  not: true,\n  if: true,\n  then: true,\n  else: true\n};\n\ntraverse.arrayKeywords = {\n  items: true,\n  allOf: true,\n  anyOf: true,\n  oneOf: true\n};\n\ntraverse.propsKeywords = {\n  $defs: true,\n  definitions: true,\n  properties: true,\n  patternProperties: true,\n  dependencies: true\n};\n\ntraverse.skipKeywords = {\n  default: true,\n  enum: true,\n  const: true,\n  required: true,\n  maximum: true,\n  minimum: true,\n  exclusiveMaximum: true,\n  exclusiveMinimum: true,\n  multipleOf: true,\n  maxLength: true,\n  minLength: true,\n  pattern: true,\n  format: true,\n  maxItems: true,\n  minItems: true,\n  uniqueItems: true,\n  maxProperties: true,\n  minProperties: true\n};\n\n\nfunction _traverse(opts, pre, post, schema, jsonPtr, rootSchema, parentJsonPtr, parentKeyword, parentSchema, keyIndex) {\n  if (schema && typeof schema == 'object' && !Array.isArray(schema)) {\n    pre(schema, jsonPtr, rootSchema, parentJsonPtr, parentKeyword, parentSchema, keyIndex);\n    for (var key in schema) {\n      var sch = schema[key];\n      if (Array.isArray(sch)) {\n        if (key in traverse.arrayKeywords) {\n          for (var i=0; i<sch.length; i++)\n            _traverse(opts, pre, post, sch[i], jsonPtr + '/' + key + '/' + i, rootSchema, jsonPtr, key, schema, i);\n        }\n      } else if (key in traverse.propsKeywords) {\n        if (sch && typeof sch == 'object') {\n          for (var prop in sch)\n            _traverse(opts, pre, post, sch[prop], jsonPtr + '/' + key + '/' + escapeJsonPtr(prop), rootSchema, jsonPtr, key, schema, prop);\n        }\n      } else if (key in traverse.keywords || (opts.allKeys && !(key in traverse.skipKeywords))) {\n        _traverse(opts, pre, post, sch, jsonPtr + '/' + key, rootSchema, jsonPtr, key, schema);\n      }\n    }\n    post(schema, jsonPtr, rootSchema, parentJsonPtr, parentKeyword, parentSchema, keyIndex);\n  }\n}\n\n\nfunction escapeJsonPtr(str) {\n  return str.replace(/~/g, '~0').replace(/\\//g, '~1');\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getSchemaRefs = exports.resolveUrl = exports.normalizeId = exports._getFullPath = exports.getFullPath = exports.inlineRef = void 0;\nconst util_1 = require(\"./util\");\nconst equal = require(\"fast-deep-equal\");\nconst traverse = require(\"json-schema-traverse\");\n// TODO refactor to use keyword definitions\nconst SIMPLE_INLINED = new Set([\n    \"type\",\n    \"format\",\n    \"pattern\",\n    \"maxLength\",\n    \"minLength\",\n    \"maxProperties\",\n    \"minProperties\",\n    \"maxItems\",\n    \"minItems\",\n    \"maximum\",\n    \"minimum\",\n    \"uniqueItems\",\n    \"multipleOf\",\n    \"required\",\n    \"enum\",\n    \"const\",\n]);\nfunction inlineRef(schema, limit = true) {\n    if (typeof schema == \"boolean\")\n        return true;\n    if (limit === true)\n        return !hasRef(schema);\n    if (!limit)\n        return false;\n    return countKeys(schema) <= limit;\n}\nexports.inlineRef = inlineRef;\nconst REF_KEYWORDS = new Set([\n    \"$ref\",\n    \"$recursiveRef\",\n    \"$recursiveAnchor\",\n    \"$dynamicRef\",\n    \"$dynamicAnchor\",\n]);\nfunction hasRef(schema) {\n    for (const key in schema) {\n        if (REF_KEYWORDS.has(key))\n            return true;\n        const sch = schema[key];\n        if (Array.isArray(sch) && sch.some(hasRef))\n            return true;\n        if (typeof sch == \"object\" && hasRef(sch))\n            return true;\n    }\n    return false;\n}\nfunction countKeys(schema) {\n    let count = 0;\n    for (const key in schema) {\n        if (key === \"$ref\")\n            return Infinity;\n        count++;\n        if (SIMPLE_INLINED.has(key))\n            continue;\n        if (typeof schema[key] == \"object\") {\n            (0, util_1.eachItem)(schema[key], (sch) => (count += countKeys(sch)));\n        }\n        if (count === Infinity)\n            return Infinity;\n    }\n    return count;\n}\nfunction getFullPath(resolver, id = \"\", normalize) {\n    if (normalize !== false)\n        id = normalizeId(id);\n    const p = resolver.parse(id);\n    return _getFullPath(resolver, p);\n}\nexports.getFullPath = getFullPath;\nfunction _getFullPath(resolver, p) {\n    const serialized = resolver.serialize(p);\n    return serialized.split(\"#\")[0] + \"#\";\n}\nexports._getFullPath = _getFullPath;\nconst TRAILING_SLASH_HASH = /#\\/?$/;\nfunction normalizeId(id) {\n    return id ? id.replace(TRAILING_SLASH_HASH, \"\") : \"\";\n}\nexports.normalizeId = normalizeId;\nfunction resolveUrl(resolver, baseId, id) {\n    id = normalizeId(id);\n    return resolver.resolve(baseId, id);\n}\nexports.resolveUrl = resolveUrl;\nconst ANCHOR = /^[a-z_][-a-z0-9._]*$/i;\nfunction getSchemaRefs(schema, baseId) {\n    if (typeof schema == \"boolean\")\n        return {};\n    const { schemaId, uriResolver } = this.opts;\n    const schId = normalizeId(schema[schemaId] || baseId);\n    const baseIds = { \"\": schId };\n    const pathPrefix = getFullPath(uriResolver, schId, false);\n    const localRefs = {};\n    const schemaRefs = new Set();\n    traverse(schema, { allKeys: true }, (sch, jsonPtr, _, parentJsonPtr) => {\n        if (parentJsonPtr === undefined)\n            return;\n        const fullPath = pathPrefix + jsonPtr;\n        let innerBaseId = baseIds[parentJsonPtr];\n        if (typeof sch[schemaId] == \"string\")\n            innerBaseId = addRef.call(this, sch[schemaId]);\n        addAnchor.call(this, sch.$anchor);\n        addAnchor.call(this, sch.$dynamicAnchor);\n        baseIds[jsonPtr] = innerBaseId;\n        function addRef(ref) {\n            // eslint-disable-next-line @typescript-eslint/unbound-method\n            const _resolve = this.opts.uriResolver.resolve;\n            ref = normalizeId(innerBaseId ? _resolve(innerBaseId, ref) : ref);\n            if (schemaRefs.has(ref))\n                throw ambiguos(ref);\n            schemaRefs.add(ref);\n            let schOrRef = this.refs[ref];\n            if (typeof schOrRef == \"string\")\n                schOrRef = this.refs[schOrRef];\n            if (typeof schOrRef == \"object\") {\n                checkAmbiguosRef(sch, schOrRef.schema, ref);\n            }\n            else if (ref !== normalizeId(fullPath)) {\n                if (ref[0] === \"#\") {\n                    checkAmbiguosRef(sch, localRefs[ref], ref);\n                    localRefs[ref] = sch;\n                }\n                else {\n                    this.refs[ref] = fullPath;\n                }\n            }\n            return ref;\n        }\n        function addAnchor(anchor) {\n            if (typeof anchor == \"string\") {\n                if (!ANCHOR.test(anchor))\n                    throw new Error(`invalid anchor \"${anchor}\"`);\n                addRef.call(this, `#${anchor}`);\n            }\n        }\n    });\n    return localRefs;\n    function checkAmbiguosRef(sch1, sch2, ref) {\n        if (sch2 !== undefined && !equal(sch1, sch2))\n            throw ambiguos(ref);\n    }\n    function ambiguos(ref) {\n        return new Error(`reference \"${ref}\" resolves to more than one schema`);\n    }\n}\nexports.getSchemaRefs = getSchemaRefs;\n//# sourceMappingURL=resolve.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getData = exports.KeywordCxt = exports.validateFunctionCode = void 0;\nconst boolSchema_1 = require(\"./boolSchema\");\nconst dataType_1 = require(\"./dataType\");\nconst applicability_1 = require(\"./applicability\");\nconst dataType_2 = require(\"./dataType\");\nconst defaults_1 = require(\"./defaults\");\nconst keyword_1 = require(\"./keyword\");\nconst subschema_1 = require(\"./subschema\");\nconst codegen_1 = require(\"../codegen\");\nconst names_1 = require(\"../names\");\nconst resolve_1 = require(\"../resolve\");\nconst util_1 = require(\"../util\");\nconst errors_1 = require(\"../errors\");\n// schema compilation - generates validation function, subschemaCode (below) is used for subschemas\nfunction validateFunctionCode(it) {\n    if (isSchemaObj(it)) {\n        checkKeywords(it);\n        if (schemaCxtHasRules(it)) {\n            topSchemaObjCode(it);\n            return;\n        }\n    }\n    validateFunction(it, () => (0, boolSchema_1.topBoolOrEmptySchema)(it));\n}\nexports.validateFunctionCode = validateFunctionCode;\nfunction validateFunction({ gen, validateName, schema, schemaEnv, opts }, body) {\n    if (opts.code.es5) {\n        gen.func(validateName, (0, codegen_1._) `${names_1.default.data}, ${names_1.default.valCxt}`, schemaEnv.$async, () => {\n            gen.code((0, codegen_1._) `\"use strict\"; ${funcSourceUrl(schema, opts)}`);\n            destructureValCxtES5(gen, opts);\n            gen.code(body);\n        });\n    }\n    else {\n        gen.func(validateName, (0, codegen_1._) `${names_1.default.data}, ${destructureValCxt(opts)}`, schemaEnv.$async, () => gen.code(funcSourceUrl(schema, opts)).code(body));\n    }\n}\nfunction destructureValCxt(opts) {\n    return (0, codegen_1._) `{${names_1.default.instancePath}=\"\", ${names_1.default.parentData}, ${names_1.default.parentDataProperty}, ${names_1.default.rootData}=${names_1.default.data}${opts.dynamicRef ? (0, codegen_1._) `, ${names_1.default.dynamicAnchors}={}` : codegen_1.nil}}={}`;\n}\nfunction destructureValCxtES5(gen, opts) {\n    gen.if(names_1.default.valCxt, () => {\n        gen.var(names_1.default.instancePath, (0, codegen_1._) `${names_1.default.valCxt}.${names_1.default.instancePath}`);\n        gen.var(names_1.default.parentData, (0, codegen_1._) `${names_1.default.valCxt}.${names_1.default.parentData}`);\n        gen.var(names_1.default.parentDataProperty, (0, codegen_1._) `${names_1.default.valCxt}.${names_1.default.parentDataProperty}`);\n        gen.var(names_1.default.rootData, (0, codegen_1._) `${names_1.default.valCxt}.${names_1.default.rootData}`);\n        if (opts.dynamicRef)\n            gen.var(names_1.default.dynamicAnchors, (0, codegen_1._) `${names_1.default.valCxt}.${names_1.default.dynamicAnchors}`);\n    }, () => {\n        gen.var(names_1.default.instancePath, (0, codegen_1._) `\"\"`);\n        gen.var(names_1.default.parentData, (0, codegen_1._) `undefined`);\n        gen.var(names_1.default.parentDataProperty, (0, codegen_1._) `undefined`);\n        gen.var(names_1.default.rootData, names_1.default.data);\n        if (opts.dynamicRef)\n            gen.var(names_1.default.dynamicAnchors, (0, codegen_1._) `{}`);\n    });\n}\nfunction topSchemaObjCode(it) {\n    const { schema, opts, gen } = it;\n    validateFunction(it, () => {\n        if (opts.$comment && schema.$comment)\n            commentKeyword(it);\n        checkNoDefault(it);\n        gen.let(names_1.default.vErrors, null);\n        gen.let(names_1.default.errors, 0);\n        if (opts.unevaluated)\n            resetEvaluated(it);\n        typeAndKeywords(it);\n        returnResults(it);\n    });\n    return;\n}\nfunction resetEvaluated(it) {\n    // TODO maybe some hook to execute it in the end to check whether props/items are Name, as in assignEvaluated\n    const { gen, validateName } = it;\n    it.evaluated = gen.const(\"evaluated\", (0, codegen_1._) `${validateName}.evaluated`);\n    gen.if((0, codegen_1._) `${it.evaluated}.dynamicProps`, () => gen.assign((0, codegen_1._) `${it.evaluated}.props`, (0, codegen_1._) `undefined`));\n    gen.if((0, codegen_1._) `${it.evaluated}.dynamicItems`, () => gen.assign((0, codegen_1._) `${it.evaluated}.items`, (0, codegen_1._) `undefined`));\n}\nfunction funcSourceUrl(schema, opts) {\n    const schId = typeof schema == \"object\" && schema[opts.schemaId];\n    return schId && (opts.code.source || opts.code.process) ? (0, codegen_1._) `/*# sourceURL=${schId} */` : codegen_1.nil;\n}\n// schema compilation - this function is used recursively to generate code for sub-schemas\nfunction subschemaCode(it, valid) {\n    if (isSchemaObj(it)) {\n        checkKeywords(it);\n        if (schemaCxtHasRules(it)) {\n            subSchemaObjCode(it, valid);\n            return;\n        }\n    }\n    (0, boolSchema_1.boolOrEmptySchema)(it, valid);\n}\nfunction schemaCxtHasRules({ schema, self }) {\n    if (typeof schema == \"boolean\")\n        return !schema;\n    for (const key in schema)\n        if (self.RULES.all[key])\n            return true;\n    return false;\n}\nfunction isSchemaObj(it) {\n    return typeof it.schema != \"boolean\";\n}\nfunction subSchemaObjCode(it, valid) {\n    const { schema, gen, opts } = it;\n    if (opts.$comment && schema.$comment)\n        commentKeyword(it);\n    updateContext(it);\n    checkAsyncSchema(it);\n    const errsCount = gen.const(\"_errs\", names_1.default.errors);\n    typeAndKeywords(it, errsCount);\n    // TODO var\n    gen.var(valid, (0, codegen_1._) `${errsCount} === ${names_1.default.errors}`);\n}\nfunction checkKeywords(it) {\n    (0, util_1.checkUnknownRules)(it);\n    checkRefsAndKeywords(it);\n}\nfunction typeAndKeywords(it, errsCount) {\n    if (it.opts.jtd)\n        return schemaKeywords(it, [], false, errsCount);\n    const types = (0, dataType_1.getSchemaTypes)(it.schema);\n    const checkedTypes = (0, dataType_1.coerceAndCheckDataType)(it, types);\n    schemaKeywords(it, types, !checkedTypes, errsCount);\n}\nfunction checkRefsAndKeywords(it) {\n    const { schema, errSchemaPath, opts, self } = it;\n    if (schema.$ref && opts.ignoreKeywordsWithRef && (0, util_1.schemaHasRulesButRef)(schema, self.RULES)) {\n        self.logger.warn(`$ref: keywords ignored in schema at path \"${errSchemaPath}\"`);\n    }\n}\nfunction checkNoDefault(it) {\n    const { schema, opts } = it;\n    if (schema.default !== undefined && opts.useDefaults && opts.strictSchema) {\n        (0, util_1.checkStrictMode)(it, \"default is ignored in the schema root\");\n    }\n}\nfunction updateContext(it) {\n    const schId = it.schema[it.opts.schemaId];\n    if (schId)\n        it.baseId = (0, resolve_1.resolveUrl)(it.opts.uriResolver, it.baseId, schId);\n}\nfunction checkAsyncSchema(it) {\n    if (it.schema.$async && !it.schemaEnv.$async)\n        throw new Error(\"async schema in sync schema\");\n}\nfunction commentKeyword({ gen, schemaEnv, schema, errSchemaPath, opts }) {\n    const msg = schema.$comment;\n    if (opts.$comment === true) {\n        gen.code((0, codegen_1._) `${names_1.default.self}.logger.log(${msg})`);\n    }\n    else if (typeof opts.$comment == \"function\") {\n        const schemaPath = (0, codegen_1.str) `${errSchemaPath}/$comment`;\n        const rootName = gen.scopeValue(\"root\", { ref: schemaEnv.root });\n        gen.code((0, codegen_1._) `${names_1.default.self}.opts.$comment(${msg}, ${schemaPath}, ${rootName}.schema)`);\n    }\n}\nfunction returnResults(it) {\n    const { gen, schemaEnv, validateName, ValidationError, opts } = it;\n    if (schemaEnv.$async) {\n        // TODO assign unevaluated\n        gen.if((0, codegen_1._) `${names_1.default.errors} === 0`, () => gen.return(names_1.default.data), () => gen.throw((0, codegen_1._) `new ${ValidationError}(${names_1.default.vErrors})`));\n    }\n    else {\n        gen.assign((0, codegen_1._) `${validateName}.errors`, names_1.default.vErrors);\n        if (opts.unevaluated)\n            assignEvaluated(it);\n        gen.return((0, codegen_1._) `${names_1.default.errors} === 0`);\n    }\n}\nfunction assignEvaluated({ gen, evaluated, props, items }) {\n    if (props instanceof codegen_1.Name)\n        gen.assign((0, codegen_1._) `${evaluated}.props`, props);\n    if (items instanceof codegen_1.Name)\n        gen.assign((0, codegen_1._) `${evaluated}.items`, items);\n}\nfunction schemaKeywords(it, types, typeErrors, errsCount) {\n    const { gen, schema, data, allErrors, opts, self } = it;\n    const { RULES } = self;\n    if (schema.$ref && (opts.ignoreKeywordsWithRef || !(0, util_1.schemaHasRulesButRef)(schema, RULES))) {\n        gen.block(() => keywordCode(it, \"$ref\", RULES.all.$ref.definition)); // TODO typecast\n        return;\n    }\n    if (!opts.jtd)\n        checkStrictTypes(it, types);\n    gen.block(() => {\n        for (const group of RULES.rules)\n            groupKeywords(group);\n        groupKeywords(RULES.post);\n    });\n    function groupKeywords(group) {\n        if (!(0, applicability_1.shouldUseGroup)(schema, group))\n            return;\n        if (group.type) {\n            gen.if((0, dataType_2.checkDataType)(group.type, data, opts.strictNumbers));\n            iterateKeywords(it, group);\n            if (types.length === 1 && types[0] === group.type && typeErrors) {\n                gen.else();\n                (0, dataType_2.reportTypeError)(it);\n            }\n            gen.endIf();\n        }\n        else {\n            iterateKeywords(it, group);\n        }\n        // TODO make it \"ok\" call?\n        if (!allErrors)\n            gen.if((0, codegen_1._) `${names_1.default.errors} === ${errsCount || 0}`);\n    }\n}\nfunction iterateKeywords(it, group) {\n    const { gen, schema, opts: { useDefaults }, } = it;\n    if (useDefaults)\n        (0, defaults_1.assignDefaults)(it, group.type);\n    gen.block(() => {\n        for (const rule of group.rules) {\n            if ((0, applicability_1.shouldUseRule)(schema, rule)) {\n                keywordCode(it, rule.keyword, rule.definition, group.type);\n            }\n        }\n    });\n}\nfunction checkStrictTypes(it, types) {\n    if (it.schemaEnv.meta || !it.opts.strictTypes)\n        return;\n    checkContextTypes(it, types);\n    if (!it.opts.allowUnionTypes)\n        checkMultipleTypes(it, types);\n    checkKeywordTypes(it, it.dataTypes);\n}\nfunction checkContextTypes(it, types) {\n    if (!types.length)\n        return;\n    if (!it.dataTypes.length) {\n        it.dataTypes = types;\n        return;\n    }\n    types.forEach((t) => {\n        if (!includesType(it.dataTypes, t)) {\n            strictTypesError(it, `type \"${t}\" not allowed by context \"${it.dataTypes.join(\",\")}\"`);\n        }\n    });\n    narrowSchemaTypes(it, types);\n}\nfunction checkMultipleTypes(it, ts) {\n    if (ts.length > 1 && !(ts.length === 2 && ts.includes(\"null\"))) {\n        strictTypesError(it, \"use allowUnionTypes to allow union type keyword\");\n    }\n}\nfunction checkKeywordTypes(it, ts) {\n    const rules = it.self.RULES.all;\n    for (const keyword in rules) {\n        const rule = rules[keyword];\n        if (typeof rule == \"object\" && (0, applicability_1.shouldUseRule)(it.schema, rule)) {\n            const { type } = rule.definition;\n            if (type.length && !type.some((t) => hasApplicableType(ts, t))) {\n                strictTypesError(it, `missing type \"${type.join(\",\")}\" for keyword \"${keyword}\"`);\n            }\n        }\n    }\n}\nfunction hasApplicableType(schTs, kwdT) {\n    return schTs.includes(kwdT) || (kwdT === \"number\" && schTs.includes(\"integer\"));\n}\nfunction includesType(ts, t) {\n    return ts.includes(t) || (t === \"integer\" && ts.includes(\"number\"));\n}\nfunction narrowSchemaTypes(it, withTypes) {\n    const ts = [];\n    for (const t of it.dataTypes) {\n        if (includesType(withTypes, t))\n            ts.push(t);\n        else if (withTypes.includes(\"integer\") && t === \"number\")\n            ts.push(\"integer\");\n    }\n    it.dataTypes = ts;\n}\nfunction strictTypesError(it, msg) {\n    const schemaPath = it.schemaEnv.baseId + it.errSchemaPath;\n    msg += ` at \"${schemaPath}\" (strictTypes)`;\n    (0, util_1.checkStrictMode)(it, msg, it.opts.strictTypes);\n}\nclass KeywordCxt {\n    constructor(it, def, keyword) {\n        (0, keyword_1.validateKeywordUsage)(it, def, keyword);\n        this.gen = it.gen;\n        this.allErrors = it.allErrors;\n        this.keyword = keyword;\n        this.data = it.data;\n        this.schema = it.schema[keyword];\n        this.$data = def.$data && it.opts.$data && this.schema && this.schema.$data;\n        this.schemaValue = (0, util_1.schemaRefOrVal)(it, this.schema, keyword, this.$data);\n        this.schemaType = def.schemaType;\n        this.parentSchema = it.schema;\n        this.params = {};\n        this.it = it;\n        this.def = def;\n        if (this.$data) {\n            this.schemaCode = it.gen.const(\"vSchema\", getData(this.$data, it));\n        }\n        else {\n            this.schemaCode = this.schemaValue;\n            if (!(0, keyword_1.validSchemaType)(this.schema, def.schemaType, def.allowUndefined)) {\n                throw new Error(`${keyword} value must be ${JSON.stringify(def.schemaType)}`);\n            }\n        }\n        if (\"code\" in def ? def.trackErrors : def.errors !== false) {\n            this.errsCount = it.gen.const(\"_errs\", names_1.default.errors);\n        }\n    }\n    result(condition, successAction, failAction) {\n        this.failResult((0, codegen_1.not)(condition), successAction, failAction);\n    }\n    failResult(condition, successAction, failAction) {\n        this.gen.if(condition);\n        if (failAction)\n            failAction();\n        else\n            this.error();\n        if (successAction) {\n            this.gen.else();\n            successAction();\n            if (this.allErrors)\n                this.gen.endIf();\n        }\n        else {\n            if (this.allErrors)\n                this.gen.endIf();\n            else\n                this.gen.else();\n        }\n    }\n    pass(condition, failAction) {\n        this.failResult((0, codegen_1.not)(condition), undefined, failAction);\n    }\n    fail(condition) {\n        if (condition === undefined) {\n            this.error();\n            if (!this.allErrors)\n                this.gen.if(false); // this branch will be removed by gen.optimize\n            return;\n        }\n        this.gen.if(condition);\n        this.error();\n        if (this.allErrors)\n            this.gen.endIf();\n        else\n            this.gen.else();\n    }\n    fail$data(condition) {\n        if (!this.$data)\n            return this.fail(condition);\n        const { schemaCode } = this;\n        this.fail((0, codegen_1._) `${schemaCode} !== undefined && (${(0, codegen_1.or)(this.invalid$data(), condition)})`);\n    }\n    error(append, errorParams, errorPaths) {\n        if (errorParams) {\n            this.setParams(errorParams);\n            this._error(append, errorPaths);\n            this.setParams({});\n            return;\n        }\n        this._error(append, errorPaths);\n    }\n    _error(append, errorPaths) {\n        ;\n        (append ? errors_1.reportExtraError : errors_1.reportError)(this, this.def.error, errorPaths);\n    }\n    $dataError() {\n        (0, errors_1.reportError)(this, this.def.$dataError || errors_1.keyword$DataError);\n    }\n    reset() {\n        if (this.errsCount === undefined)\n            throw new Error('add \"trackErrors\" to keyword definition');\n        (0, errors_1.resetErrorsCount)(this.gen, this.errsCount);\n    }\n    ok(cond) {\n        if (!this.allErrors)\n            this.gen.if(cond);\n    }\n    setParams(obj, assign) {\n        if (assign)\n            Object.assign(this.params, obj);\n        else\n            this.params = obj;\n    }\n    block$data(valid, codeBlock, $dataValid = codegen_1.nil) {\n        this.gen.block(() => {\n            this.check$data(valid, $dataValid);\n            codeBlock();\n        });\n    }\n    check$data(valid = codegen_1.nil, $dataValid = codegen_1.nil) {\n        if (!this.$data)\n            return;\n        const { gen, schemaCode, schemaType, def } = this;\n        gen.if((0, codegen_1.or)((0, codegen_1._) `${schemaCode} === undefined`, $dataValid));\n        if (valid !== codegen_1.nil)\n            gen.assign(valid, true);\n        if (schemaType.length || def.validateSchema) {\n            gen.elseIf(this.invalid$data());\n            this.$dataError();\n            if (valid !== codegen_1.nil)\n                gen.assign(valid, false);\n        }\n        gen.else();\n    }\n    invalid$data() {\n        const { gen, schemaCode, schemaType, def, it } = this;\n        return (0, codegen_1.or)(wrong$DataType(), invalid$DataSchema());\n        function wrong$DataType() {\n            if (schemaType.length) {\n                /* istanbul ignore if */\n                if (!(schemaCode instanceof codegen_1.Name))\n                    throw new Error(\"ajv implementation error\");\n                const st = Array.isArray(schemaType) ? schemaType : [schemaType];\n                return (0, codegen_1._) `${(0, dataType_2.checkDataTypes)(st, schemaCode, it.opts.strictNumbers, dataType_2.DataType.Wrong)}`;\n            }\n            return codegen_1.nil;\n        }\n        function invalid$DataSchema() {\n            if (def.validateSchema) {\n                const validateSchemaRef = gen.scopeValue(\"validate$data\", { ref: def.validateSchema }); // TODO value.code for standalone\n                return (0, codegen_1._) `!${validateSchemaRef}(${schemaCode})`;\n            }\n            return codegen_1.nil;\n        }\n    }\n    subschema(appl, valid) {\n        const subschema = (0, subschema_1.getSubschema)(this.it, appl);\n        (0, subschema_1.extendSubschemaData)(subschema, this.it, appl);\n        (0, subschema_1.extendSubschemaMode)(subschema, appl);\n        const nextContext = { ...this.it, ...subschema, items: undefined, props: undefined };\n        subschemaCode(nextContext, valid);\n        return nextContext;\n    }\n    mergeEvaluated(schemaCxt, toName) {\n        const { it, gen } = this;\n        if (!it.opts.unevaluated)\n            return;\n        if (it.props !== true && schemaCxt.props !== undefined) {\n            it.props = util_1.mergeEvaluated.props(gen, schemaCxt.props, it.props, toName);\n        }\n        if (it.items !== true && schemaCxt.items !== undefined) {\n            it.items = util_1.mergeEvaluated.items(gen, schemaCxt.items, it.items, toName);\n        }\n    }\n    mergeValidEvaluated(schemaCxt, valid) {\n        const { it, gen } = this;\n        if (it.opts.unevaluated && (it.props !== true || it.items !== true)) {\n            gen.if(valid, () => this.mergeEvaluated(schemaCxt, codegen_1.Name));\n            return true;\n        }\n    }\n}\nexports.KeywordCxt = KeywordCxt;\nfunction keywordCode(it, keyword, def, ruleType) {\n    const cxt = new KeywordCxt(it, def, keyword);\n    if (\"code\" in def) {\n        def.code(cxt, ruleType);\n    }\n    else if (cxt.$data && def.validate) {\n        (0, keyword_1.funcKeywordCode)(cxt, def);\n    }\n    else if (\"macro\" in def) {\n        (0, keyword_1.macroKeywordCode)(cxt, def);\n    }\n    else if (def.compile || def.validate) {\n        (0, keyword_1.funcKeywordCode)(cxt, def);\n    }\n}\nconst JSON_POINTER = /^\\/(?:[^~]|~0|~1)*$/;\nconst RELATIVE_JSON_POINTER = /^([0-9]+)(#|\\/(?:[^~]|~0|~1)*)?$/;\nfunction getData($data, { dataLevel, dataNames, dataPathArr }) {\n    let jsonPointer;\n    let data;\n    if ($data === \"\")\n        return names_1.default.rootData;\n    if ($data[0] === \"/\") {\n        if (!JSON_POINTER.test($data))\n            throw new Error(`Invalid JSON-pointer: ${$data}`);\n        jsonPointer = $data;\n        data = names_1.default.rootData;\n    }\n    else {\n        const matches = RELATIVE_JSON_POINTER.exec($data);\n        if (!matches)\n            throw new Error(`Invalid JSON-pointer: ${$data}`);\n        const up = +matches[1];\n        jsonPointer = matches[2];\n        if (jsonPointer === \"#\") {\n            if (up >= dataLevel)\n                throw new Error(errorMsg(\"property/index\", up));\n            return dataPathArr[dataLevel - up];\n        }\n        if (up > dataLevel)\n            throw new Error(errorMsg(\"data\", up));\n        data = dataNames[dataLevel - up];\n        if (!jsonPointer)\n            return data;\n    }\n    let expr = data;\n    const segments = jsonPointer.split(\"/\");\n    for (const segment of segments) {\n        if (segment) {\n            data = (0, codegen_1._) `${data}${(0, codegen_1.getProperty)((0, util_1.unescapeJsonPointer)(segment))}`;\n            expr = (0, codegen_1._) `${expr} && ${data}`;\n        }\n    }\n    return expr;\n    function errorMsg(pointerType, up) {\n        return `Cannot access ${pointerType} ${up} levels up, current level is ${dataLevel}`;\n    }\n}\nexports.getData = getData;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.boolOrEmptySchema = exports.topBoolOrEmptySchema = void 0;\nconst errors_1 = require(\"../errors\");\nconst codegen_1 = require(\"../codegen\");\nconst names_1 = require(\"../names\");\nconst boolError = {\n    message: \"boolean schema is false\",\n};\nfunction topBoolOrEmptySchema(it) {\n    const { gen, schema, validateName } = it;\n    if (schema === false) {\n        falseSchemaError(it, false);\n    }\n    else if (typeof schema == \"object\" && schema.$async === true) {\n        gen.return(names_1.default.data);\n    }\n    else {\n        gen.assign((0, codegen_1._) `${validateName}.errors`, null);\n        gen.return(true);\n    }\n}\nexports.topBoolOrEmptySchema = topBoolOrEmptySchema;\nfunction boolOrEmptySchema(it, valid) {\n    const { gen, schema } = it;\n    if (schema === false) {\n        gen.var(valid, false); // TODO var\n        falseSchemaError(it);\n    }\n    else {\n        gen.var(valid, true); // TODO var\n    }\n}\nexports.boolOrEmptySchema = boolOrEmptySchema;\nfunction falseSchemaError(it, overrideAllErrors) {\n    const { gen, data } = it;\n    // TODO maybe some other interface should be used for non-keyword validation errors...\n    const cxt = {\n        gen,\n        keyword: \"false schema\",\n        data,\n        schema: false,\n        schemaCode: false,\n        schemaValue: false,\n        params: {},\n        it,\n    };\n    (0, errors_1.reportError)(cxt, boolError, undefined, overrideAllErrors);\n}\n//# sourceMappingURL=boolSchema.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.assignDefaults = void 0;\nconst codegen_1 = require(\"../codegen\");\nconst util_1 = require(\"../util\");\nfunction assignDefaults(it, ty) {\n    const { properties, items } = it.schema;\n    if (ty === \"object\" && properties) {\n        for (const key in properties) {\n            assignDefault(it, key, properties[key].default);\n        }\n    }\n    else if (ty === \"array\" && Array.isArray(items)) {\n        items.forEach((sch, i) => assignDefault(it, i, sch.default));\n    }\n}\nexports.assignDefaults = assignDefaults;\nfunction assignDefault(it, prop, defaultValue) {\n    const { gen, compositeRule, data, opts } = it;\n    if (defaultValue === undefined)\n        return;\n    const childData = (0, codegen_1._) `${data}${(0, codegen_1.getProperty)(prop)}`;\n    if (compositeRule) {\n        (0, util_1.checkStrictMode)(it, `default is ignored for: ${childData}`);\n        return;\n    }\n    let condition = (0, codegen_1._) `${childData} === undefined`;\n    if (opts.useDefaults === \"empty\") {\n        condition = (0, codegen_1._) `${condition} || ${childData} === null || ${childData} === \"\"`;\n    }\n    // `${childData} === undefined` +\n    // (opts.useDefaults === \"empty\" ? ` || ${childData} === null || ${childData} === \"\"` : \"\")\n    gen.if(condition, (0, codegen_1._) `${childData} = ${(0, codegen_1.stringify)(defaultValue)}`);\n}\n//# sourceMappingURL=defaults.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.extendSubschemaMode = exports.extendSubschemaData = exports.getSubschema = void 0;\nconst codegen_1 = require(\"../codegen\");\nconst util_1 = require(\"../util\");\nfunction getSubschema(it, { keyword, schemaProp, schema, schemaPath, errSchemaPath, topSchemaRef }) {\n    if (keyword !== undefined && schema !== undefined) {\n        throw new Error('both \"keyword\" and \"schema\" passed, only one allowed');\n    }\n    if (keyword !== undefined) {\n        const sch = it.schema[keyword];\n        return schemaProp === undefined\n            ? {\n                schema: sch,\n                schemaPath: (0, codegen_1._) `${it.schemaPath}${(0, codegen_1.getProperty)(keyword)}`,\n                errSchemaPath: `${it.errSchemaPath}/${keyword}`,\n            }\n            : {\n                schema: sch[schemaProp],\n                schemaPath: (0, codegen_1._) `${it.schemaPath}${(0, codegen_1.getProperty)(keyword)}${(0, codegen_1.getProperty)(schemaProp)}`,\n                errSchemaPath: `${it.errSchemaPath}/${keyword}/${(0, util_1.escapeFragment)(schemaProp)}`,\n            };\n    }\n    if (schema !== undefined) {\n        if (schemaPath === undefined || errSchemaPath === undefined || topSchemaRef === undefined) {\n            throw new Error('\"schemaPath\", \"errSchemaPath\" and \"topSchemaRef\" are required with \"schema\"');\n        }\n        return {\n            schema,\n            schemaPath,\n            topSchemaRef,\n            errSchemaPath,\n        };\n    }\n    throw new Error('either \"keyword\" or \"schema\" must be passed');\n}\nexports.getSubschema = getSubschema;\nfunction extendSubschemaData(subschema, it, { dataProp, dataPropType: dpType, data, dataTypes, propertyName }) {\n    if (data !== undefined && dataProp !== undefined) {\n        throw new Error('both \"data\" and \"dataProp\" passed, only one allowed');\n    }\n    const { gen } = it;\n    if (dataProp !== undefined) {\n        const { errorPath, dataPathArr, opts } = it;\n        const nextData = gen.let(\"data\", (0, codegen_1._) `${it.data}${(0, codegen_1.getProperty)(dataProp)}`, true);\n        dataContextProps(nextData);\n        subschema.errorPath = (0, codegen_1.str) `${errorPath}${(0, util_1.getErrorPath)(dataProp, dpType, opts.jsPropertySyntax)}`;\n        subschema.parentDataProperty = (0, codegen_1._) `${dataProp}`;\n        subschema.dataPathArr = [...dataPathArr, subschema.parentDataProperty];\n    }\n    if (data !== undefined) {\n        const nextData = data instanceof codegen_1.Name ? data : gen.let(\"data\", data, true); // replaceable if used once?\n        dataContextProps(nextData);\n        if (propertyName !== undefined)\n            subschema.propertyName = propertyName;\n        // TODO something is possibly wrong here with not changing parentDataProperty and not appending dataPathArr\n    }\n    if (dataTypes)\n        subschema.dataTypes = dataTypes;\n    function dataContextProps(_nextData) {\n        subschema.data = _nextData;\n        subschema.dataLevel = it.dataLevel + 1;\n        subschema.dataTypes = [];\n        it.definedProperties = new Set();\n        subschema.parentData = it.data;\n        subschema.dataNames = [...it.dataNames, _nextData];\n    }\n}\nexports.extendSubschemaData = extendSubschemaData;\nfunction extendSubschemaMode(subschema, { jtdDiscriminator, jtdMetadata, compositeRule, createErrors, allErrors }) {\n    if (compositeRule !== undefined)\n        subschema.compositeRule = compositeRule;\n    if (createErrors !== undefined)\n        subschema.createErrors = createErrors;\n    if (allErrors !== undefined)\n        subschema.allErrors = allErrors;\n    subschema.jtdDiscriminator = jtdDiscriminator; // not inherited\n    subschema.jtdMetadata = jtdMetadata; // not inherited\n}\nexports.extendSubschemaMode = extendSubschemaMode;\n//# sourceMappingURL=subschema.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass ValidationError extends Error {\n    constructor(errors) {\n        super(\"validation failed\");\n        this.errors = errors;\n        this.ajv = this.validation = true;\n    }\n}\nexports.default = ValidationError;\n//# sourceMappingURL=validation_error.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst resolve_1 = require(\"./resolve\");\nclass MissingRefError extends Error {\n    constructor(resolver, baseId, ref, msg) {\n        super(msg || `can't resolve reference ${ref} from id ${baseId}`);\n        this.missingRef = (0, resolve_1.resolveUrl)(resolver, baseId, ref);\n        this.missingSchema = (0, resolve_1.normalizeId)((0, resolve_1.getFullPath)(resolver, this.missingRef));\n    }\n}\nexports.default = MissingRefError;\n//# sourceMappingURL=ref_error.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.resolveSchema = exports.getCompilingSchema = exports.resolveRef = exports.compileSchema = exports.SchemaEnv = void 0;\nconst codegen_1 = require(\"./codegen\");\nconst validation_error_1 = require(\"../runtime/validation_error\");\nconst names_1 = require(\"./names\");\nconst resolve_1 = require(\"./resolve\");\nconst util_1 = require(\"./util\");\nconst validate_1 = require(\"./validate\");\nclass SchemaEnv {\n    constructor(env) {\n        var _a;\n        this.refs = {};\n        this.dynamicAnchors = {};\n        let schema;\n        if (typeof env.schema == \"object\")\n            schema = env.schema;\n        this.schema = env.schema;\n        this.schemaId = env.schemaId;\n        this.root = env.root || this;\n        this.baseId = (_a = env.baseId) !== null && _a !== void 0 ? _a : (0, resolve_1.normalizeId)(schema === null || schema === void 0 ? void 0 : schema[env.schemaId || \"$id\"]);\n        this.schemaPath = env.schemaPath;\n        this.localRefs = env.localRefs;\n        this.meta = env.meta;\n        this.$async = schema === null || schema === void 0 ? void 0 : schema.$async;\n        this.refs = {};\n    }\n}\nexports.SchemaEnv = SchemaEnv;\n// let codeSize = 0\n// let nodeCount = 0\n// Compiles schema in SchemaEnv\nfunction compileSchema(sch) {\n    // TODO refactor - remove compilations\n    const _sch = getCompilingSchema.call(this, sch);\n    if (_sch)\n        return _sch;\n    const rootId = (0, resolve_1.getFullPath)(this.opts.uriResolver, sch.root.baseId); // TODO if getFullPath removed 1 tests fails\n    const { es5, lines } = this.opts.code;\n    const { ownProperties } = this.opts;\n    const gen = new codegen_1.CodeGen(this.scope, { es5, lines, ownProperties });\n    let _ValidationError;\n    if (sch.$async) {\n        _ValidationError = gen.scopeValue(\"Error\", {\n            ref: validation_error_1.default,\n            code: (0, codegen_1._) `require(\"ajv/dist/runtime/validation_error\").default`,\n        });\n    }\n    const validateName = gen.scopeName(\"validate\");\n    sch.validateName = validateName;\n    const schemaCxt = {\n        gen,\n        allErrors: this.opts.allErrors,\n        data: names_1.default.data,\n        parentData: names_1.default.parentData,\n        parentDataProperty: names_1.default.parentDataProperty,\n        dataNames: [names_1.default.data],\n        dataPathArr: [codegen_1.nil], // TODO can its length be used as dataLevel if nil is removed?\n        dataLevel: 0,\n        dataTypes: [],\n        definedProperties: new Set(),\n        topSchemaRef: gen.scopeValue(\"schema\", this.opts.code.source === true\n            ? { ref: sch.schema, code: (0, codegen_1.stringify)(sch.schema) }\n            : { ref: sch.schema }),\n        validateName,\n        ValidationError: _ValidationError,\n        schema: sch.schema,\n        schemaEnv: sch,\n        rootId,\n        baseId: sch.baseId || rootId,\n        schemaPath: codegen_1.nil,\n        errSchemaPath: sch.schemaPath || (this.opts.jtd ? \"\" : \"#\"),\n        errorPath: (0, codegen_1._) `\"\"`,\n        opts: this.opts,\n        self: this,\n    };\n    let sourceCode;\n    try {\n        this._compilations.add(sch);\n        (0, validate_1.validateFunctionCode)(schemaCxt);\n        gen.optimize(this.opts.code.optimize);\n        // gen.optimize(1)\n        const validateCode = gen.toString();\n        sourceCode = `${gen.scopeRefs(names_1.default.scope)}return ${validateCode}`;\n        // console.log((codeSize += sourceCode.length), (nodeCount += gen.nodeCount))\n        if (this.opts.code.process)\n            sourceCode = this.opts.code.process(sourceCode, sch);\n        // console.log(\"\\n\\n\\n *** \\n\", sourceCode)\n        const makeValidate = new Function(`${names_1.default.self}`, `${names_1.default.scope}`, sourceCode);\n        const validate = makeValidate(this, this.scope.get());\n        this.scope.value(validateName, { ref: validate });\n        validate.errors = null;\n        validate.schema = sch.schema;\n        validate.schemaEnv = sch;\n        if (sch.$async)\n            validate.$async = true;\n        if (this.opts.code.source === true) {\n            validate.source = { validateName, validateCode, scopeValues: gen._values };\n        }\n        if (this.opts.unevaluated) {\n            const { props, items } = schemaCxt;\n            validate.evaluated = {\n                props: props instanceof codegen_1.Name ? undefined : props,\n                items: items instanceof codegen_1.Name ? undefined : items,\n                dynamicProps: props instanceof codegen_1.Name,\n                dynamicItems: items instanceof codegen_1.Name,\n            };\n            if (validate.source)\n                validate.source.evaluated = (0, codegen_1.stringify)(validate.evaluated);\n        }\n        sch.validate = validate;\n        return sch;\n    }\n    catch (e) {\n        delete sch.validate;\n        delete sch.validateName;\n        if (sourceCode)\n            this.logger.error(\"Error compiling schema, function code:\", sourceCode);\n        // console.log(\"\\n\\n\\n *** \\n\", sourceCode, this.opts)\n        throw e;\n    }\n    finally {\n        this._compilations.delete(sch);\n    }\n}\nexports.compileSchema = compileSchema;\nfunction resolveRef(root, baseId, ref) {\n    var _a;\n    ref = (0, resolve_1.resolveUrl)(this.opts.uriResolver, baseId, ref);\n    const schOrFunc = root.refs[ref];\n    if (schOrFunc)\n        return schOrFunc;\n    let _sch = resolve.call(this, root, ref);\n    if (_sch === undefined) {\n        const schema = (_a = root.localRefs) === null || _a === void 0 ? void 0 : _a[ref]; // TODO maybe localRefs should hold SchemaEnv\n        const { schemaId } = this.opts;\n        if (schema)\n            _sch = new SchemaEnv({ schema, schemaId, root, baseId });\n    }\n    if (_sch === undefined)\n        return;\n    return (root.refs[ref] = inlineOrCompile.call(this, _sch));\n}\nexports.resolveRef = resolveRef;\nfunction inlineOrCompile(sch) {\n    if ((0, resolve_1.inlineRef)(sch.schema, this.opts.inlineRefs))\n        return sch.schema;\n    return sch.validate ? sch : compileSchema.call(this, sch);\n}\n// Index of schema compilation in the currently compiled list\nfunction getCompilingSchema(schEnv) {\n    for (const sch of this._compilations) {\n        if (sameSchemaEnv(sch, schEnv))\n            return sch;\n    }\n}\nexports.getCompilingSchema = getCompilingSchema;\nfunction sameSchemaEnv(s1, s2) {\n    return s1.schema === s2.schema && s1.root === s2.root && s1.baseId === s2.baseId;\n}\n// resolve and compile the references ($ref)\n// TODO returns AnySchemaObject (if the schema can be inlined) or validation function\nfunction resolve(root, // information about the root schema for the current schema\nref // reference to resolve\n) {\n    let sch;\n    while (typeof (sch = this.refs[ref]) == \"string\")\n        ref = sch;\n    return sch || this.schemas[ref] || resolveSchema.call(this, root, ref);\n}\n// Resolve schema, its root and baseId\nfunction resolveSchema(root, // root object with properties schema, refs TODO below SchemaEnv is assigned to it\nref // reference to resolve\n) {\n    const p = this.opts.uriResolver.parse(ref);\n    const refPath = (0, resolve_1._getFullPath)(this.opts.uriResolver, p);\n    let baseId = (0, resolve_1.getFullPath)(this.opts.uriResolver, root.baseId, undefined);\n    // TODO `Object.keys(root.schema).length > 0` should not be needed - but removing breaks 2 tests\n    if (Object.keys(root.schema).length > 0 && refPath === baseId) {\n        return getJsonPointer.call(this, p, root);\n    }\n    const id = (0, resolve_1.normalizeId)(refPath);\n    const schOrRef = this.refs[id] || this.schemas[id];\n    if (typeof schOrRef == \"string\") {\n        const sch = resolveSchema.call(this, root, schOrRef);\n        if (typeof (sch === null || sch === void 0 ? void 0 : sch.schema) !== \"object\")\n            return;\n        return getJsonPointer.call(this, p, sch);\n    }\n    if (typeof (schOrRef === null || schOrRef === void 0 ? void 0 : schOrRef.schema) !== \"object\")\n        return;\n    if (!schOrRef.validate)\n        compileSchema.call(this, schOrRef);\n    if (id === (0, resolve_1.normalizeId)(ref)) {\n        const { schema } = schOrRef;\n        const { schemaId } = this.opts;\n        const schId = schema[schemaId];\n        if (schId)\n            baseId = (0, resolve_1.resolveUrl)(this.opts.uriResolver, baseId, schId);\n        return new SchemaEnv({ schema, schemaId, root, baseId });\n    }\n    return getJsonPointer.call(this, p, schOrRef);\n}\nexports.resolveSchema = resolveSchema;\nconst PREVENT_SCOPE_CHANGE = new Set([\n    \"properties\",\n    \"patternProperties\",\n    \"enum\",\n    \"dependencies\",\n    \"definitions\",\n]);\nfunction getJsonPointer(parsedRef, { baseId, schema, root }) {\n    var _a;\n    if (((_a = parsedRef.fragment) === null || _a === void 0 ? void 0 : _a[0]) !== \"/\")\n        return;\n    for (const part of parsedRef.fragment.slice(1).split(\"/\")) {\n        if (typeof schema === \"boolean\")\n            return;\n        const partSchema = schema[(0, util_1.unescapeFragment)(part)];\n        if (partSchema === undefined)\n            return;\n        schema = partSchema;\n        // TODO PREVENT_SCOPE_CHANGE could be defined in keyword def?\n        const schId = typeof schema === \"object\" && schema[this.opts.schemaId];\n        if (!PREVENT_SCOPE_CHANGE.has(part) && schId) {\n            baseId = (0, resolve_1.resolveUrl)(this.opts.uriResolver, baseId, schId);\n        }\n    }\n    let env;\n    if (typeof schema != \"boolean\" && schema.$ref && !(0, util_1.schemaHasRulesButRef)(schema, this.RULES)) {\n        const $ref = (0, resolve_1.resolveUrl)(this.opts.uriResolver, baseId, schema.$ref);\n        env = resolveSchema.call(this, root, $ref);\n    }\n    // even though resolution failed we need to return SchemaEnv to throw exception\n    // so that compileAsync loads missing schema.\n    const { schemaId } = this.opts;\n    env = env || new SchemaEnv({ schema, schemaId, root, baseId });\n    if (env.schema !== env.root.schema)\n        return env;\n    return undefined;\n}\n//# sourceMappingURL=index.js.map","'use strict'\n\n/** @type {(value: string) => boolean} */\nconst isUUID = RegExp.prototype.test.bind(/^[\\da-f]{8}-[\\da-f]{4}-[\\da-f]{4}-[\\da-f]{4}-[\\da-f]{12}$/iu)\n\n/** @type {(value: string) => boolean} */\nconst isIPv4 = RegExp.prototype.test.bind(/^(?:(?:25[0-5]|2[0-4]\\d|1\\d{2}|[1-9]\\d|\\d)\\.){3}(?:25[0-5]|2[0-4]\\d|1\\d{2}|[1-9]\\d|\\d)$/u)\n\n/**\n * @param {Array<string>} input\n * @returns {string}\n */\nfunction stringArrayToHexStripped (input) {\n  let acc = ''\n  let code = 0\n  let i = 0\n\n  for (i = 0; i < input.length; i++) {\n    code = input[i].charCodeAt(0)\n    if (code === 48) {\n      continue\n    }\n    if (!((code >= 48 && code <= 57) || (code >= 65 && code <= 70) || (code >= 97 && code <= 102))) {\n      return ''\n    }\n    acc += input[i]\n    break\n  }\n\n  for (i += 1; i < input.length; i++) {\n    code = input[i].charCodeAt(0)\n    if (!((code >= 48 && code <= 57) || (code >= 65 && code <= 70) || (code >= 97 && code <= 102))) {\n      return ''\n    }\n    acc += input[i]\n  }\n  return acc\n}\n\n/**\n * @typedef {Object} GetIPV6Result\n * @property {boolean} error - Indicates if there was an error parsing the IPv6 address.\n * @property {string} address - The parsed IPv6 address.\n * @property {string} [zone] - The zone identifier, if present.\n */\n\n/**\n * @param {string} value\n * @returns {boolean}\n */\nconst nonSimpleDomain = RegExp.prototype.test.bind(/[^!\"$&'()*+,\\-.;=_`a-z{}~]/u)\n\n/**\n * @param {Array<string>} buffer\n * @returns {boolean}\n */\nfunction consumeIsZone (buffer) {\n  buffer.length = 0\n  return true\n}\n\n/**\n * @param {Array<string>} buffer\n * @param {Array<string>} address\n * @param {GetIPV6Result} output\n * @returns {boolean}\n */\nfunction consumeHextets (buffer, address, output) {\n  if (buffer.length) {\n    const hex = stringArrayToHexStripped(buffer)\n    if (hex !== '') {\n      address.push(hex)\n    } else {\n      output.error = true\n      return false\n    }\n    buffer.length = 0\n  }\n  return true\n}\n\n/**\n * @param {string} input\n * @returns {GetIPV6Result}\n */\nfunction getIPV6 (input) {\n  let tokenCount = 0\n  const output = { error: false, address: '', zone: '' }\n  /** @type {Array<string>} */\n  const address = []\n  /** @type {Array<string>} */\n  const buffer = []\n  let endipv6Encountered = false\n  let endIpv6 = false\n\n  let consume = consumeHextets\n\n  for (let i = 0; i < input.length; i++) {\n    const cursor = input[i]\n    if (cursor === '[' || cursor === ']') { continue }\n    if (cursor === ':') {\n      if (endipv6Encountered === true) {\n        endIpv6 = true\n      }\n      if (!consume(buffer, address, output)) { break }\n      if (++tokenCount > 7) {\n        // not valid\n        output.error = true\n        break\n      }\n      if (i > 0 && input[i - 1] === ':') {\n        endipv6Encountered = true\n      }\n      address.push(':')\n      continue\n    } else if (cursor === '%') {\n      if (!consume(buffer, address, output)) { break }\n      // switch to zone detection\n      consume = consumeIsZone\n    } else {\n      buffer.push(cursor)\n      continue\n    }\n  }\n  if (buffer.length) {\n    if (consume === consumeIsZone) {\n      output.zone = buffer.join('')\n    } else if (endIpv6) {\n      address.push(buffer.join(''))\n    } else {\n      address.push(stringArrayToHexStripped(buffer))\n    }\n  }\n  output.address = address.join('')\n  return output\n}\n\n/**\n * @typedef {Object} NormalizeIPv6Result\n * @property {string} host - The normalized host.\n * @property {string} [escapedHost] - The escaped host.\n * @property {boolean} isIPV6 - Indicates if the host is an IPv6 address.\n */\n\n/**\n * @param {string} host\n * @returns {NormalizeIPv6Result}\n */\nfunction normalizeIPv6 (host) {\n  if (findToken(host, ':') < 2) { return { host, isIPV6: false } }\n  const ipv6 = getIPV6(host)\n\n  if (!ipv6.error) {\n    let newHost = ipv6.address\n    let escapedHost = ipv6.address\n    if (ipv6.zone) {\n      newHost += '%' + ipv6.zone\n      escapedHost += '%25' + ipv6.zone\n    }\n    return { host: newHost, isIPV6: true, escapedHost }\n  } else {\n    return { host, isIPV6: false }\n  }\n}\n\n/**\n * @param {string} str\n * @param {string} token\n * @returns {number}\n */\nfunction findToken (str, token) {\n  let ind = 0\n  for (let i = 0; i < str.length; i++) {\n    if (str[i] === token) ind++\n  }\n  return ind\n}\n\n/**\n * @param {string} path\n * @returns {string}\n *\n * @see https://datatracker.ietf.org/doc/html/rfc3986#section-5.2.4\n */\nfunction removeDotSegments (path) {\n  let input = path\n  const output = []\n  let nextSlash = -1\n  let len = 0\n\n  // eslint-disable-next-line no-cond-assign\n  while (len = input.length) {\n    if (len === 1) {\n      if (input === '.') {\n        break\n      } else if (input === '/') {\n        output.push('/')\n        break\n      } else {\n        output.push(input)\n        break\n      }\n    } else if (len === 2) {\n      if (input[0] === '.') {\n        if (input[1] === '.') {\n          break\n        } else if (input[1] === '/') {\n          input = input.slice(2)\n          continue\n        }\n      } else if (input[0] === '/') {\n        if (input[1] === '.' || input[1] === '/') {\n          output.push('/')\n          break\n        }\n      }\n    } else if (len === 3) {\n      if (input === '/..') {\n        if (output.length !== 0) {\n          output.pop()\n        }\n        output.push('/')\n        break\n      }\n    }\n    if (input[0] === '.') {\n      if (input[1] === '.') {\n        if (input[2] === '/') {\n          input = input.slice(3)\n          continue\n        }\n      } else if (input[1] === '/') {\n        input = input.slice(2)\n        continue\n      }\n    } else if (input[0] === '/') {\n      if (input[1] === '.') {\n        if (input[2] === '/') {\n          input = input.slice(2)\n          continue\n        } else if (input[2] === '.') {\n          if (input[3] === '/') {\n            input = input.slice(3)\n            if (output.length !== 0) {\n              output.pop()\n            }\n            continue\n          }\n        }\n      }\n    }\n\n    // Rule 2E: Move normal path segment to output\n    if ((nextSlash = input.indexOf('/', 1)) === -1) {\n      output.push(input)\n      break\n    } else {\n      output.push(input.slice(0, nextSlash))\n      input = input.slice(nextSlash)\n    }\n  }\n\n  return output.join('')\n}\n\n/**\n * @param {import('../types/index').URIComponent} component\n * @param {boolean} esc\n * @returns {import('../types/index').URIComponent}\n */\nfunction normalizeComponentEncoding (component, esc) {\n  const func = esc !== true ? escape : unescape\n  if (component.scheme !== undefined) {\n    component.scheme = func(component.scheme)\n  }\n  if (component.userinfo !== undefined) {\n    component.userinfo = func(component.userinfo)\n  }\n  if (component.host !== undefined) {\n    component.host = func(component.host)\n  }\n  if (component.path !== undefined) {\n    component.path = func(component.path)\n  }\n  if (component.query !== undefined) {\n    component.query = func(component.query)\n  }\n  if (component.fragment !== undefined) {\n    component.fragment = func(component.fragment)\n  }\n  return component\n}\n\n/**\n * @param {import('../types/index').URIComponent} component\n * @returns {string|undefined}\n */\nfunction recomposeAuthority (component) {\n  const uriTokens = []\n\n  if (component.userinfo !== undefined) {\n    uriTokens.push(component.userinfo)\n    uriTokens.push('@')\n  }\n\n  if (component.host !== undefined) {\n    let host = unescape(component.host)\n    if (!isIPv4(host)) {\n      const ipV6res = normalizeIPv6(host)\n      if (ipV6res.isIPV6 === true) {\n        host = `[${ipV6res.escapedHost}]`\n      } else {\n        host = component.host\n      }\n    }\n    uriTokens.push(host)\n  }\n\n  if (typeof component.port === 'number' || typeof component.port === 'string') {\n    uriTokens.push(':')\n    uriTokens.push(String(component.port))\n  }\n\n  return uriTokens.length ? uriTokens.join('') : undefined\n};\n\nmodule.exports = {\n  nonSimpleDomain,\n  recomposeAuthority,\n  normalizeComponentEncoding,\n  removeDotSegments,\n  isIPv4,\n  isUUID,\n  normalizeIPv6,\n  stringArrayToHexStripped\n}\n","'use strict'\n\nconst { normalizeIPv6, removeDotSegments, recomposeAuthority, normalizeComponentEncoding, isIPv4, nonSimpleDomain } = require('./lib/utils')\nconst { SCHEMES, getSchemeHandler } = require('./lib/schemes')\n\n/**\n * @template {import('./types/index').URIComponent|string} T\n * @param {T} uri\n * @param {import('./types/index').Options} [options]\n * @returns {T}\n */\nfunction normalize (uri, options) {\n  if (typeof uri === 'string') {\n    uri = /** @type {T} */ (serialize(parse(uri, options), options))\n  } else if (typeof uri === 'object') {\n    uri = /** @type {T} */ (parse(serialize(uri, options), options))\n  }\n  return uri\n}\n\n/**\n * @param {string} baseURI\n * @param {string} relativeURI\n * @param {import('./types/index').Options} [options]\n * @returns {string}\n */\nfunction resolve (baseURI, relativeURI, options) {\n  const schemelessOptions = options ? Object.assign({ scheme: 'null' }, options) : { scheme: 'null' }\n  const resolved = resolveComponent(parse(baseURI, schemelessOptions), parse(relativeURI, schemelessOptions), schemelessOptions, true)\n  schemelessOptions.skipEscape = true\n  return serialize(resolved, schemelessOptions)\n}\n\n/**\n * @param {import ('./types/index').URIComponent} base\n * @param {import ('./types/index').URIComponent} relative\n * @param {import('./types/index').Options} [options]\n * @param {boolean} [skipNormalization=false]\n * @returns {import ('./types/index').URIComponent}\n */\nfunction resolveComponent (base, relative, options, skipNormalization) {\n  /** @type {import('./types/index').URIComponent} */\n  const target = {}\n  if (!skipNormalization) {\n    base = parse(serialize(base, options), options) // normalize base component\n    relative = parse(serialize(relative, options), options) // normalize relative component\n  }\n  options = options || {}\n\n  if (!options.tolerant && relative.scheme) {\n    target.scheme = relative.scheme\n    // target.authority = relative.authority;\n    target.userinfo = relative.userinfo\n    target.host = relative.host\n    target.port = relative.port\n    target.path = removeDotSegments(relative.path || '')\n    target.query = relative.query\n  } else {\n    if (relative.userinfo !== undefined || relative.host !== undefined || relative.port !== undefined) {\n      // target.authority = relative.authority;\n      target.userinfo = relative.userinfo\n      target.host = relative.host\n      target.port = relative.port\n      target.path = removeDotSegments(relative.path || '')\n      target.query = relative.query\n    } else {\n      if (!relative.path) {\n        target.path = base.path\n        if (relative.query !== undefined) {\n          target.query = relative.query\n        } else {\n          target.query = base.query\n        }\n      } else {\n        if (relative.path[0] === '/') {\n          target.path = removeDotSegments(relative.path)\n        } else {\n          if ((base.userinfo !== undefined || base.host !== undefined || base.port !== undefined) && !base.path) {\n            target.path = '/' + relative.path\n          } else if (!base.path) {\n            target.path = relative.path\n          } else {\n            target.path = base.path.slice(0, base.path.lastIndexOf('/') + 1) + relative.path\n          }\n          target.path = removeDotSegments(target.path)\n        }\n        target.query = relative.query\n      }\n      // target.authority = base.authority;\n      target.userinfo = base.userinfo\n      target.host = base.host\n      target.port = base.port\n    }\n    target.scheme = base.scheme\n  }\n\n  target.fragment = relative.fragment\n\n  return target\n}\n\n/**\n * @param {import ('./types/index').URIComponent|string} uriA\n * @param {import ('./types/index').URIComponent|string} uriB\n * @param {import ('./types/index').Options} options\n * @returns {boolean}\n */\nfunction equal (uriA, uriB, options) {\n  if (typeof uriA === 'string') {\n    uriA = unescape(uriA)\n    uriA = serialize(normalizeComponentEncoding(parse(uriA, options), true), { ...options, skipEscape: true })\n  } else if (typeof uriA === 'object') {\n    uriA = serialize(normalizeComponentEncoding(uriA, true), { ...options, skipEscape: true })\n  }\n\n  if (typeof uriB === 'string') {\n    uriB = unescape(uriB)\n    uriB = serialize(normalizeComponentEncoding(parse(uriB, options), true), { ...options, skipEscape: true })\n  } else if (typeof uriB === 'object') {\n    uriB = serialize(normalizeComponentEncoding(uriB, true), { ...options, skipEscape: true })\n  }\n\n  return uriA.toLowerCase() === uriB.toLowerCase()\n}\n\n/**\n * @param {Readonly<import('./types/index').URIComponent>} cmpts\n * @param {import('./types/index').Options} [opts]\n * @returns {string}\n */\nfunction serialize (cmpts, opts) {\n  const component = {\n    host: cmpts.host,\n    scheme: cmpts.scheme,\n    userinfo: cmpts.userinfo,\n    port: cmpts.port,\n    path: cmpts.path,\n    query: cmpts.query,\n    nid: cmpts.nid,\n    nss: cmpts.nss,\n    uuid: cmpts.uuid,\n    fragment: cmpts.fragment,\n    reference: cmpts.reference,\n    resourceName: cmpts.resourceName,\n    secure: cmpts.secure,\n    error: ''\n  }\n  const options = Object.assign({}, opts)\n  const uriTokens = []\n\n  // find scheme handler\n  const schemeHandler = getSchemeHandler(options.scheme || component.scheme)\n\n  // perform scheme specific serialization\n  if (schemeHandler && schemeHandler.serialize) schemeHandler.serialize(component, options)\n\n  if (component.path !== undefined) {\n    if (!options.skipEscape) {\n      component.path = escape(component.path)\n\n      if (component.scheme !== undefined) {\n        component.path = component.path.split('%3A').join(':')\n      }\n    } else {\n      component.path = unescape(component.path)\n    }\n  }\n\n  if (options.reference !== 'suffix' && component.scheme) {\n    uriTokens.push(component.scheme, ':')\n  }\n\n  const authority = recomposeAuthority(component)\n  if (authority !== undefined) {\n    if (options.reference !== 'suffix') {\n      uriTokens.push('//')\n    }\n\n    uriTokens.push(authority)\n\n    if (component.path && component.path[0] !== '/') {\n      uriTokens.push('/')\n    }\n  }\n  if (component.path !== undefined) {\n    let s = component.path\n\n    if (!options.absolutePath && (!schemeHandler || !schemeHandler.absolutePath)) {\n      s = removeDotSegments(s)\n    }\n\n    if (\n      authority === undefined &&\n      s[0] === '/' &&\n      s[1] === '/'\n    ) {\n      // don't allow the path to start with \"//\"\n      s = '/%2F' + s.slice(2)\n    }\n\n    uriTokens.push(s)\n  }\n\n  if (component.query !== undefined) {\n    uriTokens.push('?', component.query)\n  }\n\n  if (component.fragment !== undefined) {\n    uriTokens.push('#', component.fragment)\n  }\n  return uriTokens.join('')\n}\n\nconst URI_PARSE = /^(?:([^#/:?]+):)?(?:\\/\\/((?:([^#/?@]*)@)?(\\[[^#/?\\]]+\\]|[^#/:?]*)(?::(\\d*))?))?([^#?]*)(?:\\?([^#]*))?(?:#((?:.|[\\n\\r])*))?/u\n\n/**\n * @param {string} uri\n * @param {import('./types/index').Options} [opts]\n * @returns\n */\nfunction parse (uri, opts) {\n  const options = Object.assign({}, opts)\n  /** @type {import('./types/index').URIComponent} */\n  const parsed = {\n    scheme: undefined,\n    userinfo: undefined,\n    host: '',\n    port: undefined,\n    path: '',\n    query: undefined,\n    fragment: undefined\n  }\n\n  let isIP = false\n  if (options.reference === 'suffix') {\n    if (options.scheme) {\n      uri = options.scheme + ':' + uri\n    } else {\n      uri = '//' + uri\n    }\n  }\n\n  const matches = uri.match(URI_PARSE)\n\n  if (matches) {\n    // store each component\n    parsed.scheme = matches[1]\n    parsed.userinfo = matches[3]\n    parsed.host = matches[4]\n    parsed.port = parseInt(matches[5], 10)\n    parsed.path = matches[6] || ''\n    parsed.query = matches[7]\n    parsed.fragment = matches[8]\n\n    // fix port number\n    if (isNaN(parsed.port)) {\n      parsed.port = matches[5]\n    }\n    if (parsed.host) {\n      const ipv4result = isIPv4(parsed.host)\n      if (ipv4result === false) {\n        const ipv6result = normalizeIPv6(parsed.host)\n        parsed.host = ipv6result.host.toLowerCase()\n        isIP = ipv6result.isIPV6\n      } else {\n        isIP = true\n      }\n    }\n    if (parsed.scheme === undefined && parsed.userinfo === undefined && parsed.host === undefined && parsed.port === undefined && parsed.query === undefined && !parsed.path) {\n      parsed.reference = 'same-document'\n    } else if (parsed.scheme === undefined) {\n      parsed.reference = 'relative'\n    } else if (parsed.fragment === undefined) {\n      parsed.reference = 'absolute'\n    } else {\n      parsed.reference = 'uri'\n    }\n\n    // check for reference errors\n    if (options.reference && options.reference !== 'suffix' && options.reference !== parsed.reference) {\n      parsed.error = parsed.error || 'URI is not a ' + options.reference + ' reference.'\n    }\n\n    // find scheme handler\n    const schemeHandler = getSchemeHandler(options.scheme || parsed.scheme)\n\n    // check if scheme can't handle IRIs\n    if (!options.unicodeSupport && (!schemeHandler || !schemeHandler.unicodeSupport)) {\n      // if host component is a domain name\n      if (parsed.host && (options.domainHost || (schemeHandler && schemeHandler.domainHost)) && isIP === false && nonSimpleDomain(parsed.host)) {\n        // convert Unicode IDN -> ASCII IDN\n        try {\n          parsed.host = URL.domainToASCII(parsed.host.toLowerCase())\n        } catch (e) {\n          parsed.error = parsed.error || \"Host's domain name can not be converted to ASCII: \" + e\n        }\n      }\n      // convert IRI -> URI\n    }\n\n    if (!schemeHandler || (schemeHandler && !schemeHandler.skipNormalize)) {\n      if (uri.indexOf('%') !== -1) {\n        if (parsed.scheme !== undefined) {\n          parsed.scheme = unescape(parsed.scheme)\n        }\n        if (parsed.host !== undefined) {\n          parsed.host = unescape(parsed.host)\n        }\n      }\n      if (parsed.path) {\n        parsed.path = escape(unescape(parsed.path))\n      }\n      if (parsed.fragment) {\n        parsed.fragment = encodeURI(decodeURIComponent(parsed.fragment))\n      }\n    }\n\n    // perform scheme specific parsing\n    if (schemeHandler && schemeHandler.parse) {\n      schemeHandler.parse(parsed, options)\n    }\n  } else {\n    parsed.error = parsed.error || 'URI can not be parsed.'\n  }\n  return parsed\n}\n\nconst fastUri = {\n  SCHEMES,\n  normalize,\n  resolve,\n  resolveComponent,\n  equal,\n  serialize,\n  parse\n}\n\nmodule.exports = fastUri\nmodule.exports.default = fastUri\nmodule.exports.fastUri = fastUri\n","'use strict'\n\nconst { isUUID } = require('./utils')\nconst URN_REG = /([\\da-z][\\d\\-a-z]{0,31}):((?:[\\w!$'()*+,\\-.:;=@]|%[\\da-f]{2})+)/iu\n\nconst supportedSchemeNames = /** @type {const} */ (['http', 'https', 'ws',\n  'wss', 'urn', 'urn:uuid'])\n\n/** @typedef {supportedSchemeNames[number]} SchemeName */\n\n/**\n * @param {string} name\n * @returns {name is SchemeName}\n */\nfunction isValidSchemeName (name) {\n  return supportedSchemeNames.indexOf(/** @type {*} */ (name)) !== -1\n}\n\n/**\n * @callback SchemeFn\n * @param {import('../types/index').URIComponent} component\n * @param {import('../types/index').Options} options\n * @returns {import('../types/index').URIComponent}\n */\n\n/**\n * @typedef {Object} SchemeHandler\n * @property {SchemeName} scheme - The scheme name.\n * @property {boolean} [domainHost] - Indicates if the scheme supports domain hosts.\n * @property {SchemeFn} parse - Function to parse the URI component for this scheme.\n * @property {SchemeFn} serialize - Function to serialize the URI component for this scheme.\n * @property {boolean} [skipNormalize] - Indicates if normalization should be skipped for this scheme.\n * @property {boolean} [absolutePath] - Indicates if the scheme uses absolute paths.\n * @property {boolean} [unicodeSupport] - Indicates if the scheme supports Unicode.\n */\n\n/**\n * @param {import('../types/index').URIComponent} wsComponent\n * @returns {boolean}\n */\nfunction wsIsSecure (wsComponent) {\n  if (wsComponent.secure === true) {\n    return true\n  } else if (wsComponent.secure === false) {\n    return false\n  } else if (wsComponent.scheme) {\n    return (\n      wsComponent.scheme.length === 3 &&\n      (wsComponent.scheme[0] === 'w' || wsComponent.scheme[0] === 'W') &&\n      (wsComponent.scheme[1] === 's' || wsComponent.scheme[1] === 'S') &&\n      (wsComponent.scheme[2] === 's' || wsComponent.scheme[2] === 'S')\n    )\n  } else {\n    return false\n  }\n}\n\n/** @type {SchemeFn} */\nfunction httpParse (component) {\n  if (!component.host) {\n    component.error = component.error || 'HTTP URIs must have a host.'\n  }\n\n  return component\n}\n\n/** @type {SchemeFn} */\nfunction httpSerialize (component) {\n  const secure = String(component.scheme).toLowerCase() === 'https'\n\n  // normalize the default port\n  if (component.port === (secure ? 443 : 80) || component.port === '') {\n    component.port = undefined\n  }\n\n  // normalize the empty path\n  if (!component.path) {\n    component.path = '/'\n  }\n\n  // NOTE: We do not parse query strings for HTTP URIs\n  // as WWW Form Url Encoded query strings are part of the HTML4+ spec,\n  // and not the HTTP spec.\n\n  return component\n}\n\n/** @type {SchemeFn} */\nfunction wsParse (wsComponent) {\n// indicate if the secure flag is set\n  wsComponent.secure = wsIsSecure(wsComponent)\n\n  // construct resouce name\n  wsComponent.resourceName = (wsComponent.path || '/') + (wsComponent.query ? '?' + wsComponent.query : '')\n  wsComponent.path = undefined\n  wsComponent.query = undefined\n\n  return wsComponent\n}\n\n/** @type {SchemeFn} */\nfunction wsSerialize (wsComponent) {\n// normalize the default port\n  if (wsComponent.port === (wsIsSecure(wsComponent) ? 443 : 80) || wsComponent.port === '') {\n    wsComponent.port = undefined\n  }\n\n  // ensure scheme matches secure flag\n  if (typeof wsComponent.secure === 'boolean') {\n    wsComponent.scheme = (wsComponent.secure ? 'wss' : 'ws')\n    wsComponent.secure = undefined\n  }\n\n  // reconstruct path from resource name\n  if (wsComponent.resourceName) {\n    const [path, query] = wsComponent.resourceName.split('?')\n    wsComponent.path = (path && path !== '/' ? path : undefined)\n    wsComponent.query = query\n    wsComponent.resourceName = undefined\n  }\n\n  // forbid fragment component\n  wsComponent.fragment = undefined\n\n  return wsComponent\n}\n\n/** @type {SchemeFn} */\nfunction urnParse (urnComponent, options) {\n  if (!urnComponent.path) {\n    urnComponent.error = 'URN can not be parsed'\n    return urnComponent\n  }\n  const matches = urnComponent.path.match(URN_REG)\n  if (matches) {\n    const scheme = options.scheme || urnComponent.scheme || 'urn'\n    urnComponent.nid = matches[1].toLowerCase()\n    urnComponent.nss = matches[2]\n    const urnScheme = `${scheme}:${options.nid || urnComponent.nid}`\n    const schemeHandler = getSchemeHandler(urnScheme)\n    urnComponent.path = undefined\n\n    if (schemeHandler) {\n      urnComponent = schemeHandler.parse(urnComponent, options)\n    }\n  } else {\n    urnComponent.error = urnComponent.error || 'URN can not be parsed.'\n  }\n\n  return urnComponent\n}\n\n/** @type {SchemeFn} */\nfunction urnSerialize (urnComponent, options) {\n  if (urnComponent.nid === undefined) {\n    throw new Error('URN without nid cannot be serialized')\n  }\n  const scheme = options.scheme || urnComponent.scheme || 'urn'\n  const nid = urnComponent.nid.toLowerCase()\n  const urnScheme = `${scheme}:${options.nid || nid}`\n  const schemeHandler = getSchemeHandler(urnScheme)\n\n  if (schemeHandler) {\n    urnComponent = schemeHandler.serialize(urnComponent, options)\n  }\n\n  const uriComponent = urnComponent\n  const nss = urnComponent.nss\n  uriComponent.path = `${nid || options.nid}:${nss}`\n\n  options.skipEscape = true\n  return uriComponent\n}\n\n/** @type {SchemeFn} */\nfunction urnuuidParse (urnComponent, options) {\n  const uuidComponent = urnComponent\n  uuidComponent.uuid = uuidComponent.nss\n  uuidComponent.nss = undefined\n\n  if (!options.tolerant && (!uuidComponent.uuid || !isUUID(uuidComponent.uuid))) {\n    uuidComponent.error = uuidComponent.error || 'UUID is not valid.'\n  }\n\n  return uuidComponent\n}\n\n/** @type {SchemeFn} */\nfunction urnuuidSerialize (uuidComponent) {\n  const urnComponent = uuidComponent\n  // normalize UUID\n  urnComponent.nss = (uuidComponent.uuid || '').toLowerCase()\n  return urnComponent\n}\n\nconst http = /** @type {SchemeHandler} */ ({\n  scheme: 'http',\n  domainHost: true,\n  parse: httpParse,\n  serialize: httpSerialize\n})\n\nconst https = /** @type {SchemeHandler} */ ({\n  scheme: 'https',\n  domainHost: http.domainHost,\n  parse: httpParse,\n  serialize: httpSerialize\n})\n\nconst ws = /** @type {SchemeHandler} */ ({\n  scheme: 'ws',\n  domainHost: true,\n  parse: wsParse,\n  serialize: wsSerialize\n})\n\nconst wss = /** @type {SchemeHandler} */ ({\n  scheme: 'wss',\n  domainHost: ws.domainHost,\n  parse: ws.parse,\n  serialize: ws.serialize\n})\n\nconst urn = /** @type {SchemeHandler} */ ({\n  scheme: 'urn',\n  parse: urnParse,\n  serialize: urnSerialize,\n  skipNormalize: true\n})\n\nconst urnuuid = /** @type {SchemeHandler} */ ({\n  scheme: 'urn:uuid',\n  parse: urnuuidParse,\n  serialize: urnuuidSerialize,\n  skipNormalize: true\n})\n\nconst SCHEMES = /** @type {Record<SchemeName, SchemeHandler>} */ ({\n  http,\n  https,\n  ws,\n  wss,\n  urn,\n  'urn:uuid': urnuuid\n})\n\nObject.setPrototypeOf(SCHEMES, null)\n\n/**\n * @param {string|undefined} scheme\n * @returns {SchemeHandler|undefined}\n */\nfunction getSchemeHandler (scheme) {\n  return (\n    scheme && (\n      SCHEMES[/** @type {SchemeName} */ (scheme)] ||\n      SCHEMES[/** @type {SchemeName} */(scheme.toLowerCase())])\n  ) ||\n    undefined\n}\n\nmodule.exports = {\n  wsIsSecure,\n  SCHEMES,\n  isValidSchemeName,\n  getSchemeHandler,\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CodeGen = exports.Name = exports.nil = exports.stringify = exports.str = exports._ = exports.KeywordCxt = void 0;\nvar validate_1 = require(\"./compile/validate\");\nObject.defineProperty(exports, \"KeywordCxt\", { enumerable: true, get: function () { return validate_1.KeywordCxt; } });\nvar codegen_1 = require(\"./compile/codegen\");\nObject.defineProperty(exports, \"_\", { enumerable: true, get: function () { return codegen_1._; } });\nObject.defineProperty(exports, \"str\", { enumerable: true, get: function () { return codegen_1.str; } });\nObject.defineProperty(exports, \"stringify\", { enumerable: true, get: function () { return codegen_1.stringify; } });\nObject.defineProperty(exports, \"nil\", { enumerable: true, get: function () { return codegen_1.nil; } });\nObject.defineProperty(exports, \"Name\", { enumerable: true, get: function () { return codegen_1.Name; } });\nObject.defineProperty(exports, \"CodeGen\", { enumerable: true, get: function () { return codegen_1.CodeGen; } });\nconst validation_error_1 = require(\"./runtime/validation_error\");\nconst ref_error_1 = require(\"./compile/ref_error\");\nconst rules_1 = require(\"./compile/rules\");\nconst compile_1 = require(\"./compile\");\nconst codegen_2 = require(\"./compile/codegen\");\nconst resolve_1 = require(\"./compile/resolve\");\nconst dataType_1 = require(\"./compile/validate/dataType\");\nconst util_1 = require(\"./compile/util\");\nconst $dataRefSchema = require(\"./refs/data.json\");\nconst uri_1 = require(\"./runtime/uri\");\nconst defaultRegExp = (str, flags) => new RegExp(str, flags);\ndefaultRegExp.code = \"new RegExp\";\nconst META_IGNORE_OPTIONS = [\"removeAdditional\", \"useDefaults\", \"coerceTypes\"];\nconst EXT_SCOPE_NAMES = new Set([\n    \"validate\",\n    \"serialize\",\n    \"parse\",\n    \"wrapper\",\n    \"root\",\n    \"schema\",\n    \"keyword\",\n    \"pattern\",\n    \"formats\",\n    \"validate$data\",\n    \"func\",\n    \"obj\",\n    \"Error\",\n]);\nconst removedOptions = {\n    errorDataPath: \"\",\n    format: \"`validateFormats: false` can be used instead.\",\n    nullable: '\"nullable\" keyword is supported by default.',\n    jsonPointers: \"Deprecated jsPropertySyntax can be used instead.\",\n    extendRefs: \"Deprecated ignoreKeywordsWithRef can be used instead.\",\n    missingRefs: \"Pass empty schema with $id that should be ignored to ajv.addSchema.\",\n    processCode: \"Use option `code: {process: (code, schemaEnv: object) => string}`\",\n    sourceCode: \"Use option `code: {source: true}`\",\n    strictDefaults: \"It is default now, see option `strict`.\",\n    strictKeywords: \"It is default now, see option `strict`.\",\n    uniqueItems: '\"uniqueItems\" keyword is always validated.',\n    unknownFormats: \"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).\",\n    cache: \"Map is used as cache, schema object as key.\",\n    serialize: \"Map is used as cache, schema object as key.\",\n    ajvErrors: \"It is default now.\",\n};\nconst deprecatedOptions = {\n    ignoreKeywordsWithRef: \"\",\n    jsPropertySyntax: \"\",\n    unicode: '\"minLength\"/\"maxLength\" account for unicode characters by default.',\n};\nconst MAX_EXPRESSION = 200;\n// eslint-disable-next-line complexity\nfunction requiredOptions(o) {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x, _y, _z, _0;\n    const s = o.strict;\n    const _optz = (_a = o.code) === null || _a === void 0 ? void 0 : _a.optimize;\n    const optimize = _optz === true || _optz === undefined ? 1 : _optz || 0;\n    const regExp = (_c = (_b = o.code) === null || _b === void 0 ? void 0 : _b.regExp) !== null && _c !== void 0 ? _c : defaultRegExp;\n    const uriResolver = (_d = o.uriResolver) !== null && _d !== void 0 ? _d : uri_1.default;\n    return {\n        strictSchema: (_f = (_e = o.strictSchema) !== null && _e !== void 0 ? _e : s) !== null && _f !== void 0 ? _f : true,\n        strictNumbers: (_h = (_g = o.strictNumbers) !== null && _g !== void 0 ? _g : s) !== null && _h !== void 0 ? _h : true,\n        strictTypes: (_k = (_j = o.strictTypes) !== null && _j !== void 0 ? _j : s) !== null && _k !== void 0 ? _k : \"log\",\n        strictTuples: (_m = (_l = o.strictTuples) !== null && _l !== void 0 ? _l : s) !== null && _m !== void 0 ? _m : \"log\",\n        strictRequired: (_p = (_o = o.strictRequired) !== null && _o !== void 0 ? _o : s) !== null && _p !== void 0 ? _p : false,\n        code: o.code ? { ...o.code, optimize, regExp } : { optimize, regExp },\n        loopRequired: (_q = o.loopRequired) !== null && _q !== void 0 ? _q : MAX_EXPRESSION,\n        loopEnum: (_r = o.loopEnum) !== null && _r !== void 0 ? _r : MAX_EXPRESSION,\n        meta: (_s = o.meta) !== null && _s !== void 0 ? _s : true,\n        messages: (_t = o.messages) !== null && _t !== void 0 ? _t : true,\n        inlineRefs: (_u = o.inlineRefs) !== null && _u !== void 0 ? _u : true,\n        schemaId: (_v = o.schemaId) !== null && _v !== void 0 ? _v : \"$id\",\n        addUsedSchema: (_w = o.addUsedSchema) !== null && _w !== void 0 ? _w : true,\n        validateSchema: (_x = o.validateSchema) !== null && _x !== void 0 ? _x : true,\n        validateFormats: (_y = o.validateFormats) !== null && _y !== void 0 ? _y : true,\n        unicodeRegExp: (_z = o.unicodeRegExp) !== null && _z !== void 0 ? _z : true,\n        int32range: (_0 = o.int32range) !== null && _0 !== void 0 ? _0 : true,\n        uriResolver: uriResolver,\n    };\n}\nclass Ajv {\n    constructor(opts = {}) {\n        this.schemas = {};\n        this.refs = {};\n        this.formats = {};\n        this._compilations = new Set();\n        this._loading = {};\n        this._cache = new Map();\n        opts = this.opts = { ...opts, ...requiredOptions(opts) };\n        const { es5, lines } = this.opts.code;\n        this.scope = new codegen_2.ValueScope({ scope: {}, prefixes: EXT_SCOPE_NAMES, es5, lines });\n        this.logger = getLogger(opts.logger);\n        const formatOpt = opts.validateFormats;\n        opts.validateFormats = false;\n        this.RULES = (0, rules_1.getRules)();\n        checkOptions.call(this, removedOptions, opts, \"NOT SUPPORTED\");\n        checkOptions.call(this, deprecatedOptions, opts, \"DEPRECATED\", \"warn\");\n        this._metaOpts = getMetaSchemaOptions.call(this);\n        if (opts.formats)\n            addInitialFormats.call(this);\n        this._addVocabularies();\n        this._addDefaultMetaSchema();\n        if (opts.keywords)\n            addInitialKeywords.call(this, opts.keywords);\n        if (typeof opts.meta == \"object\")\n            this.addMetaSchema(opts.meta);\n        addInitialSchemas.call(this);\n        opts.validateFormats = formatOpt;\n    }\n    _addVocabularies() {\n        this.addKeyword(\"$async\");\n    }\n    _addDefaultMetaSchema() {\n        const { $data, meta, schemaId } = this.opts;\n        let _dataRefSchema = $dataRefSchema;\n        if (schemaId === \"id\") {\n            _dataRefSchema = { ...$dataRefSchema };\n            _dataRefSchema.id = _dataRefSchema.$id;\n            delete _dataRefSchema.$id;\n        }\n        if (meta && $data)\n            this.addMetaSchema(_dataRefSchema, _dataRefSchema[schemaId], false);\n    }\n    defaultMeta() {\n        const { meta, schemaId } = this.opts;\n        return (this.opts.defaultMeta = typeof meta == \"object\" ? meta[schemaId] || meta : undefined);\n    }\n    validate(schemaKeyRef, // key, ref or schema object\n    // eslint-disable-next-line @typescript-eslint/no-redundant-type-constituents\n    data // to be validated\n    ) {\n        let v;\n        if (typeof schemaKeyRef == \"string\") {\n            v = this.getSchema(schemaKeyRef);\n            if (!v)\n                throw new Error(`no schema with key or ref \"${schemaKeyRef}\"`);\n        }\n        else {\n            v = this.compile(schemaKeyRef);\n        }\n        const valid = v(data);\n        if (!(\"$async\" in v))\n            this.errors = v.errors;\n        return valid;\n    }\n    compile(schema, _meta) {\n        const sch = this._addSchema(schema, _meta);\n        return (sch.validate || this._compileSchemaEnv(sch));\n    }\n    compileAsync(schema, meta) {\n        if (typeof this.opts.loadSchema != \"function\") {\n            throw new Error(\"options.loadSchema should be a function\");\n        }\n        const { loadSchema } = this.opts;\n        return runCompileAsync.call(this, schema, meta);\n        async function runCompileAsync(_schema, _meta) {\n            await loadMetaSchema.call(this, _schema.$schema);\n            const sch = this._addSchema(_schema, _meta);\n            return sch.validate || _compileAsync.call(this, sch);\n        }\n        async function loadMetaSchema($ref) {\n            if ($ref && !this.getSchema($ref)) {\n                await runCompileAsync.call(this, { $ref }, true);\n            }\n        }\n        async function _compileAsync(sch) {\n            try {\n                return this._compileSchemaEnv(sch);\n            }\n            catch (e) {\n                if (!(e instanceof ref_error_1.default))\n                    throw e;\n                checkLoaded.call(this, e);\n                await loadMissingSchema.call(this, e.missingSchema);\n                return _compileAsync.call(this, sch);\n            }\n        }\n        function checkLoaded({ missingSchema: ref, missingRef }) {\n            if (this.refs[ref]) {\n                throw new Error(`AnySchema ${ref} is loaded but ${missingRef} cannot be resolved`);\n            }\n        }\n        async function loadMissingSchema(ref) {\n            const _schema = await _loadSchema.call(this, ref);\n            if (!this.refs[ref])\n                await loadMetaSchema.call(this, _schema.$schema);\n            if (!this.refs[ref])\n                this.addSchema(_schema, ref, meta);\n        }\n        async function _loadSchema(ref) {\n            const p = this._loading[ref];\n            if (p)\n                return p;\n            try {\n                return await (this._loading[ref] = loadSchema(ref));\n            }\n            finally {\n                delete this._loading[ref];\n            }\n        }\n    }\n    // Adds schema to the instance\n    addSchema(schema, // If array is passed, `key` will be ignored\n    key, // Optional schema key. Can be passed to `validate` method instead of schema object or id/ref. One schema per instance can have empty `id` and `key`.\n    _meta, // true if schema is a meta-schema. Used internally, addMetaSchema should be used instead.\n    _validateSchema = this.opts.validateSchema // false to skip schema validation. Used internally, option validateSchema should be used instead.\n    ) {\n        if (Array.isArray(schema)) {\n            for (const sch of schema)\n                this.addSchema(sch, undefined, _meta, _validateSchema);\n            return this;\n        }\n        let id;\n        if (typeof schema === \"object\") {\n            const { schemaId } = this.opts;\n            id = schema[schemaId];\n            if (id !== undefined && typeof id != \"string\") {\n                throw new Error(`schema ${schemaId} must be string`);\n            }\n        }\n        key = (0, resolve_1.normalizeId)(key || id);\n        this._checkUnique(key);\n        this.schemas[key] = this._addSchema(schema, _meta, key, _validateSchema, true);\n        return this;\n    }\n    // Add schema that will be used to validate other schemas\n    // options in META_IGNORE_OPTIONS are alway set to false\n    addMetaSchema(schema, key, // schema key\n    _validateSchema = this.opts.validateSchema // false to skip schema validation, can be used to override validateSchema option for meta-schema\n    ) {\n        this.addSchema(schema, key, true, _validateSchema);\n        return this;\n    }\n    //  Validate schema against its meta-schema\n    validateSchema(schema, throwOrLogError) {\n        if (typeof schema == \"boolean\")\n            return true;\n        let $schema;\n        $schema = schema.$schema;\n        if ($schema !== undefined && typeof $schema != \"string\") {\n            throw new Error(\"$schema must be a string\");\n        }\n        $schema = $schema || this.opts.defaultMeta || this.defaultMeta();\n        if (!$schema) {\n            this.logger.warn(\"meta-schema not available\");\n            this.errors = null;\n            return true;\n        }\n        const valid = this.validate($schema, schema);\n        if (!valid && throwOrLogError) {\n            const message = \"schema is invalid: \" + this.errorsText();\n            if (this.opts.validateSchema === \"log\")\n                this.logger.error(message);\n            else\n                throw new Error(message);\n        }\n        return valid;\n    }\n    // Get compiled schema by `key` or `ref`.\n    // (`key` that was passed to `addSchema` or full schema reference - `schema.$id` or resolved id)\n    getSchema(keyRef) {\n        let sch;\n        while (typeof (sch = getSchEnv.call(this, keyRef)) == \"string\")\n            keyRef = sch;\n        if (sch === undefined) {\n            const { schemaId } = this.opts;\n            const root = new compile_1.SchemaEnv({ schema: {}, schemaId });\n            sch = compile_1.resolveSchema.call(this, root, keyRef);\n            if (!sch)\n                return;\n            this.refs[keyRef] = sch;\n        }\n        return (sch.validate || this._compileSchemaEnv(sch));\n    }\n    // Remove cached schema(s).\n    // If no parameter is passed all schemas but meta-schemas are removed.\n    // If RegExp is passed all schemas with key/id matching pattern but meta-schemas are removed.\n    // Even if schema is referenced by other schemas it still can be removed as other schemas have local references.\n    removeSchema(schemaKeyRef) {\n        if (schemaKeyRef instanceof RegExp) {\n            this._removeAllSchemas(this.schemas, schemaKeyRef);\n            this._removeAllSchemas(this.refs, schemaKeyRef);\n            return this;\n        }\n        switch (typeof schemaKeyRef) {\n            case \"undefined\":\n                this._removeAllSchemas(this.schemas);\n                this._removeAllSchemas(this.refs);\n                this._cache.clear();\n                return this;\n            case \"string\": {\n                const sch = getSchEnv.call(this, schemaKeyRef);\n                if (typeof sch == \"object\")\n                    this._cache.delete(sch.schema);\n                delete this.schemas[schemaKeyRef];\n                delete this.refs[schemaKeyRef];\n                return this;\n            }\n            case \"object\": {\n                const cacheKey = schemaKeyRef;\n                this._cache.delete(cacheKey);\n                let id = schemaKeyRef[this.opts.schemaId];\n                if (id) {\n                    id = (0, resolve_1.normalizeId)(id);\n                    delete this.schemas[id];\n                    delete this.refs[id];\n                }\n                return this;\n            }\n            default:\n                throw new Error(\"ajv.removeSchema: invalid parameter\");\n        }\n    }\n    // add \"vocabulary\" - a collection of keywords\n    addVocabulary(definitions) {\n        for (const def of definitions)\n            this.addKeyword(def);\n        return this;\n    }\n    addKeyword(kwdOrDef, def // deprecated\n    ) {\n        let keyword;\n        if (typeof kwdOrDef == \"string\") {\n            keyword = kwdOrDef;\n            if (typeof def == \"object\") {\n                this.logger.warn(\"these parameters are deprecated, see docs for addKeyword\");\n                def.keyword = keyword;\n            }\n        }\n        else if (typeof kwdOrDef == \"object\" && def === undefined) {\n            def = kwdOrDef;\n            keyword = def.keyword;\n            if (Array.isArray(keyword) && !keyword.length) {\n                throw new Error(\"addKeywords: keyword must be string or non-empty array\");\n            }\n        }\n        else {\n            throw new Error(\"invalid addKeywords parameters\");\n        }\n        checkKeyword.call(this, keyword, def);\n        if (!def) {\n            (0, util_1.eachItem)(keyword, (kwd) => addRule.call(this, kwd));\n            return this;\n        }\n        keywordMetaschema.call(this, def);\n        const definition = {\n            ...def,\n            type: (0, dataType_1.getJSONTypes)(def.type),\n            schemaType: (0, dataType_1.getJSONTypes)(def.schemaType),\n        };\n        (0, util_1.eachItem)(keyword, definition.type.length === 0\n            ? (k) => addRule.call(this, k, definition)\n            : (k) => definition.type.forEach((t) => addRule.call(this, k, definition, t)));\n        return this;\n    }\n    getKeyword(keyword) {\n        const rule = this.RULES.all[keyword];\n        return typeof rule == \"object\" ? rule.definition : !!rule;\n    }\n    // Remove keyword\n    removeKeyword(keyword) {\n        // TODO return type should be Ajv\n        const { RULES } = this;\n        delete RULES.keywords[keyword];\n        delete RULES.all[keyword];\n        for (const group of RULES.rules) {\n            const i = group.rules.findIndex((rule) => rule.keyword === keyword);\n            if (i >= 0)\n                group.rules.splice(i, 1);\n        }\n        return this;\n    }\n    // Add format\n    addFormat(name, format) {\n        if (typeof format == \"string\")\n            format = new RegExp(format);\n        this.formats[name] = format;\n        return this;\n    }\n    errorsText(errors = this.errors, // optional array of validation errors\n    { separator = \", \", dataVar = \"data\" } = {} // optional options with properties `separator` and `dataVar`\n    ) {\n        if (!errors || errors.length === 0)\n            return \"No errors\";\n        return errors\n            .map((e) => `${dataVar}${e.instancePath} ${e.message}`)\n            .reduce((text, msg) => text + separator + msg);\n    }\n    $dataMetaSchema(metaSchema, keywordsJsonPointers) {\n        const rules = this.RULES.all;\n        metaSchema = JSON.parse(JSON.stringify(metaSchema));\n        for (const jsonPointer of keywordsJsonPointers) {\n            const segments = jsonPointer.split(\"/\").slice(1); // first segment is an empty string\n            let keywords = metaSchema;\n            for (const seg of segments)\n                keywords = keywords[seg];\n            for (const key in rules) {\n                const rule = rules[key];\n                if (typeof rule != \"object\")\n                    continue;\n                const { $data } = rule.definition;\n                const schema = keywords[key];\n                if ($data && schema)\n                    keywords[key] = schemaOrData(schema);\n            }\n        }\n        return metaSchema;\n    }\n    _removeAllSchemas(schemas, regex) {\n        for (const keyRef in schemas) {\n            const sch = schemas[keyRef];\n            if (!regex || regex.test(keyRef)) {\n                if (typeof sch == \"string\") {\n                    delete schemas[keyRef];\n                }\n                else if (sch && !sch.meta) {\n                    this._cache.delete(sch.schema);\n                    delete schemas[keyRef];\n                }\n            }\n        }\n    }\n    _addSchema(schema, meta, baseId, validateSchema = this.opts.validateSchema, addSchema = this.opts.addUsedSchema) {\n        let id;\n        const { schemaId } = this.opts;\n        if (typeof schema == \"object\") {\n            id = schema[schemaId];\n        }\n        else {\n            if (this.opts.jtd)\n                throw new Error(\"schema must be object\");\n            else if (typeof schema != \"boolean\")\n                throw new Error(\"schema must be object or boolean\");\n        }\n        let sch = this._cache.get(schema);\n        if (sch !== undefined)\n            return sch;\n        baseId = (0, resolve_1.normalizeId)(id || baseId);\n        const localRefs = resolve_1.getSchemaRefs.call(this, schema, baseId);\n        sch = new compile_1.SchemaEnv({ schema, schemaId, meta, baseId, localRefs });\n        this._cache.set(sch.schema, sch);\n        if (addSchema && !baseId.startsWith(\"#\")) {\n            // TODO atm it is allowed to overwrite schemas without id (instead of not adding them)\n            if (baseId)\n                this._checkUnique(baseId);\n            this.refs[baseId] = sch;\n        }\n        if (validateSchema)\n            this.validateSchema(schema, true);\n        return sch;\n    }\n    _checkUnique(id) {\n        if (this.schemas[id] || this.refs[id]) {\n            throw new Error(`schema with key or id \"${id}\" already exists`);\n        }\n    }\n    _compileSchemaEnv(sch) {\n        if (sch.meta)\n            this._compileMetaSchema(sch);\n        else\n            compile_1.compileSchema.call(this, sch);\n        /* istanbul ignore if */\n        if (!sch.validate)\n            throw new Error(\"ajv implementation error\");\n        return sch.validate;\n    }\n    _compileMetaSchema(sch) {\n        const currentOpts = this.opts;\n        this.opts = this._metaOpts;\n        try {\n            compile_1.compileSchema.call(this, sch);\n        }\n        finally {\n            this.opts = currentOpts;\n        }\n    }\n}\nAjv.ValidationError = validation_error_1.default;\nAjv.MissingRefError = ref_error_1.default;\nexports.default = Ajv;\nfunction checkOptions(checkOpts, options, msg, log = \"error\") {\n    for (const key in checkOpts) {\n        const opt = key;\n        if (opt in options)\n            this.logger[log](`${msg}: option ${key}. ${checkOpts[opt]}`);\n    }\n}\nfunction getSchEnv(keyRef) {\n    keyRef = (0, resolve_1.normalizeId)(keyRef); // TODO tests fail without this line\n    return this.schemas[keyRef] || this.refs[keyRef];\n}\nfunction addInitialSchemas() {\n    const optsSchemas = this.opts.schemas;\n    if (!optsSchemas)\n        return;\n    if (Array.isArray(optsSchemas))\n        this.addSchema(optsSchemas);\n    else\n        for (const key in optsSchemas)\n            this.addSchema(optsSchemas[key], key);\n}\nfunction addInitialFormats() {\n    for (const name in this.opts.formats) {\n        const format = this.opts.formats[name];\n        if (format)\n            this.addFormat(name, format);\n    }\n}\nfunction addInitialKeywords(defs) {\n    if (Array.isArray(defs)) {\n        this.addVocabulary(defs);\n        return;\n    }\n    this.logger.warn(\"keywords option as map is deprecated, pass array\");\n    for (const keyword in defs) {\n        const def = defs[keyword];\n        if (!def.keyword)\n            def.keyword = keyword;\n        this.addKeyword(def);\n    }\n}\nfunction getMetaSchemaOptions() {\n    const metaOpts = { ...this.opts };\n    for (const opt of META_IGNORE_OPTIONS)\n        delete metaOpts[opt];\n    return metaOpts;\n}\nconst noLogs = { log() { }, warn() { }, error() { } };\nfunction getLogger(logger) {\n    if (logger === false)\n        return noLogs;\n    if (logger === undefined)\n        return console;\n    if (logger.log && logger.warn && logger.error)\n        return logger;\n    throw new Error(\"logger must implement log, warn and error methods\");\n}\nconst KEYWORD_NAME = /^[a-z_$][a-z0-9_$:-]*$/i;\nfunction checkKeyword(keyword, def) {\n    const { RULES } = this;\n    (0, util_1.eachItem)(keyword, (kwd) => {\n        if (RULES.keywords[kwd])\n            throw new Error(`Keyword ${kwd} is already defined`);\n        if (!KEYWORD_NAME.test(kwd))\n            throw new Error(`Keyword ${kwd} has invalid name`);\n    });\n    if (!def)\n        return;\n    if (def.$data && !(\"code\" in def || \"validate\" in def)) {\n        throw new Error('$data keyword must have \"code\" or \"validate\" function');\n    }\n}\nfunction addRule(keyword, definition, dataType) {\n    var _a;\n    const post = definition === null || definition === void 0 ? void 0 : definition.post;\n    if (dataType && post)\n        throw new Error('keyword with \"post\" flag cannot have \"type\"');\n    const { RULES } = this;\n    let ruleGroup = post ? RULES.post : RULES.rules.find(({ type: t }) => t === dataType);\n    if (!ruleGroup) {\n        ruleGroup = { type: dataType, rules: [] };\n        RULES.rules.push(ruleGroup);\n    }\n    RULES.keywords[keyword] = true;\n    if (!definition)\n        return;\n    const rule = {\n        keyword,\n        definition: {\n            ...definition,\n            type: (0, dataType_1.getJSONTypes)(definition.type),\n            schemaType: (0, dataType_1.getJSONTypes)(definition.schemaType),\n        },\n    };\n    if (definition.before)\n        addBeforeRule.call(this, ruleGroup, rule, definition.before);\n    else\n        ruleGroup.rules.push(rule);\n    RULES.all[keyword] = rule;\n    (_a = definition.implements) === null || _a === void 0 ? void 0 : _a.forEach((kwd) => this.addKeyword(kwd));\n}\nfunction addBeforeRule(ruleGroup, rule, before) {\n    const i = ruleGroup.rules.findIndex((_rule) => _rule.keyword === before);\n    if (i >= 0) {\n        ruleGroup.rules.splice(i, 0, rule);\n    }\n    else {\n        ruleGroup.rules.push(rule);\n        this.logger.warn(`rule ${before} is not defined`);\n    }\n}\nfunction keywordMetaschema(def) {\n    let { metaSchema } = def;\n    if (metaSchema === undefined)\n        return;\n    if (def.$data && this.opts.$data)\n        metaSchema = schemaOrData(metaSchema);\n    def.validateSchema = this.compile(metaSchema, true);\n}\nconst $dataRef = {\n    $ref: \"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#\",\n};\nfunction schemaOrData(schema) {\n    return { anyOf: [schema, $dataRef] };\n}\n//# sourceMappingURL=core.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst uri = require(\"fast-uri\");\nuri.code = 'require(\"ajv/dist/runtime/uri\").default';\nexports.default = uri;\n//# sourceMappingURL=uri.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.callRef = exports.getValidate = void 0;\nconst ref_error_1 = require(\"../../compile/ref_error\");\nconst code_1 = require(\"../code\");\nconst codegen_1 = require(\"../../compile/codegen\");\nconst names_1 = require(\"../../compile/names\");\nconst compile_1 = require(\"../../compile\");\nconst util_1 = require(\"../../compile/util\");\nconst def = {\n    keyword: \"$ref\",\n    schemaType: \"string\",\n    code(cxt) {\n        const { gen, schema: $ref, it } = cxt;\n        const { baseId, schemaEnv: env, validateName, opts, self } = it;\n        const { root } = env;\n        if (($ref === \"#\" || $ref === \"#/\") && baseId === root.baseId)\n            return callRootRef();\n        const schOrEnv = compile_1.resolveRef.call(self, root, baseId, $ref);\n        if (schOrEnv === undefined)\n            throw new ref_error_1.default(it.opts.uriResolver, baseId, $ref);\n        if (schOrEnv instanceof compile_1.SchemaEnv)\n            return callValidate(schOrEnv);\n        return inlineRefSchema(schOrEnv);\n        function callRootRef() {\n            if (env === root)\n                return callRef(cxt, validateName, env, env.$async);\n            const rootName = gen.scopeValue(\"root\", { ref: root });\n            return callRef(cxt, (0, codegen_1._) `${rootName}.validate`, root, root.$async);\n        }\n        function callValidate(sch) {\n            const v = getValidate(cxt, sch);\n            callRef(cxt, v, sch, sch.$async);\n        }\n        function inlineRefSchema(sch) {\n            const schName = gen.scopeValue(\"schema\", opts.code.source === true ? { ref: sch, code: (0, codegen_1.stringify)(sch) } : { ref: sch });\n            const valid = gen.name(\"valid\");\n            const schCxt = cxt.subschema({\n                schema: sch,\n                dataTypes: [],\n                schemaPath: codegen_1.nil,\n                topSchemaRef: schName,\n                errSchemaPath: $ref,\n            }, valid);\n            cxt.mergeEvaluated(schCxt);\n            cxt.ok(valid);\n        }\n    },\n};\nfunction getValidate(cxt, sch) {\n    const { gen } = cxt;\n    return sch.validate\n        ? gen.scopeValue(\"validate\", { ref: sch.validate })\n        : (0, codegen_1._) `${gen.scopeValue(\"wrapper\", { ref: sch })}.validate`;\n}\nexports.getValidate = getValidate;\nfunction callRef(cxt, v, sch, $async) {\n    const { gen, it } = cxt;\n    const { allErrors, schemaEnv: env, opts } = it;\n    const passCxt = opts.passContext ? names_1.default.this : codegen_1.nil;\n    if ($async)\n        callAsyncRef();\n    else\n        callSyncRef();\n    function callAsyncRef() {\n        if (!env.$async)\n            throw new Error(\"async schema referenced by sync schema\");\n        const valid = gen.let(\"valid\");\n        gen.try(() => {\n            gen.code((0, codegen_1._) `await ${(0, code_1.callValidateCode)(cxt, v, passCxt)}`);\n            addEvaluatedFrom(v); // TODO will not work with async, it has to be returned with the result\n            if (!allErrors)\n                gen.assign(valid, true);\n        }, (e) => {\n            gen.if((0, codegen_1._) `!(${e} instanceof ${it.ValidationError})`, () => gen.throw(e));\n            addErrorsFrom(e);\n            if (!allErrors)\n                gen.assign(valid, false);\n        });\n        cxt.ok(valid);\n    }\n    function callSyncRef() {\n        cxt.result((0, code_1.callValidateCode)(cxt, v, passCxt), () => addEvaluatedFrom(v), () => addErrorsFrom(v));\n    }\n    function addErrorsFrom(source) {\n        const errs = (0, codegen_1._) `${source}.errors`;\n        gen.assign(names_1.default.vErrors, (0, codegen_1._) `${names_1.default.vErrors} === null ? ${errs} : ${names_1.default.vErrors}.concat(${errs})`); // TODO tagged\n        gen.assign(names_1.default.errors, (0, codegen_1._) `${names_1.default.vErrors}.length`);\n    }\n    function addEvaluatedFrom(source) {\n        var _a;\n        if (!it.opts.unevaluated)\n            return;\n        const schEvaluated = (_a = sch === null || sch === void 0 ? void 0 : sch.validate) === null || _a === void 0 ? void 0 : _a.evaluated;\n        // TODO refactor\n        if (it.props !== true) {\n            if (schEvaluated && !schEvaluated.dynamicProps) {\n                if (schEvaluated.props !== undefined) {\n                    it.props = util_1.mergeEvaluated.props(gen, schEvaluated.props, it.props);\n                }\n            }\n            else {\n                const props = gen.var(\"props\", (0, codegen_1._) `${source}.evaluated.props`);\n                it.props = util_1.mergeEvaluated.props(gen, props, it.props, codegen_1.Name);\n            }\n        }\n        if (it.items !== true) {\n            if (schEvaluated && !schEvaluated.dynamicItems) {\n                if (schEvaluated.items !== undefined) {\n                    it.items = util_1.mergeEvaluated.items(gen, schEvaluated.items, it.items);\n                }\n            }\n            else {\n                const items = gen.var(\"items\", (0, codegen_1._) `${source}.evaluated.items`);\n                it.items = util_1.mergeEvaluated.items(gen, items, it.items, codegen_1.Name);\n            }\n        }\n    }\n}\nexports.callRef = callRef;\nexports.default = def;\n//# sourceMappingURL=ref.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst id_1 = require(\"./id\");\nconst ref_1 = require(\"./ref\");\nconst core = [\n    \"$schema\",\n    \"$id\",\n    \"$defs\",\n    \"$vocabulary\",\n    { keyword: \"$comment\" },\n    \"definitions\",\n    id_1.default,\n    ref_1.default,\n];\nexports.default = core;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst def = {\n    keyword: \"id\",\n    code() {\n        throw new Error('NOT SUPPORTED: keyword \"id\", use \"$id\" for schema ID');\n    },\n};\nexports.default = def;\n//# sourceMappingURL=id.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst ucs2length_1 = require(\"../../runtime/ucs2length\");\nconst error = {\n    message({ keyword, schemaCode }) {\n        const comp = keyword === \"maxLength\" ? \"more\" : \"fewer\";\n        return (0, codegen_1.str) `must NOT have ${comp} than ${schemaCode} characters`;\n    },\n    params: ({ schemaCode }) => (0, codegen_1._) `{limit: ${schemaCode}}`,\n};\nconst def = {\n    keyword: [\"maxLength\", \"minLength\"],\n    type: \"string\",\n    schemaType: \"number\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { keyword, data, schemaCode, it } = cxt;\n        const op = keyword === \"maxLength\" ? codegen_1.operators.GT : codegen_1.operators.LT;\n        const len = it.opts.unicode === false ? (0, codegen_1._) `${data}.length` : (0, codegen_1._) `${(0, util_1.useFunc)(cxt.gen, ucs2length_1.default)}(${data})`;\n        cxt.fail$data((0, codegen_1._) `${len} ${op} ${schemaCode}`);\n    },\n};\nexports.default = def;\n//# sourceMappingURL=limitLength.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// https://mathiasbynens.be/notes/javascript-encoding\n// https://github.com/bestiejs/punycode.js - punycode.ucs2.decode\nfunction ucs2length(str) {\n    const len = str.length;\n    let length = 0;\n    let pos = 0;\n    let value;\n    while (pos < len) {\n        length++;\n        value = str.charCodeAt(pos++);\n        if (value >= 0xd800 && value <= 0xdbff && pos < len) {\n            // high surrogate, and there is a next character\n            value = str.charCodeAt(pos);\n            if ((value & 0xfc00) === 0xdc00)\n                pos++; // low surrogate\n        }\n    }\n    return length;\n}\nexports.default = ucs2length;\nucs2length.code = 'require(\"ajv/dist/runtime/ucs2length\").default';\n//# sourceMappingURL=ucs2length.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code_1 = require(\"../code\");\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: ({ params: { missingProperty } }) => (0, codegen_1.str) `must have required property '${missingProperty}'`,\n    params: ({ params: { missingProperty } }) => (0, codegen_1._) `{missingProperty: ${missingProperty}}`,\n};\nconst def = {\n    keyword: \"required\",\n    type: \"object\",\n    schemaType: \"array\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { gen, schema, schemaCode, data, $data, it } = cxt;\n        const { opts } = it;\n        if (!$data && schema.length === 0)\n            return;\n        const useLoop = schema.length >= opts.loopRequired;\n        if (it.allErrors)\n            allErrorsMode();\n        else\n            exitOnErrorMode();\n        if (opts.strictRequired) {\n            const props = cxt.parentSchema.properties;\n            const { definedProperties } = cxt.it;\n            for (const requiredKey of schema) {\n                if ((props === null || props === void 0 ? void 0 : props[requiredKey]) === undefined && !definedProperties.has(requiredKey)) {\n                    const schemaPath = it.schemaEnv.baseId + it.errSchemaPath;\n                    const msg = `required property \"${requiredKey}\" is not defined at \"${schemaPath}\" (strictRequired)`;\n                    (0, util_1.checkStrictMode)(it, msg, it.opts.strictRequired);\n                }\n            }\n        }\n        function allErrorsMode() {\n            if (useLoop || $data) {\n                cxt.block$data(codegen_1.nil, loopAllRequired);\n            }\n            else {\n                for (const prop of schema) {\n                    (0, code_1.checkReportMissingProp)(cxt, prop);\n                }\n            }\n        }\n        function exitOnErrorMode() {\n            const missing = gen.let(\"missing\");\n            if (useLoop || $data) {\n                const valid = gen.let(\"valid\", true);\n                cxt.block$data(valid, () => loopUntilMissing(missing, valid));\n                cxt.ok(valid);\n            }\n            else {\n                gen.if((0, code_1.checkMissingProp)(cxt, schema, missing));\n                (0, code_1.reportMissingProp)(cxt, missing);\n                gen.else();\n            }\n        }\n        function loopAllRequired() {\n            gen.forOf(\"prop\", schemaCode, (prop) => {\n                cxt.setParams({ missingProperty: prop });\n                gen.if((0, code_1.noPropertyInData)(gen, data, prop, opts.ownProperties), () => cxt.error());\n            });\n        }\n        function loopUntilMissing(missing, valid) {\n            cxt.setParams({ missingProperty: missing });\n            gen.forOf(missing, schemaCode, () => {\n                gen.assign(valid, (0, code_1.propertyInData)(gen, data, missing, opts.ownProperties));\n                gen.if((0, codegen_1.not)(valid), () => {\n                    cxt.error();\n                    gen.break();\n                });\n            }, codegen_1.nil);\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=required.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// https://github.com/ajv-validator/ajv/issues/889\nconst equal = require(\"fast-deep-equal\");\nequal.code = 'require(\"ajv/dist/runtime/equal\").default';\nexports.default = equal;\n//# sourceMappingURL=equal.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst dataType_1 = require(\"../../compile/validate/dataType\");\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst equal_1 = require(\"../../runtime/equal\");\nconst error = {\n    message: ({ params: { i, j } }) => (0, codegen_1.str) `must NOT have duplicate items (items ## ${j} and ${i} are identical)`,\n    params: ({ params: { i, j } }) => (0, codegen_1._) `{i: ${i}, j: ${j}}`,\n};\nconst def = {\n    keyword: \"uniqueItems\",\n    type: \"array\",\n    schemaType: \"boolean\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { gen, data, $data, schema, parentSchema, schemaCode, it } = cxt;\n        if (!$data && !schema)\n            return;\n        const valid = gen.let(\"valid\");\n        const itemTypes = parentSchema.items ? (0, dataType_1.getSchemaTypes)(parentSchema.items) : [];\n        cxt.block$data(valid, validateUniqueItems, (0, codegen_1._) `${schemaCode} === false`);\n        cxt.ok(valid);\n        function validateUniqueItems() {\n            const i = gen.let(\"i\", (0, codegen_1._) `${data}.length`);\n            const j = gen.let(\"j\");\n            cxt.setParams({ i, j });\n            gen.assign(valid, true);\n            gen.if((0, codegen_1._) `${i} > 1`, () => (canOptimize() ? loopN : loopN2)(i, j));\n        }\n        function canOptimize() {\n            return itemTypes.length > 0 && !itemTypes.some((t) => t === \"object\" || t === \"array\");\n        }\n        function loopN(i, j) {\n            const item = gen.name(\"item\");\n            const wrongType = (0, dataType_1.checkDataTypes)(itemTypes, item, it.opts.strictNumbers, dataType_1.DataType.Wrong);\n            const indices = gen.const(\"indices\", (0, codegen_1._) `{}`);\n            gen.for((0, codegen_1._) `;${i}--;`, () => {\n                gen.let(item, (0, codegen_1._) `${data}[${i}]`);\n                gen.if(wrongType, (0, codegen_1._) `continue`);\n                if (itemTypes.length > 1)\n                    gen.if((0, codegen_1._) `typeof ${item} == \"string\"`, (0, codegen_1._) `${item} += \"_\"`);\n                gen\n                    .if((0, codegen_1._) `typeof ${indices}[${item}] == \"number\"`, () => {\n                    gen.assign(j, (0, codegen_1._) `${indices}[${item}]`);\n                    cxt.error();\n                    gen.assign(valid, false).break();\n                })\n                    .code((0, codegen_1._) `${indices}[${item}] = ${i}`);\n            });\n        }\n        function loopN2(i, j) {\n            const eql = (0, util_1.useFunc)(gen, equal_1.default);\n            const outer = gen.name(\"outer\");\n            gen.label(outer).for((0, codegen_1._) `;${i}--;`, () => gen.for((0, codegen_1._) `${j} = ${i}; ${j}--;`, () => gen.if((0, codegen_1._) `${eql}(${data}[${i}], ${data}[${j}])`, () => {\n                cxt.error();\n                gen.assign(valid, false).break(outer);\n            })));\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=uniqueItems.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst equal_1 = require(\"../../runtime/equal\");\nconst error = {\n    message: \"must be equal to one of the allowed values\",\n    params: ({ schemaCode }) => (0, codegen_1._) `{allowedValues: ${schemaCode}}`,\n};\nconst def = {\n    keyword: \"enum\",\n    schemaType: \"array\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { gen, data, $data, schema, schemaCode, it } = cxt;\n        if (!$data && schema.length === 0)\n            throw new Error(\"enum must have non-empty array\");\n        const useLoop = schema.length >= it.opts.loopEnum;\n        let eql;\n        const getEql = () => (eql !== null && eql !== void 0 ? eql : (eql = (0, util_1.useFunc)(gen, equal_1.default)));\n        let valid;\n        if (useLoop || $data) {\n            valid = gen.let(\"valid\");\n            cxt.block$data(valid, loopEnum);\n        }\n        else {\n            /* istanbul ignore if */\n            if (!Array.isArray(schema))\n                throw new Error(\"ajv implementation error\");\n            const vSchema = gen.const(\"vSchema\", schemaCode);\n            valid = (0, codegen_1.or)(...schema.map((_x, i) => equalCode(vSchema, i)));\n        }\n        cxt.pass(valid);\n        function loopEnum() {\n            gen.assign(valid, false);\n            gen.forOf(\"v\", schemaCode, (v) => gen.if((0, codegen_1._) `${getEql()}(${data}, ${v})`, () => gen.assign(valid, true).break()));\n        }\n        function equalCode(vSchema, i) {\n            const sch = schema[i];\n            return typeof sch === \"object\" && sch !== null\n                ? (0, codegen_1._) `${getEql()}(${data}, ${vSchema}[${i}])`\n                : (0, codegen_1._) `${data} === ${sch}`;\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=enum.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst limitNumber_1 = require(\"./limitNumber\");\nconst multipleOf_1 = require(\"./multipleOf\");\nconst limitLength_1 = require(\"./limitLength\");\nconst pattern_1 = require(\"./pattern\");\nconst limitProperties_1 = require(\"./limitProperties\");\nconst required_1 = require(\"./required\");\nconst limitItems_1 = require(\"./limitItems\");\nconst uniqueItems_1 = require(\"./uniqueItems\");\nconst const_1 = require(\"./const\");\nconst enum_1 = require(\"./enum\");\nconst validation = [\n    // number\n    limitNumber_1.default,\n    multipleOf_1.default,\n    // string\n    limitLength_1.default,\n    pattern_1.default,\n    // object\n    limitProperties_1.default,\n    required_1.default,\n    // array\n    limitItems_1.default,\n    uniqueItems_1.default,\n    // any\n    { keyword: \"type\", schemaType: [\"string\", \"array\"] },\n    { keyword: \"nullable\", schemaType: \"boolean\" },\n    const_1.default,\n    enum_1.default,\n];\nexports.default = validation;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst ops = codegen_1.operators;\nconst KWDs = {\n    maximum: { okStr: \"<=\", ok: ops.LTE, fail: ops.GT },\n    minimum: { okStr: \">=\", ok: ops.GTE, fail: ops.LT },\n    exclusiveMaximum: { okStr: \"<\", ok: ops.LT, fail: ops.GTE },\n    exclusiveMinimum: { okStr: \">\", ok: ops.GT, fail: ops.LTE },\n};\nconst error = {\n    message: ({ keyword, schemaCode }) => (0, codegen_1.str) `must be ${KWDs[keyword].okStr} ${schemaCode}`,\n    params: ({ keyword, schemaCode }) => (0, codegen_1._) `{comparison: ${KWDs[keyword].okStr}, limit: ${schemaCode}}`,\n};\nconst def = {\n    keyword: Object.keys(KWDs),\n    type: \"number\",\n    schemaType: \"number\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { keyword, data, schemaCode } = cxt;\n        cxt.fail$data((0, codegen_1._) `${data} ${KWDs[keyword].fail} ${schemaCode} || isNaN(${data})`);\n    },\n};\nexports.default = def;\n//# sourceMappingURL=limitNumber.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst error = {\n    message: ({ schemaCode }) => (0, codegen_1.str) `must be multiple of ${schemaCode}`,\n    params: ({ schemaCode }) => (0, codegen_1._) `{multipleOf: ${schemaCode}}`,\n};\nconst def = {\n    keyword: \"multipleOf\",\n    type: \"number\",\n    schemaType: \"number\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { gen, data, schemaCode, it } = cxt;\n        // const bdt = bad$DataType(schemaCode, <string>def.schemaType, $data)\n        const prec = it.opts.multipleOfPrecision;\n        const res = gen.let(\"res\");\n        const invalid = prec\n            ? (0, codegen_1._) `Math.abs(Math.round(${res}) - ${res}) > 1e-${prec}`\n            : (0, codegen_1._) `${res} !== parseInt(${res})`;\n        cxt.fail$data((0, codegen_1._) `(${schemaCode} === 0 || (${res} = ${data}/${schemaCode}, ${invalid}))`);\n    },\n};\nexports.default = def;\n//# sourceMappingURL=multipleOf.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code_1 = require(\"../code\");\nconst codegen_1 = require(\"../../compile/codegen\");\nconst error = {\n    message: ({ schemaCode }) => (0, codegen_1.str) `must match pattern \"${schemaCode}\"`,\n    params: ({ schemaCode }) => (0, codegen_1._) `{pattern: ${schemaCode}}`,\n};\nconst def = {\n    keyword: \"pattern\",\n    type: \"string\",\n    schemaType: \"string\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { data, $data, schema, schemaCode, it } = cxt;\n        // TODO regexp should be wrapped in try/catchs\n        const u = it.opts.unicodeRegExp ? \"u\" : \"\";\n        const regExp = $data ? (0, codegen_1._) `(new RegExp(${schemaCode}, ${u}))` : (0, code_1.usePattern)(cxt, schema);\n        cxt.fail$data((0, codegen_1._) `!${regExp}.test(${data})`);\n    },\n};\nexports.default = def;\n//# sourceMappingURL=pattern.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst error = {\n    message({ keyword, schemaCode }) {\n        const comp = keyword === \"maxProperties\" ? \"more\" : \"fewer\";\n        return (0, codegen_1.str) `must NOT have ${comp} than ${schemaCode} properties`;\n    },\n    params: ({ schemaCode }) => (0, codegen_1._) `{limit: ${schemaCode}}`,\n};\nconst def = {\n    keyword: [\"maxProperties\", \"minProperties\"],\n    type: \"object\",\n    schemaType: \"number\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { keyword, data, schemaCode } = cxt;\n        const op = keyword === \"maxProperties\" ? codegen_1.operators.GT : codegen_1.operators.LT;\n        cxt.fail$data((0, codegen_1._) `Object.keys(${data}).length ${op} ${schemaCode}`);\n    },\n};\nexports.default = def;\n//# sourceMappingURL=limitProperties.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst error = {\n    message({ keyword, schemaCode }) {\n        const comp = keyword === \"maxItems\" ? \"more\" : \"fewer\";\n        return (0, codegen_1.str) `must NOT have ${comp} than ${schemaCode} items`;\n    },\n    params: ({ schemaCode }) => (0, codegen_1._) `{limit: ${schemaCode}}`,\n};\nconst def = {\n    keyword: [\"maxItems\", \"minItems\"],\n    type: \"array\",\n    schemaType: \"number\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { keyword, data, schemaCode } = cxt;\n        const op = keyword === \"maxItems\" ? codegen_1.operators.GT : codegen_1.operators.LT;\n        cxt.fail$data((0, codegen_1._) `${data}.length ${op} ${schemaCode}`);\n    },\n};\nexports.default = def;\n//# sourceMappingURL=limitItems.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst equal_1 = require(\"../../runtime/equal\");\nconst error = {\n    message: \"must be equal to constant\",\n    params: ({ schemaCode }) => (0, codegen_1._) `{allowedValue: ${schemaCode}}`,\n};\nconst def = {\n    keyword: \"const\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { gen, data, $data, schemaCode, schema } = cxt;\n        if ($data || (schema && typeof schema == \"object\")) {\n            cxt.fail$data((0, codegen_1._) `!${(0, util_1.useFunc)(gen, equal_1.default)}(${data}, ${schemaCode})`);\n        }\n        else {\n            cxt.fail((0, codegen_1._) `${schema} !== ${data}`);\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=const.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateAdditionalItems = void 0;\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: ({ params: { len } }) => (0, codegen_1.str) `must NOT have more than ${len} items`,\n    params: ({ params: { len } }) => (0, codegen_1._) `{limit: ${len}}`,\n};\nconst def = {\n    keyword: \"additionalItems\",\n    type: \"array\",\n    schemaType: [\"boolean\", \"object\"],\n    before: \"uniqueItems\",\n    error,\n    code(cxt) {\n        const { parentSchema, it } = cxt;\n        const { items } = parentSchema;\n        if (!Array.isArray(items)) {\n            (0, util_1.checkStrictMode)(it, '\"additionalItems\" is ignored when \"items\" is not an array of schemas');\n            return;\n        }\n        validateAdditionalItems(cxt, items);\n    },\n};\nfunction validateAdditionalItems(cxt, items) {\n    const { gen, schema, data, keyword, it } = cxt;\n    it.items = true;\n    const len = gen.const(\"len\", (0, codegen_1._) `${data}.length`);\n    if (schema === false) {\n        cxt.setParams({ len: items.length });\n        cxt.pass((0, codegen_1._) `${len} <= ${items.length}`);\n    }\n    else if (typeof schema == \"object\" && !(0, util_1.alwaysValidSchema)(it, schema)) {\n        const valid = gen.var(\"valid\", (0, codegen_1._) `${len} <= ${items.length}`); // TODO var\n        gen.if((0, codegen_1.not)(valid), () => validateItems(valid));\n        cxt.ok(valid);\n    }\n    function validateItems(valid) {\n        gen.forRange(\"i\", items.length, len, (i) => {\n            cxt.subschema({ keyword, dataProp: i, dataPropType: util_1.Type.Num }, valid);\n            if (!it.allErrors)\n                gen.if((0, codegen_1.not)(valid), () => gen.break());\n        });\n    }\n}\nexports.validateAdditionalItems = validateAdditionalItems;\nexports.default = def;\n//# sourceMappingURL=additionalItems.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateTuple = void 0;\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst code_1 = require(\"../code\");\nconst def = {\n    keyword: \"items\",\n    type: \"array\",\n    schemaType: [\"object\", \"array\", \"boolean\"],\n    before: \"uniqueItems\",\n    code(cxt) {\n        const { schema, it } = cxt;\n        if (Array.isArray(schema))\n            return validateTuple(cxt, \"additionalItems\", schema);\n        it.items = true;\n        if ((0, util_1.alwaysValidSchema)(it, schema))\n            return;\n        cxt.ok((0, code_1.validateArray)(cxt));\n    },\n};\nfunction validateTuple(cxt, extraItems, schArr = cxt.schema) {\n    const { gen, parentSchema, data, keyword, it } = cxt;\n    checkStrictTuple(parentSchema);\n    if (it.opts.unevaluated && schArr.length && it.items !== true) {\n        it.items = util_1.mergeEvaluated.items(gen, schArr.length, it.items);\n    }\n    const valid = gen.name(\"valid\");\n    const len = gen.const(\"len\", (0, codegen_1._) `${data}.length`);\n    schArr.forEach((sch, i) => {\n        if ((0, util_1.alwaysValidSchema)(it, sch))\n            return;\n        gen.if((0, codegen_1._) `${len} > ${i}`, () => cxt.subschema({\n            keyword,\n            schemaProp: i,\n            dataProp: i,\n        }, valid));\n        cxt.ok(valid);\n    });\n    function checkStrictTuple(sch) {\n        const { opts, errSchemaPath } = it;\n        const l = schArr.length;\n        const fullTuple = l === sch.minItems && (l === sch.maxItems || sch[extraItems] === false);\n        if (opts.strictTuples && !fullTuple) {\n            const msg = `\"${keyword}\" is ${l}-tuple, but minItems or maxItems/${extraItems} are not specified or different at path \"${errSchemaPath}\"`;\n            (0, util_1.checkStrictMode)(it, msg, opts.strictTuples);\n        }\n    }\n}\nexports.validateTuple = validateTuple;\nexports.default = def;\n//# sourceMappingURL=items.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: ({ params: { min, max } }) => max === undefined\n        ? (0, codegen_1.str) `must contain at least ${min} valid item(s)`\n        : (0, codegen_1.str) `must contain at least ${min} and no more than ${max} valid item(s)`,\n    params: ({ params: { min, max } }) => max === undefined ? (0, codegen_1._) `{minContains: ${min}}` : (0, codegen_1._) `{minContains: ${min}, maxContains: ${max}}`,\n};\nconst def = {\n    keyword: \"contains\",\n    type: \"array\",\n    schemaType: [\"object\", \"boolean\"],\n    before: \"uniqueItems\",\n    trackErrors: true,\n    error,\n    code(cxt) {\n        const { gen, schema, parentSchema, data, it } = cxt;\n        let min;\n        let max;\n        const { minContains, maxContains } = parentSchema;\n        if (it.opts.next) {\n            min = minContains === undefined ? 1 : minContains;\n            max = maxContains;\n        }\n        else {\n            min = 1;\n        }\n        const len = gen.const(\"len\", (0, codegen_1._) `${data}.length`);\n        cxt.setParams({ min, max });\n        if (max === undefined && min === 0) {\n            (0, util_1.checkStrictMode)(it, `\"minContains\" == 0 without \"maxContains\": \"contains\" keyword ignored`);\n            return;\n        }\n        if (max !== undefined && min > max) {\n            (0, util_1.checkStrictMode)(it, `\"minContains\" > \"maxContains\" is always invalid`);\n            cxt.fail();\n            return;\n        }\n        if ((0, util_1.alwaysValidSchema)(it, schema)) {\n            let cond = (0, codegen_1._) `${len} >= ${min}`;\n            if (max !== undefined)\n                cond = (0, codegen_1._) `${cond} && ${len} <= ${max}`;\n            cxt.pass(cond);\n            return;\n        }\n        it.items = true;\n        const valid = gen.name(\"valid\");\n        if (max === undefined && min === 1) {\n            validateItems(valid, () => gen.if(valid, () => gen.break()));\n        }\n        else if (min === 0) {\n            gen.let(valid, true);\n            if (max !== undefined)\n                gen.if((0, codegen_1._) `${data}.length > 0`, validateItemsWithCount);\n        }\n        else {\n            gen.let(valid, false);\n            validateItemsWithCount();\n        }\n        cxt.result(valid, () => cxt.reset());\n        function validateItemsWithCount() {\n            const schValid = gen.name(\"_valid\");\n            const count = gen.let(\"count\", 0);\n            validateItems(schValid, () => gen.if(schValid, () => checkLimits(count)));\n        }\n        function validateItems(_valid, block) {\n            gen.forRange(\"i\", 0, len, (i) => {\n                cxt.subschema({\n                    keyword: \"contains\",\n                    dataProp: i,\n                    dataPropType: util_1.Type.Num,\n                    compositeRule: true,\n                }, _valid);\n                block();\n            });\n        }\n        function checkLimits(count) {\n            gen.code((0, codegen_1._) `${count}++`);\n            if (max === undefined) {\n                gen.if((0, codegen_1._) `${count} >= ${min}`, () => gen.assign(valid, true).break());\n            }\n            else {\n                gen.if((0, codegen_1._) `${count} > ${max}`, () => gen.assign(valid, false).break());\n                if (min === 1)\n                    gen.assign(valid, true);\n                else\n                    gen.if((0, codegen_1._) `${count} >= ${min}`, () => gen.assign(valid, true));\n            }\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=contains.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateSchemaDeps = exports.validatePropertyDeps = exports.error = void 0;\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst code_1 = require(\"../code\");\nexports.error = {\n    message: ({ params: { property, depsCount, deps } }) => {\n        const property_ies = depsCount === 1 ? \"property\" : \"properties\";\n        return (0, codegen_1.str) `must have ${property_ies} ${deps} when property ${property} is present`;\n    },\n    params: ({ params: { property, depsCount, deps, missingProperty } }) => (0, codegen_1._) `{property: ${property},\n    missingProperty: ${missingProperty},\n    depsCount: ${depsCount},\n    deps: ${deps}}`, // TODO change to reference\n};\nconst def = {\n    keyword: \"dependencies\",\n    type: \"object\",\n    schemaType: \"object\",\n    error: exports.error,\n    code(cxt) {\n        const [propDeps, schDeps] = splitDependencies(cxt);\n        validatePropertyDeps(cxt, propDeps);\n        validateSchemaDeps(cxt, schDeps);\n    },\n};\nfunction splitDependencies({ schema }) {\n    const propertyDeps = {};\n    const schemaDeps = {};\n    for (const key in schema) {\n        if (key === \"__proto__\")\n            continue;\n        const deps = Array.isArray(schema[key]) ? propertyDeps : schemaDeps;\n        deps[key] = schema[key];\n    }\n    return [propertyDeps, schemaDeps];\n}\nfunction validatePropertyDeps(cxt, propertyDeps = cxt.schema) {\n    const { gen, data, it } = cxt;\n    if (Object.keys(propertyDeps).length === 0)\n        return;\n    const missing = gen.let(\"missing\");\n    for (const prop in propertyDeps) {\n        const deps = propertyDeps[prop];\n        if (deps.length === 0)\n            continue;\n        const hasProperty = (0, code_1.propertyInData)(gen, data, prop, it.opts.ownProperties);\n        cxt.setParams({\n            property: prop,\n            depsCount: deps.length,\n            deps: deps.join(\", \"),\n        });\n        if (it.allErrors) {\n            gen.if(hasProperty, () => {\n                for (const depProp of deps) {\n                    (0, code_1.checkReportMissingProp)(cxt, depProp);\n                }\n            });\n        }\n        else {\n            gen.if((0, codegen_1._) `${hasProperty} && (${(0, code_1.checkMissingProp)(cxt, deps, missing)})`);\n            (0, code_1.reportMissingProp)(cxt, missing);\n            gen.else();\n        }\n    }\n}\nexports.validatePropertyDeps = validatePropertyDeps;\nfunction validateSchemaDeps(cxt, schemaDeps = cxt.schema) {\n    const { gen, data, keyword, it } = cxt;\n    const valid = gen.name(\"valid\");\n    for (const prop in schemaDeps) {\n        if ((0, util_1.alwaysValidSchema)(it, schemaDeps[prop]))\n            continue;\n        gen.if((0, code_1.propertyInData)(gen, data, prop, it.opts.ownProperties), () => {\n            const schCxt = cxt.subschema({ keyword, schemaProp: prop }, valid);\n            cxt.mergeValidEvaluated(schCxt, valid);\n        }, () => gen.var(valid, true) // TODO var\n        );\n        cxt.ok(valid);\n    }\n}\nexports.validateSchemaDeps = validateSchemaDeps;\nexports.default = def;\n//# sourceMappingURL=dependencies.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code_1 = require(\"../code\");\nconst codegen_1 = require(\"../../compile/codegen\");\nconst names_1 = require(\"../../compile/names\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: \"must NOT have additional properties\",\n    params: ({ params }) => (0, codegen_1._) `{additionalProperty: ${params.additionalProperty}}`,\n};\nconst def = {\n    keyword: \"additionalProperties\",\n    type: [\"object\"],\n    schemaType: [\"boolean\", \"object\"],\n    allowUndefined: true,\n    trackErrors: true,\n    error,\n    code(cxt) {\n        const { gen, schema, parentSchema, data, errsCount, it } = cxt;\n        /* istanbul ignore if */\n        if (!errsCount)\n            throw new Error(\"ajv implementation error\");\n        const { allErrors, opts } = it;\n        it.props = true;\n        if (opts.removeAdditional !== \"all\" && (0, util_1.alwaysValidSchema)(it, schema))\n            return;\n        const props = (0, code_1.allSchemaProperties)(parentSchema.properties);\n        const patProps = (0, code_1.allSchemaProperties)(parentSchema.patternProperties);\n        checkAdditionalProperties();\n        cxt.ok((0, codegen_1._) `${errsCount} === ${names_1.default.errors}`);\n        function checkAdditionalProperties() {\n            gen.forIn(\"key\", data, (key) => {\n                if (!props.length && !patProps.length)\n                    additionalPropertyCode(key);\n                else\n                    gen.if(isAdditional(key), () => additionalPropertyCode(key));\n            });\n        }\n        function isAdditional(key) {\n            let definedProp;\n            if (props.length > 8) {\n                // TODO maybe an option instead of hard-coded 8?\n                const propsSchema = (0, util_1.schemaRefOrVal)(it, parentSchema.properties, \"properties\");\n                definedProp = (0, code_1.isOwnProperty)(gen, propsSchema, key);\n            }\n            else if (props.length) {\n                definedProp = (0, codegen_1.or)(...props.map((p) => (0, codegen_1._) `${key} === ${p}`));\n            }\n            else {\n                definedProp = codegen_1.nil;\n            }\n            if (patProps.length) {\n                definedProp = (0, codegen_1.or)(definedProp, ...patProps.map((p) => (0, codegen_1._) `${(0, code_1.usePattern)(cxt, p)}.test(${key})`));\n            }\n            return (0, codegen_1.not)(definedProp);\n        }\n        function deleteAdditional(key) {\n            gen.code((0, codegen_1._) `delete ${data}[${key}]`);\n        }\n        function additionalPropertyCode(key) {\n            if (opts.removeAdditional === \"all\" || (opts.removeAdditional && schema === false)) {\n                deleteAdditional(key);\n                return;\n            }\n            if (schema === false) {\n                cxt.setParams({ additionalProperty: key });\n                cxt.error();\n                if (!allErrors)\n                    gen.break();\n                return;\n            }\n            if (typeof schema == \"object\" && !(0, util_1.alwaysValidSchema)(it, schema)) {\n                const valid = gen.name(\"valid\");\n                if (opts.removeAdditional === \"failing\") {\n                    applyAdditionalSchema(key, valid, false);\n                    gen.if((0, codegen_1.not)(valid), () => {\n                        cxt.reset();\n                        deleteAdditional(key);\n                    });\n                }\n                else {\n                    applyAdditionalSchema(key, valid);\n                    if (!allErrors)\n                        gen.if((0, codegen_1.not)(valid), () => gen.break());\n                }\n            }\n        }\n        function applyAdditionalSchema(key, valid, errors) {\n            const subschema = {\n                keyword: \"additionalProperties\",\n                dataProp: key,\n                dataPropType: util_1.Type.Str,\n            };\n            if (errors === false) {\n                Object.assign(subschema, {\n                    compositeRule: true,\n                    createErrors: false,\n                    allErrors: false,\n                });\n            }\n            cxt.subschema(subschema, valid);\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=additionalProperties.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst additionalItems_1 = require(\"./additionalItems\");\nconst prefixItems_1 = require(\"./prefixItems\");\nconst items_1 = require(\"./items\");\nconst items2020_1 = require(\"./items2020\");\nconst contains_1 = require(\"./contains\");\nconst dependencies_1 = require(\"./dependencies\");\nconst propertyNames_1 = require(\"./propertyNames\");\nconst additionalProperties_1 = require(\"./additionalProperties\");\nconst properties_1 = require(\"./properties\");\nconst patternProperties_1 = require(\"./patternProperties\");\nconst not_1 = require(\"./not\");\nconst anyOf_1 = require(\"./anyOf\");\nconst oneOf_1 = require(\"./oneOf\");\nconst allOf_1 = require(\"./allOf\");\nconst if_1 = require(\"./if\");\nconst thenElse_1 = require(\"./thenElse\");\nfunction getApplicator(draft2020 = false) {\n    const applicator = [\n        // any\n        not_1.default,\n        anyOf_1.default,\n        oneOf_1.default,\n        allOf_1.default,\n        if_1.default,\n        thenElse_1.default,\n        // object\n        propertyNames_1.default,\n        additionalProperties_1.default,\n        dependencies_1.default,\n        properties_1.default,\n        patternProperties_1.default,\n    ];\n    // array\n    if (draft2020)\n        applicator.push(prefixItems_1.default, items2020_1.default);\n    else\n        applicator.push(additionalItems_1.default, items_1.default);\n    applicator.push(contains_1.default);\n    return applicator;\n}\nexports.default = getApplicator;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst items_1 = require(\"./items\");\nconst def = {\n    keyword: \"prefixItems\",\n    type: \"array\",\n    schemaType: [\"array\"],\n    before: \"uniqueItems\",\n    code: (cxt) => (0, items_1.validateTuple)(cxt, \"items\"),\n};\nexports.default = def;\n//# sourceMappingURL=prefixItems.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst code_1 = require(\"../code\");\nconst additionalItems_1 = require(\"./additionalItems\");\nconst error = {\n    message: ({ params: { len } }) => (0, codegen_1.str) `must NOT have more than ${len} items`,\n    params: ({ params: { len } }) => (0, codegen_1._) `{limit: ${len}}`,\n};\nconst def = {\n    keyword: \"items\",\n    type: \"array\",\n    schemaType: [\"object\", \"boolean\"],\n    before: \"uniqueItems\",\n    error,\n    code(cxt) {\n        const { schema, parentSchema, it } = cxt;\n        const { prefixItems } = parentSchema;\n        it.items = true;\n        if ((0, util_1.alwaysValidSchema)(it, schema))\n            return;\n        if (prefixItems)\n            (0, additionalItems_1.validateAdditionalItems)(cxt, prefixItems);\n        else\n            cxt.ok((0, code_1.validateArray)(cxt));\n    },\n};\nexports.default = def;\n//# sourceMappingURL=items2020.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: \"property name must be valid\",\n    params: ({ params }) => (0, codegen_1._) `{propertyName: ${params.propertyName}}`,\n};\nconst def = {\n    keyword: \"propertyNames\",\n    type: \"object\",\n    schemaType: [\"object\", \"boolean\"],\n    error,\n    code(cxt) {\n        const { gen, schema, data, it } = cxt;\n        if ((0, util_1.alwaysValidSchema)(it, schema))\n            return;\n        const valid = gen.name(\"valid\");\n        gen.forIn(\"key\", data, (key) => {\n            cxt.setParams({ propertyName: key });\n            cxt.subschema({\n                keyword: \"propertyNames\",\n                data: key,\n                dataTypes: [\"string\"],\n                propertyName: key,\n                compositeRule: true,\n            }, valid);\n            gen.if((0, codegen_1.not)(valid), () => {\n                cxt.error(true);\n                if (!it.allErrors)\n                    gen.break();\n            });\n        });\n        cxt.ok(valid);\n    },\n};\nexports.default = def;\n//# sourceMappingURL=propertyNames.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst validate_1 = require(\"../../compile/validate\");\nconst code_1 = require(\"../code\");\nconst util_1 = require(\"../../compile/util\");\nconst additionalProperties_1 = require(\"./additionalProperties\");\nconst def = {\n    keyword: \"properties\",\n    type: \"object\",\n    schemaType: \"object\",\n    code(cxt) {\n        const { gen, schema, parentSchema, data, it } = cxt;\n        if (it.opts.removeAdditional === \"all\" && parentSchema.additionalProperties === undefined) {\n            additionalProperties_1.default.code(new validate_1.KeywordCxt(it, additionalProperties_1.default, \"additionalProperties\"));\n        }\n        const allProps = (0, code_1.allSchemaProperties)(schema);\n        for (const prop of allProps) {\n            it.definedProperties.add(prop);\n        }\n        if (it.opts.unevaluated && allProps.length && it.props !== true) {\n            it.props = util_1.mergeEvaluated.props(gen, (0, util_1.toHash)(allProps), it.props);\n        }\n        const properties = allProps.filter((p) => !(0, util_1.alwaysValidSchema)(it, schema[p]));\n        if (properties.length === 0)\n            return;\n        const valid = gen.name(\"valid\");\n        for (const prop of properties) {\n            if (hasDefault(prop)) {\n                applyPropertySchema(prop);\n            }\n            else {\n                gen.if((0, code_1.propertyInData)(gen, data, prop, it.opts.ownProperties));\n                applyPropertySchema(prop);\n                if (!it.allErrors)\n                    gen.else().var(valid, true);\n                gen.endIf();\n            }\n            cxt.it.definedProperties.add(prop);\n            cxt.ok(valid);\n        }\n        function hasDefault(prop) {\n            return it.opts.useDefaults && !it.compositeRule && schema[prop].default !== undefined;\n        }\n        function applyPropertySchema(prop) {\n            cxt.subschema({\n                keyword: \"properties\",\n                schemaProp: prop,\n                dataProp: prop,\n            }, valid);\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=properties.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code_1 = require(\"../code\");\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst util_2 = require(\"../../compile/util\");\nconst def = {\n    keyword: \"patternProperties\",\n    type: \"object\",\n    schemaType: \"object\",\n    code(cxt) {\n        const { gen, schema, data, parentSchema, it } = cxt;\n        const { opts } = it;\n        const patterns = (0, code_1.allSchemaProperties)(schema);\n        const alwaysValidPatterns = patterns.filter((p) => (0, util_1.alwaysValidSchema)(it, schema[p]));\n        if (patterns.length === 0 ||\n            (alwaysValidPatterns.length === patterns.length &&\n                (!it.opts.unevaluated || it.props === true))) {\n            return;\n        }\n        const checkProperties = opts.strictSchema && !opts.allowMatchingProperties && parentSchema.properties;\n        const valid = gen.name(\"valid\");\n        if (it.props !== true && !(it.props instanceof codegen_1.Name)) {\n            it.props = (0, util_2.evaluatedPropsToName)(gen, it.props);\n        }\n        const { props } = it;\n        validatePatternProperties();\n        function validatePatternProperties() {\n            for (const pat of patterns) {\n                if (checkProperties)\n                    checkMatchingProperties(pat);\n                if (it.allErrors) {\n                    validateProperties(pat);\n                }\n                else {\n                    gen.var(valid, true); // TODO var\n                    validateProperties(pat);\n                    gen.if(valid);\n                }\n            }\n        }\n        function checkMatchingProperties(pat) {\n            for (const prop in checkProperties) {\n                if (new RegExp(pat).test(prop)) {\n                    (0, util_1.checkStrictMode)(it, `property ${prop} matches pattern ${pat} (use allowMatchingProperties)`);\n                }\n            }\n        }\n        function validateProperties(pat) {\n            gen.forIn(\"key\", data, (key) => {\n                gen.if((0, codegen_1._) `${(0, code_1.usePattern)(cxt, pat)}.test(${key})`, () => {\n                    const alwaysValid = alwaysValidPatterns.includes(pat);\n                    if (!alwaysValid) {\n                        cxt.subschema({\n                            keyword: \"patternProperties\",\n                            schemaProp: pat,\n                            dataProp: key,\n                            dataPropType: util_2.Type.Str,\n                        }, valid);\n                    }\n                    if (it.opts.unevaluated && props !== true) {\n                        gen.assign((0, codegen_1._) `${props}[${key}]`, true);\n                    }\n                    else if (!alwaysValid && !it.allErrors) {\n                        // can short-circuit if `unevaluatedProperties` is not supported (opts.next === false)\n                        // or if all properties were evaluated (props === true)\n                        gen.if((0, codegen_1.not)(valid), () => gen.break());\n                    }\n                });\n            });\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=patternProperties.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst util_1 = require(\"../../compile/util\");\nconst def = {\n    keyword: \"not\",\n    schemaType: [\"object\", \"boolean\"],\n    trackErrors: true,\n    code(cxt) {\n        const { gen, schema, it } = cxt;\n        if ((0, util_1.alwaysValidSchema)(it, schema)) {\n            cxt.fail();\n            return;\n        }\n        const valid = gen.name(\"valid\");\n        cxt.subschema({\n            keyword: \"not\",\n            compositeRule: true,\n            createErrors: false,\n            allErrors: false,\n        }, valid);\n        cxt.failResult(valid, () => cxt.reset(), () => cxt.error());\n    },\n    error: { message: \"must NOT be valid\" },\n};\nexports.default = def;\n//# sourceMappingURL=not.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code_1 = require(\"../code\");\nconst def = {\n    keyword: \"anyOf\",\n    schemaType: \"array\",\n    trackErrors: true,\n    code: code_1.validateUnion,\n    error: { message: \"must match a schema in anyOf\" },\n};\nexports.default = def;\n//# sourceMappingURL=anyOf.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: \"must match exactly one schema in oneOf\",\n    params: ({ params }) => (0, codegen_1._) `{passingSchemas: ${params.passing}}`,\n};\nconst def = {\n    keyword: \"oneOf\",\n    schemaType: \"array\",\n    trackErrors: true,\n    error,\n    code(cxt) {\n        const { gen, schema, parentSchema, it } = cxt;\n        /* istanbul ignore if */\n        if (!Array.isArray(schema))\n            throw new Error(\"ajv implementation error\");\n        if (it.opts.discriminator && parentSchema.discriminator)\n            return;\n        const schArr = schema;\n        const valid = gen.let(\"valid\", false);\n        const passing = gen.let(\"passing\", null);\n        const schValid = gen.name(\"_valid\");\n        cxt.setParams({ passing });\n        // TODO possibly fail straight away (with warning or exception) if there are two empty always valid schemas\n        gen.block(validateOneOf);\n        cxt.result(valid, () => cxt.reset(), () => cxt.error(true));\n        function validateOneOf() {\n            schArr.forEach((sch, i) => {\n                let schCxt;\n                if ((0, util_1.alwaysValidSchema)(it, sch)) {\n                    gen.var(schValid, true);\n                }\n                else {\n                    schCxt = cxt.subschema({\n                        keyword: \"oneOf\",\n                        schemaProp: i,\n                        compositeRule: true,\n                    }, schValid);\n                }\n                if (i > 0) {\n                    gen\n                        .if((0, codegen_1._) `${schValid} && ${valid}`)\n                        .assign(valid, false)\n                        .assign(passing, (0, codegen_1._) `[${passing}, ${i}]`)\n                        .else();\n                }\n                gen.if(schValid, () => {\n                    gen.assign(valid, true);\n                    gen.assign(passing, i);\n                    if (schCxt)\n                        cxt.mergeEvaluated(schCxt, codegen_1.Name);\n                });\n            });\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=oneOf.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst util_1 = require(\"../../compile/util\");\nconst def = {\n    keyword: \"allOf\",\n    schemaType: \"array\",\n    code(cxt) {\n        const { gen, schema, it } = cxt;\n        /* istanbul ignore if */\n        if (!Array.isArray(schema))\n            throw new Error(\"ajv implementation error\");\n        const valid = gen.name(\"valid\");\n        schema.forEach((sch, i) => {\n            if ((0, util_1.alwaysValidSchema)(it, sch))\n                return;\n            const schCxt = cxt.subschema({ keyword: \"allOf\", schemaProp: i }, valid);\n            cxt.ok(valid);\n            cxt.mergeEvaluated(schCxt);\n        });\n    },\n};\nexports.default = def;\n//# sourceMappingURL=allOf.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: ({ params }) => (0, codegen_1.str) `must match \"${params.ifClause}\" schema`,\n    params: ({ params }) => (0, codegen_1._) `{failingKeyword: ${params.ifClause}}`,\n};\nconst def = {\n    keyword: \"if\",\n    schemaType: [\"object\", \"boolean\"],\n    trackErrors: true,\n    error,\n    code(cxt) {\n        const { gen, parentSchema, it } = cxt;\n        if (parentSchema.then === undefined && parentSchema.else === undefined) {\n            (0, util_1.checkStrictMode)(it, '\"if\" without \"then\" and \"else\" is ignored');\n        }\n        const hasThen = hasSchema(it, \"then\");\n        const hasElse = hasSchema(it, \"else\");\n        if (!hasThen && !hasElse)\n            return;\n        const valid = gen.let(\"valid\", true);\n        const schValid = gen.name(\"_valid\");\n        validateIf();\n        cxt.reset();\n        if (hasThen && hasElse) {\n            const ifClause = gen.let(\"ifClause\");\n            cxt.setParams({ ifClause });\n            gen.if(schValid, validateClause(\"then\", ifClause), validateClause(\"else\", ifClause));\n        }\n        else if (hasThen) {\n            gen.if(schValid, validateClause(\"then\"));\n        }\n        else {\n            gen.if((0, codegen_1.not)(schValid), validateClause(\"else\"));\n        }\n        cxt.pass(valid, () => cxt.error(true));\n        function validateIf() {\n            const schCxt = cxt.subschema({\n                keyword: \"if\",\n                compositeRule: true,\n                createErrors: false,\n                allErrors: false,\n            }, schValid);\n            cxt.mergeEvaluated(schCxt);\n        }\n        function validateClause(keyword, ifClause) {\n            return () => {\n                const schCxt = cxt.subschema({ keyword }, schValid);\n                gen.assign(valid, schValid);\n                cxt.mergeValidEvaluated(schCxt, valid);\n                if (ifClause)\n                    gen.assign(ifClause, (0, codegen_1._) `${keyword}`);\n                else\n                    cxt.setParams({ ifClause: keyword });\n            };\n        }\n    },\n};\nfunction hasSchema(it, keyword) {\n    const schema = it.schema[keyword];\n    return schema !== undefined && !(0, util_1.alwaysValidSchema)(it, schema);\n}\nexports.default = def;\n//# sourceMappingURL=if.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst util_1 = require(\"../../compile/util\");\nconst def = {\n    keyword: [\"then\", \"else\"],\n    schemaType: [\"object\", \"boolean\"],\n    code({ keyword, parentSchema, it }) {\n        if (parentSchema.if === undefined)\n            (0, util_1.checkStrictMode)(it, `\"${keyword}\" without \"if\" is ignored`);\n    },\n};\nexports.default = def;\n//# sourceMappingURL=thenElse.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.dynamicAnchor = void 0;\nconst codegen_1 = require(\"../../compile/codegen\");\nconst names_1 = require(\"../../compile/names\");\nconst compile_1 = require(\"../../compile\");\nconst ref_1 = require(\"../core/ref\");\nconst def = {\n    keyword: \"$dynamicAnchor\",\n    schemaType: \"string\",\n    code: (cxt) => dynamicAnchor(cxt, cxt.schema),\n};\nfunction dynamicAnchor(cxt, anchor) {\n    const { gen, it } = cxt;\n    it.schemaEnv.root.dynamicAnchors[anchor] = true;\n    const v = (0, codegen_1._) `${names_1.default.dynamicAnchors}${(0, codegen_1.getProperty)(anchor)}`;\n    const validate = it.errSchemaPath === \"#\" ? it.validateName : _getValidate(cxt);\n    gen.if((0, codegen_1._) `!${v}`, () => gen.assign(v, validate));\n}\nexports.dynamicAnchor = dynamicAnchor;\nfunction _getValidate(cxt) {\n    const { schemaEnv, schema, self } = cxt.it;\n    const { root, baseId, localRefs, meta } = schemaEnv.root;\n    const { schemaId } = self.opts;\n    const sch = new compile_1.SchemaEnv({ schema, schemaId, root, baseId, localRefs, meta });\n    compile_1.compileSchema.call(self, sch);\n    return (0, ref_1.getValidate)(cxt, sch);\n}\nexports.default = def;\n//# sourceMappingURL=dynamicAnchor.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.dynamicRef = void 0;\nconst codegen_1 = require(\"../../compile/codegen\");\nconst names_1 = require(\"../../compile/names\");\nconst ref_1 = require(\"../core/ref\");\nconst def = {\n    keyword: \"$dynamicRef\",\n    schemaType: \"string\",\n    code: (cxt) => dynamicRef(cxt, cxt.schema),\n};\nfunction dynamicRef(cxt, ref) {\n    const { gen, keyword, it } = cxt;\n    if (ref[0] !== \"#\")\n        throw new Error(`\"${keyword}\" only supports hash fragment reference`);\n    const anchor = ref.slice(1);\n    if (it.allErrors) {\n        _dynamicRef();\n    }\n    else {\n        const valid = gen.let(\"valid\", false);\n        _dynamicRef(valid);\n        cxt.ok(valid);\n    }\n    function _dynamicRef(valid) {\n        // TODO the assumption here is that `recursiveRef: #` always points to the root\n        // of the schema object, which is not correct, because there may be $id that\n        // makes # point to it, and the target schema may not contain dynamic/recursiveAnchor.\n        // Because of that 2 tests in recursiveRef.json fail.\n        // This is a similar problem to #815 (`$id` doesn't alter resolution scope for `{ \"$ref\": \"#\" }`).\n        // (This problem is not tested in JSON-Schema-Test-Suite)\n        if (it.schemaEnv.root.dynamicAnchors[anchor]) {\n            const v = gen.let(\"_v\", (0, codegen_1._) `${names_1.default.dynamicAnchors}${(0, codegen_1.getProperty)(anchor)}`);\n            gen.if(v, _callRef(v, valid), _callRef(it.validateName, valid));\n        }\n        else {\n            _callRef(it.validateName, valid)();\n        }\n    }\n    function _callRef(validate, valid) {\n        return valid\n            ? () => gen.block(() => {\n                (0, ref_1.callRef)(cxt, validate);\n                gen.let(valid, true);\n            })\n            : () => (0, ref_1.callRef)(cxt, validate);\n    }\n}\nexports.dynamicRef = dynamicRef;\nexports.default = def;\n//# sourceMappingURL=dynamicRef.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst dynamicAnchor_1 = require(\"./dynamicAnchor\");\nconst dynamicRef_1 = require(\"./dynamicRef\");\nconst recursiveAnchor_1 = require(\"./recursiveAnchor\");\nconst recursiveRef_1 = require(\"./recursiveRef\");\nconst dynamic = [dynamicAnchor_1.default, dynamicRef_1.default, recursiveAnchor_1.default, recursiveRef_1.default];\nexports.default = dynamic;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst dynamicAnchor_1 = require(\"./dynamicAnchor\");\nconst util_1 = require(\"../../compile/util\");\nconst def = {\n    keyword: \"$recursiveAnchor\",\n    schemaType: \"boolean\",\n    code(cxt) {\n        if (cxt.schema)\n            (0, dynamicAnchor_1.dynamicAnchor)(cxt, \"\");\n        else\n            (0, util_1.checkStrictMode)(cxt.it, \"$recursiveAnchor: false is ignored\");\n    },\n};\nexports.default = def;\n//# sourceMappingURL=recursiveAnchor.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst dynamicRef_1 = require(\"./dynamicRef\");\nconst def = {\n    keyword: \"$recursiveRef\",\n    schemaType: \"string\",\n    code: (cxt) => (0, dynamicRef_1.dynamicRef)(cxt, cxt.schema),\n};\nexports.default = def;\n//# sourceMappingURL=recursiveRef.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst dependentRequired_1 = require(\"./validation/dependentRequired\");\nconst dependentSchemas_1 = require(\"./applicator/dependentSchemas\");\nconst limitContains_1 = require(\"./validation/limitContains\");\nconst next = [dependentRequired_1.default, dependentSchemas_1.default, limitContains_1.default];\nexports.default = next;\n//# sourceMappingURL=next.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst dependencies_1 = require(\"../applicator/dependencies\");\nconst def = {\n    keyword: \"dependentRequired\",\n    type: \"object\",\n    schemaType: \"object\",\n    error: dependencies_1.error,\n    code: (cxt) => (0, dependencies_1.validatePropertyDeps)(cxt),\n};\nexports.default = def;\n//# sourceMappingURL=dependentRequired.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst dependencies_1 = require(\"./dependencies\");\nconst def = {\n    keyword: \"dependentSchemas\",\n    type: \"object\",\n    schemaType: \"object\",\n    code: (cxt) => (0, dependencies_1.validateSchemaDeps)(cxt),\n};\nexports.default = def;\n//# sourceMappingURL=dependentSchemas.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst util_1 = require(\"../../compile/util\");\nconst def = {\n    keyword: [\"maxContains\", \"minContains\"],\n    type: \"array\",\n    schemaType: \"number\",\n    code({ keyword, parentSchema, it }) {\n        if (parentSchema.contains === undefined) {\n            (0, util_1.checkStrictMode)(it, `\"${keyword}\" without \"contains\" is ignored`);\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=limitContains.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst names_1 = require(\"../../compile/names\");\nconst error = {\n    message: \"must NOT have unevaluated properties\",\n    params: ({ params }) => (0, codegen_1._) `{unevaluatedProperty: ${params.unevaluatedProperty}}`,\n};\nconst def = {\n    keyword: \"unevaluatedProperties\",\n    type: \"object\",\n    schemaType: [\"boolean\", \"object\"],\n    trackErrors: true,\n    error,\n    code(cxt) {\n        const { gen, schema, data, errsCount, it } = cxt;\n        /* istanbul ignore if */\n        if (!errsCount)\n            throw new Error(\"ajv implementation error\");\n        const { allErrors, props } = it;\n        if (props instanceof codegen_1.Name) {\n            gen.if((0, codegen_1._) `${props} !== true`, () => gen.forIn(\"key\", data, (key) => gen.if(unevaluatedDynamic(props, key), () => unevaluatedPropCode(key))));\n        }\n        else if (props !== true) {\n            gen.forIn(\"key\", data, (key) => props === undefined\n                ? unevaluatedPropCode(key)\n                : gen.if(unevaluatedStatic(props, key), () => unevaluatedPropCode(key)));\n        }\n        it.props = true;\n        cxt.ok((0, codegen_1._) `${errsCount} === ${names_1.default.errors}`);\n        function unevaluatedPropCode(key) {\n            if (schema === false) {\n                cxt.setParams({ unevaluatedProperty: key });\n                cxt.error();\n                if (!allErrors)\n                    gen.break();\n                return;\n            }\n            if (!(0, util_1.alwaysValidSchema)(it, schema)) {\n                const valid = gen.name(\"valid\");\n                cxt.subschema({\n                    keyword: \"unevaluatedProperties\",\n                    dataProp: key,\n                    dataPropType: util_1.Type.Str,\n                }, valid);\n                if (!allErrors)\n                    gen.if((0, codegen_1.not)(valid), () => gen.break());\n            }\n        }\n        function unevaluatedDynamic(evaluatedProps, key) {\n            return (0, codegen_1._) `!${evaluatedProps} || !${evaluatedProps}[${key}]`;\n        }\n        function unevaluatedStatic(evaluatedProps, key) {\n            const ps = [];\n            for (const p in evaluatedProps) {\n                if (evaluatedProps[p] === true)\n                    ps.push((0, codegen_1._) `${key} !== ${p}`);\n            }\n            return (0, codegen_1.and)(...ps);\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=unevaluatedProperties.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: ({ params: { len } }) => (0, codegen_1.str) `must NOT have more than ${len} items`,\n    params: ({ params: { len } }) => (0, codegen_1._) `{limit: ${len}}`,\n};\nconst def = {\n    keyword: \"unevaluatedItems\",\n    type: \"array\",\n    schemaType: [\"boolean\", \"object\"],\n    error,\n    code(cxt) {\n        const { gen, schema, data, it } = cxt;\n        const items = it.items || 0;\n        if (items === true)\n            return;\n        const len = gen.const(\"len\", (0, codegen_1._) `${data}.length`);\n        if (schema === false) {\n            cxt.setParams({ len: items });\n            cxt.fail((0, codegen_1._) `${len} > ${items}`);\n        }\n        else if (typeof schema == \"object\" && !(0, util_1.alwaysValidSchema)(it, schema)) {\n            const valid = gen.var(\"valid\", (0, codegen_1._) `${len} <= ${items}`);\n            gen.if((0, codegen_1.not)(valid), () => validateItems(valid, items));\n            cxt.ok(valid);\n        }\n        it.items = true;\n        function validateItems(valid, from) {\n            gen.forRange(\"i\", from, len, (i) => {\n                cxt.subschema({ keyword: \"unevaluatedItems\", dataProp: i, dataPropType: util_1.Type.Num }, valid);\n                if (!it.allErrors)\n                    gen.if((0, codegen_1.not)(valid), () => gen.break());\n            });\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=unevaluatedItems.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst format_1 = require(\"./format\");\nconst format = [format_1.default];\nexports.default = format;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst error = {\n    message: ({ schemaCode }) => (0, codegen_1.str) `must match format \"${schemaCode}\"`,\n    params: ({ schemaCode }) => (0, codegen_1._) `{format: ${schemaCode}}`,\n};\nconst def = {\n    keyword: \"format\",\n    type: [\"number\", \"string\"],\n    schemaType: \"string\",\n    $data: true,\n    error,\n    code(cxt, ruleType) {\n        const { gen, data, $data, schema, schemaCode, it } = cxt;\n        const { opts, errSchemaPath, schemaEnv, self } = it;\n        if (!opts.validateFormats)\n            return;\n        if ($data)\n            validate$DataFormat();\n        else\n            validateFormat();\n        function validate$DataFormat() {\n            const fmts = gen.scopeValue(\"formats\", {\n                ref: self.formats,\n                code: opts.code.formats,\n            });\n            const fDef = gen.const(\"fDef\", (0, codegen_1._) `${fmts}[${schemaCode}]`);\n            const fType = gen.let(\"fType\");\n            const format = gen.let(\"format\");\n            // TODO simplify\n            gen.if((0, codegen_1._) `typeof ${fDef} == \"object\" && !(${fDef} instanceof RegExp)`, () => gen.assign(fType, (0, codegen_1._) `${fDef}.type || \"string\"`).assign(format, (0, codegen_1._) `${fDef}.validate`), () => gen.assign(fType, (0, codegen_1._) `\"string\"`).assign(format, fDef));\n            cxt.fail$data((0, codegen_1.or)(unknownFmt(), invalidFmt()));\n            function unknownFmt() {\n                if (opts.strictSchema === false)\n                    return codegen_1.nil;\n                return (0, codegen_1._) `${schemaCode} && !${format}`;\n            }\n            function invalidFmt() {\n                const callFormat = schemaEnv.$async\n                    ? (0, codegen_1._) `(${fDef}.async ? await ${format}(${data}) : ${format}(${data}))`\n                    : (0, codegen_1._) `${format}(${data})`;\n                const validData = (0, codegen_1._) `(typeof ${format} == \"function\" ? ${callFormat} : ${format}.test(${data}))`;\n                return (0, codegen_1._) `${format} && ${format} !== true && ${fType} === ${ruleType} && !${validData}`;\n            }\n        }\n        function validateFormat() {\n            const formatDef = self.formats[schema];\n            if (!formatDef) {\n                unknownFormat();\n                return;\n            }\n            if (formatDef === true)\n                return;\n            const [fmtType, format, fmtRef] = getFormat(formatDef);\n            if (fmtType === ruleType)\n                cxt.pass(validCondition());\n            function unknownFormat() {\n                if (opts.strictSchema === false) {\n                    self.logger.warn(unknownMsg());\n                    return;\n                }\n                throw new Error(unknownMsg());\n                function unknownMsg() {\n                    return `unknown format \"${schema}\" ignored in schema at path \"${errSchemaPath}\"`;\n                }\n            }\n            function getFormat(fmtDef) {\n                const code = fmtDef instanceof RegExp\n                    ? (0, codegen_1.regexpCode)(fmtDef)\n                    : opts.code.formats\n                        ? (0, codegen_1._) `${opts.code.formats}${(0, codegen_1.getProperty)(schema)}`\n                        : undefined;\n                const fmt = gen.scopeValue(\"formats\", { key: schema, ref: fmtDef, code });\n                if (typeof fmtDef == \"object\" && !(fmtDef instanceof RegExp)) {\n                    return [fmtDef.type || \"string\", fmtDef.validate, (0, codegen_1._) `${fmt}.validate`];\n                }\n                return [\"string\", fmtDef, fmt];\n            }\n            function validCondition() {\n                if (typeof formatDef == \"object\" && !(formatDef instanceof RegExp) && formatDef.async) {\n                    if (!schemaEnv.$async)\n                        throw new Error(\"async format in sync schema\");\n                    return (0, codegen_1._) `await ${fmtRef}(${data})`;\n                }\n                return typeof format == \"function\" ? (0, codegen_1._) `${fmtRef}(${data})` : (0, codegen_1._) `${fmtRef}.test(${data})`;\n            }\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=format.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.contentVocabulary = exports.metadataVocabulary = void 0;\nexports.metadataVocabulary = [\n    \"title\",\n    \"description\",\n    \"default\",\n    \"deprecated\",\n    \"readOnly\",\n    \"writeOnly\",\n    \"examples\",\n];\nexports.contentVocabulary = [\n    \"contentMediaType\",\n    \"contentEncoding\",\n    \"contentSchema\",\n];\n//# sourceMappingURL=metadata.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst core_1 = require(\"./core\");\nconst validation_1 = require(\"./validation\");\nconst applicator_1 = require(\"./applicator\");\nconst dynamic_1 = require(\"./dynamic\");\nconst next_1 = require(\"./next\");\nconst unevaluated_1 = require(\"./unevaluated\");\nconst format_1 = require(\"./format\");\nconst metadata_1 = require(\"./metadata\");\nconst draft2020Vocabularies = [\n    dynamic_1.default,\n    core_1.default,\n    validation_1.default,\n    (0, applicator_1.default)(true),\n    format_1.default,\n    metadata_1.metadataVocabulary,\n    metadata_1.contentVocabulary,\n    next_1.default,\n    unevaluated_1.default,\n];\nexports.default = draft2020Vocabularies;\n//# sourceMappingURL=draft2020.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst unevaluatedProperties_1 = require(\"./unevaluatedProperties\");\nconst unevaluatedItems_1 = require(\"./unevaluatedItems\");\nconst unevaluated = [unevaluatedProperties_1.default, unevaluatedItems_1.default];\nexports.default = unevaluated;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst types_1 = require(\"../discriminator/types\");\nconst compile_1 = require(\"../../compile\");\nconst ref_error_1 = require(\"../../compile/ref_error\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: ({ params: { discrError, tagName } }) => discrError === types_1.DiscrError.Tag\n        ? `tag \"${tagName}\" must be string`\n        : `value of tag \"${tagName}\" must be in oneOf`,\n    params: ({ params: { discrError, tag, tagName } }) => (0, codegen_1._) `{error: ${discrError}, tag: ${tagName}, tagValue: ${tag}}`,\n};\nconst def = {\n    keyword: \"discriminator\",\n    type: \"object\",\n    schemaType: \"object\",\n    error,\n    code(cxt) {\n        const { gen, data, schema, parentSchema, it } = cxt;\n        const { oneOf } = parentSchema;\n        if (!it.opts.discriminator) {\n            throw new Error(\"discriminator: requires discriminator option\");\n        }\n        const tagName = schema.propertyName;\n        if (typeof tagName != \"string\")\n            throw new Error(\"discriminator: requires propertyName\");\n        if (schema.mapping)\n            throw new Error(\"discriminator: mapping is not supported\");\n        if (!oneOf)\n            throw new Error(\"discriminator: requires oneOf keyword\");\n        const valid = gen.let(\"valid\", false);\n        const tag = gen.const(\"tag\", (0, codegen_1._) `${data}${(0, codegen_1.getProperty)(tagName)}`);\n        gen.if((0, codegen_1._) `typeof ${tag} == \"string\"`, () => validateMapping(), () => cxt.error(false, { discrError: types_1.DiscrError.Tag, tag, tagName }));\n        cxt.ok(valid);\n        function validateMapping() {\n            const mapping = getMapping();\n            gen.if(false);\n            for (const tagValue in mapping) {\n                gen.elseIf((0, codegen_1._) `${tag} === ${tagValue}`);\n                gen.assign(valid, applyTagSchema(mapping[tagValue]));\n            }\n            gen.else();\n            cxt.error(false, { discrError: types_1.DiscrError.Mapping, tag, tagName });\n            gen.endIf();\n        }\n        function applyTagSchema(schemaProp) {\n            const _valid = gen.name(\"valid\");\n            const schCxt = cxt.subschema({ keyword: \"oneOf\", schemaProp }, _valid);\n            cxt.mergeEvaluated(schCxt, codegen_1.Name);\n            return _valid;\n        }\n        function getMapping() {\n            var _a;\n            const oneOfMapping = {};\n            const topRequired = hasRequired(parentSchema);\n            let tagRequired = true;\n            for (let i = 0; i < oneOf.length; i++) {\n                let sch = oneOf[i];\n                if ((sch === null || sch === void 0 ? void 0 : sch.$ref) && !(0, util_1.schemaHasRulesButRef)(sch, it.self.RULES)) {\n                    const ref = sch.$ref;\n                    sch = compile_1.resolveRef.call(it.self, it.schemaEnv.root, it.baseId, ref);\n                    if (sch instanceof compile_1.SchemaEnv)\n                        sch = sch.schema;\n                    if (sch === undefined)\n                        throw new ref_error_1.default(it.opts.uriResolver, it.baseId, ref);\n                }\n                const propSch = (_a = sch === null || sch === void 0 ? void 0 : sch.properties) === null || _a === void 0 ? void 0 : _a[tagName];\n                if (typeof propSch != \"object\") {\n                    throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have \"properties/${tagName}\"`);\n                }\n                tagRequired = tagRequired && (topRequired || hasRequired(sch));\n                addMappings(propSch, i);\n            }\n            if (!tagRequired)\n                throw new Error(`discriminator: \"${tagName}\" must be required`);\n            return oneOfMapping;\n            function hasRequired({ required }) {\n                return Array.isArray(required) && required.includes(tagName);\n            }\n            function addMappings(sch, i) {\n                if (sch.const) {\n                    addMapping(sch.const, i);\n                }\n                else if (sch.enum) {\n                    for (const tagValue of sch.enum) {\n                        addMapping(tagValue, i);\n                    }\n                }\n                else {\n                    throw new Error(`discriminator: \"properties/${tagName}\" must have \"const\" or \"enum\"`);\n                }\n            }\n            function addMapping(tagValue, i) {\n                if (typeof tagValue != \"string\" || tagValue in oneOfMapping) {\n                    throw new Error(`discriminator: \"${tagName}\" values must be unique strings`);\n                }\n                oneOfMapping[tagValue] = i;\n            }\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DiscrError = void 0;\nvar DiscrError;\n(function (DiscrError) {\n    DiscrError[\"Tag\"] = \"tag\";\n    DiscrError[\"Mapping\"] = \"mapping\";\n})(DiscrError || (exports.DiscrError = DiscrError = {}));\n//# sourceMappingURL=types.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MissingRefError = exports.ValidationError = exports.CodeGen = exports.Name = exports.nil = exports.stringify = exports.str = exports._ = exports.KeywordCxt = exports.Ajv2020 = void 0;\nconst core_1 = require(\"./core\");\nconst draft2020_1 = require(\"./vocabularies/draft2020\");\nconst discriminator_1 = require(\"./vocabularies/discriminator\");\nconst json_schema_2020_12_1 = require(\"./refs/json-schema-2020-12\");\nconst META_SCHEMA_ID = \"https://json-schema.org/draft/2020-12/schema\";\nclass Ajv2020 extends core_1.default {\n    constructor(opts = {}) {\n        super({\n            ...opts,\n            dynamicRef: true,\n            next: true,\n            unevaluated: true,\n        });\n    }\n    _addVocabularies() {\n        super._addVocabularies();\n        draft2020_1.default.forEach((v) => this.addVocabulary(v));\n        if (this.opts.discriminator)\n            this.addKeyword(discriminator_1.default);\n    }\n    _addDefaultMetaSchema() {\n        super._addDefaultMetaSchema();\n        const { $data, meta } = this.opts;\n        if (!meta)\n            return;\n        json_schema_2020_12_1.default.call(this, $data);\n        this.refs[\"http://json-schema.org/schema\"] = META_SCHEMA_ID;\n    }\n    defaultMeta() {\n        return (this.opts.defaultMeta =\n            super.defaultMeta() || (this.getSchema(META_SCHEMA_ID) ? META_SCHEMA_ID : undefined));\n    }\n}\nexports.Ajv2020 = Ajv2020;\nmodule.exports = exports = Ajv2020;\nmodule.exports.Ajv2020 = Ajv2020;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = Ajv2020;\nvar validate_1 = require(\"./compile/validate\");\nObject.defineProperty(exports, \"KeywordCxt\", { enumerable: true, get: function () { return validate_1.KeywordCxt; } });\nvar codegen_1 = require(\"./compile/codegen\");\nObject.defineProperty(exports, \"_\", { enumerable: true, get: function () { return codegen_1._; } });\nObject.defineProperty(exports, \"str\", { enumerable: true, get: function () { return codegen_1.str; } });\nObject.defineProperty(exports, \"stringify\", { enumerable: true, get: function () { return codegen_1.stringify; } });\nObject.defineProperty(exports, \"nil\", { enumerable: true, get: function () { return codegen_1.nil; } });\nObject.defineProperty(exports, \"Name\", { enumerable: true, get: function () { return codegen_1.Name; } });\nObject.defineProperty(exports, \"CodeGen\", { enumerable: true, get: function () { return codegen_1.CodeGen; } });\nvar validation_error_1 = require(\"./runtime/validation_error\");\nObject.defineProperty(exports, \"ValidationError\", { enumerable: true, get: function () { return validation_error_1.default; } });\nvar ref_error_1 = require(\"./compile/ref_error\");\nObject.defineProperty(exports, \"MissingRefError\", { enumerable: true, get: function () { return ref_error_1.default; } });\n//# sourceMappingURL=2020.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst metaSchema = require(\"./schema.json\");\nconst applicator = require(\"./meta/applicator.json\");\nconst unevaluated = require(\"./meta/unevaluated.json\");\nconst content = require(\"./meta/content.json\");\nconst core = require(\"./meta/core.json\");\nconst format = require(\"./meta/format-annotation.json\");\nconst metadata = require(\"./meta/meta-data.json\");\nconst validation = require(\"./meta/validation.json\");\nconst META_SUPPORT_DATA = [\"/properties\"];\nfunction addMetaSchema2020($data) {\n    ;\n    [\n        metaSchema,\n        applicator,\n        unevaluated,\n        content,\n        core,\n        with$data(this, format),\n        metadata,\n        with$data(this, validation),\n    ].forEach((sch) => this.addMetaSchema(sch, undefined, false));\n    return this;\n    function with$data(ajv, sch) {\n        return $data ? ajv.$dataMetaSchema(sch, META_SUPPORT_DATA) : sch;\n    }\n}\nexports.default = addMetaSchema2020;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MissingRefError = exports.ValidationError = exports.CodeGen = exports.Name = exports.nil = exports.stringify = exports.str = exports._ = exports.KeywordCxt = exports.Ajv = void 0;\nconst core_1 = require(\"./core\");\nconst draft7_1 = require(\"./vocabularies/draft7\");\nconst discriminator_1 = require(\"./vocabularies/discriminator\");\nconst draft7MetaSchema = require(\"./refs/json-schema-draft-07.json\");\nconst META_SUPPORT_DATA = [\"/properties\"];\nconst META_SCHEMA_ID = \"http://json-schema.org/draft-07/schema\";\nclass Ajv extends core_1.default {\n    _addVocabularies() {\n        super._addVocabularies();\n        draft7_1.default.forEach((v) => this.addVocabulary(v));\n        if (this.opts.discriminator)\n            this.addKeyword(discriminator_1.default);\n    }\n    _addDefaultMetaSchema() {\n        super._addDefaultMetaSchema();\n        if (!this.opts.meta)\n            return;\n        const metaSchema = this.opts.$data\n            ? this.$dataMetaSchema(draft7MetaSchema, META_SUPPORT_DATA)\n            : draft7MetaSchema;\n        this.addMetaSchema(metaSchema, META_SCHEMA_ID, false);\n        this.refs[\"http://json-schema.org/schema\"] = META_SCHEMA_ID;\n    }\n    defaultMeta() {\n        return (this.opts.defaultMeta =\n            super.defaultMeta() || (this.getSchema(META_SCHEMA_ID) ? META_SCHEMA_ID : undefined));\n    }\n}\nexports.Ajv = Ajv;\nmodule.exports = exports = Ajv;\nmodule.exports.Ajv = Ajv;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = Ajv;\nvar validate_1 = require(\"./compile/validate\");\nObject.defineProperty(exports, \"KeywordCxt\", { enumerable: true, get: function () { return validate_1.KeywordCxt; } });\nvar codegen_1 = require(\"./compile/codegen\");\nObject.defineProperty(exports, \"_\", { enumerable: true, get: function () { return codegen_1._; } });\nObject.defineProperty(exports, \"str\", { enumerable: true, get: function () { return codegen_1.str; } });\nObject.defineProperty(exports, \"stringify\", { enumerable: true, get: function () { return codegen_1.stringify; } });\nObject.defineProperty(exports, \"nil\", { enumerable: true, get: function () { return codegen_1.nil; } });\nObject.defineProperty(exports, \"Name\", { enumerable: true, get: function () { return codegen_1.Name; } });\nObject.defineProperty(exports, \"CodeGen\", { enumerable: true, get: function () { return codegen_1.CodeGen; } });\nvar validation_error_1 = require(\"./runtime/validation_error\");\nObject.defineProperty(exports, \"ValidationError\", { enumerable: true, get: function () { return validation_error_1.default; } });\nvar ref_error_1 = require(\"./compile/ref_error\");\nObject.defineProperty(exports, \"MissingRefError\", { enumerable: true, get: function () { return ref_error_1.default; } });\n//# sourceMappingURL=ajv.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst core_1 = require(\"./core\");\nconst validation_1 = require(\"./validation\");\nconst applicator_1 = require(\"./applicator\");\nconst format_1 = require(\"./format\");\nconst metadata_1 = require(\"./metadata\");\nconst draft7Vocabularies = [\n    core_1.default,\n    validation_1.default,\n    (0, applicator_1.default)(),\n    format_1.default,\n    metadata_1.metadataVocabulary,\n    metadata_1.contentVocabulary,\n];\nexports.default = draft7Vocabularies;\n//# sourceMappingURL=draft7.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst formats_1 = require(\"./formats\");\nconst limit_1 = require(\"./limit\");\nconst codegen_1 = require(\"ajv/dist/compile/codegen\");\nconst fullName = new codegen_1.Name(\"fullFormats\");\nconst fastName = new codegen_1.Name(\"fastFormats\");\nconst formatsPlugin = (ajv, opts = { keywords: true }) => {\n    if (Array.isArray(opts)) {\n        addFormats(ajv, opts, formats_1.fullFormats, fullName);\n        return ajv;\n    }\n    const [formats, exportName] = opts.mode === \"fast\" ? [formats_1.fastFormats, fastName] : [formats_1.fullFormats, fullName];\n    const list = opts.formats || formats_1.formatNames;\n    addFormats(ajv, list, formats, exportName);\n    if (opts.keywords)\n        (0, limit_1.default)(ajv);\n    return ajv;\n};\nformatsPlugin.get = (name, mode = \"full\") => {\n    const formats = mode === \"fast\" ? formats_1.fastFormats : formats_1.fullFormats;\n    const f = formats[name];\n    if (!f)\n        throw new Error(`Unknown format \"${name}\"`);\n    return f;\n};\nfunction addFormats(ajv, list, fs, exportName) {\n    var _a;\n    var _b;\n    (_a = (_b = ajv.opts.code).formats) !== null && _a !== void 0 ? _a : (_b.formats = (0, codegen_1._) `require(\"ajv-formats/dist/formats\").${exportName}`);\n    for (const f of list)\n        ajv.addFormat(f, fs[f]);\n}\nmodule.exports = exports = formatsPlugin;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = formatsPlugin;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.formatNames = exports.fastFormats = exports.fullFormats = void 0;\nfunction fmtDef(validate, compare) {\n    return { validate, compare };\n}\nexports.fullFormats = {\n    // date: http://tools.ietf.org/html/rfc3339#section-5.6\n    date: fmtDef(date, compareDate),\n    // date-time: http://tools.ietf.org/html/rfc3339#section-5.6\n    time: fmtDef(getTime(true), compareTime),\n    \"date-time\": fmtDef(getDateTime(true), compareDateTime),\n    \"iso-time\": fmtDef(getTime(), compareIsoTime),\n    \"iso-date-time\": fmtDef(getDateTime(), compareIsoDateTime),\n    // duration: https://tools.ietf.org/html/rfc3339#appendix-A\n    duration: /^P(?!$)((\\d+Y)?(\\d+M)?(\\d+D)?(T(?=\\d)(\\d+H)?(\\d+M)?(\\d+S)?)?|(\\d+W)?)$/,\n    uri,\n    \"uri-reference\": /^(?:[a-z][a-z0-9+\\-.]*:)?(?:\\/?\\/(?:(?:[a-z0-9\\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\\.[a-z0-9\\-._~!$&'()*+,;=:]+)\\]|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)|(?:[a-z0-9\\-._~!$&'\"()*+,;=]|%[0-9a-f]{2})*)(?::\\d*)?(?:\\/(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})*)*|\\/(?:(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\\?(?:[a-z0-9\\-._~!$&'\"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\\-._~!$&'\"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,\n    // uri-template: https://tools.ietf.org/html/rfc6570\n    \"uri-template\": /^(?:(?:[^\\x00-\\x20\"'<>%\\\\^`{|}]|%[0-9a-f]{2})|\\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\\*)?)*\\})*$/i,\n    // For the source: https://gist.github.com/dperini/729294\n    // For test cases: https://mathiasbynens.be/demo/url-regex\n    url: /^(?:https?|ftp):\\/\\/(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z0-9\\u{00a1}-\\u{ffff}]+-)*[a-z0-9\\u{00a1}-\\u{ffff}]+)(?:\\.(?:[a-z0-9\\u{00a1}-\\u{ffff}]+-)*[a-z0-9\\u{00a1}-\\u{ffff}]+)*(?:\\.(?:[a-z\\u{00a1}-\\u{ffff}]{2,})))(?::\\d{2,5})?(?:\\/[^\\s]*)?$/iu,\n    email: /^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,\n    hostname: /^(?=.{1,253}\\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\\.?$/i,\n    // optimized https://www.safaribooksonline.com/library/view/regular-expressions-cookbook/9780596802837/ch07s16.html\n    ipv4: /^(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)\\.){3}(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)$/,\n    ipv6: /^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:)))$/i,\n    regex,\n    // uuid: http://tools.ietf.org/html/rfc4122\n    uuid: /^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,\n    // JSON-pointer: https://tools.ietf.org/html/rfc6901\n    // uri fragment: https://tools.ietf.org/html/rfc3986#appendix-A\n    \"json-pointer\": /^(?:\\/(?:[^~/]|~0|~1)*)*$/,\n    \"json-pointer-uri-fragment\": /^#(?:\\/(?:[a-z0-9_\\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,\n    // relative JSON-pointer: http://tools.ietf.org/html/draft-luff-relative-json-pointer-00\n    \"relative-json-pointer\": /^(?:0|[1-9][0-9]*)(?:#|(?:\\/(?:[^~/]|~0|~1)*)*)$/,\n    // the following formats are used by the openapi specification: https://spec.openapis.org/oas/v3.0.0#data-types\n    // byte: https://github.com/miguelmota/is-base64\n    byte,\n    // signed 32 bit integer\n    int32: { type: \"number\", validate: validateInt32 },\n    // signed 64 bit integer\n    int64: { type: \"number\", validate: validateInt64 },\n    // C-type float\n    float: { type: \"number\", validate: validateNumber },\n    // C-type double\n    double: { type: \"number\", validate: validateNumber },\n    // hint to the UI to hide input strings\n    password: true,\n    // unchecked string payload\n    binary: true,\n};\nexports.fastFormats = {\n    ...exports.fullFormats,\n    date: fmtDef(/^\\d\\d\\d\\d-[0-1]\\d-[0-3]\\d$/, compareDate),\n    time: fmtDef(/^(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)(?:\\.\\d+)?(?:z|[+-]\\d\\d(?::?\\d\\d)?)$/i, compareTime),\n    \"date-time\": fmtDef(/^\\d\\d\\d\\d-[0-1]\\d-[0-3]\\dt(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)(?:\\.\\d+)?(?:z|[+-]\\d\\d(?::?\\d\\d)?)$/i, compareDateTime),\n    \"iso-time\": fmtDef(/^(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)(?:\\.\\d+)?(?:z|[+-]\\d\\d(?::?\\d\\d)?)?$/i, compareIsoTime),\n    \"iso-date-time\": fmtDef(/^\\d\\d\\d\\d-[0-1]\\d-[0-3]\\d[t\\s](?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)(?:\\.\\d+)?(?:z|[+-]\\d\\d(?::?\\d\\d)?)?$/i, compareIsoDateTime),\n    // uri: https://github.com/mafintosh/is-my-json-valid/blob/master/formats.js\n    uri: /^(?:[a-z][a-z0-9+\\-.]*:)(?:\\/?\\/)?[^\\s]*$/i,\n    \"uri-reference\": /^(?:(?:[a-z][a-z0-9+\\-.]*:)?\\/?\\/)?(?:[^\\\\\\s#][^\\s#]*)?(?:#[^\\\\\\s]*)?$/i,\n    // email (sources from jsen validator):\n    // http://stackoverflow.com/questions/201323/using-a-regular-expression-to-validate-an-email-address#answer-8829363\n    // http://www.w3.org/TR/html5/forms.html#valid-e-mail-address (search for 'wilful violation')\n    email: /^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,\n};\nexports.formatNames = Object.keys(exports.fullFormats);\nfunction isLeapYear(year) {\n    // https://tools.ietf.org/html/rfc3339#appendix-C\n    return year % 4 === 0 && (year % 100 !== 0 || year % 400 === 0);\n}\nconst DATE = /^(\\d\\d\\d\\d)-(\\d\\d)-(\\d\\d)$/;\nconst DAYS = [0, 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\nfunction date(str) {\n    // full-date from http://tools.ietf.org/html/rfc3339#section-5.6\n    const matches = DATE.exec(str);\n    if (!matches)\n        return false;\n    const year = +matches[1];\n    const month = +matches[2];\n    const day = +matches[3];\n    return (month >= 1 &&\n        month <= 12 &&\n        day >= 1 &&\n        day <= (month === 2 && isLeapYear(year) ? 29 : DAYS[month]));\n}\nfunction compareDate(d1, d2) {\n    if (!(d1 && d2))\n        return undefined;\n    if (d1 > d2)\n        return 1;\n    if (d1 < d2)\n        return -1;\n    return 0;\n}\nconst TIME = /^(\\d\\d):(\\d\\d):(\\d\\d(?:\\.\\d+)?)(z|([+-])(\\d\\d)(?::?(\\d\\d))?)?$/i;\nfunction getTime(strictTimeZone) {\n    return function time(str) {\n        const matches = TIME.exec(str);\n        if (!matches)\n            return false;\n        const hr = +matches[1];\n        const min = +matches[2];\n        const sec = +matches[3];\n        const tz = matches[4];\n        const tzSign = matches[5] === \"-\" ? -1 : 1;\n        const tzH = +(matches[6] || 0);\n        const tzM = +(matches[7] || 0);\n        if (tzH > 23 || tzM > 59 || (strictTimeZone && !tz))\n            return false;\n        if (hr <= 23 && min <= 59 && sec < 60)\n            return true;\n        // leap second\n        const utcMin = min - tzM * tzSign;\n        const utcHr = hr - tzH * tzSign - (utcMin < 0 ? 1 : 0);\n        return (utcHr === 23 || utcHr === -1) && (utcMin === 59 || utcMin === -1) && sec < 61;\n    };\n}\nfunction compareTime(s1, s2) {\n    if (!(s1 && s2))\n        return undefined;\n    const t1 = new Date(\"2020-01-01T\" + s1).valueOf();\n    const t2 = new Date(\"2020-01-01T\" + s2).valueOf();\n    if (!(t1 && t2))\n        return undefined;\n    return t1 - t2;\n}\nfunction compareIsoTime(t1, t2) {\n    if (!(t1 && t2))\n        return undefined;\n    const a1 = TIME.exec(t1);\n    const a2 = TIME.exec(t2);\n    if (!(a1 && a2))\n        return undefined;\n    t1 = a1[1] + a1[2] + a1[3];\n    t2 = a2[1] + a2[2] + a2[3];\n    if (t1 > t2)\n        return 1;\n    if (t1 < t2)\n        return -1;\n    return 0;\n}\nconst DATE_TIME_SEPARATOR = /t|\\s/i;\nfunction getDateTime(strictTimeZone) {\n    const time = getTime(strictTimeZone);\n    return function date_time(str) {\n        // http://tools.ietf.org/html/rfc3339#section-5.6\n        const dateTime = str.split(DATE_TIME_SEPARATOR);\n        return dateTime.length === 2 && date(dateTime[0]) && time(dateTime[1]);\n    };\n}\nfunction compareDateTime(dt1, dt2) {\n    if (!(dt1 && dt2))\n        return undefined;\n    const d1 = new Date(dt1).valueOf();\n    const d2 = new Date(dt2).valueOf();\n    if (!(d1 && d2))\n        return undefined;\n    return d1 - d2;\n}\nfunction compareIsoDateTime(dt1, dt2) {\n    if (!(dt1 && dt2))\n        return undefined;\n    const [d1, t1] = dt1.split(DATE_TIME_SEPARATOR);\n    const [d2, t2] = dt2.split(DATE_TIME_SEPARATOR);\n    const res = compareDate(d1, d2);\n    if (res === undefined)\n        return undefined;\n    return res || compareTime(t1, t2);\n}\nconst NOT_URI_FRAGMENT = /\\/|:/;\nconst URI = /^(?:[a-z][a-z0-9+\\-.]*:)(?:\\/?\\/(?:(?:[a-z0-9\\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\\.[a-z0-9\\-._~!$&'()*+,;=:]+)\\]|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)|(?:[a-z0-9\\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\\d*)?(?:\\/(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\\/(?:(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\\?(?:[a-z0-9\\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;\nfunction uri(str) {\n    // http://jmrware.com/articles/2009/uri_regexp/URI_regex.html + optional protocol + required \".\"\n    return NOT_URI_FRAGMENT.test(str) && URI.test(str);\n}\nconst BYTE = /^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;\nfunction byte(str) {\n    BYTE.lastIndex = 0;\n    return BYTE.test(str);\n}\nconst MIN_INT32 = -(2 ** 31);\nconst MAX_INT32 = 2 ** 31 - 1;\nfunction validateInt32(value) {\n    return Number.isInteger(value) && value <= MAX_INT32 && value >= MIN_INT32;\n}\nfunction validateInt64(value) {\n    // JSON and javascript max Int is 2**53, so any int that passes isInteger is valid for Int64\n    return Number.isInteger(value);\n}\nfunction validateNumber() {\n    return true;\n}\nconst Z_ANCHOR = /[^\\\\]\\\\Z/;\nfunction regex(str) {\n    if (Z_ANCHOR.test(str))\n        return false;\n    try {\n        new RegExp(str);\n        return true;\n    }\n    catch (e) {\n        return false;\n    }\n}\n//# sourceMappingURL=formats.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.formatLimitDefinition = void 0;\nconst ajv_1 = require(\"ajv\");\nconst codegen_1 = require(\"ajv/dist/compile/codegen\");\nconst ops = codegen_1.operators;\nconst KWDs = {\n    formatMaximum: { okStr: \"<=\", ok: ops.LTE, fail: ops.GT },\n    formatMinimum: { okStr: \">=\", ok: ops.GTE, fail: ops.LT },\n    formatExclusiveMaximum: { okStr: \"<\", ok: ops.LT, fail: ops.GTE },\n    formatExclusiveMinimum: { okStr: \">\", ok: ops.GT, fail: ops.LTE },\n};\nconst error = {\n    message: ({ keyword, schemaCode }) => (0, codegen_1.str) `should be ${KWDs[keyword].okStr} ${schemaCode}`,\n    params: ({ keyword, schemaCode }) => (0, codegen_1._) `{comparison: ${KWDs[keyword].okStr}, limit: ${schemaCode}}`,\n};\nexports.formatLimitDefinition = {\n    keyword: Object.keys(KWDs),\n    type: \"string\",\n    schemaType: \"string\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { gen, data, schemaCode, keyword, it } = cxt;\n        const { opts, self } = it;\n        if (!opts.validateFormats)\n            return;\n        const fCxt = new ajv_1.KeywordCxt(it, self.RULES.all.format.definition, \"format\");\n        if (fCxt.$data)\n            validate$DataFormat();\n        else\n            validateFormat();\n        function validate$DataFormat() {\n            const fmts = gen.scopeValue(\"formats\", {\n                ref: self.formats,\n                code: opts.code.formats,\n            });\n            const fmt = gen.const(\"fmt\", (0, codegen_1._) `${fmts}[${fCxt.schemaCode}]`);\n            cxt.fail$data((0, codegen_1.or)((0, codegen_1._) `typeof ${fmt} != \"object\"`, (0, codegen_1._) `${fmt} instanceof RegExp`, (0, codegen_1._) `typeof ${fmt}.compare != \"function\"`, compareCode(fmt)));\n        }\n        function validateFormat() {\n            const format = fCxt.schema;\n            const fmtDef = self.formats[format];\n            if (!fmtDef || fmtDef === true)\n                return;\n            if (typeof fmtDef != \"object\" ||\n                fmtDef instanceof RegExp ||\n                typeof fmtDef.compare != \"function\") {\n                throw new Error(`\"${keyword}\": format \"${format}\" does not define \"compare\" function`);\n            }\n            const fmt = gen.scopeValue(\"formats\", {\n                key: format,\n                ref: fmtDef,\n                code: opts.code.formats ? (0, codegen_1._) `${opts.code.formats}${(0, codegen_1.getProperty)(format)}` : undefined,\n            });\n            cxt.fail$data(compareCode(fmt));\n        }\n        function compareCode(fmt) {\n            return (0, codegen_1._) `${fmt}.compare(${data}, ${schemaCode}) ${KWDs[keyword].fail} 0`;\n        }\n    },\n    dependencies: [\"format\"],\n};\nconst formatLimitPlugin = (ajv) => {\n    ajv.addKeyword(exports.formatLimitDefinition);\n    return ajv;\n};\nexports.default = formatLimitPlugin;\n//# sourceMappingURL=limit.js.map","const copyProperty = (to, from, property, ignoreNonConfigurable) => {\n\t// `Function#length` should reflect the parameters of `to` not `from` since we keep its body.\n\t// `Function#prototype` is non-writable and non-configurable so can never be modified.\n\tif (property === 'length' || property === 'prototype') {\n\t\treturn;\n\t}\n\n\t// `Function#arguments` and `Function#caller` should not be copied. They were reported to be present in `Reflect.ownKeys` for some devices in React Native (#41), so we explicitly ignore them here.\n\tif (property === 'arguments' || property === 'caller') {\n\t\treturn;\n\t}\n\n\tconst toDescriptor = Object.getOwnPropertyDescriptor(to, property);\n\tconst fromDescriptor = Object.getOwnPropertyDescriptor(from, property);\n\n\tif (!canCopyProperty(toDescriptor, fromDescriptor) && ignoreNonConfigurable) {\n\t\treturn;\n\t}\n\n\tObject.defineProperty(to, property, fromDescriptor);\n};\n\n// `Object.defineProperty()` throws if the property exists, is not configurable and either:\n// - one its descriptors is changed\n// - it is non-writable and its value is changed\nconst canCopyProperty = function (toDescriptor, fromDescriptor) {\n\treturn toDescriptor === undefined || toDescriptor.configurable || (\n\t\ttoDescriptor.writable === fromDescriptor.writable\n\t\t&& toDescriptor.enumerable === fromDescriptor.enumerable\n\t\t&& toDescriptor.configurable === fromDescriptor.configurable\n\t\t&& (toDescriptor.writable || toDescriptor.value === fromDescriptor.value)\n\t);\n};\n\nconst changePrototype = (to, from) => {\n\tconst fromPrototype = Object.getPrototypeOf(from);\n\tif (fromPrototype === Object.getPrototypeOf(to)) {\n\t\treturn;\n\t}\n\n\tObject.setPrototypeOf(to, fromPrototype);\n};\n\nconst wrappedToString = (withName, fromBody) => `/* Wrapped ${withName}*/\\n${fromBody}`;\n\nconst toStringDescriptor = Object.getOwnPropertyDescriptor(Function.prototype, 'toString');\nconst toStringName = Object.getOwnPropertyDescriptor(Function.prototype.toString, 'name');\n\n// We call `from.toString()` early (not lazily) to ensure `from` can be garbage collected.\n// We use `bind()` instead of a closure for the same reason.\n// Calling `from.toString()` early also allows caching it in case `to.toString()` is called several times.\nconst changeToString = (to, from, name) => {\n\tconst withName = name === '' ? '' : `with ${name.trim()}() `;\n\tconst newToString = wrappedToString.bind(null, withName, from.toString());\n\t// Ensure `to.toString.toString` is non-enumerable and has the same `same`\n\tObject.defineProperty(newToString, 'name', toStringName);\n\tconst {writable, enumerable, configurable} = toStringDescriptor; // We destructue to avoid a potential `get` descriptor.\n\tObject.defineProperty(to, 'toString', {value: newToString, writable, enumerable, configurable});\n};\n\nexport default function mimicFunction(to, from, {ignoreNonConfigurable = false} = {}) {\n\tconst {name} = to;\n\n\tfor (const property of Reflect.ownKeys(from)) {\n\t\tcopyProperty(to, from, property, ignoreNonConfigurable);\n\t}\n\n\tchangePrototype(to, from);\n\tchangeToString(to, from, name);\n\n\treturn to;\n}\n","import mimicFunction from 'mimic-function';\n\nconst debounceFunction = (inputFunction, options = {}) => {\n\tif (typeof inputFunction !== 'function') {\n\t\tthrow new TypeError(`Expected the first argument to be a function, got \\`${typeof inputFunction}\\``);\n\t}\n\n\tconst {\n\t\twait = 0,\n\t\tmaxWait = Number.POSITIVE_INFINITY,\n\t\tbefore = false,\n\t\tafter = true,\n\t} = options;\n\n\tif (wait < 0 || maxWait < 0) {\n\t\tthrow new RangeError('`wait` and `maxWait` must not be negative.');\n\t}\n\n\tif (!before && !after) {\n\t\tthrow new Error('Both `before` and `after` are false, function wouldn\\'t be called.');\n\t}\n\n\tlet timeout;\n\tlet maxTimeout;\n\tlet result;\n\n\tconst debouncedFunction = function (...arguments_) {\n\t\tconst context = this; // eslint-disable-line unicorn/no-this-assignment\n\n\t\tconst later = () => {\n\t\t\ttimeout = undefined;\n\n\t\t\tif (maxTimeout) {\n\t\t\t\tclearTimeout(maxTimeout);\n\t\t\t\tmaxTimeout = undefined;\n\t\t\t}\n\n\t\t\tif (after) {\n\t\t\t\tresult = inputFunction.apply(context, arguments_);\n\t\t\t}\n\t\t};\n\n\t\tconst maxLater = () => {\n\t\t\tmaxTimeout = undefined;\n\n\t\t\tif (timeout) {\n\t\t\t\tclearTimeout(timeout);\n\t\t\t\ttimeout = undefined;\n\t\t\t}\n\n\t\t\tif (after) {\n\t\t\t\tresult = inputFunction.apply(context, arguments_);\n\t\t\t}\n\t\t};\n\n\t\tconst shouldCallNow = before && !timeout;\n\t\tclearTimeout(timeout);\n\t\ttimeout = setTimeout(later, wait);\n\n\t\tif (maxWait > 0 && maxWait !== Number.POSITIVE_INFINITY && !maxTimeout) {\n\t\t\tmaxTimeout = setTimeout(maxLater, maxWait);\n\t\t}\n\n\t\tif (shouldCallNow) {\n\t\t\tresult = inputFunction.apply(context, arguments_);\n\t\t}\n\n\t\treturn result;\n\t};\n\n\tmimicFunction(debouncedFunction, inputFunction);\n\n\tdebouncedFunction.cancel = () => {\n\t\tif (timeout) {\n\t\t\tclearTimeout(timeout);\n\t\t\ttimeout = undefined;\n\t\t}\n\n\t\tif (maxTimeout) {\n\t\t\tclearTimeout(maxTimeout);\n\t\t\tmaxTimeout = undefined;\n\t\t}\n\t};\n\n\treturn debouncedFunction;\n};\n\nexport default debounceFunction;\n","'use strict'\n\n// Note: this is the semver.org version of the spec that it implements\n// Not necessarily the package version of this code.\nconst SEMVER_SPEC_VERSION = '2.0.0'\n\nconst MAX_LENGTH = 256\nconst MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER ||\n/* istanbul ignore next */ 9007199254740991\n\n// Max safe segment length for coercion.\nconst MAX_SAFE_COMPONENT_LENGTH = 16\n\n// Max safe length for a build identifier. The max length minus 6 characters for\n// the shortest version with a build 0.0.0+BUILD.\nconst MAX_SAFE_BUILD_LENGTH = MAX_LENGTH - 6\n\nconst RELEASE_TYPES = [\n  'major',\n  'premajor',\n  'minor',\n  'preminor',\n  'patch',\n  'prepatch',\n  'prerelease',\n]\n\nmodule.exports = {\n  MAX_LENGTH,\n  MAX_SAFE_COMPONENT_LENGTH,\n  MAX_SAFE_BUILD_LENGTH,\n  MAX_SAFE_INTEGER,\n  RELEASE_TYPES,\n  SEMVER_SPEC_VERSION,\n  FLAG_INCLUDE_PRERELEASE: 0b001,\n  FLAG_LOOSE: 0b010,\n}\n","'use strict'\n\nconst debug = (\n  typeof process === 'object' &&\n  process.env &&\n  process.env.NODE_DEBUG &&\n  /\\bsemver\\b/i.test(process.env.NODE_DEBUG)\n) ? (...args) => console.error('SEMVER', ...args)\n  : () => {}\n\nmodule.exports = debug\n","'use strict'\n\nconst {\n  MAX_SAFE_COMPONENT_LENGTH,\n  MAX_SAFE_BUILD_LENGTH,\n  MAX_LENGTH,\n} = require('./constants')\nconst debug = require('./debug')\nexports = module.exports = {}\n\n// The actual regexps go on exports.re\nconst re = exports.re = []\nconst safeRe = exports.safeRe = []\nconst src = exports.src = []\nconst safeSrc = exports.safeSrc = []\nconst t = exports.t = {}\nlet R = 0\n\nconst LETTERDASHNUMBER = '[a-zA-Z0-9-]'\n\n// Replace some greedy regex tokens to prevent regex dos issues. These regex are\n// used internally via the safeRe object since all inputs in this library get\n// normalized first to trim and collapse all extra whitespace. The original\n// regexes are exported for userland consumption and lower level usage. A\n// future breaking change could export the safer regex only with a note that\n// all input should have extra whitespace removed.\nconst safeRegexReplacements = [\n  ['\\\\s', 1],\n  ['\\\\d', MAX_LENGTH],\n  [LETTERDASHNUMBER, MAX_SAFE_BUILD_LENGTH],\n]\n\nconst makeSafeRegex = (value) => {\n  for (const [token, max] of safeRegexReplacements) {\n    value = value\n      .split(`${token}*`).join(`${token}{0,${max}}`)\n      .split(`${token}+`).join(`${token}{1,${max}}`)\n  }\n  return value\n}\n\nconst createToken = (name, value, isGlobal) => {\n  const safe = makeSafeRegex(value)\n  const index = R++\n  debug(name, index, value)\n  t[name] = index\n  src[index] = value\n  safeSrc[index] = safe\n  re[index] = new RegExp(value, isGlobal ? 'g' : undefined)\n  safeRe[index] = new RegExp(safe, isGlobal ? 'g' : undefined)\n}\n\n// The following Regular Expressions can be used for tokenizing,\n// validating, and parsing SemVer version strings.\n\n// ## Numeric Identifier\n// A single `0`, or a non-zero digit followed by zero or more digits.\n\ncreateToken('NUMERICIDENTIFIER', '0|[1-9]\\\\d*')\ncreateToken('NUMERICIDENTIFIERLOOSE', '\\\\d+')\n\n// ## Non-numeric Identifier\n// Zero or more digits, followed by a letter or hyphen, and then zero or\n// more letters, digits, or hyphens.\n\ncreateToken('NONNUMERICIDENTIFIER', `\\\\d*[a-zA-Z-]${LETTERDASHNUMBER}*`)\n\n// ## Main Version\n// Three dot-separated numeric identifiers.\n\ncreateToken('MAINVERSION', `(${src[t.NUMERICIDENTIFIER]})\\\\.` +\n                   `(${src[t.NUMERICIDENTIFIER]})\\\\.` +\n                   `(${src[t.NUMERICIDENTIFIER]})`)\n\ncreateToken('MAINVERSIONLOOSE', `(${src[t.NUMERICIDENTIFIERLOOSE]})\\\\.` +\n                        `(${src[t.NUMERICIDENTIFIERLOOSE]})\\\\.` +\n                        `(${src[t.NUMERICIDENTIFIERLOOSE]})`)\n\n// ## Pre-release Version Identifier\n// A numeric identifier, or a non-numeric identifier.\n// Non-numberic identifiers include numberic identifiers but can be longer.\n// Therefore non-numberic identifiers must go first.\n\ncreateToken('PRERELEASEIDENTIFIER', `(?:${src[t.NONNUMERICIDENTIFIER]\n}|${src[t.NUMERICIDENTIFIER]})`)\n\ncreateToken('PRERELEASEIDENTIFIERLOOSE', `(?:${src[t.NONNUMERICIDENTIFIER]\n}|${src[t.NUMERICIDENTIFIERLOOSE]})`)\n\n// ## Pre-release Version\n// Hyphen, followed by one or more dot-separated pre-release version\n// identifiers.\n\ncreateToken('PRERELEASE', `(?:-(${src[t.PRERELEASEIDENTIFIER]\n}(?:\\\\.${src[t.PRERELEASEIDENTIFIER]})*))`)\n\ncreateToken('PRERELEASELOOSE', `(?:-?(${src[t.PRERELEASEIDENTIFIERLOOSE]\n}(?:\\\\.${src[t.PRERELEASEIDENTIFIERLOOSE]})*))`)\n\n// ## Build Metadata Identifier\n// Any combination of digits, letters, or hyphens.\n\ncreateToken('BUILDIDENTIFIER', `${LETTERDASHNUMBER}+`)\n\n// ## Build Metadata\n// Plus sign, followed by one or more period-separated build metadata\n// identifiers.\n\ncreateToken('BUILD', `(?:\\\\+(${src[t.BUILDIDENTIFIER]\n}(?:\\\\.${src[t.BUILDIDENTIFIER]})*))`)\n\n// ## Full Version String\n// A main version, followed optionally by a pre-release version and\n// build metadata.\n\n// Note that the only major, minor, patch, and pre-release sections of\n// the version string are capturing groups.  The build metadata is not a\n// capturing group, because it should not ever be used in version\n// comparison.\n\ncreateToken('FULLPLAIN', `v?${src[t.MAINVERSION]\n}${src[t.PRERELEASE]}?${\n  src[t.BUILD]}?`)\n\ncreateToken('FULL', `^${src[t.FULLPLAIN]}$`)\n\n// like full, but allows v1.2.3 and =1.2.3, which people do sometimes.\n// also, 1.0.0alpha1 (prerelease without the hyphen) which is pretty\n// common in the npm registry.\ncreateToken('LOOSEPLAIN', `[v=\\\\s]*${src[t.MAINVERSIONLOOSE]\n}${src[t.PRERELEASELOOSE]}?${\n  src[t.BUILD]}?`)\n\ncreateToken('LOOSE', `^${src[t.LOOSEPLAIN]}$`)\n\ncreateToken('GTLT', '((?:<|>)?=?)')\n\n// Something like \"2.*\" or \"1.2.x\".\n// Note that \"x.x\" is a valid xRange identifer, meaning \"any version\"\n// Only the first item is strictly required.\ncreateToken('XRANGEIDENTIFIERLOOSE', `${src[t.NUMERICIDENTIFIERLOOSE]}|x|X|\\\\*`)\ncreateToken('XRANGEIDENTIFIER', `${src[t.NUMERICIDENTIFIER]}|x|X|\\\\*`)\n\ncreateToken('XRANGEPLAIN', `[v=\\\\s]*(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:\\\\.(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:\\\\.(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:${src[t.PRERELEASE]})?${\n                     src[t.BUILD]}?` +\n                   `)?)?`)\n\ncreateToken('XRANGEPLAINLOOSE', `[v=\\\\s]*(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:\\\\.(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:\\\\.(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:${src[t.PRERELEASELOOSE]})?${\n                          src[t.BUILD]}?` +\n                        `)?)?`)\n\ncreateToken('XRANGE', `^${src[t.GTLT]}\\\\s*${src[t.XRANGEPLAIN]}$`)\ncreateToken('XRANGELOOSE', `^${src[t.GTLT]}\\\\s*${src[t.XRANGEPLAINLOOSE]}$`)\n\n// Coercion.\n// Extract anything that could conceivably be a part of a valid semver\ncreateToken('COERCEPLAIN', `${'(^|[^\\\\d])' +\n              '(\\\\d{1,'}${MAX_SAFE_COMPONENT_LENGTH}})` +\n              `(?:\\\\.(\\\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?` +\n              `(?:\\\\.(\\\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?`)\ncreateToken('COERCE', `${src[t.COERCEPLAIN]}(?:$|[^\\\\d])`)\ncreateToken('COERCEFULL', src[t.COERCEPLAIN] +\n              `(?:${src[t.PRERELEASE]})?` +\n              `(?:${src[t.BUILD]})?` +\n              `(?:$|[^\\\\d])`)\ncreateToken('COERCERTL', src[t.COERCE], true)\ncreateToken('COERCERTLFULL', src[t.COERCEFULL], true)\n\n// Tilde ranges.\n// Meaning is \"reasonably at or greater than\"\ncreateToken('LONETILDE', '(?:~>?)')\n\ncreateToken('TILDETRIM', `(\\\\s*)${src[t.LONETILDE]}\\\\s+`, true)\nexports.tildeTrimReplace = '$1~'\n\ncreateToken('TILDE', `^${src[t.LONETILDE]}${src[t.XRANGEPLAIN]}$`)\ncreateToken('TILDELOOSE', `^${src[t.LONETILDE]}${src[t.XRANGEPLAINLOOSE]}$`)\n\n// Caret ranges.\n// Meaning is \"at least and backwards compatible with\"\ncreateToken('LONECARET', '(?:\\\\^)')\n\ncreateToken('CARETTRIM', `(\\\\s*)${src[t.LONECARET]}\\\\s+`, true)\nexports.caretTrimReplace = '$1^'\n\ncreateToken('CARET', `^${src[t.LONECARET]}${src[t.XRANGEPLAIN]}$`)\ncreateToken('CARETLOOSE', `^${src[t.LONECARET]}${src[t.XRANGEPLAINLOOSE]}$`)\n\n// A simple gt/lt/eq thing, or just \"\" to indicate \"any version\"\ncreateToken('COMPARATORLOOSE', `^${src[t.GTLT]}\\\\s*(${src[t.LOOSEPLAIN]})$|^$`)\ncreateToken('COMPARATOR', `^${src[t.GTLT]}\\\\s*(${src[t.FULLPLAIN]})$|^$`)\n\n// An expression to strip any whitespace between the gtlt and the thing\n// it modifies, so that `> 1.2.3` ==> `>1.2.3`\ncreateToken('COMPARATORTRIM', `(\\\\s*)${src[t.GTLT]\n}\\\\s*(${src[t.LOOSEPLAIN]}|${src[t.XRANGEPLAIN]})`, true)\nexports.comparatorTrimReplace = '$1$2$3'\n\n// Something like `1.2.3 - 1.2.4`\n// Note that these all use the loose form, because they'll be\n// checked against either the strict or loose comparator form\n// later.\ncreateToken('HYPHENRANGE', `^\\\\s*(${src[t.XRANGEPLAIN]})` +\n                   `\\\\s+-\\\\s+` +\n                   `(${src[t.XRANGEPLAIN]})` +\n                   `\\\\s*$`)\n\ncreateToken('HYPHENRANGELOOSE', `^\\\\s*(${src[t.XRANGEPLAINLOOSE]})` +\n                        `\\\\s+-\\\\s+` +\n                        `(${src[t.XRANGEPLAINLOOSE]})` +\n                        `\\\\s*$`)\n\n// Star ranges basically just allow anything at all.\ncreateToken('STAR', '(<|>)?=?\\\\s*\\\\*')\n// >=0.0.0 is like a star\ncreateToken('GTE0', '^\\\\s*>=\\\\s*0\\\\.0\\\\.0\\\\s*$')\ncreateToken('GTE0PRE', '^\\\\s*>=\\\\s*0\\\\.0\\\\.0-0\\\\s*$')\n","'use strict'\n\n// parse out just the options we care about\nconst looseOption = Object.freeze({ loose: true })\nconst emptyOpts = Object.freeze({ })\nconst parseOptions = options => {\n  if (!options) {\n    return emptyOpts\n  }\n\n  if (typeof options !== 'object') {\n    return looseOption\n  }\n\n  return options\n}\nmodule.exports = parseOptions\n","'use strict'\n\nconst numeric = /^[0-9]+$/\nconst compareIdentifiers = (a, b) => {\n  if (typeof a === 'number' && typeof b === 'number') {\n    return a === b ? 0 : a < b ? -1 : 1\n  }\n\n  const anum = numeric.test(a)\n  const bnum = numeric.test(b)\n\n  if (anum && bnum) {\n    a = +a\n    b = +b\n  }\n\n  return a === b ? 0\n    : (anum && !bnum) ? -1\n    : (bnum && !anum) ? 1\n    : a < b ? -1\n    : 1\n}\n\nconst rcompareIdentifiers = (a, b) => compareIdentifiers(b, a)\n\nmodule.exports = {\n  compareIdentifiers,\n  rcompareIdentifiers,\n}\n","'use strict'\n\nconst debug = require('../internal/debug')\nconst { MAX_LENGTH, MAX_SAFE_INTEGER } = require('../internal/constants')\nconst { safeRe: re, t } = require('../internal/re')\n\nconst parseOptions = require('../internal/parse-options')\nconst { compareIdentifiers } = require('../internal/identifiers')\nclass SemVer {\n  constructor (version, options) {\n    options = parseOptions(options)\n\n    if (version instanceof SemVer) {\n      if (version.loose === !!options.loose &&\n        version.includePrerelease === !!options.includePrerelease) {\n        return version\n      } else {\n        version = version.version\n      }\n    } else if (typeof version !== 'string') {\n      throw new TypeError(`Invalid version. Must be a string. Got type \"${typeof version}\".`)\n    }\n\n    if (version.length > MAX_LENGTH) {\n      throw new TypeError(\n        `version is longer than ${MAX_LENGTH} characters`\n      )\n    }\n\n    debug('SemVer', version, options)\n    this.options = options\n    this.loose = !!options.loose\n    // this isn't actually relevant for versions, but keep it so that we\n    // don't run into trouble passing this.options around.\n    this.includePrerelease = !!options.includePrerelease\n\n    const m = version.trim().match(options.loose ? re[t.LOOSE] : re[t.FULL])\n\n    if (!m) {\n      throw new TypeError(`Invalid Version: ${version}`)\n    }\n\n    this.raw = version\n\n    // these are actually numbers\n    this.major = +m[1]\n    this.minor = +m[2]\n    this.patch = +m[3]\n\n    if (this.major > MAX_SAFE_INTEGER || this.major < 0) {\n      throw new TypeError('Invalid major version')\n    }\n\n    if (this.minor > MAX_SAFE_INTEGER || this.minor < 0) {\n      throw new TypeError('Invalid minor version')\n    }\n\n    if (this.patch > MAX_SAFE_INTEGER || this.patch < 0) {\n      throw new TypeError('Invalid patch version')\n    }\n\n    // numberify any prerelease numeric ids\n    if (!m[4]) {\n      this.prerelease = []\n    } else {\n      this.prerelease = m[4].split('.').map((id) => {\n        if (/^[0-9]+$/.test(id)) {\n          const num = +id\n          if (num >= 0 && num < MAX_SAFE_INTEGER) {\n            return num\n          }\n        }\n        return id\n      })\n    }\n\n    this.build = m[5] ? m[5].split('.') : []\n    this.format()\n  }\n\n  format () {\n    this.version = `${this.major}.${this.minor}.${this.patch}`\n    if (this.prerelease.length) {\n      this.version += `-${this.prerelease.join('.')}`\n    }\n    return this.version\n  }\n\n  toString () {\n    return this.version\n  }\n\n  compare (other) {\n    debug('SemVer.compare', this.version, this.options, other)\n    if (!(other instanceof SemVer)) {\n      if (typeof other === 'string' && other === this.version) {\n        return 0\n      }\n      other = new SemVer(other, this.options)\n    }\n\n    if (other.version === this.version) {\n      return 0\n    }\n\n    return this.compareMain(other) || this.comparePre(other)\n  }\n\n  compareMain (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    if (this.major < other.major) {\n      return -1\n    }\n    if (this.major > other.major) {\n      return 1\n    }\n    if (this.minor < other.minor) {\n      return -1\n    }\n    if (this.minor > other.minor) {\n      return 1\n    }\n    if (this.patch < other.patch) {\n      return -1\n    }\n    if (this.patch > other.patch) {\n      return 1\n    }\n    return 0\n  }\n\n  comparePre (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    // NOT having a prerelease is > having one\n    if (this.prerelease.length && !other.prerelease.length) {\n      return -1\n    } else if (!this.prerelease.length && other.prerelease.length) {\n      return 1\n    } else if (!this.prerelease.length && !other.prerelease.length) {\n      return 0\n    }\n\n    let i = 0\n    do {\n      const a = this.prerelease[i]\n      const b = other.prerelease[i]\n      debug('prerelease compare', i, a, b)\n      if (a === undefined && b === undefined) {\n        return 0\n      } else if (b === undefined) {\n        return 1\n      } else if (a === undefined) {\n        return -1\n      } else if (a === b) {\n        continue\n      } else {\n        return compareIdentifiers(a, b)\n      }\n    } while (++i)\n  }\n\n  compareBuild (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    let i = 0\n    do {\n      const a = this.build[i]\n      const b = other.build[i]\n      debug('build compare', i, a, b)\n      if (a === undefined && b === undefined) {\n        return 0\n      } else if (b === undefined) {\n        return 1\n      } else if (a === undefined) {\n        return -1\n      } else if (a === b) {\n        continue\n      } else {\n        return compareIdentifiers(a, b)\n      }\n    } while (++i)\n  }\n\n  // preminor will bump the version up to the next minor release, and immediately\n  // down to pre-release. premajor and prepatch work the same way.\n  inc (release, identifier, identifierBase) {\n    if (release.startsWith('pre')) {\n      if (!identifier && identifierBase === false) {\n        throw new Error('invalid increment argument: identifier is empty')\n      }\n      // Avoid an invalid semver results\n      if (identifier) {\n        const match = `-${identifier}`.match(this.options.loose ? re[t.PRERELEASELOOSE] : re[t.PRERELEASE])\n        if (!match || match[1] !== identifier) {\n          throw new Error(`invalid identifier: ${identifier}`)\n        }\n      }\n    }\n\n    switch (release) {\n      case 'premajor':\n        this.prerelease.length = 0\n        this.patch = 0\n        this.minor = 0\n        this.major++\n        this.inc('pre', identifier, identifierBase)\n        break\n      case 'preminor':\n        this.prerelease.length = 0\n        this.patch = 0\n        this.minor++\n        this.inc('pre', identifier, identifierBase)\n        break\n      case 'prepatch':\n        // If this is already a prerelease, it will bump to the next version\n        // drop any prereleases that might already exist, since they are not\n        // relevant at this point.\n        this.prerelease.length = 0\n        this.inc('patch', identifier, identifierBase)\n        this.inc('pre', identifier, identifierBase)\n        break\n      // If the input is a non-prerelease version, this acts the same as\n      // prepatch.\n      case 'prerelease':\n        if (this.prerelease.length === 0) {\n          this.inc('patch', identifier, identifierBase)\n        }\n        this.inc('pre', identifier, identifierBase)\n        break\n      case 'release':\n        if (this.prerelease.length === 0) {\n          throw new Error(`version ${this.raw} is not a prerelease`)\n        }\n        this.prerelease.length = 0\n        break\n\n      case 'major':\n        // If this is a pre-major version, bump up to the same major version.\n        // Otherwise increment major.\n        // 1.0.0-5 bumps to 1.0.0\n        // 1.1.0 bumps to 2.0.0\n        if (\n          this.minor !== 0 ||\n          this.patch !== 0 ||\n          this.prerelease.length === 0\n        ) {\n          this.major++\n        }\n        this.minor = 0\n        this.patch = 0\n        this.prerelease = []\n        break\n      case 'minor':\n        // If this is a pre-minor version, bump up to the same minor version.\n        // Otherwise increment minor.\n        // 1.2.0-5 bumps to 1.2.0\n        // 1.2.1 bumps to 1.3.0\n        if (this.patch !== 0 || this.prerelease.length === 0) {\n          this.minor++\n        }\n        this.patch = 0\n        this.prerelease = []\n        break\n      case 'patch':\n        // If this is not a pre-release version, it will increment the patch.\n        // If it is a pre-release it will bump up to the same patch version.\n        // 1.2.0-5 patches to 1.2.0\n        // 1.2.0 patches to 1.2.1\n        if (this.prerelease.length === 0) {\n          this.patch++\n        }\n        this.prerelease = []\n        break\n      // This probably shouldn't be used publicly.\n      // 1.0.0 'pre' would become 1.0.0-0 which is the wrong direction.\n      case 'pre': {\n        const base = Number(identifierBase) ? 1 : 0\n\n        if (this.prerelease.length === 0) {\n          this.prerelease = [base]\n        } else {\n          let i = this.prerelease.length\n          while (--i >= 0) {\n            if (typeof this.prerelease[i] === 'number') {\n              this.prerelease[i]++\n              i = -2\n            }\n          }\n          if (i === -1) {\n            // didn't increment anything\n            if (identifier === this.prerelease.join('.') && identifierBase === false) {\n              throw new Error('invalid increment argument: identifier already exists')\n            }\n            this.prerelease.push(base)\n          }\n        }\n        if (identifier) {\n          // 1.2.0-beta.1 bumps to 1.2.0-beta.2,\n          // 1.2.0-beta.fooblz or 1.2.0-beta bumps to 1.2.0-beta.0\n          let prerelease = [identifier, base]\n          if (identifierBase === false) {\n            prerelease = [identifier]\n          }\n          if (compareIdentifiers(this.prerelease[0], identifier) === 0) {\n            if (isNaN(this.prerelease[1])) {\n              this.prerelease = prerelease\n            }\n          } else {\n            this.prerelease = prerelease\n          }\n        }\n        break\n      }\n      default:\n        throw new Error(`invalid increment argument: ${release}`)\n    }\n    this.raw = this.format()\n    if (this.build.length) {\n      this.raw += `+${this.build.join('.')}`\n    }\n    return this\n  }\n}\n\nmodule.exports = SemVer\n","'use strict'\n\nconst SemVer = require('../classes/semver')\nconst parse = (version, options, throwErrors = false) => {\n  if (version instanceof SemVer) {\n    return version\n  }\n  try {\n    return new SemVer(version, options)\n  } catch (er) {\n    if (!throwErrors) {\n      return null\n    }\n    throw er\n  }\n}\n\nmodule.exports = parse\n","'use strict'\n\nconst SemVer = require('../classes/semver')\nconst compare = (a, b, loose) =>\n  new SemVer(a, loose).compare(new SemVer(b, loose))\n\nmodule.exports = compare\n","'use strict'\n\nconst SemVer = require('../classes/semver')\nconst compareBuild = (a, b, loose) => {\n  const versionA = new SemVer(a, loose)\n  const versionB = new SemVer(b, loose)\n  return versionA.compare(versionB) || versionA.compareBuild(versionB)\n}\nmodule.exports = compareBuild\n","'use strict'\n\nconst compare = require('./compare')\nconst gt = (a, b, loose) => compare(a, b, loose) > 0\nmodule.exports = gt\n","'use strict'\n\nconst compare = require('./compare')\nconst lt = (a, b, loose) => compare(a, b, loose) < 0\nmodule.exports = lt\n","'use strict'\n\nconst compare = require('./compare')\nconst eq = (a, b, loose) => compare(a, b, loose) === 0\nmodule.exports = eq\n","'use strict'\n\nconst compare = require('./compare')\nconst neq = (a, b, loose) => compare(a, b, loose) !== 0\nmodule.exports = neq\n","'use strict'\n\nconst compare = require('./compare')\nconst gte = (a, b, loose) => compare(a, b, loose) >= 0\nmodule.exports = gte\n","'use strict'\n\nconst compare = require('./compare')\nconst lte = (a, b, loose) => compare(a, b, loose) <= 0\nmodule.exports = lte\n","'use strict'\n\nconst eq = require('./eq')\nconst neq = require('./neq')\nconst gt = require('./gt')\nconst gte = require('./gte')\nconst lt = require('./lt')\nconst lte = require('./lte')\n\nconst cmp = (a, op, b, loose) => {\n  switch (op) {\n    case '===':\n      if (typeof a === 'object') {\n        a = a.version\n      }\n      if (typeof b === 'object') {\n        b = b.version\n      }\n      return a === b\n\n    case '!==':\n      if (typeof a === 'object') {\n        a = a.version\n      }\n      if (typeof b === 'object') {\n        b = b.version\n      }\n      return a !== b\n\n    case '':\n    case '=':\n    case '==':\n      return eq(a, b, loose)\n\n    case '!=':\n      return neq(a, b, loose)\n\n    case '>':\n      return gt(a, b, loose)\n\n    case '>=':\n      return gte(a, b, loose)\n\n    case '<':\n      return lt(a, b, loose)\n\n    case '<=':\n      return lte(a, b, loose)\n\n    default:\n      throw new TypeError(`Invalid operator: ${op}`)\n  }\n}\nmodule.exports = cmp\n","'use strict'\n\nconst SPACE_CHARACTERS = /\\s+/g\n\n// hoisted class for cyclic dependency\nclass Range {\n  constructor (range, options) {\n    options = parseOptions(options)\n\n    if (range instanceof Range) {\n      if (\n        range.loose === !!options.loose &&\n        range.includePrerelease === !!options.includePrerelease\n      ) {\n        return range\n      } else {\n        return new Range(range.raw, options)\n      }\n    }\n\n    if (range instanceof Comparator) {\n      // just put it in the set and return\n      this.raw = range.value\n      this.set = [[range]]\n      this.formatted = undefined\n      return this\n    }\n\n    this.options = options\n    this.loose = !!options.loose\n    this.includePrerelease = !!options.includePrerelease\n\n    // First reduce all whitespace as much as possible so we do not have to rely\n    // on potentially slow regexes like \\s*. This is then stored and used for\n    // future error messages as well.\n    this.raw = range.trim().replace(SPACE_CHARACTERS, ' ')\n\n    // First, split on ||\n    this.set = this.raw\n      .split('||')\n      // map the range to a 2d array of comparators\n      .map(r => this.parseRange(r.trim()))\n      // throw out any comparator lists that are empty\n      // this generally means that it was not a valid range, which is allowed\n      // in loose mode, but will still throw if the WHOLE range is invalid.\n      .filter(c => c.length)\n\n    if (!this.set.length) {\n      throw new TypeError(`Invalid SemVer Range: ${this.raw}`)\n    }\n\n    // if we have any that are not the null set, throw out null sets.\n    if (this.set.length > 1) {\n      // keep the first one, in case they're all null sets\n      const first = this.set[0]\n      this.set = this.set.filter(c => !isNullSet(c[0]))\n      if (this.set.length === 0) {\n        this.set = [first]\n      } else if (this.set.length > 1) {\n        // if we have any that are *, then the range is just *\n        for (const c of this.set) {\n          if (c.length === 1 && isAny(c[0])) {\n            this.set = [c]\n            break\n          }\n        }\n      }\n    }\n\n    this.formatted = undefined\n  }\n\n  get range () {\n    if (this.formatted === undefined) {\n      this.formatted = ''\n      for (let i = 0; i < this.set.length; i++) {\n        if (i > 0) {\n          this.formatted += '||'\n        }\n        const comps = this.set[i]\n        for (let k = 0; k < comps.length; k++) {\n          if (k > 0) {\n            this.formatted += ' '\n          }\n          this.formatted += comps[k].toString().trim()\n        }\n      }\n    }\n    return this.formatted\n  }\n\n  format () {\n    return this.range\n  }\n\n  toString () {\n    return this.range\n  }\n\n  parseRange (range) {\n    // memoize range parsing for performance.\n    // this is a very hot path, and fully deterministic.\n    const memoOpts =\n      (this.options.includePrerelease && FLAG_INCLUDE_PRERELEASE) |\n      (this.options.loose && FLAG_LOOSE)\n    const memoKey = memoOpts + ':' + range\n    const cached = cache.get(memoKey)\n    if (cached) {\n      return cached\n    }\n\n    const loose = this.options.loose\n    // `1.2.3 - 1.2.4` => `>=1.2.3 <=1.2.4`\n    const hr = loose ? re[t.HYPHENRANGELOOSE] : re[t.HYPHENRANGE]\n    range = range.replace(hr, hyphenReplace(this.options.includePrerelease))\n    debug('hyphen replace', range)\n\n    // `> 1.2.3 < 1.2.5` => `>1.2.3 <1.2.5`\n    range = range.replace(re[t.COMPARATORTRIM], comparatorTrimReplace)\n    debug('comparator trim', range)\n\n    // `~ 1.2.3` => `~1.2.3`\n    range = range.replace(re[t.TILDETRIM], tildeTrimReplace)\n    debug('tilde trim', range)\n\n    // `^ 1.2.3` => `^1.2.3`\n    range = range.replace(re[t.CARETTRIM], caretTrimReplace)\n    debug('caret trim', range)\n\n    // At this point, the range is completely trimmed and\n    // ready to be split into comparators.\n\n    let rangeList = range\n      .split(' ')\n      .map(comp => parseComparator(comp, this.options))\n      .join(' ')\n      .split(/\\s+/)\n      // >=0.0.0 is equivalent to *\n      .map(comp => replaceGTE0(comp, this.options))\n\n    if (loose) {\n      // in loose mode, throw out any that are not valid comparators\n      rangeList = rangeList.filter(comp => {\n        debug('loose invalid filter', comp, this.options)\n        return !!comp.match(re[t.COMPARATORLOOSE])\n      })\n    }\n    debug('range list', rangeList)\n\n    // if any comparators are the null set, then replace with JUST null set\n    // if more than one comparator, remove any * comparators\n    // also, don't include the same comparator more than once\n    const rangeMap = new Map()\n    const comparators = rangeList.map(comp => new Comparator(comp, this.options))\n    for (const comp of comparators) {\n      if (isNullSet(comp)) {\n        return [comp]\n      }\n      rangeMap.set(comp.value, comp)\n    }\n    if (rangeMap.size > 1 && rangeMap.has('')) {\n      rangeMap.delete('')\n    }\n\n    const result = [...rangeMap.values()]\n    cache.set(memoKey, result)\n    return result\n  }\n\n  intersects (range, options) {\n    if (!(range instanceof Range)) {\n      throw new TypeError('a Range is required')\n    }\n\n    return this.set.some((thisComparators) => {\n      return (\n        isSatisfiable(thisComparators, options) &&\n        range.set.some((rangeComparators) => {\n          return (\n            isSatisfiable(rangeComparators, options) &&\n            thisComparators.every((thisComparator) => {\n              return rangeComparators.every((rangeComparator) => {\n                return thisComparator.intersects(rangeComparator, options)\n              })\n            })\n          )\n        })\n      )\n    })\n  }\n\n  // if ANY of the sets match ALL of its comparators, then pass\n  test (version) {\n    if (!version) {\n      return false\n    }\n\n    if (typeof version === 'string') {\n      try {\n        version = new SemVer(version, this.options)\n      } catch (er) {\n        return false\n      }\n    }\n\n    for (let i = 0; i < this.set.length; i++) {\n      if (testSet(this.set[i], version, this.options)) {\n        return true\n      }\n    }\n    return false\n  }\n}\n\nmodule.exports = Range\n\nconst LRU = require('../internal/lrucache')\nconst cache = new LRU()\n\nconst parseOptions = require('../internal/parse-options')\nconst Comparator = require('./comparator')\nconst debug = require('../internal/debug')\nconst SemVer = require('./semver')\nconst {\n  safeRe: re,\n  t,\n  comparatorTrimReplace,\n  tildeTrimReplace,\n  caretTrimReplace,\n} = require('../internal/re')\nconst { FLAG_INCLUDE_PRERELEASE, FLAG_LOOSE } = require('../internal/constants')\n\nconst isNullSet = c => c.value === '<0.0.0-0'\nconst isAny = c => c.value === ''\n\n// take a set of comparators and determine whether there\n// exists a version which can satisfy it\nconst isSatisfiable = (comparators, options) => {\n  let result = true\n  const remainingComparators = comparators.slice()\n  let testComparator = remainingComparators.pop()\n\n  while (result && remainingComparators.length) {\n    result = remainingComparators.every((otherComparator) => {\n      return testComparator.intersects(otherComparator, options)\n    })\n\n    testComparator = remainingComparators.pop()\n  }\n\n  return result\n}\n\n// comprised of xranges, tildes, stars, and gtlt's at this point.\n// already replaced the hyphen ranges\n// turn into a set of JUST comparators.\nconst parseComparator = (comp, options) => {\n  comp = comp.replace(re[t.BUILD], '')\n  debug('comp', comp, options)\n  comp = replaceCarets(comp, options)\n  debug('caret', comp)\n  comp = replaceTildes(comp, options)\n  debug('tildes', comp)\n  comp = replaceXRanges(comp, options)\n  debug('xrange', comp)\n  comp = replaceStars(comp, options)\n  debug('stars', comp)\n  return comp\n}\n\nconst isX = id => !id || id.toLowerCase() === 'x' || id === '*'\n\n// ~, ~> --> * (any, kinda silly)\n// ~2, ~2.x, ~2.x.x, ~>2, ~>2.x ~>2.x.x --> >=2.0.0 <3.0.0-0\n// ~2.0, ~2.0.x, ~>2.0, ~>2.0.x --> >=2.0.0 <2.1.0-0\n// ~1.2, ~1.2.x, ~>1.2, ~>1.2.x --> >=1.2.0 <1.3.0-0\n// ~1.2.3, ~>1.2.3 --> >=1.2.3 <1.3.0-0\n// ~1.2.0, ~>1.2.0 --> >=1.2.0 <1.3.0-0\n// ~0.0.1 --> >=0.0.1 <0.1.0-0\nconst replaceTildes = (comp, options) => {\n  return comp\n    .trim()\n    .split(/\\s+/)\n    .map((c) => replaceTilde(c, options))\n    .join(' ')\n}\n\nconst replaceTilde = (comp, options) => {\n  const r = options.loose ? re[t.TILDELOOSE] : re[t.TILDE]\n  return comp.replace(r, (_, M, m, p, pr) => {\n    debug('tilde', comp, _, M, m, p, pr)\n    let ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = `>=${M}.0.0 <${+M + 1}.0.0-0`\n    } else if (isX(p)) {\n      // ~1.2 == >=1.2.0 <1.3.0-0\n      ret = `>=${M}.${m}.0 <${M}.${+m + 1}.0-0`\n    } else if (pr) {\n      debug('replaceTilde pr', pr)\n      ret = `>=${M}.${m}.${p}-${pr\n      } <${M}.${+m + 1}.0-0`\n    } else {\n      // ~1.2.3 == >=1.2.3 <1.3.0-0\n      ret = `>=${M}.${m}.${p\n      } <${M}.${+m + 1}.0-0`\n    }\n\n    debug('tilde return', ret)\n    return ret\n  })\n}\n\n// ^ --> * (any, kinda silly)\n// ^2, ^2.x, ^2.x.x --> >=2.0.0 <3.0.0-0\n// ^2.0, ^2.0.x --> >=2.0.0 <3.0.0-0\n// ^1.2, ^1.2.x --> >=1.2.0 <2.0.0-0\n// ^1.2.3 --> >=1.2.3 <2.0.0-0\n// ^1.2.0 --> >=1.2.0 <2.0.0-0\n// ^0.0.1 --> >=0.0.1 <0.0.2-0\n// ^0.1.0 --> >=0.1.0 <0.2.0-0\nconst replaceCarets = (comp, options) => {\n  return comp\n    .trim()\n    .split(/\\s+/)\n    .map((c) => replaceCaret(c, options))\n    .join(' ')\n}\n\nconst replaceCaret = (comp, options) => {\n  debug('caret', comp, options)\n  const r = options.loose ? re[t.CARETLOOSE] : re[t.CARET]\n  const z = options.includePrerelease ? '-0' : ''\n  return comp.replace(r, (_, M, m, p, pr) => {\n    debug('caret', comp, _, M, m, p, pr)\n    let ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = `>=${M}.0.0${z} <${+M + 1}.0.0-0`\n    } else if (isX(p)) {\n      if (M === '0') {\n        ret = `>=${M}.${m}.0${z} <${M}.${+m + 1}.0-0`\n      } else {\n        ret = `>=${M}.${m}.0${z} <${+M + 1}.0.0-0`\n      }\n    } else if (pr) {\n      debug('replaceCaret pr', pr)\n      if (M === '0') {\n        if (m === '0') {\n          ret = `>=${M}.${m}.${p}-${pr\n          } <${M}.${m}.${+p + 1}-0`\n        } else {\n          ret = `>=${M}.${m}.${p}-${pr\n          } <${M}.${+m + 1}.0-0`\n        }\n      } else {\n        ret = `>=${M}.${m}.${p}-${pr\n        } <${+M + 1}.0.0-0`\n      }\n    } else {\n      debug('no pr')\n      if (M === '0') {\n        if (m === '0') {\n          ret = `>=${M}.${m}.${p\n          }${z} <${M}.${m}.${+p + 1}-0`\n        } else {\n          ret = `>=${M}.${m}.${p\n          }${z} <${M}.${+m + 1}.0-0`\n        }\n      } else {\n        ret = `>=${M}.${m}.${p\n        } <${+M + 1}.0.0-0`\n      }\n    }\n\n    debug('caret return', ret)\n    return ret\n  })\n}\n\nconst replaceXRanges = (comp, options) => {\n  debug('replaceXRanges', comp, options)\n  return comp\n    .split(/\\s+/)\n    .map((c) => replaceXRange(c, options))\n    .join(' ')\n}\n\nconst replaceXRange = (comp, options) => {\n  comp = comp.trim()\n  const r = options.loose ? re[t.XRANGELOOSE] : re[t.XRANGE]\n  return comp.replace(r, (ret, gtlt, M, m, p, pr) => {\n    debug('xRange', comp, ret, gtlt, M, m, p, pr)\n    const xM = isX(M)\n    const xm = xM || isX(m)\n    const xp = xm || isX(p)\n    const anyX = xp\n\n    if (gtlt === '=' && anyX) {\n      gtlt = ''\n    }\n\n    // if we're including prereleases in the match, then we need\n    // to fix this to -0, the lowest possible prerelease value\n    pr = options.includePrerelease ? '-0' : ''\n\n    if (xM) {\n      if (gtlt === '>' || gtlt === '<') {\n        // nothing is allowed\n        ret = '<0.0.0-0'\n      } else {\n        // nothing is forbidden\n        ret = '*'\n      }\n    } else if (gtlt && anyX) {\n      // we know patch is an x, because we have any x at all.\n      // replace X with 0\n      if (xm) {\n        m = 0\n      }\n      p = 0\n\n      if (gtlt === '>') {\n        // >1 => >=2.0.0\n        // >1.2 => >=1.3.0\n        gtlt = '>='\n        if (xm) {\n          M = +M + 1\n          m = 0\n          p = 0\n        } else {\n          m = +m + 1\n          p = 0\n        }\n      } else if (gtlt === '<=') {\n        // <=0.7.x is actually <0.8.0, since any 0.7.x should\n        // pass.  Similarly, <=7.x is actually <8.0.0, etc.\n        gtlt = '<'\n        if (xm) {\n          M = +M + 1\n        } else {\n          m = +m + 1\n        }\n      }\n\n      if (gtlt === '<') {\n        pr = '-0'\n      }\n\n      ret = `${gtlt + M}.${m}.${p}${pr}`\n    } else if (xm) {\n      ret = `>=${M}.0.0${pr} <${+M + 1}.0.0-0`\n    } else if (xp) {\n      ret = `>=${M}.${m}.0${pr\n      } <${M}.${+m + 1}.0-0`\n    }\n\n    debug('xRange return', ret)\n\n    return ret\n  })\n}\n\n// Because * is AND-ed with everything else in the comparator,\n// and '' means \"any version\", just remove the *s entirely.\nconst replaceStars = (comp, options) => {\n  debug('replaceStars', comp, options)\n  // Looseness is ignored here.  star is always as loose as it gets!\n  return comp\n    .trim()\n    .replace(re[t.STAR], '')\n}\n\nconst replaceGTE0 = (comp, options) => {\n  debug('replaceGTE0', comp, options)\n  return comp\n    .trim()\n    .replace(re[options.includePrerelease ? t.GTE0PRE : t.GTE0], '')\n}\n\n// This function is passed to string.replace(re[t.HYPHENRANGE])\n// M, m, patch, prerelease, build\n// 1.2 - 3.4.5 => >=1.2.0 <=3.4.5\n// 1.2.3 - 3.4 => >=1.2.0 <3.5.0-0 Any 3.4.x will do\n// 1.2 - 3.4 => >=1.2.0 <3.5.0-0\n// TODO build?\nconst hyphenReplace = incPr => ($0,\n  from, fM, fm, fp, fpr, fb,\n  to, tM, tm, tp, tpr) => {\n  if (isX(fM)) {\n    from = ''\n  } else if (isX(fm)) {\n    from = `>=${fM}.0.0${incPr ? '-0' : ''}`\n  } else if (isX(fp)) {\n    from = `>=${fM}.${fm}.0${incPr ? '-0' : ''}`\n  } else if (fpr) {\n    from = `>=${from}`\n  } else {\n    from = `>=${from}${incPr ? '-0' : ''}`\n  }\n\n  if (isX(tM)) {\n    to = ''\n  } else if (isX(tm)) {\n    to = `<${+tM + 1}.0.0-0`\n  } else if (isX(tp)) {\n    to = `<${tM}.${+tm + 1}.0-0`\n  } else if (tpr) {\n    to = `<=${tM}.${tm}.${tp}-${tpr}`\n  } else if (incPr) {\n    to = `<${tM}.${tm}.${+tp + 1}-0`\n  } else {\n    to = `<=${to}`\n  }\n\n  return `${from} ${to}`.trim()\n}\n\nconst testSet = (set, version, options) => {\n  for (let i = 0; i < set.length; i++) {\n    if (!set[i].test(version)) {\n      return false\n    }\n  }\n\n  if (version.prerelease.length && !options.includePrerelease) {\n    // Find the set of versions that are allowed to have prereleases\n    // For example, ^1.2.3-pr.1 desugars to >=1.2.3-pr.1 <2.0.0\n    // That should allow `1.2.3-pr.2` to pass.\n    // However, `1.2.4-alpha.notready` should NOT be allowed,\n    // even though it's within the range set by the comparators.\n    for (let i = 0; i < set.length; i++) {\n      debug(set[i].semver)\n      if (set[i].semver === Comparator.ANY) {\n        continue\n      }\n\n      if (set[i].semver.prerelease.length > 0) {\n        const allowed = set[i].semver\n        if (allowed.major === version.major &&\n            allowed.minor === version.minor &&\n            allowed.patch === version.patch) {\n          return true\n        }\n      }\n    }\n\n    // Version has a -pre, but it's not one of the ones we like.\n    return false\n  }\n\n  return true\n}\n","'use strict'\n\nclass LRUCache {\n  constructor () {\n    this.max = 1000\n    this.map = new Map()\n  }\n\n  get (key) {\n    const value = this.map.get(key)\n    if (value === undefined) {\n      return undefined\n    } else {\n      // Remove the key from the map and add it to the end\n      this.map.delete(key)\n      this.map.set(key, value)\n      return value\n    }\n  }\n\n  delete (key) {\n    return this.map.delete(key)\n  }\n\n  set (key, value) {\n    const deleted = this.delete(key)\n\n    if (!deleted && value !== undefined) {\n      // If cache is full, delete the least recently used item\n      if (this.map.size >= this.max) {\n        const firstKey = this.map.keys().next().value\n        this.delete(firstKey)\n      }\n\n      this.map.set(key, value)\n    }\n\n    return this\n  }\n}\n\nmodule.exports = LRUCache\n","'use strict'\n\nconst ANY = Symbol('SemVer ANY')\n// hoisted class for cyclic dependency\nclass Comparator {\n  static get ANY () {\n    return ANY\n  }\n\n  constructor (comp, options) {\n    options = parseOptions(options)\n\n    if (comp instanceof Comparator) {\n      if (comp.loose === !!options.loose) {\n        return comp\n      } else {\n        comp = comp.value\n      }\n    }\n\n    comp = comp.trim().split(/\\s+/).join(' ')\n    debug('comparator', comp, options)\n    this.options = options\n    this.loose = !!options.loose\n    this.parse(comp)\n\n    if (this.semver === ANY) {\n      this.value = ''\n    } else {\n      this.value = this.operator + this.semver.version\n    }\n\n    debug('comp', this)\n  }\n\n  parse (comp) {\n    const r = this.options.loose ? re[t.COMPARATORLOOSE] : re[t.COMPARATOR]\n    const m = comp.match(r)\n\n    if (!m) {\n      throw new TypeError(`Invalid comparator: ${comp}`)\n    }\n\n    this.operator = m[1] !== undefined ? m[1] : ''\n    if (this.operator === '=') {\n      this.operator = ''\n    }\n\n    // if it literally is just '>' or '' then allow anything.\n    if (!m[2]) {\n      this.semver = ANY\n    } else {\n      this.semver = new SemVer(m[2], this.options.loose)\n    }\n  }\n\n  toString () {\n    return this.value\n  }\n\n  test (version) {\n    debug('Comparator.test', version, this.options.loose)\n\n    if (this.semver === ANY || version === ANY) {\n      return true\n    }\n\n    if (typeof version === 'string') {\n      try {\n        version = new SemVer(version, this.options)\n      } catch (er) {\n        return false\n      }\n    }\n\n    return cmp(version, this.operator, this.semver, this.options)\n  }\n\n  intersects (comp, options) {\n    if (!(comp instanceof Comparator)) {\n      throw new TypeError('a Comparator is required')\n    }\n\n    if (this.operator === '') {\n      if (this.value === '') {\n        return true\n      }\n      return new Range(comp.value, options).test(this.value)\n    } else if (comp.operator === '') {\n      if (comp.value === '') {\n        return true\n      }\n      return new Range(this.value, options).test(comp.semver)\n    }\n\n    options = parseOptions(options)\n\n    // Special cases where nothing can possibly be lower\n    if (options.includePrerelease &&\n      (this.value === '<0.0.0-0' || comp.value === '<0.0.0-0')) {\n      return false\n    }\n    if (!options.includePrerelease &&\n      (this.value.startsWith('<0.0.0') || comp.value.startsWith('<0.0.0'))) {\n      return false\n    }\n\n    // Same direction increasing (> or >=)\n    if (this.operator.startsWith('>') && comp.operator.startsWith('>')) {\n      return true\n    }\n    // Same direction decreasing (< or <=)\n    if (this.operator.startsWith('<') && comp.operator.startsWith('<')) {\n      return true\n    }\n    // same SemVer and both sides are inclusive (<= or >=)\n    if (\n      (this.semver.version === comp.semver.version) &&\n      this.operator.includes('=') && comp.operator.includes('=')) {\n      return true\n    }\n    // opposite directions less than\n    if (cmp(this.semver, '<', comp.semver, options) &&\n      this.operator.startsWith('>') && comp.operator.startsWith('<')) {\n      return true\n    }\n    // opposite directions greater than\n    if (cmp(this.semver, '>', comp.semver, options) &&\n      this.operator.startsWith('<') && comp.operator.startsWith('>')) {\n      return true\n    }\n    return false\n  }\n}\n\nmodule.exports = Comparator\n\nconst parseOptions = require('../internal/parse-options')\nconst { safeRe: re, t } = require('../internal/re')\nconst cmp = require('../functions/cmp')\nconst debug = require('../internal/debug')\nconst SemVer = require('./semver')\nconst Range = require('./range')\n","'use strict'\n\nconst Range = require('../classes/range')\nconst satisfies = (version, range, options) => {\n  try {\n    range = new Range(range, options)\n  } catch (er) {\n    return false\n  }\n  return range.test(version)\n}\nmodule.exports = satisfies\n","'use strict'\n\nconst SemVer = require('../classes/semver')\nconst Comparator = require('../classes/comparator')\nconst { ANY } = Comparator\nconst Range = require('../classes/range')\nconst satisfies = require('../functions/satisfies')\nconst gt = require('../functions/gt')\nconst lt = require('../functions/lt')\nconst lte = require('../functions/lte')\nconst gte = require('../functions/gte')\n\nconst outside = (version, range, hilo, options) => {\n  version = new SemVer(version, options)\n  range = new Range(range, options)\n\n  let gtfn, ltefn, ltfn, comp, ecomp\n  switch (hilo) {\n    case '>':\n      gtfn = gt\n      ltefn = lte\n      ltfn = lt\n      comp = '>'\n      ecomp = '>='\n      break\n    case '<':\n      gtfn = lt\n      ltefn = gte\n      ltfn = gt\n      comp = '<'\n      ecomp = '<='\n      break\n    default:\n      throw new TypeError('Must provide a hilo val of \"<\" or \">\"')\n  }\n\n  // If it satisfies the range it is not outside\n  if (satisfies(version, range, options)) {\n    return false\n  }\n\n  // From now on, variable terms are as if we're in \"gtr\" mode.\n  // but note that everything is flipped for the \"ltr\" function.\n\n  for (let i = 0; i < range.set.length; ++i) {\n    const comparators = range.set[i]\n\n    let high = null\n    let low = null\n\n    comparators.forEach((comparator) => {\n      if (comparator.semver === ANY) {\n        comparator = new Comparator('>=0.0.0')\n      }\n      high = high || comparator\n      low = low || comparator\n      if (gtfn(comparator.semver, high.semver, options)) {\n        high = comparator\n      } else if (ltfn(comparator.semver, low.semver, options)) {\n        low = comparator\n      }\n    })\n\n    // If the edge version comparator has a operator then our version\n    // isn't outside it\n    if (high.operator === comp || high.operator === ecomp) {\n      return false\n    }\n\n    // If the lowest version comparator has an operator and our version\n    // is less than it then it isn't higher than the range\n    if ((!low.operator || low.operator === comp) &&\n        ltefn(version, low.semver)) {\n      return false\n    } else if (low.operator === ecomp && ltfn(version, low.semver)) {\n      return false\n    }\n  }\n  return true\n}\n\nmodule.exports = outside\n","'use strict'\n\n// just pre-load all the stuff that index.js lazily exports\nconst internalRe = require('./internal/re')\nconst constants = require('./internal/constants')\nconst SemVer = require('./classes/semver')\nconst identifiers = require('./internal/identifiers')\nconst parse = require('./functions/parse')\nconst valid = require('./functions/valid')\nconst clean = require('./functions/clean')\nconst inc = require('./functions/inc')\nconst diff = require('./functions/diff')\nconst major = require('./functions/major')\nconst minor = require('./functions/minor')\nconst patch = require('./functions/patch')\nconst prerelease = require('./functions/prerelease')\nconst compare = require('./functions/compare')\nconst rcompare = require('./functions/rcompare')\nconst compareLoose = require('./functions/compare-loose')\nconst compareBuild = require('./functions/compare-build')\nconst sort = require('./functions/sort')\nconst rsort = require('./functions/rsort')\nconst gt = require('./functions/gt')\nconst lt = require('./functions/lt')\nconst eq = require('./functions/eq')\nconst neq = require('./functions/neq')\nconst gte = require('./functions/gte')\nconst lte = require('./functions/lte')\nconst cmp = require('./functions/cmp')\nconst coerce = require('./functions/coerce')\nconst Comparator = require('./classes/comparator')\nconst Range = require('./classes/range')\nconst satisfies = require('./functions/satisfies')\nconst toComparators = require('./ranges/to-comparators')\nconst maxSatisfying = require('./ranges/max-satisfying')\nconst minSatisfying = require('./ranges/min-satisfying')\nconst minVersion = require('./ranges/min-version')\nconst validRange = require('./ranges/valid')\nconst outside = require('./ranges/outside')\nconst gtr = require('./ranges/gtr')\nconst ltr = require('./ranges/ltr')\nconst intersects = require('./ranges/intersects')\nconst simplifyRange = require('./ranges/simplify')\nconst subset = require('./ranges/subset')\nmodule.exports = {\n  parse,\n  valid,\n  clean,\n  inc,\n  diff,\n  major,\n  minor,\n  patch,\n  prerelease,\n  compare,\n  rcompare,\n  compareLoose,\n  compareBuild,\n  sort,\n  rsort,\n  gt,\n  lt,\n  eq,\n  neq,\n  gte,\n  lte,\n  cmp,\n  coerce,\n  Comparator,\n  Range,\n  satisfies,\n  toComparators,\n  maxSatisfying,\n  minSatisfying,\n  minVersion,\n  validRange,\n  outside,\n  gtr,\n  ltr,\n  intersects,\n  simplifyRange,\n  subset,\n  SemVer,\n  re: internalRe.re,\n  src: internalRe.src,\n  tokens: internalRe.t,\n  SEMVER_SPEC_VERSION: constants.SEMVER_SPEC_VERSION,\n  RELEASE_TYPES: constants.RELEASE_TYPES,\n  compareIdentifiers: identifiers.compareIdentifiers,\n  rcompareIdentifiers: identifiers.rcompareIdentifiers,\n}\n","'use strict'\n\nconst parse = require('./parse')\nconst valid = (version, options) => {\n  const v = parse(version, options)\n  return v ? v.version : null\n}\nmodule.exports = valid\n","'use strict'\n\nconst parse = require('./parse')\nconst clean = (version, options) => {\n  const s = parse(version.trim().replace(/^[=v]+/, ''), options)\n  return s ? s.version : null\n}\nmodule.exports = clean\n","'use strict'\n\nconst SemVer = require('../classes/semver')\n\nconst inc = (version, release, options, identifier, identifierBase) => {\n  if (typeof (options) === 'string') {\n    identifierBase = identifier\n    identifier = options\n    options = undefined\n  }\n\n  try {\n    return new SemVer(\n      version instanceof SemVer ? version.version : version,\n      options\n    ).inc(release, identifier, identifierBase).version\n  } catch (er) {\n    return null\n  }\n}\nmodule.exports = inc\n","'use strict'\n\nconst parse = require('./parse.js')\n\nconst diff = (version1, version2) => {\n  const v1 = parse(version1, null, true)\n  const v2 = parse(version2, null, true)\n  const comparison = v1.compare(v2)\n\n  if (comparison === 0) {\n    return null\n  }\n\n  const v1Higher = comparison > 0\n  const highVersion = v1Higher ? v1 : v2\n  const lowVersion = v1Higher ? v2 : v1\n  const highHasPre = !!highVersion.prerelease.length\n  const lowHasPre = !!lowVersion.prerelease.length\n\n  if (lowHasPre && !highHasPre) {\n    // Going from prerelease -> no prerelease requires some special casing\n\n    // If the low version has only a major, then it will always be a major\n    // Some examples:\n    // 1.0.0-1 -> 1.0.0\n    // 1.0.0-1 -> 1.1.1\n    // 1.0.0-1 -> 2.0.0\n    if (!lowVersion.patch && !lowVersion.minor) {\n      return 'major'\n    }\n\n    // If the main part has no difference\n    if (lowVersion.compareMain(highVersion) === 0) {\n      if (lowVersion.minor && !lowVersion.patch) {\n        return 'minor'\n      }\n      return 'patch'\n    }\n  }\n\n  // add the `pre` prefix if we are going to a prerelease version\n  const prefix = highHasPre ? 'pre' : ''\n\n  if (v1.major !== v2.major) {\n    return prefix + 'major'\n  }\n\n  if (v1.minor !== v2.minor) {\n    return prefix + 'minor'\n  }\n\n  if (v1.patch !== v2.patch) {\n    return prefix + 'patch'\n  }\n\n  // high and low are preleases\n  return 'prerelease'\n}\n\nmodule.exports = diff\n","'use strict'\n\nconst SemVer = require('../classes/semver')\nconst major = (a, loose) => new SemVer(a, loose).major\nmodule.exports = major\n","'use strict'\n\nconst SemVer = require('../classes/semver')\nconst minor = (a, loose) => new SemVer(a, loose).minor\nmodule.exports = minor\n","'use strict'\n\nconst SemVer = require('../classes/semver')\nconst patch = (a, loose) => new SemVer(a, loose).patch\nmodule.exports = patch\n","'use strict'\n\nconst parse = require('./parse')\nconst prerelease = (version, options) => {\n  const parsed = parse(version, options)\n  return (parsed && parsed.prerelease.length) ? parsed.prerelease : null\n}\nmodule.exports = prerelease\n","'use strict'\n\nconst compare = require('./compare')\nconst rcompare = (a, b, loose) => compare(b, a, loose)\nmodule.exports = rcompare\n","'use strict'\n\nconst compare = require('./compare')\nconst compareLoose = (a, b) => compare(a, b, true)\nmodule.exports = compareLoose\n","'use strict'\n\nconst compareBuild = require('./compare-build')\nconst sort = (list, loose) => list.sort((a, b) => compareBuild(a, b, loose))\nmodule.exports = sort\n","'use strict'\n\nconst compareBuild = require('./compare-build')\nconst rsort = (list, loose) => list.sort((a, b) => compareBuild(b, a, loose))\nmodule.exports = rsort\n","'use strict'\n\nconst SemVer = require('../classes/semver')\nconst parse = require('./parse')\nconst { safeRe: re, t } = require('../internal/re')\n\nconst coerce = (version, options) => {\n  if (version instanceof SemVer) {\n    return version\n  }\n\n  if (typeof version === 'number') {\n    version = String(version)\n  }\n\n  if (typeof version !== 'string') {\n    return null\n  }\n\n  options = options || {}\n\n  let match = null\n  if (!options.rtl) {\n    match = version.match(options.includePrerelease ? re[t.COERCEFULL] : re[t.COERCE])\n  } else {\n    // Find the right-most coercible string that does not share\n    // a terminus with a more left-ward coercible string.\n    // Eg, '1.2.3.4' wants to coerce '2.3.4', not '3.4' or '4'\n    // With includePrerelease option set, '1.2.3.4-rc' wants to coerce '2.3.4-rc', not '2.3.4'\n    //\n    // Walk through the string checking with a /g regexp\n    // Manually set the index so as to pick up overlapping matches.\n    // Stop when we get a match that ends at the string end, since no\n    // coercible string can be more right-ward without the same terminus.\n    const coerceRtlRegex = options.includePrerelease ? re[t.COERCERTLFULL] : re[t.COERCERTL]\n    let next\n    while ((next = coerceRtlRegex.exec(version)) &&\n        (!match || match.index + match[0].length !== version.length)\n    ) {\n      if (!match ||\n            next.index + next[0].length !== match.index + match[0].length) {\n        match = next\n      }\n      coerceRtlRegex.lastIndex = next.index + next[1].length + next[2].length\n    }\n    // leave it in a clean state\n    coerceRtlRegex.lastIndex = -1\n  }\n\n  if (match === null) {\n    return null\n  }\n\n  const major = match[2]\n  const minor = match[3] || '0'\n  const patch = match[4] || '0'\n  const prerelease = options.includePrerelease && match[5] ? `-${match[5]}` : ''\n  const build = options.includePrerelease && match[6] ? `+${match[6]}` : ''\n\n  return parse(`${major}.${minor}.${patch}${prerelease}${build}`, options)\n}\nmodule.exports = coerce\n","'use strict'\n\nconst Range = require('../classes/range')\n\n// Mostly just for testing and legacy API reasons\nconst toComparators = (range, options) =>\n  new Range(range, options).set\n    .map(comp => comp.map(c => c.value).join(' ').trim().split(' '))\n\nmodule.exports = toComparators\n","'use strict'\n\nconst SemVer = require('../classes/semver')\nconst Range = require('../classes/range')\n\nconst maxSatisfying = (versions, range, options) => {\n  let max = null\n  let maxSV = null\n  let rangeObj = null\n  try {\n    rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach((v) => {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!max || maxSV.compare(v) === -1) {\n        // compare(max, v, true)\n        max = v\n        maxSV = new SemVer(max, options)\n      }\n    }\n  })\n  return max\n}\nmodule.exports = maxSatisfying\n","'use strict'\n\nconst SemVer = require('../classes/semver')\nconst Range = require('../classes/range')\nconst minSatisfying = (versions, range, options) => {\n  let min = null\n  let minSV = null\n  let rangeObj = null\n  try {\n    rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach((v) => {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!min || minSV.compare(v) === 1) {\n        // compare(min, v, true)\n        min = v\n        minSV = new SemVer(min, options)\n      }\n    }\n  })\n  return min\n}\nmodule.exports = minSatisfying\n","'use strict'\n\nconst SemVer = require('../classes/semver')\nconst Range = require('../classes/range')\nconst gt = require('../functions/gt')\n\nconst minVersion = (range, loose) => {\n  range = new Range(range, loose)\n\n  let minver = new SemVer('0.0.0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = new SemVer('0.0.0-0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = null\n  for (let i = 0; i < range.set.length; ++i) {\n    const comparators = range.set[i]\n\n    let setMin = null\n    comparators.forEach((comparator) => {\n      // Clone to avoid manipulating the comparator's semver object.\n      const compver = new SemVer(comparator.semver.version)\n      switch (comparator.operator) {\n        case '>':\n          if (compver.prerelease.length === 0) {\n            compver.patch++\n          } else {\n            compver.prerelease.push(0)\n          }\n          compver.raw = compver.format()\n          /* fallthrough */\n        case '':\n        case '>=':\n          if (!setMin || gt(compver, setMin)) {\n            setMin = compver\n          }\n          break\n        case '<':\n        case '<=':\n          /* Ignore maximum versions */\n          break\n        /* istanbul ignore next */\n        default:\n          throw new Error(`Unexpected operation: ${comparator.operator}`)\n      }\n    })\n    if (setMin && (!minver || gt(minver, setMin))) {\n      minver = setMin\n    }\n  }\n\n  if (minver && range.test(minver)) {\n    return minver\n  }\n\n  return null\n}\nmodule.exports = minVersion\n","'use strict'\n\nconst Range = require('../classes/range')\nconst validRange = (range, options) => {\n  try {\n    // Return '*' instead of '' so that truthiness works.\n    // This will throw if it's invalid anyway\n    return new Range(range, options).range || '*'\n  } catch (er) {\n    return null\n  }\n}\nmodule.exports = validRange\n","'use strict'\n\n// Determine if version is greater than all the versions possible in the range.\nconst outside = require('./outside')\nconst gtr = (version, range, options) => outside(version, range, '>', options)\nmodule.exports = gtr\n","'use strict'\n\nconst outside = require('./outside')\n// Determine if version is less than all the versions possible in the range\nconst ltr = (version, range, options) => outside(version, range, '<', options)\nmodule.exports = ltr\n","'use strict'\n\nconst Range = require('../classes/range')\nconst intersects = (r1, r2, options) => {\n  r1 = new Range(r1, options)\n  r2 = new Range(r2, options)\n  return r1.intersects(r2, options)\n}\nmodule.exports = intersects\n","'use strict'\n\n// given a set of versions and a range, create a \"simplified\" range\n// that includes the same versions that the original range does\n// If the original range is shorter than the simplified one, return that.\nconst satisfies = require('../functions/satisfies.js')\nconst compare = require('../functions/compare.js')\nmodule.exports = (versions, range, options) => {\n  const set = []\n  let first = null\n  let prev = null\n  const v = versions.sort((a, b) => compare(a, b, options))\n  for (const version of v) {\n    const included = satisfies(version, range, options)\n    if (included) {\n      prev = version\n      if (!first) {\n        first = version\n      }\n    } else {\n      if (prev) {\n        set.push([first, prev])\n      }\n      prev = null\n      first = null\n    }\n  }\n  if (first) {\n    set.push([first, null])\n  }\n\n  const ranges = []\n  for (const [min, max] of set) {\n    if (min === max) {\n      ranges.push(min)\n    } else if (!max && min === v[0]) {\n      ranges.push('*')\n    } else if (!max) {\n      ranges.push(`>=${min}`)\n    } else if (min === v[0]) {\n      ranges.push(`<=${max}`)\n    } else {\n      ranges.push(`${min} - ${max}`)\n    }\n  }\n  const simplified = ranges.join(' || ')\n  const original = typeof range.raw === 'string' ? range.raw : String(range)\n  return simplified.length < original.length ? simplified : range\n}\n","'use strict'\n\nconst Range = require('../classes/range.js')\nconst Comparator = require('../classes/comparator.js')\nconst { ANY } = Comparator\nconst satisfies = require('../functions/satisfies.js')\nconst compare = require('../functions/compare.js')\n\n// Complex range `r1 || r2 || ...` is a subset of `R1 || R2 || ...` iff:\n// - Every simple range `r1, r2, ...` is a null set, OR\n// - Every simple range `r1, r2, ...` which is not a null set is a subset of\n//   some `R1, R2, ...`\n//\n// Simple range `c1 c2 ...` is a subset of simple range `C1 C2 ...` iff:\n// - If c is only the ANY comparator\n//   - If C is only the ANY comparator, return true\n//   - Else if in prerelease mode, return false\n//   - else replace c with `[>=0.0.0]`\n// - If C is only the ANY comparator\n//   - if in prerelease mode, return true\n//   - else replace C with `[>=0.0.0]`\n// - Let EQ be the set of = comparators in c\n// - If EQ is more than one, return true (null set)\n// - Let GT be the highest > or >= comparator in c\n// - Let LT be the lowest < or <= comparator in c\n// - If GT and LT, and GT.semver > LT.semver, return true (null set)\n// - If any C is a = range, and GT or LT are set, return false\n// - If EQ\n//   - If GT, and EQ does not satisfy GT, return true (null set)\n//   - If LT, and EQ does not satisfy LT, return true (null set)\n//   - If EQ satisfies every C, return true\n//   - Else return false\n// - If GT\n//   - If GT.semver is lower than any > or >= comp in C, return false\n//   - If GT is >=, and GT.semver does not satisfy every C, return false\n//   - If GT.semver has a prerelease, and not in prerelease mode\n//     - If no C has a prerelease and the GT.semver tuple, return false\n// - If LT\n//   - If LT.semver is greater than any < or <= comp in C, return false\n//   - If LT is <=, and LT.semver does not satisfy every C, return false\n//   - If GT.semver has a prerelease, and not in prerelease mode\n//     - If no C has a prerelease and the LT.semver tuple, return false\n// - Else return true\n\nconst subset = (sub, dom, options = {}) => {\n  if (sub === dom) {\n    return true\n  }\n\n  sub = new Range(sub, options)\n  dom = new Range(dom, options)\n  let sawNonNull = false\n\n  OUTER: for (const simpleSub of sub.set) {\n    for (const simpleDom of dom.set) {\n      const isSub = simpleSubset(simpleSub, simpleDom, options)\n      sawNonNull = sawNonNull || isSub !== null\n      if (isSub) {\n        continue OUTER\n      }\n    }\n    // the null set is a subset of everything, but null simple ranges in\n    // a complex range should be ignored.  so if we saw a non-null range,\n    // then we know this isn't a subset, but if EVERY simple range was null,\n    // then it is a subset.\n    if (sawNonNull) {\n      return false\n    }\n  }\n  return true\n}\n\nconst minimumVersionWithPreRelease = [new Comparator('>=0.0.0-0')]\nconst minimumVersion = [new Comparator('>=0.0.0')]\n\nconst simpleSubset = (sub, dom, options) => {\n  if (sub === dom) {\n    return true\n  }\n\n  if (sub.length === 1 && sub[0].semver === ANY) {\n    if (dom.length === 1 && dom[0].semver === ANY) {\n      return true\n    } else if (options.includePrerelease) {\n      sub = minimumVersionWithPreRelease\n    } else {\n      sub = minimumVersion\n    }\n  }\n\n  if (dom.length === 1 && dom[0].semver === ANY) {\n    if (options.includePrerelease) {\n      return true\n    } else {\n      dom = minimumVersion\n    }\n  }\n\n  const eqSet = new Set()\n  let gt, lt\n  for (const c of sub) {\n    if (c.operator === '>' || c.operator === '>=') {\n      gt = higherGT(gt, c, options)\n    } else if (c.operator === '<' || c.operator === '<=') {\n      lt = lowerLT(lt, c, options)\n    } else {\n      eqSet.add(c.semver)\n    }\n  }\n\n  if (eqSet.size > 1) {\n    return null\n  }\n\n  let gtltComp\n  if (gt && lt) {\n    gtltComp = compare(gt.semver, lt.semver, options)\n    if (gtltComp > 0) {\n      return null\n    } else if (gtltComp === 0 && (gt.operator !== '>=' || lt.operator !== '<=')) {\n      return null\n    }\n  }\n\n  // will iterate one or zero times\n  for (const eq of eqSet) {\n    if (gt && !satisfies(eq, String(gt), options)) {\n      return null\n    }\n\n    if (lt && !satisfies(eq, String(lt), options)) {\n      return null\n    }\n\n    for (const c of dom) {\n      if (!satisfies(eq, String(c), options)) {\n        return false\n      }\n    }\n\n    return true\n  }\n\n  let higher, lower\n  let hasDomLT, hasDomGT\n  // if the subset has a prerelease, we need a comparator in the superset\n  // with the same tuple and a prerelease, or it's not a subset\n  let needDomLTPre = lt &&\n    !options.includePrerelease &&\n    lt.semver.prerelease.length ? lt.semver : false\n  let needDomGTPre = gt &&\n    !options.includePrerelease &&\n    gt.semver.prerelease.length ? gt.semver : false\n  // exception: <1.2.3-0 is the same as <1.2.3\n  if (needDomLTPre && needDomLTPre.prerelease.length === 1 &&\n      lt.operator === '<' && needDomLTPre.prerelease[0] === 0) {\n    needDomLTPre = false\n  }\n\n  for (const c of dom) {\n    hasDomGT = hasDomGT || c.operator === '>' || c.operator === '>='\n    hasDomLT = hasDomLT || c.operator === '<' || c.operator === '<='\n    if (gt) {\n      if (needDomGTPre) {\n        if (c.semver.prerelease && c.semver.prerelease.length &&\n            c.semver.major === needDomGTPre.major &&\n            c.semver.minor === needDomGTPre.minor &&\n            c.semver.patch === needDomGTPre.patch) {\n          needDomGTPre = false\n        }\n      }\n      if (c.operator === '>' || c.operator === '>=') {\n        higher = higherGT(gt, c, options)\n        if (higher === c && higher !== gt) {\n          return false\n        }\n      } else if (gt.operator === '>=' && !satisfies(gt.semver, String(c), options)) {\n        return false\n      }\n    }\n    if (lt) {\n      if (needDomLTPre) {\n        if (c.semver.prerelease && c.semver.prerelease.length &&\n            c.semver.major === needDomLTPre.major &&\n            c.semver.minor === needDomLTPre.minor &&\n            c.semver.patch === needDomLTPre.patch) {\n          needDomLTPre = false\n        }\n      }\n      if (c.operator === '<' || c.operator === '<=') {\n        lower = lowerLT(lt, c, options)\n        if (lower === c && lower !== lt) {\n          return false\n        }\n      } else if (lt.operator === '<=' && !satisfies(lt.semver, String(c), options)) {\n        return false\n      }\n    }\n    if (!c.operator && (lt || gt) && gtltComp !== 0) {\n      return false\n    }\n  }\n\n  // if there was a < or >, and nothing in the dom, then must be false\n  // UNLESS it was limited by another range in the other direction.\n  // Eg, >1.0.0 <1.0.1 is still a subset of <2.0.0\n  if (gt && hasDomLT && !lt && gtltComp !== 0) {\n    return false\n  }\n\n  if (lt && hasDomGT && !gt && gtltComp !== 0) {\n    return false\n  }\n\n  // we needed a prerelease range in a specific tuple, but didn't get one\n  // then this isn't a subset.  eg >=1.2.3-pre is not a subset of >=1.0.0,\n  // because it includes prereleases in the 1.2.3 tuple\n  if (needDomGTPre || needDomLTPre) {\n    return false\n  }\n\n  return true\n}\n\n// >=1.2.3 is lower than >1.2.3\nconst higherGT = (a, b, options) => {\n  if (!a) {\n    return b\n  }\n  const comp = compare(a.semver, b.semver, options)\n  return comp > 0 ? a\n    : comp < 0 ? b\n    : b.operator === '>' && a.operator === '>=' ? b\n    : a\n}\n\n// <=1.2.3 is higher than <1.2.3\nconst lowerLT = (a, b, options) => {\n  if (!a) {\n    return b\n  }\n  const comp = compare(a.semver, b.semver, options)\n  return comp < 0 ? a\n    : comp > 0 ? b\n    : b.operator === '<' && a.operator === '<=' ? b\n    : a\n}\n\nmodule.exports = subset\n","const objectToString = Object.prototype.toString;\nconst uint8ArrayStringified = '[object Uint8Array]';\nconst arrayBufferStringified = '[object ArrayBuffer]';\n\nfunction isType(value, typeConstructor, typeStringified) {\n\tif (!value) {\n\t\treturn false;\n\t}\n\n\tif (value.constructor === typeConstructor) {\n\t\treturn true;\n\t}\n\n\treturn objectToString.call(value) === typeStringified;\n}\n\nexport function isUint8Array(value) {\n\treturn isType(value, Uint8Array, uint8ArrayStringified);\n}\n\nfunction isArrayBuffer(value) {\n\treturn isType(value, ArrayBuffer, arrayBufferStringified);\n}\n\nfunction isUint8ArrayOrArrayBuffer(value) {\n\treturn isUint8Array(value) || isArrayBuffer(value);\n}\n\nexport function assertUint8Array(value) {\n\tif (!isUint8Array(value)) {\n\t\tthrow new TypeError(`Expected \\`Uint8Array\\`, got \\`${typeof value}\\``);\n\t}\n}\n\nexport function assertUint8ArrayOrArrayBuffer(value) {\n\tif (!isUint8ArrayOrArrayBuffer(value)) {\n\t\tthrow new TypeError(`Expected \\`Uint8Array\\` or \\`ArrayBuffer\\`, got \\`${typeof value}\\``);\n\t}\n}\n\nexport function toUint8Array(value) {\n\tif (value instanceof ArrayBuffer) {\n\t\treturn new Uint8Array(value);\n\t}\n\n\tif (ArrayBuffer.isView(value)) {\n\t\treturn new Uint8Array(value.buffer, value.byteOffset, value.byteLength);\n\t}\n\n\tthrow new TypeError(`Unsupported value, got \\`${typeof value}\\`.`);\n}\n\nexport function concatUint8Arrays(arrays, totalLength) {\n\tif (arrays.length === 0) {\n\t\treturn new Uint8Array(0);\n\t}\n\n\ttotalLength ??= arrays.reduce((accumulator, currentValue) => accumulator + currentValue.length, 0);\n\n\tconst returnValue = new Uint8Array(totalLength);\n\n\tlet offset = 0;\n\tfor (const array of arrays) {\n\t\tassertUint8Array(array);\n\t\treturnValue.set(array, offset);\n\t\toffset += array.length;\n\t}\n\n\treturn returnValue;\n}\n\nexport function areUint8ArraysEqual(a, b) {\n\tassertUint8Array(a);\n\tassertUint8Array(b);\n\n\tif (a === b) {\n\t\treturn true;\n\t}\n\n\tif (a.length !== b.length) {\n\t\treturn false;\n\t}\n\n\t// eslint-disable-next-line unicorn/no-for-loop\n\tfor (let index = 0; index < a.length; index++) {\n\t\tif (a[index] !== b[index]) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\treturn true;\n}\n\nexport function compareUint8Arrays(a, b) {\n\tassertUint8Array(a);\n\tassertUint8Array(b);\n\n\tconst length = Math.min(a.length, b.length);\n\n\tfor (let index = 0; index < length; index++) {\n\t\tconst diff = a[index] - b[index];\n\t\tif (diff !== 0) {\n\t\t\treturn Math.sign(diff);\n\t\t}\n\t}\n\n\t// At this point, all the compared elements are equal.\n\t// The shorter array should come first if the arrays are of different lengths.\n\treturn Math.sign(a.length - b.length);\n}\n\nconst cachedDecoders = {\n\tutf8: new globalThis.TextDecoder('utf8'),\n};\n\nexport function uint8ArrayToString(array, encoding = 'utf8') {\n\tassertUint8ArrayOrArrayBuffer(array);\n\tcachedDecoders[encoding] ??= new globalThis.TextDecoder(encoding);\n\treturn cachedDecoders[encoding].decode(array);\n}\n\nfunction assertString(value) {\n\tif (typeof value !== 'string') {\n\t\tthrow new TypeError(`Expected \\`string\\`, got \\`${typeof value}\\``);\n\t}\n}\n\nconst cachedEncoder = new globalThis.TextEncoder();\n\nexport function stringToUint8Array(string) {\n\tassertString(string);\n\treturn cachedEncoder.encode(string);\n}\n\nfunction base64ToBase64Url(base64) {\n\treturn base64.replaceAll('+', '-').replaceAll('/', '_').replace(/=+$/, '');\n}\n\nfunction base64UrlToBase64(base64url) {\n\tconst base64 = base64url.replaceAll('-', '+').replaceAll('_', '/');\n\tconst padding = (4 - (base64.length % 4)) % 4;\n\treturn base64 + '='.repeat(padding);\n}\n\n// Reference: https://phuoc.ng/collection/this-vs-that/concat-vs-push/\n// Important: Keep this value divisible by 3 so intermediate chunks produce no Base64 padding.\nconst MAX_BLOCK_SIZE = 65_535;\n\nexport function uint8ArrayToBase64(array, {urlSafe = false} = {}) {\n\tassertUint8Array(array);\n\n\tlet base64 = '';\n\n\tfor (let index = 0; index < array.length; index += MAX_BLOCK_SIZE) {\n\t\tconst chunk = array.subarray(index, index + MAX_BLOCK_SIZE);\n\t\t// Required as `btoa` and `atob` don't properly support Unicode: https://developer.mozilla.org/en-US/docs/Glossary/Base64#the_unicode_problem\n\t\tbase64 += globalThis.btoa(String.fromCodePoint.apply(undefined, chunk));\n\t}\n\n\treturn urlSafe ? base64ToBase64Url(base64) : base64;\n}\n\nexport function base64ToUint8Array(base64String) {\n\tassertString(base64String);\n\treturn Uint8Array.from(globalThis.atob(base64UrlToBase64(base64String)), x => x.codePointAt(0));\n}\n\nexport function stringToBase64(string, {urlSafe = false} = {}) {\n\tassertString(string);\n\treturn uint8ArrayToBase64(stringToUint8Array(string), {urlSafe});\n}\n\nexport function base64ToString(base64String) {\n\tassertString(base64String);\n\treturn uint8ArrayToString(base64ToUint8Array(base64String));\n}\n\nconst byteToHexLookupTable = Array.from({length: 256}, (_, index) => index.toString(16).padStart(2, '0'));\n\nexport function uint8ArrayToHex(array) {\n\tassertUint8Array(array);\n\n\t// Concatenating a string is faster than using an array.\n\tlet hexString = '';\n\n\t// eslint-disable-next-line unicorn/no-for-loop -- Max performance is critical.\n\tfor (let index = 0; index < array.length; index++) {\n\t\thexString += byteToHexLookupTable[array[index]];\n\t}\n\n\treturn hexString;\n}\n\nconst hexToDecimalLookupTable = {\n\t0: 0,\n\t1: 1,\n\t2: 2,\n\t3: 3,\n\t4: 4,\n\t5: 5,\n\t6: 6,\n\t7: 7,\n\t8: 8,\n\t9: 9,\n\ta: 10,\n\tb: 11,\n\tc: 12,\n\td: 13,\n\te: 14,\n\tf: 15,\n\tA: 10,\n\tB: 11,\n\tC: 12,\n\tD: 13,\n\tE: 14,\n\tF: 15,\n};\n\nexport function hexToUint8Array(hexString) {\n\tassertString(hexString);\n\n\tif (hexString.length % 2 !== 0) {\n\t\tthrow new Error('Invalid Hex string length.');\n\t}\n\n\tconst resultLength = hexString.length / 2;\n\tconst bytes = new Uint8Array(resultLength);\n\n\tfor (let index = 0; index < resultLength; index++) {\n\t\tconst highNibble = hexToDecimalLookupTable[hexString[index * 2]];\n\t\tconst lowNibble = hexToDecimalLookupTable[hexString[(index * 2) + 1]];\n\n\t\tif (highNibble === undefined || lowNibble === undefined) {\n\t\t\tthrow new Error(`Invalid Hex character encountered at position ${index * 2}`);\n\t\t}\n\n\t\tbytes[index] = (highNibble << 4) | lowNibble; // eslint-disable-line no-bitwise\n\t}\n\n\treturn bytes;\n}\n\n/**\n@param {DataView} view\n@returns {number}\n*/\nexport function getUintBE(view) {\n\tconst {byteLength} = view;\n\n\tif (byteLength === 6) {\n\t\treturn (view.getUint16(0) * (2 ** 32)) + view.getUint32(2);\n\t}\n\n\tif (byteLength === 5) {\n\t\treturn (view.getUint8(0) * (2 ** 32)) + view.getUint32(1);\n\t}\n\n\tif (byteLength === 4) {\n\t\treturn view.getUint32(0);\n\t}\n\n\tif (byteLength === 3) {\n\t\treturn (view.getUint8(0) * (2 ** 16)) + view.getUint16(1);\n\t}\n\n\tif (byteLength === 2) {\n\t\treturn view.getUint16(0);\n\t}\n\n\tif (byteLength === 1) {\n\t\treturn view.getUint8(0);\n\t}\n}\n\n/**\n@param {Uint8Array} array\n@param {Uint8Array} value\n@returns {number}\n*/\nexport function indexOf(array, value) {\n\tconst arrayLength = array.length;\n\tconst valueLength = value.length;\n\n\tif (valueLength === 0) {\n\t\treturn -1;\n\t}\n\n\tif (valueLength > arrayLength) {\n\t\treturn -1;\n\t}\n\n\tconst validOffsetLength = arrayLength - valueLength;\n\n\tfor (let index = 0; index <= validOffsetLength; index++) {\n\t\tlet isMatch = true;\n\t\tfor (let index2 = 0; index2 < valueLength; index2++) {\n\t\t\tif (array[index + index2] !== value[index2]) {\n\t\t\t\tisMatch = false;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (isMatch) {\n\t\t\treturn index;\n\t\t}\n\t}\n\n\treturn -1;\n}\n\n/**\n@param {Uint8Array} array\n@param {Uint8Array} value\n@returns {boolean}\n*/\nexport function includes(array, value) {\n\treturn indexOf(array, value) !== -1;\n}\n","/* eslint-disable @typescript-eslint/naming-convention, @typescript-eslint/no-unsafe-return */\nimport { isDeepStrictEqual } from 'node:util';\nimport process from 'node:process';\nimport fs from 'node:fs';\nimport path from 'node:path';\nimport crypto from 'node:crypto';\nimport assert from 'node:assert';\nimport { getProperty, hasProperty, setProperty, deleteProperty, } from 'dot-prop';\nimport envPaths from 'env-paths';\nimport { writeFileSync as atomicWriteFileSync } from 'atomically';\nimport { Ajv2020 as Ajv } from 'ajv/dist/2020.js';\nimport ajvFormatsModule from 'ajv-formats';\nimport debounceFn from 'debounce-fn';\nimport semver from 'semver';\nimport { concatUint8Arrays, stringToUint8Array, uint8ArrayToString, } from 'uint8array-extras';\n// FIXME: https://github.com/ajv-validator/ajv/issues/2047\nconst ajvFormats = ajvFormatsModule.default;\nconst encryptionAlgorithm = 'aes-256-cbc';\nconst createPlainObject = () => Object.create(null);\nconst isExist = (data) => data !== undefined && data !== null;\nconst checkValueType = (key, value) => {\n    const nonJsonTypes = new Set([\n        'undefined',\n        'symbol',\n        'function',\n    ]);\n    const type = typeof value;\n    if (nonJsonTypes.has(type)) {\n        throw new TypeError(`Setting a value of type \\`${type}\\` for key \\`${key}\\` is not allowed as it's not supported by JSON`);\n    }\n};\nconst INTERNAL_KEY = '__internal__';\nconst MIGRATION_KEY = `${INTERNAL_KEY}.migrations.version`;\nexport default class Conf {\n    path;\n    events;\n    #validator;\n    #encryptionKey;\n    #options;\n    #defaultValues = {};\n    constructor(partialOptions = {}) {\n        const options = {\n            configName: 'config',\n            fileExtension: 'json',\n            projectSuffix: 'nodejs',\n            clearInvalidConfig: false,\n            accessPropertiesByDotNotation: true,\n            configFileMode: 0o666,\n            ...partialOptions,\n        };\n        if (!options.cwd) {\n            if (!options.projectName) {\n                throw new Error('Please specify the `projectName` option.');\n            }\n            options.cwd = envPaths(options.projectName, { suffix: options.projectSuffix }).config;\n        }\n        this.#options = options;\n        if (options.schema ?? options.ajvOptions ?? options.rootSchema) {\n            if (options.schema && typeof options.schema !== 'object') {\n                throw new TypeError('The `schema` option must be an object.');\n            }\n            const ajv = new Ajv({\n                allErrors: true,\n                useDefaults: true,\n                ...options.ajvOptions,\n            });\n            ajvFormats(ajv);\n            const schema = {\n                ...options.rootSchema,\n                type: 'object',\n                properties: options.schema,\n            };\n            this.#validator = ajv.compile(schema);\n            for (const [key, value] of Object.entries(options.schema ?? {})) { // TODO: Remove the `as any`.\n                if (value?.default) {\n                    this.#defaultValues[key] = value.default; // eslint-disable-line @typescript-eslint/no-unsafe-assignment\n                }\n            }\n        }\n        if (options.defaults) {\n            this.#defaultValues = {\n                ...this.#defaultValues,\n                ...options.defaults,\n            };\n        }\n        if (options.serialize) {\n            this._serialize = options.serialize;\n        }\n        if (options.deserialize) {\n            this._deserialize = options.deserialize;\n        }\n        this.events = new EventTarget();\n        this.#encryptionKey = options.encryptionKey;\n        const fileExtension = options.fileExtension ? `.${options.fileExtension}` : '';\n        this.path = path.resolve(options.cwd, `${options.configName ?? 'config'}${fileExtension}`);\n        const fileStore = this.store;\n        const store = Object.assign(createPlainObject(), options.defaults, fileStore);\n        if (options.migrations) {\n            if (!options.projectVersion) {\n                throw new Error('Please specify the `projectVersion` option.');\n            }\n            this._migrate(options.migrations, options.projectVersion, options.beforeEachMigration);\n        }\n        // We defer validation until after migrations are applied so that the store can be updated to the current schema.\n        this._validate(store);\n        try {\n            assert.deepEqual(fileStore, store);\n        }\n        catch {\n            this.store = store;\n        }\n        if (options.watch) {\n            this._watch();\n        }\n    }\n    get(key, defaultValue) {\n        if (this.#options.accessPropertiesByDotNotation) {\n            return this._get(key, defaultValue);\n        }\n        const { store } = this;\n        return key in store ? store[key] : defaultValue;\n    }\n    set(key, value) {\n        if (typeof key !== 'string' && typeof key !== 'object') {\n            throw new TypeError(`Expected \\`key\\` to be of type \\`string\\` or \\`object\\`, got ${typeof key}`);\n        }\n        if (typeof key !== 'object' && value === undefined) {\n            throw new TypeError('Use `delete()` to clear values');\n        }\n        if (this._containsReservedKey(key)) {\n            throw new TypeError(`Please don't use the ${INTERNAL_KEY} key, as it's used to manage this module internal operations.`);\n        }\n        const { store } = this;\n        const set = (key, value) => {\n            checkValueType(key, value);\n            if (this.#options.accessPropertiesByDotNotation) {\n                setProperty(store, key, value);\n            }\n            else {\n                store[key] = value;\n            }\n        };\n        if (typeof key === 'object') {\n            const object = key;\n            for (const [key, value] of Object.entries(object)) {\n                set(key, value);\n            }\n        }\n        else {\n            set(key, value);\n        }\n        this.store = store;\n    }\n    has(key) {\n        if (this.#options.accessPropertiesByDotNotation) {\n            return hasProperty(this.store, key);\n        }\n        return key in this.store;\n    }\n    /**\n    Reset items to their default values, as defined by the `defaults` or `schema` option.\n\n    @see `clear()` to reset all items.\n\n    @param keys - The keys of the items to reset.\n    */\n    reset(...keys) {\n        for (const key of keys) {\n            if (isExist(this.#defaultValues[key])) {\n                this.set(key, this.#defaultValues[key]);\n            }\n        }\n    }\n    delete(key) {\n        const { store } = this;\n        if (this.#options.accessPropertiesByDotNotation) {\n            deleteProperty(store, key);\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-dynamic-delete\n            delete store[key];\n        }\n        this.store = store;\n    }\n    /**\n    Delete all items.\n\n    This resets known items to their default values, if defined by the `defaults` or `schema` option.\n    */\n    clear() {\n        this.store = createPlainObject();\n        for (const key of Object.keys(this.#defaultValues)) {\n            this.reset(key);\n        }\n    }\n    onDidChange(key, callback) {\n        if (typeof key !== 'string') {\n            throw new TypeError(`Expected \\`key\\` to be of type \\`string\\`, got ${typeof key}`);\n        }\n        if (typeof callback !== 'function') {\n            throw new TypeError(`Expected \\`callback\\` to be of type \\`function\\`, got ${typeof callback}`);\n        }\n        return this._handleChange(() => this.get(key), callback);\n    }\n    /**\n    Watches the whole config object, calling `callback` on any changes.\n\n    @param callback - A callback function that is called on any changes. When a `key` is first set `oldValue` will be `undefined`, and when a key is deleted `newValue` will be `undefined`.\n    @returns A function, that when called, will unsubscribe.\n    */\n    onDidAnyChange(callback) {\n        if (typeof callback !== 'function') {\n            throw new TypeError(`Expected \\`callback\\` to be of type \\`function\\`, got ${typeof callback}`);\n        }\n        return this._handleChange(() => this.store, callback);\n    }\n    get size() {\n        return Object.keys(this.store).length;\n    }\n    /**\n    Get all the config as an object or replace the current config with an object.\n\n    @example\n    ```\n    console.log(config.store);\n    //=> {name: 'John', age: 30}\n    ```\n\n    @example\n    ```\n    config.store = {\n        hello: 'world'\n    };\n    ```\n    */\n    get store() {\n        try {\n            const data = fs.readFileSync(this.path, this.#encryptionKey ? null : 'utf8');\n            const dataString = this._encryptData(data);\n            const deserializedData = this._deserialize(dataString);\n            this._validate(deserializedData);\n            return Object.assign(createPlainObject(), deserializedData);\n        }\n        catch (error) {\n            if (error?.code === 'ENOENT') {\n                this._ensureDirectory();\n                return createPlainObject();\n            }\n            if (this.#options.clearInvalidConfig && error.name === 'SyntaxError') {\n                return createPlainObject();\n            }\n            throw error;\n        }\n    }\n    set store(value) {\n        this._ensureDirectory();\n        this._validate(value);\n        this._write(value);\n        this.events.dispatchEvent(new Event('change'));\n    }\n    *[Symbol.iterator]() {\n        for (const [key, value] of Object.entries(this.store)) {\n            yield [key, value];\n        }\n    }\n    _encryptData(data) {\n        if (!this.#encryptionKey) {\n            return typeof data === 'string' ? data : uint8ArrayToString(data);\n        }\n        // Check if an initialization vector has been used to encrypt the data.\n        try {\n            const initializationVector = data.slice(0, 16);\n            const password = crypto.pbkdf2Sync(this.#encryptionKey, initializationVector.toString(), 10_000, 32, 'sha512');\n            const decipher = crypto.createDecipheriv(encryptionAlgorithm, password, initializationVector);\n            const slice = data.slice(17);\n            const dataUpdate = typeof slice === 'string' ? stringToUint8Array(slice) : slice;\n            return uint8ArrayToString(concatUint8Arrays([decipher.update(dataUpdate), decipher.final()]));\n        }\n        catch { }\n        return data.toString();\n    }\n    _handleChange(getter, callback) {\n        let currentValue = getter();\n        const onChange = () => {\n            const oldValue = currentValue;\n            const newValue = getter();\n            if (isDeepStrictEqual(newValue, oldValue)) {\n                return;\n            }\n            currentValue = newValue;\n            callback.call(this, newValue, oldValue);\n        };\n        this.events.addEventListener('change', onChange);\n        return () => {\n            this.events.removeEventListener('change', onChange);\n        };\n    }\n    _deserialize = value => JSON.parse(value);\n    _serialize = value => JSON.stringify(value, undefined, '\\t');\n    _validate(data) {\n        if (!this.#validator) {\n            return;\n        }\n        const valid = this.#validator(data);\n        if (valid || !this.#validator.errors) {\n            return;\n        }\n        const errors = this.#validator.errors\n            .map(({ instancePath, message = '' }) => `\\`${instancePath.slice(1)}\\` ${message}`);\n        throw new Error('Config schema violation: ' + errors.join('; '));\n    }\n    _ensureDirectory() {\n        // Ensure the directory exists as it could have been deleted in the meantime.\n        fs.mkdirSync(path.dirname(this.path), { recursive: true });\n    }\n    _write(value) {\n        let data = this._serialize(value);\n        if (this.#encryptionKey) {\n            const initializationVector = crypto.randomBytes(16);\n            const password = crypto.pbkdf2Sync(this.#encryptionKey, initializationVector.toString(), 10_000, 32, 'sha512');\n            const cipher = crypto.createCipheriv(encryptionAlgorithm, password, initializationVector);\n            data = concatUint8Arrays([initializationVector, stringToUint8Array(':'), cipher.update(stringToUint8Array(data)), cipher.final()]);\n        }\n        // Temporary workaround for Conf being packaged in a Ubuntu Snap app.\n        // See https://github.com/sindresorhus/conf/pull/82\n        if (process.env.SNAP) {\n            fs.writeFileSync(this.path, data, { mode: this.#options.configFileMode });\n        }\n        else {\n            try {\n                atomicWriteFileSync(this.path, data, { mode: this.#options.configFileMode });\n            }\n            catch (error) {\n                // Fix for https://github.com/sindresorhus/electron-store/issues/106\n                // Sometimes on Windows, we will get an EXDEV error when atomic writing\n                // (even though to the same directory), so we fall back to non atomic write\n                if (error?.code === 'EXDEV') {\n                    fs.writeFileSync(this.path, data, { mode: this.#options.configFileMode });\n                    return;\n                }\n                throw error;\n            }\n        }\n    }\n    _watch() {\n        this._ensureDirectory();\n        if (!fs.existsSync(this.path)) {\n            this._write(createPlainObject());\n        }\n        if (process.platform === 'win32') {\n            fs.watch(this.path, { persistent: false }, debounceFn(() => {\n                // On Linux and Windows, writing to the config file emits a `rename` event, so we skip checking the event type.\n                this.events.dispatchEvent(new Event('change'));\n            }, { wait: 100 }));\n        }\n        else {\n            fs.watchFile(this.path, { persistent: false }, debounceFn(() => {\n                this.events.dispatchEvent(new Event('change'));\n            }, { wait: 5000 }));\n        }\n    }\n    _migrate(migrations, versionToMigrate, beforeEachMigration) {\n        let previousMigratedVersion = this._get(MIGRATION_KEY, '0.0.0');\n        const newerVersions = Object.keys(migrations)\n            .filter(candidateVersion => this._shouldPerformMigration(candidateVersion, previousMigratedVersion, versionToMigrate));\n        let storeBackup = { ...this.store };\n        for (const version of newerVersions) {\n            try {\n                if (beforeEachMigration) {\n                    beforeEachMigration(this, {\n                        fromVersion: previousMigratedVersion,\n                        toVersion: version,\n                        finalVersion: versionToMigrate,\n                        versions: newerVersions,\n                    });\n                }\n                const migration = migrations[version];\n                migration?.(this);\n                this._set(MIGRATION_KEY, version);\n                previousMigratedVersion = version;\n                storeBackup = { ...this.store };\n            }\n            catch (error) {\n                this.store = storeBackup;\n                throw new Error(`Something went wrong during the migration! Changes applied to the store until this failed migration will be restored. ${error}`);\n            }\n        }\n        if (this._isVersionInRangeFormat(previousMigratedVersion) || !semver.eq(previousMigratedVersion, versionToMigrate)) {\n            this._set(MIGRATION_KEY, versionToMigrate);\n        }\n    }\n    _containsReservedKey(key) {\n        if (typeof key === 'object') {\n            const firstKey = Object.keys(key)[0];\n            if (firstKey === INTERNAL_KEY) {\n                return true;\n            }\n        }\n        if (typeof key !== 'string') {\n            return false;\n        }\n        if (this.#options.accessPropertiesByDotNotation) {\n            if (key.startsWith(`${INTERNAL_KEY}.`)) {\n                return true;\n            }\n            return false;\n        }\n        return false;\n    }\n    _isVersionInRangeFormat(version) {\n        return semver.clean(version) === null;\n    }\n    _shouldPerformMigration(candidateVersion, previousMigratedVersion, versionToMigrate) {\n        if (this._isVersionInRangeFormat(candidateVersion)) {\n            if (previousMigratedVersion !== '0.0.0' && semver.satisfies(previousMigratedVersion, candidateVersion)) {\n                return false;\n            }\n            return semver.satisfies(versionToMigrate, candidateVersion);\n        }\n        if (semver.lte(candidateVersion, previousMigratedVersion)) {\n            return false;\n        }\n        if (semver.gt(candidateVersion, versionToMigrate)) {\n            return false;\n        }\n        return true;\n    }\n    _get(key, defaultValue) {\n        return getProperty(this.store, key, defaultValue);\n    }\n    _set(key, value) {\n        const { store } = this;\n        setProperty(store, key, value);\n        this.store = store;\n    }\n}\n","import process from 'node:process';\nimport path from 'node:path';\nimport electron from 'electron';\nimport Conf from 'conf';\n\nconst {app, ipcMain, shell} = electron;\n\nlet isInitialized = false;\n\n// Set up the `ipcMain` handler for communication between renderer and main process.\nconst initDataListener = () => {\n\tif (!ipcMain || !app) {\n\t\tthrow new Error('Electron Store: You need to call `.initRenderer()` from the main process.');\n\t}\n\n\tconst appData = {\n\t\tdefaultCwd: app.getPath('userData'),\n\t\tappVersion: app.getVersion(),\n\t};\n\n\tif (isInitialized) {\n\t\treturn appData;\n\t}\n\n\tipcMain.on('electron-store-get-data', event => {\n\t\tevent.returnValue = appData;\n\t});\n\n\tisInitialized = true;\n\n\treturn appData;\n};\n\nexport default class ElectronStore extends Conf {\n\tconstructor(options) {\n\t\tlet defaultCwd;\n\t\tlet appVersion;\n\n\t\t// If we are in the renderer process, we communicate with the main process\n\t\t// to get the required data for the module otherwise, we pull from the main process.\n\t\tif (process.type === 'renderer') {\n\t\t\tconst appData = electron.ipcRenderer.sendSync('electron-store-get-data');\n\n\t\t\tif (!appData) {\n\t\t\t\tthrow new Error('Electron Store: You need to call `.initRenderer()` from the main process.');\n\t\t\t}\n\n\t\t\t({defaultCwd, appVersion} = appData);\n\t\t} else if (ipcMain && app) {\n\t\t\t({defaultCwd, appVersion} = initDataListener());\n\t\t}\n\n\t\toptions = {\n\t\t\tname: 'config',\n\t\t\t...options,\n\t\t};\n\n\t\toptions.projectVersion ||= appVersion;\n\n\t\tif (options.cwd) {\n\t\t\toptions.cwd = path.isAbsolute(options.cwd) ? options.cwd : path.join(defaultCwd, options.cwd);\n\t\t} else {\n\t\t\toptions.cwd = defaultCwd;\n\t\t}\n\n\t\toptions.configName = options.name;\n\t\tdelete options.name;\n\n\t\tsuper(options);\n\t}\n\n\tstatic initRenderer() {\n\t\tinitDataListener();\n\t}\n\n\tasync openInEditor() {\n\t\tconst error = await shell.openPath(this.path);\n\n\t\tif (error) {\n\t\t\tthrow new Error(error);\n\t\t}\n\t}\n}\n","import Store, { type Options } from \"electron-store\";\n\nexport class AonsokuStore<\n  // biome-ignore lint/suspicious/noExplicitAny: generic record\n  T extends Record<string, any> = Record<string, unknown>,\n> extends Store<T> {\n  constructor(options: Omit<Options<T>, \"cwd\">) {\n    super({ ...options, cwd: \"store\" });\n  }\n}\n","import { electron } from \"../../../package.json\";\nimport { AonsokuStore } from \"./store\";\n\ninterface State {\n  bgColor: string;\n}\n\nconst colorsStore = new AonsokuStore<State>({\n  name: \"colors\",\n  defaults: {\n    bgColor: electron.window.defaultBgColor,\n  },\n});\n\nfunction get<T extends keyof State>(key: T): State[T] {\n  return colorsStore.get(key);\n}\n\nfunction set<T extends keyof State>(key: T, status: State[T]) {\n  colorsStore.set(key, status);\n}\n\nexport const colorsState = {\n  get,\n  set,\n  value: () => colorsStore.store,\n};\n","import fs, {promises as fsPromises} from 'node:fs';\n\nexport async function pathExists(path) {\n\ttry {\n\t\tawait fsPromises.access(path);\n\t\treturn true;\n\t} catch {\n\t\treturn false;\n\t}\n}\n\nexport function pathExistsSync(path) {\n\ttry {\n\t\tfs.accessSync(path);\n\t\treturn true;\n\t} catch {\n\t\treturn false;\n\t}\n}\n","import path from 'node:path';\nimport {pathExists, pathExistsSync} from 'path-exists';\nimport escapeStringRegexp from 'escape-string-regexp';\n\nexport class MaxTryError extends Error {\n\tconstructor(originalPath, lastTriedPath) {\n\t\tsuper('Max tries reached.');\n\t\tthis.originalPath = originalPath;\n\t\tthis.lastTriedPath = lastTriedPath;\n\t}\n}\n\nconst parenthesesIncrementer = (inputFilename, extension) => {\n\tconst match = inputFilename.match(/^(?<filename>.*)\\((?<index>\\d+)\\)$/);\n\tlet {filename, index} = match ? match.groups : {filename: inputFilename, index: 0};\n\tfilename = filename.trim();\n\treturn [`${filename}${extension}`, `${filename} (${++index})${extension}`];\n};\n\nconst incrementPath = (filePath, incrementer) => {\n\tconst ext = path.extname(filePath);\n\tconst dirname = path.dirname(filePath);\n\tconst [originalFilename, incrementedFilename] = incrementer(path.basename(filePath, ext), ext);\n\treturn [path.join(dirname, originalFilename), path.join(dirname, incrementedFilename)];\n};\n\nexport const separatorIncrementer = separator => {\n\tconst escapedSeparator = escapeStringRegexp(separator);\n\n\treturn (inputFilename, extension) => {\n\t\tconst match = new RegExp(`^(?<filename>.*)${escapedSeparator}(?<index>\\\\d+)$`).exec(inputFilename);\n\t\tlet {filename, index} = match ? match.groups : {filename: inputFilename, index: 0};\n\t\treturn [`${filename}${extension}`, `${filename.trim()}${separator}${++index}${extension}`];\n\t};\n};\n\nexport async function unusedFilename(filePath, {incrementer = parenthesesIncrementer, maxTries = Number.POSITIVE_INFINITY} = {}) {\n\tlet tries = 0;\n\tlet [originalPath] = incrementPath(filePath, incrementer);\n\tlet unusedPath = filePath;\n\n\t/* eslint-disable no-await-in-loop, no-constant-condition */\n\twhile (true) {\n\t\tif (!(await pathExists(unusedPath))) {\n\t\t\treturn unusedPath;\n\t\t}\n\n\t\tif (++tries > maxTries) {\n\t\t\tthrow new MaxTryError(originalPath, unusedPath);\n\t\t}\n\n\t\t[originalPath, unusedPath] = incrementPath(unusedPath, incrementer);\n\t}\n\t/* eslint-enable no-await-in-loop, no-constant-condition */\n}\n\nexport function unusedFilenameSync(filePath, {incrementer = parenthesesIncrementer, maxTries = Number.POSITIVE_INFINITY} = {}) {\n\tlet tries = 0;\n\tlet [originalPath] = incrementPath(filePath, incrementer);\n\tlet unusedPath = filePath;\n\n\t/* eslint-disable no-constant-condition */\n\twhile (true) {\n\t\tif (!pathExistsSync(unusedPath)) {\n\t\t\treturn unusedPath;\n\t\t}\n\n\t\tif (++tries > maxTries) {\n\t\t\tthrow new MaxTryError(originalPath, unusedPath);\n\t\t}\n\n\t\t[originalPath, unusedPath] = incrementPath(unusedPath, incrementer);\n\t}\n\t/* eslint-enable no-constant-condition */\n}\n","const _htmlEscape = string => string\n\t.replace(/&/g, '&amp;')\n\t.replace(/\"/g, '&quot;')\n\t.replace(/'/g, '&#39;')\n\t.replace(/</g, '&lt;')\n\t.replace(/>/g, '&gt;');\n\nconst _htmlUnescape = htmlString => htmlString\n\t.replace(/&gt;/g, '>')\n\t.replace(/&lt;/g, '<')\n\t.replace(/&#0?39;/g, '\\'')\n\t.replace(/&quot;/g, '\"')\n\t.replace(/&amp;/g, '&');\n\nexport function htmlEscape(strings, ...values) {\n\tif (typeof strings === 'string') {\n\t\treturn _htmlEscape(strings);\n\t}\n\n\tlet output = strings[0];\n\tfor (const [index, value] of values.entries()) {\n\t\toutput = output + _htmlEscape(String(value)) + strings[index + 1];\n\t}\n\n\treturn output;\n}\n\nexport function htmlUnescape(strings, ...values) {\n\tif (typeof strings === 'string') {\n\t\treturn _htmlUnescape(strings);\n\t}\n\n\tlet output = strings[0];\n\tfor (const [index, value] of values.entries()) {\n\t\toutput = output + _htmlUnescape(String(value)) + strings[index + 1];\n\t}\n\n\treturn output;\n}\n","import {htmlEscape} from 'escape-goat';\n\nexport class MissingValueError extends Error {\n\tconstructor(key) {\n\t\tsuper(`Missing a value for ${key ? `the placeholder: ${key}` : 'a placeholder'}`, key);\n\t\tthis.name = 'MissingValueError';\n\t\tthis.key = key;\n\t}\n}\n\nexport class MissingFilterError extends Error {\n\tconstructor(filterName) {\n\t\tsuper(`Missing filter: ${filterName}`);\n\t\tthis.name = 'MissingFilterError';\n\t\tthis.filterName = filterName;\n\t}\n}\n\nexport default function pupa(template, data, {ignoreMissing = false, transform = ({value}) => value, filters = {}} = {}) {\n\tif (typeof template !== 'string') {\n\t\tthrow new TypeError(`Expected a \\`string\\` in the first argument, got \\`${typeof template}\\``);\n\t}\n\n\tif (typeof data !== 'object') {\n\t\tthrow new TypeError(`Expected an \\`object\\` or \\`Array\\` in the second argument, got \\`${typeof data}\\``);\n\t}\n\n\t// Handle escape sequences for literal braces\n\tconst escapedLeftBrace = '\\uE000\\uE001\\uE002'; // Private use characters as temporary marker\n\tconst escapedRightBrace = '\\uE003\\uE004\\uE005'; // Private use characters as temporary marker\n\n\ttemplate = template.replace(/\\\\{/g, escapedLeftBrace);\n\ttemplate = template.replace(/\\\\}/g, escapedRightBrace);\n\n\tconst parseKeyPath = key => {\n\t\tconst segments = [];\n\t\tlet segment = '';\n\n\t\tfor (let index = 0; index < key.length; index++) {\n\t\t\tif (key[index] === '\\\\' && key[index + 1] === '.') {\n\t\t\t\tsegment += '.';\n\t\t\t\tindex++; // Skip escaped dot\n\t\t\t} else if (key[index] === '.') {\n\t\t\t\tsegments.push(segment);\n\t\t\t\tsegment = '';\n\t\t\t} else {\n\t\t\t\tsegment += key[index];\n\t\t\t}\n\t\t}\n\n\t\tsegments.push(segment);\n\t\treturn segments;\n\t};\n\n\tconst replace = (placeholder, keyWithFilters) => {\n\t\t// Parse filters from the key (e.g., \"name | capitalize | upper\")\n\t\tconst parts = keyWithFilters.split('|').map(part => part.trim());\n\t\tconst key = parts[0];\n\t\tconst filterChain = parts.slice(1);\n\n\t\t// Navigate object path\n\t\tconst segments = parseKeyPath(key);\n\t\tlet value = data;\n\t\tfor (const property of segments) {\n\t\t\t/// value = value?.[property];\n\n\t\t\tif (value) {\n\t\t\t\tvalue = value[property];\n\t\t\t}\n\t\t}\n\n\t\t// Apply filters\n\t\tfor (const filterName of filterChain) {\n\t\t\tconst filter = filters[filterName];\n\n\t\t\tif (!filter) {\n\t\t\t\tif (ignoreMissing) {\n\t\t\t\t\treturn placeholder;\n\t\t\t\t}\n\n\t\t\t\tthrow new MissingFilterError(filterName);\n\t\t\t}\n\n\t\t\tif (value !== undefined) {\n\t\t\t\tvalue = filter(value);\n\t\t\t}\n\t\t}\n\n\t\tconst transformedValue = transform({value, key});\n\t\tif (transformedValue === undefined) {\n\t\t\tif (ignoreMissing) {\n\t\t\t\treturn placeholder;\n\t\t\t}\n\n\t\t\tthrow new MissingValueError(key);\n\t\t}\n\n\t\treturn String(transformedValue);\n\t};\n\n\t// ReDoS-safe regex to capture keys with optional filters\n\t// Matches: {key} or {key | filter} or {key | filter1 | filter2}\n\tconst keyPattern = '(\\\\d+|[a-z$_][\\\\w\\\\-.$\\\\\\\\]*)';\n\tconst filterPattern = '(?:\\\\|\\\\s*[a-z$_][\\\\w$]*\\\\s*)*';\n\tconst keyWithFiltersPattern = `(${keyPattern}\\\\s*${filterPattern})`;\n\n\tconst doubleBraceRegex = new RegExp(`{{${keyWithFiltersPattern}}}`, 'gi');\n\tconst singleBraceRegex = new RegExp(`{${keyWithFiltersPattern}}`, 'gi');\n\n\ttemplate = template.replace(doubleBraceRegex, (...arguments_) => htmlEscape(replace(...arguments_)));\n\n\ttemplate = template.replace(singleBraceRegex, replace);\n\n\t// Replace temporary markers with literal braces\n\ttemplate = template.replace(new RegExp(escapedLeftBrace, 'g'), '{');\n\ttemplate = template.replace(new RegExp(escapedRightBrace, 'g'), '}');\n\n\treturn template;\n}\n","'use strict';\nvar mimeDb = require('mime-db');\n\nmodule.exports = function () {\n\tvar ret = {};\n\n\tObject.keys(mimeDb).forEach(function (x) {\n\t\tvar val = mimeDb[x];\n\n\t\tif (val.extensions && val.extensions.length > 0) {\n\t\t\tval.extensions.forEach(function (y) {\n\t\t\t\tret[y] = x;\n\t\t\t});\n\t\t}\n\t});\n\n\treturn ret;\n};\n","/*!\n * mime-db\n * Copyright(c) 2014 Jonathan Ong\n * Copyright(c) 2015-2022 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n/**\n * Module exports.\n */\n\nmodule.exports = require('./db.json')\n","'use strict';\nvar isPlainObj = require('is-plain-obj');\n\nmodule.exports = function (obj, opts) {\n\tif (!isPlainObj(obj)) {\n\t\tthrow new TypeError('Expected a plain object');\n\t}\n\n\topts = opts || {};\n\n\t// DEPRECATED\n\tif (typeof opts === 'function') {\n\t\topts = {compare: opts};\n\t}\n\n\tvar deep = opts.deep;\n\tvar seenInput = [];\n\tvar seenOutput = [];\n\n\tvar sortKeys = function (x) {\n\t\tvar seenIndex = seenInput.indexOf(x);\n\n\t\tif (seenIndex !== -1) {\n\t\t\treturn seenOutput[seenIndex];\n\t\t}\n\n\t\tvar ret = {};\n\t\tvar keys = Object.keys(x).sort(opts.compare);\n\n\t\tseenInput.push(x);\n\t\tseenOutput.push(ret);\n\n\t\tfor (var i = 0; i < keys.length; i++) {\n\t\t\tvar key = keys[i];\n\t\t\tvar val = x[key];\n\n\t\t\tret[key] = deep && isPlainObj(val) ? sortKeys(val) : val;\n\t\t}\n\n\t\treturn ret;\n\t};\n\n\treturn sortKeys(obj);\n};\n","'use strict';\nvar toString = Object.prototype.toString;\n\nmodule.exports = function (x) {\n\tvar prototype;\n\treturn toString.call(x) === '[object Object]' && (prototype = Object.getPrototypeOf(x), prototype === null || prototype === Object.getPrototypeOf({}));\n};\n","'use strict';\nconst extList = require('ext-list');\nconst sortKeysLength = require('sort-keys-length');\n\nmodule.exports = str => {\n\tconst obj = sortKeysLength.desc(extList());\n\tconst exts = Object.keys(obj).filter(x => str.endsWith(x));\n\n\tif (exts.length === 0) {\n\t\treturn [];\n\t}\n\n\treturn exts.map(x => ({\n\t\text: x,\n\t\tmime: obj[x]\n\t}));\n};\n\nmodule.exports.mime = str => {\n\tconst obj = sortKeysLength.desc(extList());\n\tconst exts = Object.keys(obj).filter(x => obj[x] === str);\n\n\tif (exts.length === 0) {\n\t\treturn [];\n\t}\n\n\treturn exts.map(x => ({\n\t\text: x,\n\t\tmime: obj[x]\n\t}));\n};\n","'use strict';\n\nvar sortKeys = require('sort-keys');\n\n/**\n * Sort object keys by length\n *\n * @param obj\n * @api public\n */\n\nmodule.exports.desc = function (obj) {\n\treturn sortKeys(obj, function (a, b) {\n\t\treturn b.length - a.length;\n\t});\n}\n\nmodule.exports.asc = function (obj) {\n\treturn sortKeys(obj, function (a, b) {\n\t\treturn a.length - b.length;\n\t});\n}\n","import process from 'node:process';\nimport path from 'node:path';\nimport {\n\tapp,\n\tBrowserWindow,\n\tshell,\n\tdialog,\n} from 'electron';\nimport {unusedFilenameSync} from 'unused-filename';\nimport pupa from 'pupa';\nimport extName from 'ext-name';\n\nexport class CancelError extends Error {}\n\nconst getFilenameFromMime = (name, mime) => {\n\tconst extensions = extName.mime(mime);\n\n\tif (extensions.length !== 1) {\n\t\treturn name;\n\t}\n\n\treturn `${name}.${extensions[0].ext}`;\n};\n\nfunction registerListener(session, options, callback = () => {}) {\n\tconst downloadItems = new Set();\n\tlet receivedBytes = 0;\n\tlet completedBytes = 0;\n\tlet totalBytes = 0;\n\tconst activeDownloadItems = () => downloadItems.size;\n\tconst progressDownloadItems = () => receivedBytes / totalBytes;\n\n\toptions = {\n\t\tshowBadge: true,\n\t\tshowProgressBar: true,\n\t\t...options,\n\t};\n\n\tconst listener = (event, item, webContents) => {\n\t\tdownloadItems.add(item);\n\t\ttotalBytes += item.getTotalBytes();\n\n\t\tconst window_ = BrowserWindow.fromWebContents(webContents);\n\t\tif (!window_) {\n\t\t\tthrow new Error('Failed to get window from web contents.');\n\t\t}\n\n\t\tif (options.directory && !path.isAbsolute(options.directory)) {\n\t\t\tthrow new Error('The `directory` option must be an absolute path');\n\t\t}\n\n\t\tconst directory = options.directory ?? app.getPath('downloads');\n\n\t\tlet filePath;\n\t\tif (options.filename) {\n\t\t\tfilePath = path.join(directory, options.filename);\n\t\t} else {\n\t\t\tconst filename = item.getFilename();\n\t\t\tconst name = path.extname(filename) ? filename : getFilenameFromMime(filename, item.getMimeType());\n\n\t\t\tfilePath = options.overwrite ? path.join(directory, name) : unusedFilenameSync(path.join(directory, name));\n\t\t}\n\n\t\tconst errorMessage = options.errorMessage ?? 'The download of {filename} was interrupted';\n\n\t\tif (options.saveAs) {\n\t\t\titem.setSaveDialogOptions({defaultPath: filePath, ...options.dialogOptions});\n\t\t} else {\n\t\t\titem.setSavePath(filePath);\n\t\t}\n\n\t\titem.on('updated', () => {\n\t\t\treceivedBytes = completedBytes;\n\t\t\tfor (const item of downloadItems) {\n\t\t\t\treceivedBytes += item.getReceivedBytes();\n\t\t\t}\n\n\t\t\tif (options.showBadge && ['darwin', 'linux'].includes(process.platform)) {\n\t\t\t\tapp.badgeCount = activeDownloadItems();\n\t\t\t}\n\n\t\t\tif (!window_.isDestroyed() && options.showProgressBar) {\n\t\t\t\twindow_.setProgressBar(progressDownloadItems());\n\t\t\t}\n\n\t\t\tif (typeof options.onProgress === 'function') {\n\t\t\t\tconst itemTransferredBytes = item.getReceivedBytes();\n\t\t\t\tconst itemTotalBytes = item.getTotalBytes();\n\n\t\t\t\toptions.onProgress({\n\t\t\t\t\tpercent: itemTotalBytes ? itemTransferredBytes / itemTotalBytes : 0,\n\t\t\t\t\ttransferredBytes: itemTransferredBytes,\n\t\t\t\t\ttotalBytes: itemTotalBytes,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (typeof options.onTotalProgress === 'function') {\n\t\t\t\toptions.onTotalProgress({\n\t\t\t\t\tpercent: progressDownloadItems(),\n\t\t\t\t\ttransferredBytes: receivedBytes,\n\t\t\t\t\ttotalBytes,\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\titem.on('done', (event, state) => {\n\t\t\tcompletedBytes += item.getTotalBytes();\n\t\t\tdownloadItems.delete(item);\n\n\t\t\tif (options.showBadge && ['darwin', 'linux'].includes(process.platform)) {\n\t\t\t\tapp.badgeCount = activeDownloadItems();\n\t\t\t}\n\n\t\t\tif (!window_.isDestroyed() && !activeDownloadItems()) {\n\t\t\t\twindow_.setProgressBar(-1);\n\t\t\t\treceivedBytes = 0;\n\t\t\t\tcompletedBytes = 0;\n\t\t\t\ttotalBytes = 0;\n\t\t\t}\n\n\t\t\tif (options.unregisterWhenDone) {\n\t\t\t\tsession.removeListener('will-download', listener);\n\t\t\t}\n\n\t\t\t// eslint-disable-next-line unicorn/prefer-switch\n\t\t\tif (state === 'cancelled') {\n\t\t\t\tif (typeof options.onCancel === 'function') {\n\t\t\t\t\toptions.onCancel(item);\n\t\t\t\t}\n\n\t\t\t\tcallback(new CancelError());\n\t\t\t} else if (state === 'interrupted') {\n\t\t\t\tconst message = pupa(errorMessage, {filename: path.basename(filePath)});\n\t\t\t\tcallback(new Error(message));\n\t\t\t} else if (state === 'completed') {\n\t\t\t\tconst savePath = item.getSavePath();\n\n\t\t\t\tif (process.platform === 'darwin') {\n\t\t\t\t\tapp.dock.downloadFinished(savePath);\n\t\t\t\t}\n\n\t\t\t\tif (options.openFolderWhenDone) {\n\t\t\t\t\tshell.showItemInFolder(savePath);\n\t\t\t\t}\n\n\t\t\t\tif (typeof options.onCompleted === 'function') {\n\t\t\t\t\toptions.onCompleted({\n\t\t\t\t\t\tfileName: item.getFilename(), // Just for backwards compatibility. TODO: Remove in the next major version.\n\t\t\t\t\t\tfilename: item.getFilename(),\n\t\t\t\t\t\tpath: savePath,\n\t\t\t\t\t\tfileSize: item.getReceivedBytes(),\n\t\t\t\t\t\tmimeType: item.getMimeType(),\n\t\t\t\t\t\turl: item.getURL(),\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tcallback(null, item);\n\t\t\t}\n\t\t});\n\n\t\tif (typeof options.onStarted === 'function') {\n\t\t\toptions.onStarted(item);\n\t\t}\n\t};\n\n\tsession.on('will-download', listener);\n}\n\nexport default function electronDl(options = {}) {\n\tapp.on('session-created', session => {\n\t\tregisterListener(session, options, (error, _) => {\n\t\t\tif (error && !(error instanceof CancelError)) {\n\t\t\t\tconst errorTitle = options.errorTitle ?? 'Download Error';\n\t\t\t\tdialog.showErrorBox(errorTitle, error.message);\n\t\t\t}\n\t\t});\n\t});\n}\n\nexport async function download(window_, url, options) {\n\treturn new Promise((resolve, reject) => {\n\t\toptions = {\n\t\t\t...options,\n\t\t\tunregisterWhenDone: true,\n\t\t};\n\n\t\tregisterListener(window_.webContents.session, options, (error, item) => {\n\t\t\tif (error) {\n\t\t\t\treject(error);\n\t\t\t} else {\n\t\t\t\tresolve(item);\n\t\t\t}\n\t\t});\n\n\t\twindow_.webContents.downloadURL(url);\n\t});\n}\n","import { RpcPayload } from \"../main/core/discordRpc\";\nimport { IDownloadPayload } from \"../main/core/downloads\";\nimport { ISettingPayload } from \"../main/core/settings\";\nimport type {\n  LanControlConfig,\n  LanControlServerInfo,\n  LanControlMessage,\n  PlayerStateData,\n  CurrentSongData,\n  QueueData,\n} from \"./lanControlTypes\";\n\nexport enum IpcChannels {\n  FullscreenStatus = \"fullscreen-status\",\n  ToggleFullscreen = \"toggle-fullscreen\",\n  IsFullScreen = \"is-fullscreen\",\n  IsMaximized = \"is-maximized\",\n  MaximizedStatus = \"maximized-status\",\n  ToggleMaximize = \"toggle-maximize\",\n  ToggleMinimize = \"toggle-minimize\",\n  CloseWindow = \"close-window\",\n  ThemeChanged = \"theme-changed\",\n  UpdateNativeTheme = \"update-native-theme\",\n  HandleDownloads = \"handle-downloads\",\n  DownloadCompleted = \"download-completed\",\n  DownloadFailed = \"download-failed\",\n  UpdatePlayerState = \"update-player-state\",\n  PlayerStateListener = \"player-state-listener\",\n  SetDiscordRpcActivity = \"set-discord-rpc-activity\",\n  ClearDiscordRpcActivity = \"clear-discord-rpc-activity\",\n  SaveAppSettings = \"save-app-settings\",\n  // LAN Control\n  LanControlStart = \"lan-control:start\",\n  LanControlStop = \"lan-control:stop\",\n  LanControlGetInfo = \"lan-control:get-info\",\n  LanControlUpdateConfig = \"lan-control:update-config\",\n  LanControlBroadcastState = \"lan-control:broadcast-state\",\n  LanControlBroadcastSong = \"lan-control:broadcast-song\",\n  LanControlBroadcastQueue = \"lan-control:broadcast-queue\",\n  LanControlMessage = \"lan-control:message\",\n  LanControlRequestState = \"lan-control:request-state\",\n  LanControlVerifyNavidromeAuth = \"lan-control:verify-navidrome-auth\",\n}\n\nexport type OverlayColors = {\n  color: string;\n  symbol: string;\n  bgColor: string;\n};\n\nexport type PlayerStatePayload = {\n  isPlaying: boolean;\n  hasPrevious: boolean;\n  hasNext: boolean;\n  hasSonglist: boolean;\n};\n\nexport type PlayerStateListenerActions =\n  | \"togglePlayPause\"\n  | \"skipBackwards\"\n  | \"skipForward\"\n  | \"toggleShuffle\"\n  | \"toggleRepeat\";\n\nexport interface IAonsokuAPI {\n  enterFullScreen: () => void;\n  exitFullScreen: () => void;\n  isFullScreen: () => Promise<boolean>;\n  fullscreenStatusListener: (func: (status: boolean) => void) => void;\n  removeFullscreenStatusListener: () => void;\n  isMaximized: () => Promise<boolean>;\n  maximizedStatusListener: (func: (status: boolean) => void) => void;\n  removeMaximizedStatusListener: () => void;\n  toggleMaximize: (isMaximized: boolean) => void;\n  toggleMinimize: () => void;\n  closeWindow: () => void;\n  setTitleBarOverlayColors: (colors: OverlayColors) => void;\n  setNativeTheme: (isDark: boolean) => void;\n  downloadFile: (payload: IDownloadPayload) => void;\n  downloadCompletedListener: (func: (fileId: string) => void) => void;\n  downloadFailedListener: (func: (fileId: string) => void) => void;\n  updatePlayerState: (payload: PlayerStatePayload) => void;\n  playerStateListener: (\n    func: (action: PlayerStateListenerActions) => void,\n  ) => void;\n  setDiscordRpcActivity: (payload: RpcPayload) => void;\n  clearDiscordRpcActivity: () => void;\n  saveAppSettings: (payload: ISettingPayload) => void;\n  // LAN Control\n  lanControl: {\n    start: (config: LanControlConfig) => Promise<LanControlServerInfo>;\n    stop: () => Promise<void>;\n    getInfo: () => Promise<LanControlServerInfo>;\n    updateConfig: (config: LanControlConfig) => Promise<void>;\n    broadcastState: (state: PlayerStateData) => void;\n    broadcastSong: (song: CurrentSongData) => void;\n    broadcastQueue: (queue: QueueData) => void;\n    onMessage: (callback: (message: LanControlMessage) => void) => void;\n    onRequestState: (callback: () => void) => void;\n    removeMessageListener: () => void;\n    removeRequestStateListener: () => void;\n  };\n}\n","import { app, BrowserWindow, ipcMain } from \"electron\";\nimport { download } from \"electron-dl\";\nimport { IpcChannels } from \"../../preload/types\";\n\nexport interface IDownloadPayload {\n  url: string;\n  fileId: string;\n}\n\nexport function setupDownloads(window: BrowserWindow | null) {\n  ipcMain.on(\n    IpcChannels.HandleDownloads,\n    async (_, payload: IDownloadPayload) => {\n      if (!window) return;\n\n      const { url, fileId } = payload;\n\n      try {\n        const downloadsPath = app.getPath(\"downloads\");\n\n        await download(window, url, {\n          directory: downloadsPath,\n          onCompleted: () => {\n            window.webContents.send(IpcChannels.DownloadCompleted, fileId);\n          },\n        });\n      } catch {\n        window.webContents.send(IpcChannels.DownloadFailed, fileId);\n      }\n    },\n  );\n}\n","import { screen } from \"electron\";\n\nexport const NativeIconVariant = {\n  Size16: { size: 16, scaleFactor: 1 },\n  Size32: { size: 32, scaleFactor: 2 },\n  Size48: { size: 48, scaleFactor: 3 },\n  Size256: { size: 256, scaleFactor: 16 },\n} as const;\n\nexport const NativeIconVariants = Object.values(NativeIconVariant);\n\nexport function getDisplaysMaxScaleFactor(): number {\n  const displays = screen.getAllDisplays();\n  const scaleFactors = displays\n    .map((display) => display.scaleFactor)\n    .filter((scaleFactor) => Number.isFinite(scaleFactor) && scaleFactor > 1.0);\n  return Math.max(1.0, ...scaleFactors);\n}\n\nexport function getVariantForScaleFactor(scaleFactor: number) {\n  const match = NativeIconVariants.find((variant) => {\n    return variant.scaleFactor >= scaleFactor;\n  });\n\n  return match ?? NativeIconVariant.Size32;\n}\n","import { IpcChannels, PlayerStateListenerActions } from \"../../preload/types\";\nimport { mainWindow } from \"../window\";\n\nexport function sendPlayerEvents(event: PlayerStateListenerActions) {\n  if (!mainWindow || mainWindow.isDestroyed()) return;\n\n  mainWindow.webContents.send(IpcChannels.PlayerStateListener, event);\n}\n","import { PlayerStatePayload } from \"../../preload/types\";\nimport { AonsokuStore } from \"./store\";\n\nconst playerStore = new AonsokuStore<PlayerStatePayload>({\n  name: \"player\",\n  defaults: {\n    isPlaying: false,\n    hasSonglist: false,\n    hasPrevious: false,\n    hasNext: false,\n  },\n});\n\nfunction get<T extends keyof PlayerStatePayload>(\n  key: T,\n): PlayerStatePayload[T] {\n  return playerStore.get(key);\n}\n\nfunction set<T extends keyof PlayerStatePayload>(\n  key: T,\n  status: PlayerStatePayload[T],\n) {\n  playerStore.set(key, status);\n}\n\nfunction setAll(payload: PlayerStatePayload) {\n  playerStore.set(payload);\n}\n\nexport const playerState = {\n  get,\n  set,\n  setAll,\n  value: () => playerStore.store,\n};\n","import { is } from \"@electron-toolkit/utils\";\nimport { app, nativeImage, nativeTheme } from \"electron\";\nimport { join } from \"path\";\nimport { mainWindow } from \"../window\";\nimport { sendPlayerEvents } from \"./playerEvents\";\nimport { playerState } from \"./playerState\";\n\nexport const resourcesPath = join(\n  is.dev ? app.getAppPath() : process.resourcesPath,\n  \"resources\",\n);\nconst taskbarIconsPath = join(resourcesPath, \"taskbar\");\n\nconst buttons = {\n  previous: \"skip_previous.png\",\n  pause: \"pause.png\",\n  play: \"play.png\",\n  next: \"skip_next.png\",\n};\n\nexport function getTaskbarIcon(icon: keyof typeof buttons) {\n  const themeFolder = nativeTheme.shouldUseDarkColors ? \"dark\" : \"light\";\n\n  const iconName = buttons[icon];\n  const iconPath = join(taskbarIconsPath, themeFolder, iconName);\n\n  return nativeImage.createFromPath(iconPath);\n}\n\nexport function setTaskbarButtons() {\n  if (!mainWindow || mainWindow.isDestroyed()) return;\n  if (!mainWindow.isVisible()) return;\n\n  const { isPlaying, hasPrevious, hasNext, hasSonglist } = playerState.value();\n\n  mainWindow.setThumbarButtons([\n    {\n      icon: getTaskbarIcon(\"previous\"),\n      flags: hasPrevious ? undefined : [\"disabled\"],\n      click() {\n        sendPlayerEvents(\"skipBackwards\");\n      },\n    },\n    {\n      icon: getTaskbarIcon(isPlaying ? \"pause\" : \"play\"),\n      flags: hasSonglist ? undefined : [\"disabled\"],\n      click() {\n        sendPlayerEvents(\"togglePlayPause\");\n      },\n    },\n    {\n      icon: getTaskbarIcon(\"next\"),\n      flags: hasNext ? undefined : [\"disabled\"],\n      click() {\n        sendPlayerEvents(\"skipForward\");\n      },\n    },\n  ]);\n}\n","import { NativeImage, nativeImage, nativeTheme } from \"electron\";\nimport { readFileSync } from \"fs\";\nimport { join } from \"path\";\nimport { NativeIconVariants } from \"./nativeIcons\";\nimport { resourcesPath } from \"./taskbar\";\n\nconst mediaIcons = {\n  pause: \"pause\",\n  play: \"play\",\n  previous: \"skip_back\",\n  next: \"skip_forward\",\n  shuffle: \"shuffle\",\n  repeat: \"repeat\",\n  repeatOne: \"repeat_one\",\n};\n\nfunction getMacOsMediaIconPath(\n  icon: keyof typeof mediaIcons,\n  size: number,\n): string {\n  const iconName = mediaIcons[icon];\n  const fileName = `${iconName}_${size}x${size}.png`;\n  const themeFolder = nativeTheme.shouldUseDarkColors ? \"dark\" : \"light\";\n\n  return join(\n    resourcesPath,\n    \"assets\",\n    \"tray\",\n    \"mac\",\n    \"media\",\n    themeFolder,\n    fileName,\n  );\n}\n\nexport function getMacOsMediaIcon(icon: keyof typeof mediaIcons): NativeImage {\n  const image = nativeImage.createEmpty();\n\n  for (const variant of NativeIconVariants) {\n    const iconPath = getMacOsMediaIconPath(icon, variant.size);\n    const buffer = readFileSync(iconPath);\n    image.addRepresentation({\n      buffer,\n      width: variant.size,\n      height: variant.size,\n      scaleFactor: variant.scaleFactor,\n    });\n  }\n\n  image.setTemplateImage(true);\n\n  return image;\n}\n","import { platform } from \"@electron-toolkit/utils\";\nimport { app, Menu, NativeImage, nativeImage, Tray } from \"electron\";\nimport { readFileSync } from \"fs\";\nimport { join } from \"path\";\nimport { productName } from \"../../package.json\";\nimport { getMacOsMediaIcon } from \"./core/macMedia\";\nimport {\n  getDisplaysMaxScaleFactor,\n  getVariantForScaleFactor,\n  NativeIconVariants,\n} from \"./core/nativeIcons\";\nimport { sendPlayerEvents } from \"./core/playerEvents\";\nimport { playerState } from \"./core/playerState\";\nimport { resourcesPath } from \"./core/taskbar\";\nimport { mainWindow } from \"./window\";\n\nconst traySpacer = Array.from({ length: 30 }).join(\" \");\n\nexport let tray: Tray | null = null;\n\nfunction getTrayIconPath(size: number): string {\n  let dirName = \"other\";\n  const fileName = `icon-${size}x${size}.png`;\n\n  if (platform.isMacOS) dirName = \"mac\";\n\n  return join(resourcesPath, \"assets\", \"tray\", dirName, fileName);\n}\n\nfunction getTrayIcon(): NativeImage {\n  let image: NativeImage;\n\n  if (platform.isLinux) {\n    // Linux: Static tray icons\n    // Use a single tray icon for Linux, as it does not support scale factors.\n    // We choose the best icon based on the highest display scale factor.\n    const scaleFactor = getDisplaysMaxScaleFactor();\n    const variant = getVariantForScaleFactor(scaleFactor);\n    const iconPath = getTrayIconPath(variant.size);\n    const buffer = readFileSync(iconPath);\n\n    image = nativeImage.createFromBuffer(buffer, {\n      scaleFactor: 1.0,\n      width: variant.size,\n      height: variant.size,\n    });\n  } else {\n    // Windows/macOS: Responsive tray icons\n    image = nativeImage.createEmpty();\n\n    for (const variant of NativeIconVariants) {\n      const iconPath = getTrayIconPath(variant.size);\n      const buffer = readFileSync(iconPath);\n      image.addRepresentation({\n        buffer,\n        width: variant.size,\n        height: variant.size,\n        scaleFactor: variant.scaleFactor,\n      });\n    }\n\n    // Set image as a Template Image for macOS.\n    if (platform.isMacOS) image.setTemplateImage(true);\n  }\n\n  return image;\n}\n\nexport function createTray() {\n  const trayIcon = getTrayIcon();\n  tray = new Tray(trayIcon);\n\n  if (!platform.isMacOS) {\n    tray.setToolTip(productName);\n  }\n\n  updateTray();\n\n  tray.on(\"click\", () => {\n    tray?.popUpContextMenu();\n  });\n}\n\nexport function updateTray(title?: string) {\n  if (!mainWindow || !tray) return;\n\n  const trayIcon = getTrayIcon();\n\n  const isVisible = mainWindow.isVisible();\n  const trayTooltip = title ?? mainWindow.title;\n\n  const { isPlaying, hasPrevious, hasNext, hasSonglist } = playerState.value();\n\n  const contextMenu = Menu.buildFromTemplate([\n    {\n      label: productName + traySpacer,\n      ...(trayTooltip !== productName ? { sublabel: trayTooltip } : {}),\n      ...(platform.isMacOS ? { icon: trayIcon } : {}),\n      type: \"normal\",\n      enabled: false,\n    },\n    {\n      type: \"separator\",\n    },\n    {\n      label: \"Previous\",\n      type: \"normal\",\n      enabled: hasPrevious,\n      ...(platform.isMacOS\n        ? {\n            icon: getMacOsMediaIcon(\"previous\"),\n            accelerator: \"Cmd+Left\",\n          }\n        : {}),\n      click: () => {\n        sendPlayerEvents(\"skipBackwards\");\n      },\n    },\n    {\n      label: isPlaying ? \"Pause\" : \"Play\",\n      type: \"normal\",\n      enabled: hasSonglist,\n      ...(platform.isMacOS\n        ? {\n            icon: getMacOsMediaIcon(isPlaying ? \"pause\" : \"play\"),\n            accelerator: \"Space\",\n          }\n        : {}),\n      click: () => {\n        sendPlayerEvents(\"togglePlayPause\");\n      },\n    },\n    {\n      label: \"Next\",\n      type: \"normal\",\n      enabled: hasNext,\n      ...(platform.isMacOS\n        ? {\n            icon: getMacOsMediaIcon(\"next\"),\n            accelerator: \"Cmd+Right\",\n          }\n        : {}),\n      click: () => {\n        sendPlayerEvents(\"skipForward\");\n      },\n    },\n    {\n      type: \"separator\",\n    },\n    {\n      label: isVisible ? \"Hide\" : \"Show\",\n      click: () => {\n        if (!mainWindow || mainWindow.isDestroyed()) return;\n\n        if (isVisible) {\n          mainWindow.hide();\n        } else {\n          mainWindow.show();\n        }\n\n        updateTray();\n      },\n    },\n    {\n      label: \"Quit\",\n      click: () => {\n        if (tray) tray.destroy();\n        if (mainWindow) mainWindow.destroy();\n\n        app.quit();\n      },\n    },\n  ]);\n\n  if (!platform.isMacOS) {\n    tray.setToolTip(trayTooltip);\n  }\n  tray.setContextMenu(contextMenu);\n}\n","/**\n * Module dependencies.\n */\n\nvar fs = require('fs'),\n  path = require('path'),\n  fileURLToPath = require('file-uri-to-path'),\n  join = path.join,\n  dirname = path.dirname,\n  exists =\n    (fs.accessSync &&\n      function(path) {\n        try {\n          fs.accessSync(path);\n        } catch (e) {\n          return false;\n        }\n        return true;\n      }) ||\n    fs.existsSync ||\n    path.existsSync,\n  defaults = {\n    arrow: process.env.NODE_BINDINGS_ARROW || '  ',\n    compiled: process.env.NODE_BINDINGS_COMPILED_DIR || 'compiled',\n    platform: process.platform,\n    arch: process.arch,\n    nodePreGyp:\n      'node-v' +\n      process.versions.modules +\n      '-' +\n      process.platform +\n      '-' +\n      process.arch,\n    version: process.versions.node,\n    bindings: 'bindings.node',\n    try: [\n      // node-gyp's linked version in the \"build\" dir\n      ['module_root', 'build', 'bindings'],\n      // node-waf and gyp_addon (a.k.a node-gyp)\n      ['module_root', 'build', 'Debug', 'bindings'],\n      ['module_root', 'build', 'Release', 'bindings'],\n      // Debug files, for development (legacy behavior, remove for node v0.9)\n      ['module_root', 'out', 'Debug', 'bindings'],\n      ['module_root', 'Debug', 'bindings'],\n      // Release files, but manually compiled (legacy behavior, remove for node v0.9)\n      ['module_root', 'out', 'Release', 'bindings'],\n      ['module_root', 'Release', 'bindings'],\n      // Legacy from node-waf, node <= 0.4.x\n      ['module_root', 'build', 'default', 'bindings'],\n      // Production \"Release\" buildtype binary (meh...)\n      ['module_root', 'compiled', 'version', 'platform', 'arch', 'bindings'],\n      // node-qbs builds\n      ['module_root', 'addon-build', 'release', 'install-root', 'bindings'],\n      ['module_root', 'addon-build', 'debug', 'install-root', 'bindings'],\n      ['module_root', 'addon-build', 'default', 'install-root', 'bindings'],\n      // node-pre-gyp path ./lib/binding/{node_abi}-{platform}-{arch}\n      ['module_root', 'lib', 'binding', 'nodePreGyp', 'bindings']\n    ]\n  };\n\n/**\n * The main `bindings()` function loads the compiled bindings for a given module.\n * It uses V8's Error API to determine the parent filename that this function is\n * being invoked from, which is then used to find the root directory.\n */\n\nfunction bindings(opts) {\n  // Argument surgery\n  if (typeof opts == 'string') {\n    opts = { bindings: opts };\n  } else if (!opts) {\n    opts = {};\n  }\n\n  // maps `defaults` onto `opts` object\n  Object.keys(defaults).map(function(i) {\n    if (!(i in opts)) opts[i] = defaults[i];\n  });\n\n  // Get the module root\n  if (!opts.module_root) {\n    opts.module_root = exports.getRoot(exports.getFileName());\n  }\n\n  // Ensure the given bindings name ends with .node\n  if (path.extname(opts.bindings) != '.node') {\n    opts.bindings += '.node';\n  }\n\n  // https://github.com/webpack/webpack/issues/4175#issuecomment-342931035\n  var requireFunc =\n    typeof __webpack_require__ === 'function'\n      ? __non_webpack_require__\n      : require;\n\n  var tries = [],\n    i = 0,\n    l = opts.try.length,\n    n,\n    b,\n    err;\n\n  for (; i < l; i++) {\n    n = join.apply(\n      null,\n      opts.try[i].map(function(p) {\n        return opts[p] || p;\n      })\n    );\n    tries.push(n);\n    try {\n      b = opts.path ? requireFunc.resolve(n) : requireFunc(n);\n      if (!opts.path) {\n        b.path = n;\n      }\n      return b;\n    } catch (e) {\n      if (e.code !== 'MODULE_NOT_FOUND' &&\n          e.code !== 'QUALIFIED_PATH_RESOLUTION_FAILED' &&\n          !/not find/i.test(e.message)) {\n        throw e;\n      }\n    }\n  }\n\n  err = new Error(\n    'Could not locate the bindings file. Tried:\\n' +\n      tries\n        .map(function(a) {\n          return opts.arrow + a;\n        })\n        .join('\\n')\n  );\n  err.tries = tries;\n  throw err;\n}\nmodule.exports = exports = bindings;\n\n/**\n * Gets the filename of the JavaScript file that invokes this function.\n * Used to help find the root directory of a module.\n * Optionally accepts an filename argument to skip when searching for the invoking filename\n */\n\nexports.getFileName = function getFileName(calling_file) {\n  var origPST = Error.prepareStackTrace,\n    origSTL = Error.stackTraceLimit,\n    dummy = {},\n    fileName;\n\n  Error.stackTraceLimit = 10;\n\n  Error.prepareStackTrace = function(e, st) {\n    for (var i = 0, l = st.length; i < l; i++) {\n      fileName = st[i].getFileName();\n      if (fileName !== __filename) {\n        if (calling_file) {\n          if (fileName !== calling_file) {\n            return;\n          }\n        } else {\n          return;\n        }\n      }\n    }\n  };\n\n  // run the 'prepareStackTrace' function above\n  Error.captureStackTrace(dummy);\n  dummy.stack;\n\n  // cleanup\n  Error.prepareStackTrace = origPST;\n  Error.stackTraceLimit = origSTL;\n\n  // handle filename that starts with \"file://\"\n  var fileSchema = 'file://';\n  if (fileName.indexOf(fileSchema) === 0) {\n    fileName = fileURLToPath(fileName);\n  }\n\n  return fileName;\n};\n\n/**\n * Gets the root directory of a module, given an arbitrary filename\n * somewhere in the module tree. The \"root directory\" is the directory\n * containing the `package.json` file.\n *\n *   In:  /home/nate/node-native-module/lib/index.js\n *   Out: /home/nate/node-native-module\n */\n\nexports.getRoot = function getRoot(file) {\n  var dir = dirname(file),\n    prev;\n  while (true) {\n    if (dir === '.') {\n      // Avoids an infinite loop in rare cases, like the REPL\n      dir = process.cwd();\n    }\n    if (\n      exists(join(dir, 'package.json')) ||\n      exists(join(dir, 'node_modules'))\n    ) {\n      // Found the 'package.json' file or 'node_modules' dir; we're done\n      return dir;\n    }\n    if (prev === dir) {\n      // Got to the top\n      throw new Error(\n        'Could not find module root given file: \"' +\n          file +\n          '\". Do you have a `package.json` file? '\n      );\n    }\n    // Try the parent dir next\n    prev = dir;\n    dir = join(dir, '..');\n  }\n};\n","\n/**\n * Module dependencies.\n */\n\nvar sep = require('path').sep || '/';\n\n/**\n * Module exports.\n */\n\nmodule.exports = fileUriToPath;\n\n/**\n * File URI to Path function.\n *\n * @param {String} uri\n * @return {String} path\n * @api public\n */\n\nfunction fileUriToPath (uri) {\n  if ('string' != typeof uri ||\n      uri.length <= 7 ||\n      'file://' != uri.substring(0, 7)) {\n    throw new TypeError('must pass in a file:// URI to convert to a file path');\n  }\n\n  var rest = decodeURI(uri.substring(7));\n  var firstSlash = rest.indexOf('/');\n  var host = rest.substring(0, firstSlash);\n  var path = rest.substring(firstSlash + 1);\n\n  // 2.  Scheme Definition\n  // As a special case, <host> can be the string \"localhost\" or the empty\n  // string; this is interpreted as \"the machine from which the URL is\n  // being interpreted\".\n  if ('localhost' == host) host = '';\n\n  if (host) {\n    host = sep + sep + host;\n  }\n\n  // 3.2  Drives, drive letters, mount points, file system root\n  // Drive letters are mapped into the top of a file URI in various ways,\n  // depending on the implementation; some applications substitute\n  // vertical bar (\"|\") for the colon after the drive letter, yielding\n  // \"file:///c|/tmp/test.txt\".  In some cases, the colon is left\n  // unchanged, as in \"file:///c:/tmp/test.txt\".  In other cases, the\n  // colon is simply omitted, as in \"file:///c/tmp/test.txt\".\n  path = path.replace(/^(.+)\\|/, '$1:');\n\n  // for Windows, we need to invert the path separators from what a URI uses\n  if (sep == '\\\\') {\n    path = path.replace(/\\//g, '\\\\');\n  }\n\n  if (/^.+\\:/.test(path)) {\n    // has Windows drive at beginning of path\n  } else {\n    // unix path\n    path = sep + path;\n  }\n\n  return host + path;\n}\n","'use strict';\n\nlet register;\ntry {\n  const { app } = require('electron');\n  register = app.setAsDefaultProtocolClient.bind(app);\n} catch (err) {\n  try {\n    register = require('register-scheme');\n  } catch (e) {} // eslint-disable-line no-empty\n}\n\nif (typeof register !== 'function') {\n  register = () => false;\n}\n\nfunction pid() {\n  if (typeof process !== 'undefined') {\n    return process.pid;\n  }\n  return null;\n}\n\nconst uuid4122 = () => {\n  let uuid = '';\n  for (let i = 0; i < 32; i += 1) {\n    if (i === 8 || i === 12 || i === 16 || i === 20) {\n      uuid += '-';\n    }\n    let n;\n    if (i === 12) {\n      n = 4;\n    } else {\n      const random = Math.random() * 16 | 0;\n      if (i === 16) {\n        n = (random & 3) | 0;\n      } else {\n        n = random;\n      }\n    }\n    uuid += n.toString(16);\n  }\n  return uuid;\n};\n\nmodule.exports = {\n  pid,\n  register,\n  uuid: uuid4122,\n};\n","module.exports = require('bindings')('register-protocol-handler').registerProtocolHandler;\n","\"use strict\";\n\nvar conversions = {};\nmodule.exports = conversions;\n\nfunction sign(x) {\n    return x < 0 ? -1 : 1;\n}\n\nfunction evenRound(x) {\n    // Round x to the nearest integer, choosing the even integer if it lies halfway between two.\n    if ((x % 1) === 0.5 && (x & 1) === 0) { // [even number].5; round down (i.e. floor)\n        return Math.floor(x);\n    } else {\n        return Math.round(x);\n    }\n}\n\nfunction createNumberConversion(bitLength, typeOpts) {\n    if (!typeOpts.unsigned) {\n        --bitLength;\n    }\n    const lowerBound = typeOpts.unsigned ? 0 : -Math.pow(2, bitLength);\n    const upperBound = Math.pow(2, bitLength) - 1;\n\n    const moduloVal = typeOpts.moduloBitLength ? Math.pow(2, typeOpts.moduloBitLength) : Math.pow(2, bitLength);\n    const moduloBound = typeOpts.moduloBitLength ? Math.pow(2, typeOpts.moduloBitLength - 1) : Math.pow(2, bitLength - 1);\n\n    return function(V, opts) {\n        if (!opts) opts = {};\n\n        let x = +V;\n\n        if (opts.enforceRange) {\n            if (!Number.isFinite(x)) {\n                throw new TypeError(\"Argument is not a finite number\");\n            }\n\n            x = sign(x) * Math.floor(Math.abs(x));\n            if (x < lowerBound || x > upperBound) {\n                throw new TypeError(\"Argument is not in byte range\");\n            }\n\n            return x;\n        }\n\n        if (!isNaN(x) && opts.clamp) {\n            x = evenRound(x);\n\n            if (x < lowerBound) x = lowerBound;\n            if (x > upperBound) x = upperBound;\n            return x;\n        }\n\n        if (!Number.isFinite(x) || x === 0) {\n            return 0;\n        }\n\n        x = sign(x) * Math.floor(Math.abs(x));\n        x = x % moduloVal;\n\n        if (!typeOpts.unsigned && x >= moduloBound) {\n            return x - moduloVal;\n        } else if (typeOpts.unsigned) {\n            if (x < 0) {\n              x += moduloVal;\n            } else if (x === -0) { // don't return negative zero\n              return 0;\n            }\n        }\n\n        return x;\n    }\n}\n\nconversions[\"void\"] = function () {\n    return undefined;\n};\n\nconversions[\"boolean\"] = function (val) {\n    return !!val;\n};\n\nconversions[\"byte\"] = createNumberConversion(8, { unsigned: false });\nconversions[\"octet\"] = createNumberConversion(8, { unsigned: true });\n\nconversions[\"short\"] = createNumberConversion(16, { unsigned: false });\nconversions[\"unsigned short\"] = createNumberConversion(16, { unsigned: true });\n\nconversions[\"long\"] = createNumberConversion(32, { unsigned: false });\nconversions[\"unsigned long\"] = createNumberConversion(32, { unsigned: true });\n\nconversions[\"long long\"] = createNumberConversion(32, { unsigned: false, moduloBitLength: 64 });\nconversions[\"unsigned long long\"] = createNumberConversion(32, { unsigned: true, moduloBitLength: 64 });\n\nconversions[\"double\"] = function (V) {\n    const x = +V;\n\n    if (!Number.isFinite(x)) {\n        throw new TypeError(\"Argument is not a finite floating-point value\");\n    }\n\n    return x;\n};\n\nconversions[\"unrestricted double\"] = function (V) {\n    const x = +V;\n\n    if (isNaN(x)) {\n        throw new TypeError(\"Argument is NaN\");\n    }\n\n    return x;\n};\n\n// not quite valid, but good enough for JS\nconversions[\"float\"] = conversions[\"double\"];\nconversions[\"unrestricted float\"] = conversions[\"unrestricted double\"];\n\nconversions[\"DOMString\"] = function (V, opts) {\n    if (!opts) opts = {};\n\n    if (opts.treatNullAsEmptyString && V === null) {\n        return \"\";\n    }\n\n    return String(V);\n};\n\nconversions[\"ByteString\"] = function (V, opts) {\n    const x = String(V);\n    let c = undefined;\n    for (let i = 0; (c = x.codePointAt(i)) !== undefined; ++i) {\n        if (c > 255) {\n            throw new TypeError(\"Argument is not a valid bytestring\");\n        }\n    }\n\n    return x;\n};\n\nconversions[\"USVString\"] = function (V) {\n    const S = String(V);\n    const n = S.length;\n    const U = [];\n    for (let i = 0; i < n; ++i) {\n        const c = S.charCodeAt(i);\n        if (c < 0xD800 || c > 0xDFFF) {\n            U.push(String.fromCodePoint(c));\n        } else if (0xDC00 <= c && c <= 0xDFFF) {\n            U.push(String.fromCodePoint(0xFFFD));\n        } else {\n            if (i === n - 1) {\n                U.push(String.fromCodePoint(0xFFFD));\n            } else {\n                const d = S.charCodeAt(i + 1);\n                if (0xDC00 <= d && d <= 0xDFFF) {\n                    const a = c & 0x3FF;\n                    const b = d & 0x3FF;\n                    U.push(String.fromCodePoint((2 << 15) + (2 << 9) * a + b));\n                    ++i;\n                } else {\n                    U.push(String.fromCodePoint(0xFFFD));\n                }\n            }\n        }\n    }\n\n    return U.join('');\n};\n\nconversions[\"Date\"] = function (V, opts) {\n    if (!(V instanceof Date)) {\n        throw new TypeError(\"Argument is not a Date object\");\n    }\n    if (isNaN(V)) {\n        return undefined;\n    }\n\n    return V;\n};\n\nconversions[\"RegExp\"] = function (V, opts) {\n    if (!(V instanceof RegExp)) {\n        V = new RegExp(V);\n    }\n\n    return V;\n};\n","\"use strict\";\n\nvar punycode = require(\"punycode\");\nvar mappingTable = require(\"./lib/mappingTable.json\");\n\nvar PROCESSING_OPTIONS = {\n  TRANSITIONAL: 0,\n  NONTRANSITIONAL: 1\n};\n\nfunction normalize(str) { // fix bug in v8\n  return str.split('\\u0000').map(function (s) { return s.normalize('NFC'); }).join('\\u0000');\n}\n\nfunction findStatus(val) {\n  var start = 0;\n  var end = mappingTable.length - 1;\n\n  while (start <= end) {\n    var mid = Math.floor((start + end) / 2);\n\n    var target = mappingTable[mid];\n    if (target[0][0] <= val && target[0][1] >= val) {\n      return target;\n    } else if (target[0][0] > val) {\n      end = mid - 1;\n    } else {\n      start = mid + 1;\n    }\n  }\n\n  return null;\n}\n\nvar regexAstralSymbols = /[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g;\n\nfunction countSymbols(string) {\n  return string\n    // replace every surrogate pair with a BMP symbol\n    .replace(regexAstralSymbols, '_')\n    // then get the length\n    .length;\n}\n\nfunction mapChars(domain_name, useSTD3, processing_option) {\n  var hasError = false;\n  var processed = \"\";\n\n  var len = countSymbols(domain_name);\n  for (var i = 0; i < len; ++i) {\n    var codePoint = domain_name.codePointAt(i);\n    var status = findStatus(codePoint);\n\n    switch (status[1]) {\n      case \"disallowed\":\n        hasError = true;\n        processed += String.fromCodePoint(codePoint);\n        break;\n      case \"ignored\":\n        break;\n      case \"mapped\":\n        processed += String.fromCodePoint.apply(String, status[2]);\n        break;\n      case \"deviation\":\n        if (processing_option === PROCESSING_OPTIONS.TRANSITIONAL) {\n          processed += String.fromCodePoint.apply(String, status[2]);\n        } else {\n          processed += String.fromCodePoint(codePoint);\n        }\n        break;\n      case \"valid\":\n        processed += String.fromCodePoint(codePoint);\n        break;\n      case \"disallowed_STD3_mapped\":\n        if (useSTD3) {\n          hasError = true;\n          processed += String.fromCodePoint(codePoint);\n        } else {\n          processed += String.fromCodePoint.apply(String, status[2]);\n        }\n        break;\n      case \"disallowed_STD3_valid\":\n        if (useSTD3) {\n          hasError = true;\n        }\n\n        processed += String.fromCodePoint(codePoint);\n        break;\n    }\n  }\n\n  return {\n    string: processed,\n    error: hasError\n  };\n}\n\nvar combiningMarksRegex = /[\\u0300-\\u036F\\u0483-\\u0489\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u0610-\\u061A\\u064B-\\u065F\\u0670\\u06D6-\\u06DC\\u06DF-\\u06E4\\u06E7\\u06E8\\u06EA-\\u06ED\\u0711\\u0730-\\u074A\\u07A6-\\u07B0\\u07EB-\\u07F3\\u0816-\\u0819\\u081B-\\u0823\\u0825-\\u0827\\u0829-\\u082D\\u0859-\\u085B\\u08E4-\\u0903\\u093A-\\u093C\\u093E-\\u094F\\u0951-\\u0957\\u0962\\u0963\\u0981-\\u0983\\u09BC\\u09BE-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CD\\u09D7\\u09E2\\u09E3\\u0A01-\\u0A03\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A70\\u0A71\\u0A75\\u0A81-\\u0A83\\u0ABC\\u0ABE-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AE2\\u0AE3\\u0B01-\\u0B03\\u0B3C\\u0B3E-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B62\\u0B63\\u0B82\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD7\\u0C00-\\u0C03\\u0C3E-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C62\\u0C63\\u0C81-\\u0C83\\u0CBC\\u0CBE-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CE2\\u0CE3\\u0D01-\\u0D03\\u0D3E-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4D\\u0D57\\u0D62\\u0D63\\u0D82\\u0D83\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DF2\\u0DF3\\u0E31\\u0E34-\\u0E3A\\u0E47-\\u0E4E\\u0EB1\\u0EB4-\\u0EB9\\u0EBB\\u0EBC\\u0EC8-\\u0ECD\\u0F18\\u0F19\\u0F35\\u0F37\\u0F39\\u0F3E\\u0F3F\\u0F71-\\u0F84\\u0F86\\u0F87\\u0F8D-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u102B-\\u103E\\u1056-\\u1059\\u105E-\\u1060\\u1062-\\u1064\\u1067-\\u106D\\u1071-\\u1074\\u1082-\\u108D\\u108F\\u109A-\\u109D\\u135D-\\u135F\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17B4-\\u17D3\\u17DD\\u180B-\\u180D\\u18A9\\u1920-\\u192B\\u1930-\\u193B\\u19B0-\\u19C0\\u19C8\\u19C9\\u1A17-\\u1A1B\\u1A55-\\u1A5E\\u1A60-\\u1A7C\\u1A7F\\u1AB0-\\u1ABE\\u1B00-\\u1B04\\u1B34-\\u1B44\\u1B6B-\\u1B73\\u1B80-\\u1B82\\u1BA1-\\u1BAD\\u1BE6-\\u1BF3\\u1C24-\\u1C37\\u1CD0-\\u1CD2\\u1CD4-\\u1CE8\\u1CED\\u1CF2-\\u1CF4\\u1CF8\\u1CF9\\u1DC0-\\u1DF5\\u1DFC-\\u1DFF\\u20D0-\\u20F0\\u2CEF-\\u2CF1\\u2D7F\\u2DE0-\\u2DFF\\u302A-\\u302F\\u3099\\u309A\\uA66F-\\uA672\\uA674-\\uA67D\\uA69F\\uA6F0\\uA6F1\\uA802\\uA806\\uA80B\\uA823-\\uA827\\uA880\\uA881\\uA8B4-\\uA8C4\\uA8E0-\\uA8F1\\uA926-\\uA92D\\uA947-\\uA953\\uA980-\\uA983\\uA9B3-\\uA9C0\\uA9E5\\uAA29-\\uAA36\\uAA43\\uAA4C\\uAA4D\\uAA7B-\\uAA7D\\uAAB0\\uAAB2-\\uAAB4\\uAAB7\\uAAB8\\uAABE\\uAABF\\uAAC1\\uAAEB-\\uAAEF\\uAAF5\\uAAF6\\uABE3-\\uABEA\\uABEC\\uABED\\uFB1E\\uFE00-\\uFE0F\\uFE20-\\uFE2D]|\\uD800[\\uDDFD\\uDEE0\\uDF76-\\uDF7A]|\\uD802[\\uDE01-\\uDE03\\uDE05\\uDE06\\uDE0C-\\uDE0F\\uDE38-\\uDE3A\\uDE3F\\uDEE5\\uDEE6]|\\uD804[\\uDC00-\\uDC02\\uDC38-\\uDC46\\uDC7F-\\uDC82\\uDCB0-\\uDCBA\\uDD00-\\uDD02\\uDD27-\\uDD34\\uDD73\\uDD80-\\uDD82\\uDDB3-\\uDDC0\\uDE2C-\\uDE37\\uDEDF-\\uDEEA\\uDF01-\\uDF03\\uDF3C\\uDF3E-\\uDF44\\uDF47\\uDF48\\uDF4B-\\uDF4D\\uDF57\\uDF62\\uDF63\\uDF66-\\uDF6C\\uDF70-\\uDF74]|\\uD805[\\uDCB0-\\uDCC3\\uDDAF-\\uDDB5\\uDDB8-\\uDDC0\\uDE30-\\uDE40\\uDEAB-\\uDEB7]|\\uD81A[\\uDEF0-\\uDEF4\\uDF30-\\uDF36]|\\uD81B[\\uDF51-\\uDF7E\\uDF8F-\\uDF92]|\\uD82F[\\uDC9D\\uDC9E]|\\uD834[\\uDD65-\\uDD69\\uDD6D-\\uDD72\\uDD7B-\\uDD82\\uDD85-\\uDD8B\\uDDAA-\\uDDAD\\uDE42-\\uDE44]|\\uD83A[\\uDCD0-\\uDCD6]|\\uDB40[\\uDD00-\\uDDEF]/;\n\nfunction validateLabel(label, processing_option) {\n  if (label.substr(0, 4) === \"xn--\") {\n    label = punycode.toUnicode(label);\n    processing_option = PROCESSING_OPTIONS.NONTRANSITIONAL;\n  }\n\n  var error = false;\n\n  if (normalize(label) !== label ||\n      (label[3] === \"-\" && label[4] === \"-\") ||\n      label[0] === \"-\" || label[label.length - 1] === \"-\" ||\n      label.indexOf(\".\") !== -1 ||\n      label.search(combiningMarksRegex) === 0) {\n    error = true;\n  }\n\n  var len = countSymbols(label);\n  for (var i = 0; i < len; ++i) {\n    var status = findStatus(label.codePointAt(i));\n    if ((processing === PROCESSING_OPTIONS.TRANSITIONAL && status[1] !== \"valid\") ||\n        (processing === PROCESSING_OPTIONS.NONTRANSITIONAL &&\n         status[1] !== \"valid\" && status[1] !== \"deviation\")) {\n      error = true;\n      break;\n    }\n  }\n\n  return {\n    label: label,\n    error: error\n  };\n}\n\nfunction processing(domain_name, useSTD3, processing_option) {\n  var result = mapChars(domain_name, useSTD3, processing_option);\n  result.string = normalize(result.string);\n\n  var labels = result.string.split(\".\");\n  for (var i = 0; i < labels.length; ++i) {\n    try {\n      var validation = validateLabel(labels[i]);\n      labels[i] = validation.label;\n      result.error = result.error || validation.error;\n    } catch(e) {\n      result.error = true;\n    }\n  }\n\n  return {\n    string: labels.join(\".\"),\n    error: result.error\n  };\n}\n\nmodule.exports.toASCII = function(domain_name, useSTD3, processing_option, verifyDnsLength) {\n  var result = processing(domain_name, useSTD3, processing_option);\n  var labels = result.string.split(\".\");\n  labels = labels.map(function(l) {\n    try {\n      return punycode.toASCII(l);\n    } catch(e) {\n      result.error = true;\n      return l;\n    }\n  });\n\n  if (verifyDnsLength) {\n    var total = labels.slice(0, labels.length - 1).join(\".\").length;\n    if (total.length > 253 || total.length === 0) {\n      result.error = true;\n    }\n\n    for (var i=0; i < labels.length; ++i) {\n      if (labels.length > 63 || labels.length === 0) {\n        result.error = true;\n        break;\n      }\n    }\n  }\n\n  if (result.error) return null;\n  return labels.join(\".\");\n};\n\nmodule.exports.toUnicode = function(domain_name, useSTD3) {\n  var result = processing(domain_name, useSTD3, PROCESSING_OPTIONS.NONTRANSITIONAL);\n\n  return {\n    domain: result.string,\n    error: result.error\n  };\n};\n\nmodule.exports.PROCESSING_OPTIONS = PROCESSING_OPTIONS;\n","\"use strict\";\r\nconst punycode = require(\"punycode\");\r\nconst tr46 = require(\"tr46\");\r\n\r\nconst specialSchemes = {\r\n  ftp: 21,\r\n  file: null,\r\n  gopher: 70,\r\n  http: 80,\r\n  https: 443,\r\n  ws: 80,\r\n  wss: 443\r\n};\r\n\r\nconst failure = Symbol(\"failure\");\r\n\r\nfunction countSymbols(str) {\r\n  return punycode.ucs2.decode(str).length;\r\n}\r\n\r\nfunction at(input, idx) {\r\n  const c = input[idx];\r\n  return isNaN(c) ? undefined : String.fromCodePoint(c);\r\n}\r\n\r\nfunction isASCIIDigit(c) {\r\n  return c >= 0x30 && c <= 0x39;\r\n}\r\n\r\nfunction isASCIIAlpha(c) {\r\n  return (c >= 0x41 && c <= 0x5A) || (c >= 0x61 && c <= 0x7A);\r\n}\r\n\r\nfunction isASCIIAlphanumeric(c) {\r\n  return isASCIIAlpha(c) || isASCIIDigit(c);\r\n}\r\n\r\nfunction isASCIIHex(c) {\r\n  return isASCIIDigit(c) || (c >= 0x41 && c <= 0x46) || (c >= 0x61 && c <= 0x66);\r\n}\r\n\r\nfunction isSingleDot(buffer) {\r\n  return buffer === \".\" || buffer.toLowerCase() === \"%2e\";\r\n}\r\n\r\nfunction isDoubleDot(buffer) {\r\n  buffer = buffer.toLowerCase();\r\n  return buffer === \"..\" || buffer === \"%2e.\" || buffer === \".%2e\" || buffer === \"%2e%2e\";\r\n}\r\n\r\nfunction isWindowsDriveLetterCodePoints(cp1, cp2) {\r\n  return isASCIIAlpha(cp1) && (cp2 === 58 || cp2 === 124);\r\n}\r\n\r\nfunction isWindowsDriveLetterString(string) {\r\n  return string.length === 2 && isASCIIAlpha(string.codePointAt(0)) && (string[1] === \":\" || string[1] === \"|\");\r\n}\r\n\r\nfunction isNormalizedWindowsDriveLetterString(string) {\r\n  return string.length === 2 && isASCIIAlpha(string.codePointAt(0)) && string[1] === \":\";\r\n}\r\n\r\nfunction containsForbiddenHostCodePoint(string) {\r\n  return string.search(/\\u0000|\\u0009|\\u000A|\\u000D|\\u0020|#|%|\\/|:|\\?|@|\\[|\\\\|\\]/) !== -1;\r\n}\r\n\r\nfunction containsForbiddenHostCodePointExcludingPercent(string) {\r\n  return string.search(/\\u0000|\\u0009|\\u000A|\\u000D|\\u0020|#|\\/|:|\\?|@|\\[|\\\\|\\]/) !== -1;\r\n}\r\n\r\nfunction isSpecialScheme(scheme) {\r\n  return specialSchemes[scheme] !== undefined;\r\n}\r\n\r\nfunction isSpecial(url) {\r\n  return isSpecialScheme(url.scheme);\r\n}\r\n\r\nfunction defaultPort(scheme) {\r\n  return specialSchemes[scheme];\r\n}\r\n\r\nfunction percentEncode(c) {\r\n  let hex = c.toString(16).toUpperCase();\r\n  if (hex.length === 1) {\r\n    hex = \"0\" + hex;\r\n  }\r\n\r\n  return \"%\" + hex;\r\n}\r\n\r\nfunction utf8PercentEncode(c) {\r\n  const buf = new Buffer(c);\r\n\r\n  let str = \"\";\r\n\r\n  for (let i = 0; i < buf.length; ++i) {\r\n    str += percentEncode(buf[i]);\r\n  }\r\n\r\n  return str;\r\n}\r\n\r\nfunction utf8PercentDecode(str) {\r\n  const input = new Buffer(str);\r\n  const output = [];\r\n  for (let i = 0; i < input.length; ++i) {\r\n    if (input[i] !== 37) {\r\n      output.push(input[i]);\r\n    } else if (input[i] === 37 && isASCIIHex(input[i + 1]) && isASCIIHex(input[i + 2])) {\r\n      output.push(parseInt(input.slice(i + 1, i + 3).toString(), 16));\r\n      i += 2;\r\n    } else {\r\n      output.push(input[i]);\r\n    }\r\n  }\r\n  return new Buffer(output).toString();\r\n}\r\n\r\nfunction isC0ControlPercentEncode(c) {\r\n  return c <= 0x1F || c > 0x7E;\r\n}\r\n\r\nconst extraPathPercentEncodeSet = new Set([32, 34, 35, 60, 62, 63, 96, 123, 125]);\r\nfunction isPathPercentEncode(c) {\r\n  return isC0ControlPercentEncode(c) || extraPathPercentEncodeSet.has(c);\r\n}\r\n\r\nconst extraUserinfoPercentEncodeSet =\r\n  new Set([47, 58, 59, 61, 64, 91, 92, 93, 94, 124]);\r\nfunction isUserinfoPercentEncode(c) {\r\n  return isPathPercentEncode(c) || extraUserinfoPercentEncodeSet.has(c);\r\n}\r\n\r\nfunction percentEncodeChar(c, encodeSetPredicate) {\r\n  const cStr = String.fromCodePoint(c);\r\n\r\n  if (encodeSetPredicate(c)) {\r\n    return utf8PercentEncode(cStr);\r\n  }\r\n\r\n  return cStr;\r\n}\r\n\r\nfunction parseIPv4Number(input) {\r\n  let R = 10;\r\n\r\n  if (input.length >= 2 && input.charAt(0) === \"0\" && input.charAt(1).toLowerCase() === \"x\") {\r\n    input = input.substring(2);\r\n    R = 16;\r\n  } else if (input.length >= 2 && input.charAt(0) === \"0\") {\r\n    input = input.substring(1);\r\n    R = 8;\r\n  }\r\n\r\n  if (input === \"\") {\r\n    return 0;\r\n  }\r\n\r\n  const regex = R === 10 ? /[^0-9]/ : (R === 16 ? /[^0-9A-Fa-f]/ : /[^0-7]/);\r\n  if (regex.test(input)) {\r\n    return failure;\r\n  }\r\n\r\n  return parseInt(input, R);\r\n}\r\n\r\nfunction parseIPv4(input) {\r\n  const parts = input.split(\".\");\r\n  if (parts[parts.length - 1] === \"\") {\r\n    if (parts.length > 1) {\r\n      parts.pop();\r\n    }\r\n  }\r\n\r\n  if (parts.length > 4) {\r\n    return input;\r\n  }\r\n\r\n  const numbers = [];\r\n  for (const part of parts) {\r\n    if (part === \"\") {\r\n      return input;\r\n    }\r\n    const n = parseIPv4Number(part);\r\n    if (n === failure) {\r\n      return input;\r\n    }\r\n\r\n    numbers.push(n);\r\n  }\r\n\r\n  for (let i = 0; i < numbers.length - 1; ++i) {\r\n    if (numbers[i] > 255) {\r\n      return failure;\r\n    }\r\n  }\r\n  if (numbers[numbers.length - 1] >= Math.pow(256, 5 - numbers.length)) {\r\n    return failure;\r\n  }\r\n\r\n  let ipv4 = numbers.pop();\r\n  let counter = 0;\r\n\r\n  for (const n of numbers) {\r\n    ipv4 += n * Math.pow(256, 3 - counter);\r\n    ++counter;\r\n  }\r\n\r\n  return ipv4;\r\n}\r\n\r\nfunction serializeIPv4(address) {\r\n  let output = \"\";\r\n  let n = address;\r\n\r\n  for (let i = 1; i <= 4; ++i) {\r\n    output = String(n % 256) + output;\r\n    if (i !== 4) {\r\n      output = \".\" + output;\r\n    }\r\n    n = Math.floor(n / 256);\r\n  }\r\n\r\n  return output;\r\n}\r\n\r\nfunction parseIPv6(input) {\r\n  const address = [0, 0, 0, 0, 0, 0, 0, 0];\r\n  let pieceIndex = 0;\r\n  let compress = null;\r\n  let pointer = 0;\r\n\r\n  input = punycode.ucs2.decode(input);\r\n\r\n  if (input[pointer] === 58) {\r\n    if (input[pointer + 1] !== 58) {\r\n      return failure;\r\n    }\r\n\r\n    pointer += 2;\r\n    ++pieceIndex;\r\n    compress = pieceIndex;\r\n  }\r\n\r\n  while (pointer < input.length) {\r\n    if (pieceIndex === 8) {\r\n      return failure;\r\n    }\r\n\r\n    if (input[pointer] === 58) {\r\n      if (compress !== null) {\r\n        return failure;\r\n      }\r\n      ++pointer;\r\n      ++pieceIndex;\r\n      compress = pieceIndex;\r\n      continue;\r\n    }\r\n\r\n    let value = 0;\r\n    let length = 0;\r\n\r\n    while (length < 4 && isASCIIHex(input[pointer])) {\r\n      value = value * 0x10 + parseInt(at(input, pointer), 16);\r\n      ++pointer;\r\n      ++length;\r\n    }\r\n\r\n    if (input[pointer] === 46) {\r\n      if (length === 0) {\r\n        return failure;\r\n      }\r\n\r\n      pointer -= length;\r\n\r\n      if (pieceIndex > 6) {\r\n        return failure;\r\n      }\r\n\r\n      let numbersSeen = 0;\r\n\r\n      while (input[pointer] !== undefined) {\r\n        let ipv4Piece = null;\r\n\r\n        if (numbersSeen > 0) {\r\n          if (input[pointer] === 46 && numbersSeen < 4) {\r\n            ++pointer;\r\n          } else {\r\n            return failure;\r\n          }\r\n        }\r\n\r\n        if (!isASCIIDigit(input[pointer])) {\r\n          return failure;\r\n        }\r\n\r\n        while (isASCIIDigit(input[pointer])) {\r\n          const number = parseInt(at(input, pointer));\r\n          if (ipv4Piece === null) {\r\n            ipv4Piece = number;\r\n          } else if (ipv4Piece === 0) {\r\n            return failure;\r\n          } else {\r\n            ipv4Piece = ipv4Piece * 10 + number;\r\n          }\r\n          if (ipv4Piece > 255) {\r\n            return failure;\r\n          }\r\n          ++pointer;\r\n        }\r\n\r\n        address[pieceIndex] = address[pieceIndex] * 0x100 + ipv4Piece;\r\n\r\n        ++numbersSeen;\r\n\r\n        if (numbersSeen === 2 || numbersSeen === 4) {\r\n          ++pieceIndex;\r\n        }\r\n      }\r\n\r\n      if (numbersSeen !== 4) {\r\n        return failure;\r\n      }\r\n\r\n      break;\r\n    } else if (input[pointer] === 58) {\r\n      ++pointer;\r\n      if (input[pointer] === undefined) {\r\n        return failure;\r\n      }\r\n    } else if (input[pointer] !== undefined) {\r\n      return failure;\r\n    }\r\n\r\n    address[pieceIndex] = value;\r\n    ++pieceIndex;\r\n  }\r\n\r\n  if (compress !== null) {\r\n    let swaps = pieceIndex - compress;\r\n    pieceIndex = 7;\r\n    while (pieceIndex !== 0 && swaps > 0) {\r\n      const temp = address[compress + swaps - 1];\r\n      address[compress + swaps - 1] = address[pieceIndex];\r\n      address[pieceIndex] = temp;\r\n      --pieceIndex;\r\n      --swaps;\r\n    }\r\n  } else if (compress === null && pieceIndex !== 8) {\r\n    return failure;\r\n  }\r\n\r\n  return address;\r\n}\r\n\r\nfunction serializeIPv6(address) {\r\n  let output = \"\";\r\n  const seqResult = findLongestZeroSequence(address);\r\n  const compress = seqResult.idx;\r\n  let ignore0 = false;\r\n\r\n  for (let pieceIndex = 0; pieceIndex <= 7; ++pieceIndex) {\r\n    if (ignore0 && address[pieceIndex] === 0) {\r\n      continue;\r\n    } else if (ignore0) {\r\n      ignore0 = false;\r\n    }\r\n\r\n    if (compress === pieceIndex) {\r\n      const separator = pieceIndex === 0 ? \"::\" : \":\";\r\n      output += separator;\r\n      ignore0 = true;\r\n      continue;\r\n    }\r\n\r\n    output += address[pieceIndex].toString(16);\r\n\r\n    if (pieceIndex !== 7) {\r\n      output += \":\";\r\n    }\r\n  }\r\n\r\n  return output;\r\n}\r\n\r\nfunction parseHost(input, isSpecialArg) {\r\n  if (input[0] === \"[\") {\r\n    if (input[input.length - 1] !== \"]\") {\r\n      return failure;\r\n    }\r\n\r\n    return parseIPv6(input.substring(1, input.length - 1));\r\n  }\r\n\r\n  if (!isSpecialArg) {\r\n    return parseOpaqueHost(input);\r\n  }\r\n\r\n  const domain = utf8PercentDecode(input);\r\n  const asciiDomain = tr46.toASCII(domain, false, tr46.PROCESSING_OPTIONS.NONTRANSITIONAL, false);\r\n  if (asciiDomain === null) {\r\n    return failure;\r\n  }\r\n\r\n  if (containsForbiddenHostCodePoint(asciiDomain)) {\r\n    return failure;\r\n  }\r\n\r\n  const ipv4Host = parseIPv4(asciiDomain);\r\n  if (typeof ipv4Host === \"number\" || ipv4Host === failure) {\r\n    return ipv4Host;\r\n  }\r\n\r\n  return asciiDomain;\r\n}\r\n\r\nfunction parseOpaqueHost(input) {\r\n  if (containsForbiddenHostCodePointExcludingPercent(input)) {\r\n    return failure;\r\n  }\r\n\r\n  let output = \"\";\r\n  const decoded = punycode.ucs2.decode(input);\r\n  for (let i = 0; i < decoded.length; ++i) {\r\n    output += percentEncodeChar(decoded[i], isC0ControlPercentEncode);\r\n  }\r\n  return output;\r\n}\r\n\r\nfunction findLongestZeroSequence(arr) {\r\n  let maxIdx = null;\r\n  let maxLen = 1; // only find elements > 1\r\n  let currStart = null;\r\n  let currLen = 0;\r\n\r\n  for (let i = 0; i < arr.length; ++i) {\r\n    if (arr[i] !== 0) {\r\n      if (currLen > maxLen) {\r\n        maxIdx = currStart;\r\n        maxLen = currLen;\r\n      }\r\n\r\n      currStart = null;\r\n      currLen = 0;\r\n    } else {\r\n      if (currStart === null) {\r\n        currStart = i;\r\n      }\r\n      ++currLen;\r\n    }\r\n  }\r\n\r\n  // if trailing zeros\r\n  if (currLen > maxLen) {\r\n    maxIdx = currStart;\r\n    maxLen = currLen;\r\n  }\r\n\r\n  return {\r\n    idx: maxIdx,\r\n    len: maxLen\r\n  };\r\n}\r\n\r\nfunction serializeHost(host) {\r\n  if (typeof host === \"number\") {\r\n    return serializeIPv4(host);\r\n  }\r\n\r\n  // IPv6 serializer\r\n  if (host instanceof Array) {\r\n    return \"[\" + serializeIPv6(host) + \"]\";\r\n  }\r\n\r\n  return host;\r\n}\r\n\r\nfunction trimControlChars(url) {\r\n  return url.replace(/^[\\u0000-\\u001F\\u0020]+|[\\u0000-\\u001F\\u0020]+$/g, \"\");\r\n}\r\n\r\nfunction trimTabAndNewline(url) {\r\n  return url.replace(/\\u0009|\\u000A|\\u000D/g, \"\");\r\n}\r\n\r\nfunction shortenPath(url) {\r\n  const path = url.path;\r\n  if (path.length === 0) {\r\n    return;\r\n  }\r\n  if (url.scheme === \"file\" && path.length === 1 && isNormalizedWindowsDriveLetter(path[0])) {\r\n    return;\r\n  }\r\n\r\n  path.pop();\r\n}\r\n\r\nfunction includesCredentials(url) {\r\n  return url.username !== \"\" || url.password !== \"\";\r\n}\r\n\r\nfunction cannotHaveAUsernamePasswordPort(url) {\r\n  return url.host === null || url.host === \"\" || url.cannotBeABaseURL || url.scheme === \"file\";\r\n}\r\n\r\nfunction isNormalizedWindowsDriveLetter(string) {\r\n  return /^[A-Za-z]:$/.test(string);\r\n}\r\n\r\nfunction URLStateMachine(input, base, encodingOverride, url, stateOverride) {\r\n  this.pointer = 0;\r\n  this.input = input;\r\n  this.base = base || null;\r\n  this.encodingOverride = encodingOverride || \"utf-8\";\r\n  this.stateOverride = stateOverride;\r\n  this.url = url;\r\n  this.failure = false;\r\n  this.parseError = false;\r\n\r\n  if (!this.url) {\r\n    this.url = {\r\n      scheme: \"\",\r\n      username: \"\",\r\n      password: \"\",\r\n      host: null,\r\n      port: null,\r\n      path: [],\r\n      query: null,\r\n      fragment: null,\r\n\r\n      cannotBeABaseURL: false\r\n    };\r\n\r\n    const res = trimControlChars(this.input);\r\n    if (res !== this.input) {\r\n      this.parseError = true;\r\n    }\r\n    this.input = res;\r\n  }\r\n\r\n  const res = trimTabAndNewline(this.input);\r\n  if (res !== this.input) {\r\n    this.parseError = true;\r\n  }\r\n  this.input = res;\r\n\r\n  this.state = stateOverride || \"scheme start\";\r\n\r\n  this.buffer = \"\";\r\n  this.atFlag = false;\r\n  this.arrFlag = false;\r\n  this.passwordTokenSeenFlag = false;\r\n\r\n  this.input = punycode.ucs2.decode(this.input);\r\n\r\n  for (; this.pointer <= this.input.length; ++this.pointer) {\r\n    const c = this.input[this.pointer];\r\n    const cStr = isNaN(c) ? undefined : String.fromCodePoint(c);\r\n\r\n    // exec state machine\r\n    const ret = this[\"parse \" + this.state](c, cStr);\r\n    if (!ret) {\r\n      break; // terminate algorithm\r\n    } else if (ret === failure) {\r\n      this.failure = true;\r\n      break;\r\n    }\r\n  }\r\n}\r\n\r\nURLStateMachine.prototype[\"parse scheme start\"] = function parseSchemeStart(c, cStr) {\r\n  if (isASCIIAlpha(c)) {\r\n    this.buffer += cStr.toLowerCase();\r\n    this.state = \"scheme\";\r\n  } else if (!this.stateOverride) {\r\n    this.state = \"no scheme\";\r\n    --this.pointer;\r\n  } else {\r\n    this.parseError = true;\r\n    return failure;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse scheme\"] = function parseScheme(c, cStr) {\r\n  if (isASCIIAlphanumeric(c) || c === 43 || c === 45 || c === 46) {\r\n    this.buffer += cStr.toLowerCase();\r\n  } else if (c === 58) {\r\n    if (this.stateOverride) {\r\n      if (isSpecial(this.url) && !isSpecialScheme(this.buffer)) {\r\n        return false;\r\n      }\r\n\r\n      if (!isSpecial(this.url) && isSpecialScheme(this.buffer)) {\r\n        return false;\r\n      }\r\n\r\n      if ((includesCredentials(this.url) || this.url.port !== null) && this.buffer === \"file\") {\r\n        return false;\r\n      }\r\n\r\n      if (this.url.scheme === \"file\" && (this.url.host === \"\" || this.url.host === null)) {\r\n        return false;\r\n      }\r\n    }\r\n    this.url.scheme = this.buffer;\r\n    this.buffer = \"\";\r\n    if (this.stateOverride) {\r\n      return false;\r\n    }\r\n    if (this.url.scheme === \"file\") {\r\n      if (this.input[this.pointer + 1] !== 47 || this.input[this.pointer + 2] !== 47) {\r\n        this.parseError = true;\r\n      }\r\n      this.state = \"file\";\r\n    } else if (isSpecial(this.url) && this.base !== null && this.base.scheme === this.url.scheme) {\r\n      this.state = \"special relative or authority\";\r\n    } else if (isSpecial(this.url)) {\r\n      this.state = \"special authority slashes\";\r\n    } else if (this.input[this.pointer + 1] === 47) {\r\n      this.state = \"path or authority\";\r\n      ++this.pointer;\r\n    } else {\r\n      this.url.cannotBeABaseURL = true;\r\n      this.url.path.push(\"\");\r\n      this.state = \"cannot-be-a-base-URL path\";\r\n    }\r\n  } else if (!this.stateOverride) {\r\n    this.buffer = \"\";\r\n    this.state = \"no scheme\";\r\n    this.pointer = -1;\r\n  } else {\r\n    this.parseError = true;\r\n    return failure;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse no scheme\"] = function parseNoScheme(c) {\r\n  if (this.base === null || (this.base.cannotBeABaseURL && c !== 35)) {\r\n    return failure;\r\n  } else if (this.base.cannotBeABaseURL && c === 35) {\r\n    this.url.scheme = this.base.scheme;\r\n    this.url.path = this.base.path.slice();\r\n    this.url.query = this.base.query;\r\n    this.url.fragment = \"\";\r\n    this.url.cannotBeABaseURL = true;\r\n    this.state = \"fragment\";\r\n  } else if (this.base.scheme === \"file\") {\r\n    this.state = \"file\";\r\n    --this.pointer;\r\n  } else {\r\n    this.state = \"relative\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse special relative or authority\"] = function parseSpecialRelativeOrAuthority(c) {\r\n  if (c === 47 && this.input[this.pointer + 1] === 47) {\r\n    this.state = \"special authority ignore slashes\";\r\n    ++this.pointer;\r\n  } else {\r\n    this.parseError = true;\r\n    this.state = \"relative\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse path or authority\"] = function parsePathOrAuthority(c) {\r\n  if (c === 47) {\r\n    this.state = \"authority\";\r\n  } else {\r\n    this.state = \"path\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse relative\"] = function parseRelative(c) {\r\n  this.url.scheme = this.base.scheme;\r\n  if (isNaN(c)) {\r\n    this.url.username = this.base.username;\r\n    this.url.password = this.base.password;\r\n    this.url.host = this.base.host;\r\n    this.url.port = this.base.port;\r\n    this.url.path = this.base.path.slice();\r\n    this.url.query = this.base.query;\r\n  } else if (c === 47) {\r\n    this.state = \"relative slash\";\r\n  } else if (c === 63) {\r\n    this.url.username = this.base.username;\r\n    this.url.password = this.base.password;\r\n    this.url.host = this.base.host;\r\n    this.url.port = this.base.port;\r\n    this.url.path = this.base.path.slice();\r\n    this.url.query = \"\";\r\n    this.state = \"query\";\r\n  } else if (c === 35) {\r\n    this.url.username = this.base.username;\r\n    this.url.password = this.base.password;\r\n    this.url.host = this.base.host;\r\n    this.url.port = this.base.port;\r\n    this.url.path = this.base.path.slice();\r\n    this.url.query = this.base.query;\r\n    this.url.fragment = \"\";\r\n    this.state = \"fragment\";\r\n  } else if (isSpecial(this.url) && c === 92) {\r\n    this.parseError = true;\r\n    this.state = \"relative slash\";\r\n  } else {\r\n    this.url.username = this.base.username;\r\n    this.url.password = this.base.password;\r\n    this.url.host = this.base.host;\r\n    this.url.port = this.base.port;\r\n    this.url.path = this.base.path.slice(0, this.base.path.length - 1);\r\n\r\n    this.state = \"path\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse relative slash\"] = function parseRelativeSlash(c) {\r\n  if (isSpecial(this.url) && (c === 47 || c === 92)) {\r\n    if (c === 92) {\r\n      this.parseError = true;\r\n    }\r\n    this.state = \"special authority ignore slashes\";\r\n  } else if (c === 47) {\r\n    this.state = \"authority\";\r\n  } else {\r\n    this.url.username = this.base.username;\r\n    this.url.password = this.base.password;\r\n    this.url.host = this.base.host;\r\n    this.url.port = this.base.port;\r\n    this.state = \"path\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse special authority slashes\"] = function parseSpecialAuthoritySlashes(c) {\r\n  if (c === 47 && this.input[this.pointer + 1] === 47) {\r\n    this.state = \"special authority ignore slashes\";\r\n    ++this.pointer;\r\n  } else {\r\n    this.parseError = true;\r\n    this.state = \"special authority ignore slashes\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse special authority ignore slashes\"] = function parseSpecialAuthorityIgnoreSlashes(c) {\r\n  if (c !== 47 && c !== 92) {\r\n    this.state = \"authority\";\r\n    --this.pointer;\r\n  } else {\r\n    this.parseError = true;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse authority\"] = function parseAuthority(c, cStr) {\r\n  if (c === 64) {\r\n    this.parseError = true;\r\n    if (this.atFlag) {\r\n      this.buffer = \"%40\" + this.buffer;\r\n    }\r\n    this.atFlag = true;\r\n\r\n    // careful, this is based on buffer and has its own pointer (this.pointer != pointer) and inner chars\r\n    const len = countSymbols(this.buffer);\r\n    for (let pointer = 0; pointer < len; ++pointer) {\r\n      const codePoint = this.buffer.codePointAt(pointer);\r\n\r\n      if (codePoint === 58 && !this.passwordTokenSeenFlag) {\r\n        this.passwordTokenSeenFlag = true;\r\n        continue;\r\n      }\r\n      const encodedCodePoints = percentEncodeChar(codePoint, isUserinfoPercentEncode);\r\n      if (this.passwordTokenSeenFlag) {\r\n        this.url.password += encodedCodePoints;\r\n      } else {\r\n        this.url.username += encodedCodePoints;\r\n      }\r\n    }\r\n    this.buffer = \"\";\r\n  } else if (isNaN(c) || c === 47 || c === 63 || c === 35 ||\r\n             (isSpecial(this.url) && c === 92)) {\r\n    if (this.atFlag && this.buffer === \"\") {\r\n      this.parseError = true;\r\n      return failure;\r\n    }\r\n    this.pointer -= countSymbols(this.buffer) + 1;\r\n    this.buffer = \"\";\r\n    this.state = \"host\";\r\n  } else {\r\n    this.buffer += cStr;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse hostname\"] =\r\nURLStateMachine.prototype[\"parse host\"] = function parseHostName(c, cStr) {\r\n  if (this.stateOverride && this.url.scheme === \"file\") {\r\n    --this.pointer;\r\n    this.state = \"file host\";\r\n  } else if (c === 58 && !this.arrFlag) {\r\n    if (this.buffer === \"\") {\r\n      this.parseError = true;\r\n      return failure;\r\n    }\r\n\r\n    const host = parseHost(this.buffer, isSpecial(this.url));\r\n    if (host === failure) {\r\n      return failure;\r\n    }\r\n\r\n    this.url.host = host;\r\n    this.buffer = \"\";\r\n    this.state = \"port\";\r\n    if (this.stateOverride === \"hostname\") {\r\n      return false;\r\n    }\r\n  } else if (isNaN(c) || c === 47 || c === 63 || c === 35 ||\r\n             (isSpecial(this.url) && c === 92)) {\r\n    --this.pointer;\r\n    if (isSpecial(this.url) && this.buffer === \"\") {\r\n      this.parseError = true;\r\n      return failure;\r\n    } else if (this.stateOverride && this.buffer === \"\" &&\r\n               (includesCredentials(this.url) || this.url.port !== null)) {\r\n      this.parseError = true;\r\n      return false;\r\n    }\r\n\r\n    const host = parseHost(this.buffer, isSpecial(this.url));\r\n    if (host === failure) {\r\n      return failure;\r\n    }\r\n\r\n    this.url.host = host;\r\n    this.buffer = \"\";\r\n    this.state = \"path start\";\r\n    if (this.stateOverride) {\r\n      return false;\r\n    }\r\n  } else {\r\n    if (c === 91) {\r\n      this.arrFlag = true;\r\n    } else if (c === 93) {\r\n      this.arrFlag = false;\r\n    }\r\n    this.buffer += cStr;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse port\"] = function parsePort(c, cStr) {\r\n  if (isASCIIDigit(c)) {\r\n    this.buffer += cStr;\r\n  } else if (isNaN(c) || c === 47 || c === 63 || c === 35 ||\r\n             (isSpecial(this.url) && c === 92) ||\r\n             this.stateOverride) {\r\n    if (this.buffer !== \"\") {\r\n      const port = parseInt(this.buffer);\r\n      if (port > Math.pow(2, 16) - 1) {\r\n        this.parseError = true;\r\n        return failure;\r\n      }\r\n      this.url.port = port === defaultPort(this.url.scheme) ? null : port;\r\n      this.buffer = \"\";\r\n    }\r\n    if (this.stateOverride) {\r\n      return false;\r\n    }\r\n    this.state = \"path start\";\r\n    --this.pointer;\r\n  } else {\r\n    this.parseError = true;\r\n    return failure;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nconst fileOtherwiseCodePoints = new Set([47, 92, 63, 35]);\r\n\r\nURLStateMachine.prototype[\"parse file\"] = function parseFile(c) {\r\n  this.url.scheme = \"file\";\r\n\r\n  if (c === 47 || c === 92) {\r\n    if (c === 92) {\r\n      this.parseError = true;\r\n    }\r\n    this.state = \"file slash\";\r\n  } else if (this.base !== null && this.base.scheme === \"file\") {\r\n    if (isNaN(c)) {\r\n      this.url.host = this.base.host;\r\n      this.url.path = this.base.path.slice();\r\n      this.url.query = this.base.query;\r\n    } else if (c === 63) {\r\n      this.url.host = this.base.host;\r\n      this.url.path = this.base.path.slice();\r\n      this.url.query = \"\";\r\n      this.state = \"query\";\r\n    } else if (c === 35) {\r\n      this.url.host = this.base.host;\r\n      this.url.path = this.base.path.slice();\r\n      this.url.query = this.base.query;\r\n      this.url.fragment = \"\";\r\n      this.state = \"fragment\";\r\n    } else {\r\n      if (this.input.length - this.pointer - 1 === 0 || // remaining consists of 0 code points\r\n          !isWindowsDriveLetterCodePoints(c, this.input[this.pointer + 1]) ||\r\n          (this.input.length - this.pointer - 1 >= 2 && // remaining has at least 2 code points\r\n           !fileOtherwiseCodePoints.has(this.input[this.pointer + 2]))) {\r\n        this.url.host = this.base.host;\r\n        this.url.path = this.base.path.slice();\r\n        shortenPath(this.url);\r\n      } else {\r\n        this.parseError = true;\r\n      }\r\n\r\n      this.state = \"path\";\r\n      --this.pointer;\r\n    }\r\n  } else {\r\n    this.state = \"path\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse file slash\"] = function parseFileSlash(c) {\r\n  if (c === 47 || c === 92) {\r\n    if (c === 92) {\r\n      this.parseError = true;\r\n    }\r\n    this.state = \"file host\";\r\n  } else {\r\n    if (this.base !== null && this.base.scheme === \"file\") {\r\n      if (isNormalizedWindowsDriveLetterString(this.base.path[0])) {\r\n        this.url.path.push(this.base.path[0]);\r\n      } else {\r\n        this.url.host = this.base.host;\r\n      }\r\n    }\r\n    this.state = \"path\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse file host\"] = function parseFileHost(c, cStr) {\r\n  if (isNaN(c) || c === 47 || c === 92 || c === 63 || c === 35) {\r\n    --this.pointer;\r\n    if (!this.stateOverride && isWindowsDriveLetterString(this.buffer)) {\r\n      this.parseError = true;\r\n      this.state = \"path\";\r\n    } else if (this.buffer === \"\") {\r\n      this.url.host = \"\";\r\n      if (this.stateOverride) {\r\n        return false;\r\n      }\r\n      this.state = \"path start\";\r\n    } else {\r\n      let host = parseHost(this.buffer, isSpecial(this.url));\r\n      if (host === failure) {\r\n        return failure;\r\n      }\r\n      if (host === \"localhost\") {\r\n        host = \"\";\r\n      }\r\n      this.url.host = host;\r\n\r\n      if (this.stateOverride) {\r\n        return false;\r\n      }\r\n\r\n      this.buffer = \"\";\r\n      this.state = \"path start\";\r\n    }\r\n  } else {\r\n    this.buffer += cStr;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse path start\"] = function parsePathStart(c) {\r\n  if (isSpecial(this.url)) {\r\n    if (c === 92) {\r\n      this.parseError = true;\r\n    }\r\n    this.state = \"path\";\r\n\r\n    if (c !== 47 && c !== 92) {\r\n      --this.pointer;\r\n    }\r\n  } else if (!this.stateOverride && c === 63) {\r\n    this.url.query = \"\";\r\n    this.state = \"query\";\r\n  } else if (!this.stateOverride && c === 35) {\r\n    this.url.fragment = \"\";\r\n    this.state = \"fragment\";\r\n  } else if (c !== undefined) {\r\n    this.state = \"path\";\r\n    if (c !== 47) {\r\n      --this.pointer;\r\n    }\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse path\"] = function parsePath(c) {\r\n  if (isNaN(c) || c === 47 || (isSpecial(this.url) && c === 92) ||\r\n      (!this.stateOverride && (c === 63 || c === 35))) {\r\n    if (isSpecial(this.url) && c === 92) {\r\n      this.parseError = true;\r\n    }\r\n\r\n    if (isDoubleDot(this.buffer)) {\r\n      shortenPath(this.url);\r\n      if (c !== 47 && !(isSpecial(this.url) && c === 92)) {\r\n        this.url.path.push(\"\");\r\n      }\r\n    } else if (isSingleDot(this.buffer) && c !== 47 &&\r\n               !(isSpecial(this.url) && c === 92)) {\r\n      this.url.path.push(\"\");\r\n    } else if (!isSingleDot(this.buffer)) {\r\n      if (this.url.scheme === \"file\" && this.url.path.length === 0 && isWindowsDriveLetterString(this.buffer)) {\r\n        if (this.url.host !== \"\" && this.url.host !== null) {\r\n          this.parseError = true;\r\n          this.url.host = \"\";\r\n        }\r\n        this.buffer = this.buffer[0] + \":\";\r\n      }\r\n      this.url.path.push(this.buffer);\r\n    }\r\n    this.buffer = \"\";\r\n    if (this.url.scheme === \"file\" && (c === undefined || c === 63 || c === 35)) {\r\n      while (this.url.path.length > 1 && this.url.path[0] === \"\") {\r\n        this.parseError = true;\r\n        this.url.path.shift();\r\n      }\r\n    }\r\n    if (c === 63) {\r\n      this.url.query = \"\";\r\n      this.state = \"query\";\r\n    }\r\n    if (c === 35) {\r\n      this.url.fragment = \"\";\r\n      this.state = \"fragment\";\r\n    }\r\n  } else {\r\n    // TODO: If c is not a URL code point and not \"%\", parse error.\r\n\r\n    if (c === 37 &&\r\n      (!isASCIIHex(this.input[this.pointer + 1]) ||\r\n        !isASCIIHex(this.input[this.pointer + 2]))) {\r\n      this.parseError = true;\r\n    }\r\n\r\n    this.buffer += percentEncodeChar(c, isPathPercentEncode);\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse cannot-be-a-base-URL path\"] = function parseCannotBeABaseURLPath(c) {\r\n  if (c === 63) {\r\n    this.url.query = \"\";\r\n    this.state = \"query\";\r\n  } else if (c === 35) {\r\n    this.url.fragment = \"\";\r\n    this.state = \"fragment\";\r\n  } else {\r\n    // TODO: Add: not a URL code point\r\n    if (!isNaN(c) && c !== 37) {\r\n      this.parseError = true;\r\n    }\r\n\r\n    if (c === 37 &&\r\n        (!isASCIIHex(this.input[this.pointer + 1]) ||\r\n         !isASCIIHex(this.input[this.pointer + 2]))) {\r\n      this.parseError = true;\r\n    }\r\n\r\n    if (!isNaN(c)) {\r\n      this.url.path[0] = this.url.path[0] + percentEncodeChar(c, isC0ControlPercentEncode);\r\n    }\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse query\"] = function parseQuery(c, cStr) {\r\n  if (isNaN(c) || (!this.stateOverride && c === 35)) {\r\n    if (!isSpecial(this.url) || this.url.scheme === \"ws\" || this.url.scheme === \"wss\") {\r\n      this.encodingOverride = \"utf-8\";\r\n    }\r\n\r\n    const buffer = new Buffer(this.buffer); // TODO: Use encoding override instead\r\n    for (let i = 0; i < buffer.length; ++i) {\r\n      if (buffer[i] < 0x21 || buffer[i] > 0x7E || buffer[i] === 0x22 || buffer[i] === 0x23 ||\r\n          buffer[i] === 0x3C || buffer[i] === 0x3E) {\r\n        this.url.query += percentEncode(buffer[i]);\r\n      } else {\r\n        this.url.query += String.fromCodePoint(buffer[i]);\r\n      }\r\n    }\r\n\r\n    this.buffer = \"\";\r\n    if (c === 35) {\r\n      this.url.fragment = \"\";\r\n      this.state = \"fragment\";\r\n    }\r\n  } else {\r\n    // TODO: If c is not a URL code point and not \"%\", parse error.\r\n    if (c === 37 &&\r\n      (!isASCIIHex(this.input[this.pointer + 1]) ||\r\n        !isASCIIHex(this.input[this.pointer + 2]))) {\r\n      this.parseError = true;\r\n    }\r\n\r\n    this.buffer += cStr;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse fragment\"] = function parseFragment(c) {\r\n  if (isNaN(c)) { // do nothing\r\n  } else if (c === 0x0) {\r\n    this.parseError = true;\r\n  } else {\r\n    // TODO: If c is not a URL code point and not \"%\", parse error.\r\n    if (c === 37 &&\r\n      (!isASCIIHex(this.input[this.pointer + 1]) ||\r\n        !isASCIIHex(this.input[this.pointer + 2]))) {\r\n      this.parseError = true;\r\n    }\r\n\r\n    this.url.fragment += percentEncodeChar(c, isC0ControlPercentEncode);\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nfunction serializeURL(url, excludeFragment) {\r\n  let output = url.scheme + \":\";\r\n  if (url.host !== null) {\r\n    output += \"//\";\r\n\r\n    if (url.username !== \"\" || url.password !== \"\") {\r\n      output += url.username;\r\n      if (url.password !== \"\") {\r\n        output += \":\" + url.password;\r\n      }\r\n      output += \"@\";\r\n    }\r\n\r\n    output += serializeHost(url.host);\r\n\r\n    if (url.port !== null) {\r\n      output += \":\" + url.port;\r\n    }\r\n  } else if (url.host === null && url.scheme === \"file\") {\r\n    output += \"//\";\r\n  }\r\n\r\n  if (url.cannotBeABaseURL) {\r\n    output += url.path[0];\r\n  } else {\r\n    for (const string of url.path) {\r\n      output += \"/\" + string;\r\n    }\r\n  }\r\n\r\n  if (url.query !== null) {\r\n    output += \"?\" + url.query;\r\n  }\r\n\r\n  if (!excludeFragment && url.fragment !== null) {\r\n    output += \"#\" + url.fragment;\r\n  }\r\n\r\n  return output;\r\n}\r\n\r\nfunction serializeOrigin(tuple) {\r\n  let result = tuple.scheme + \"://\";\r\n  result += serializeHost(tuple.host);\r\n\r\n  if (tuple.port !== null) {\r\n    result += \":\" + tuple.port;\r\n  }\r\n\r\n  return result;\r\n}\r\n\r\nmodule.exports.serializeURL = serializeURL;\r\n\r\nmodule.exports.serializeURLOrigin = function (url) {\r\n  // https://url.spec.whatwg.org/#concept-url-origin\r\n  switch (url.scheme) {\r\n    case \"blob\":\r\n      try {\r\n        return module.exports.serializeURLOrigin(module.exports.parseURL(url.path[0]));\r\n      } catch (e) {\r\n        // serializing an opaque origin returns \"null\"\r\n        return \"null\";\r\n      }\r\n    case \"ftp\":\r\n    case \"gopher\":\r\n    case \"http\":\r\n    case \"https\":\r\n    case \"ws\":\r\n    case \"wss\":\r\n      return serializeOrigin({\r\n        scheme: url.scheme,\r\n        host: url.host,\r\n        port: url.port\r\n      });\r\n    case \"file\":\r\n      // spec says \"exercise to the reader\", chrome says \"file://\"\r\n      return \"file://\";\r\n    default:\r\n      // serializing an opaque origin returns \"null\"\r\n      return \"null\";\r\n  }\r\n};\r\n\r\nmodule.exports.basicURLParse = function (input, options) {\r\n  if (options === undefined) {\r\n    options = {};\r\n  }\r\n\r\n  const usm = new URLStateMachine(input, options.baseURL, options.encodingOverride, options.url, options.stateOverride);\r\n  if (usm.failure) {\r\n    return \"failure\";\r\n  }\r\n\r\n  return usm.url;\r\n};\r\n\r\nmodule.exports.setTheUsername = function (url, username) {\r\n  url.username = \"\";\r\n  const decoded = punycode.ucs2.decode(username);\r\n  for (let i = 0; i < decoded.length; ++i) {\r\n    url.username += percentEncodeChar(decoded[i], isUserinfoPercentEncode);\r\n  }\r\n};\r\n\r\nmodule.exports.setThePassword = function (url, password) {\r\n  url.password = \"\";\r\n  const decoded = punycode.ucs2.decode(password);\r\n  for (let i = 0; i < decoded.length; ++i) {\r\n    url.password += percentEncodeChar(decoded[i], isUserinfoPercentEncode);\r\n  }\r\n};\r\n\r\nmodule.exports.serializeHost = serializeHost;\r\n\r\nmodule.exports.cannotHaveAUsernamePasswordPort = cannotHaveAUsernamePasswordPort;\r\n\r\nmodule.exports.serializeInteger = function (integer) {\r\n  return String(integer);\r\n};\r\n\r\nmodule.exports.parseURL = function (input, options) {\r\n  if (options === undefined) {\r\n    options = {};\r\n  }\r\n\r\n  // We don't handle blobs, so this just delegates:\r\n  return module.exports.basicURLParse(input, { baseURL: options.baseURL, encodingOverride: options.encodingOverride });\r\n};\r\n","\"use strict\";\n\nconst conversions = require(\"webidl-conversions\");\nconst utils = require(\"./utils.js\");\nconst Impl = require(\".//URL-impl.js\");\n\nconst impl = utils.implSymbol;\n\nfunction URL(url) {\n  if (!this || this[impl] || !(this instanceof URL)) {\n    throw new TypeError(\"Failed to construct 'URL': Please use the 'new' operator, this DOM object constructor cannot be called as a function.\");\n  }\n  if (arguments.length < 1) {\n    throw new TypeError(\"Failed to construct 'URL': 1 argument required, but only \" + arguments.length + \" present.\");\n  }\n  const args = [];\n  for (let i = 0; i < arguments.length && i < 2; ++i) {\n    args[i] = arguments[i];\n  }\n  args[0] = conversions[\"USVString\"](args[0]);\n  if (args[1] !== undefined) {\n  args[1] = conversions[\"USVString\"](args[1]);\n  }\n\n  module.exports.setup(this, args);\n}\n\nURL.prototype.toJSON = function toJSON() {\n  if (!this || !module.exports.is(this)) {\n    throw new TypeError(\"Illegal invocation\");\n  }\n  const args = [];\n  for (let i = 0; i < arguments.length && i < 0; ++i) {\n    args[i] = arguments[i];\n  }\n  return this[impl].toJSON.apply(this[impl], args);\n};\nObject.defineProperty(URL.prototype, \"href\", {\n  get() {\n    return this[impl].href;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].href = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nURL.prototype.toString = function () {\n  if (!this || !module.exports.is(this)) {\n    throw new TypeError(\"Illegal invocation\");\n  }\n  return this.href;\n};\n\nObject.defineProperty(URL.prototype, \"origin\", {\n  get() {\n    return this[impl].origin;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"protocol\", {\n  get() {\n    return this[impl].protocol;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].protocol = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"username\", {\n  get() {\n    return this[impl].username;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].username = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"password\", {\n  get() {\n    return this[impl].password;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].password = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"host\", {\n  get() {\n    return this[impl].host;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].host = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"hostname\", {\n  get() {\n    return this[impl].hostname;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].hostname = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"port\", {\n  get() {\n    return this[impl].port;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].port = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"pathname\", {\n  get() {\n    return this[impl].pathname;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].pathname = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"search\", {\n  get() {\n    return this[impl].search;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].search = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"hash\", {\n  get() {\n    return this[impl].hash;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].hash = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\n\nmodule.exports = {\n  is(obj) {\n    return !!obj && obj[impl] instanceof Impl.implementation;\n  },\n  create(constructorArgs, privateData) {\n    let obj = Object.create(URL.prototype);\n    this.setup(obj, constructorArgs, privateData);\n    return obj;\n  },\n  setup(obj, constructorArgs, privateData) {\n    if (!privateData) privateData = {};\n    privateData.wrapper = obj;\n\n    obj[impl] = new Impl.implementation(constructorArgs, privateData);\n    obj[impl][utils.wrapperSymbol] = obj;\n  },\n  interface: URL,\n  expose: {\n    Window: { URL: URL },\n    Worker: { URL: URL }\n  }\n};\n\n","\"use strict\";\n\nmodule.exports.mixin = function mixin(target, source) {\n  const keys = Object.getOwnPropertyNames(source);\n  for (let i = 0; i < keys.length; ++i) {\n    Object.defineProperty(target, keys[i], Object.getOwnPropertyDescriptor(source, keys[i]));\n  }\n};\n\nmodule.exports.wrapperSymbol = Symbol(\"wrapper\");\nmodule.exports.implSymbol = Symbol(\"impl\");\n\nmodule.exports.wrapperForImpl = function (impl) {\n  return impl[module.exports.wrapperSymbol];\n};\n\nmodule.exports.implForWrapper = function (wrapper) {\n  return wrapper[module.exports.implSymbol];\n};\n\n","\"use strict\";\nconst usm = require(\"./url-state-machine\");\n\nexports.implementation = class URLImpl {\n  constructor(constructorArgs) {\n    const url = constructorArgs[0];\n    const base = constructorArgs[1];\n\n    let parsedBase = null;\n    if (base !== undefined) {\n      parsedBase = usm.basicURLParse(base);\n      if (parsedBase === \"failure\") {\n        throw new TypeError(\"Invalid base URL\");\n      }\n    }\n\n    const parsedURL = usm.basicURLParse(url, { baseURL: parsedBase });\n    if (parsedURL === \"failure\") {\n      throw new TypeError(\"Invalid URL\");\n    }\n\n    this._url = parsedURL;\n\n    // TODO: query stuff\n  }\n\n  get href() {\n    return usm.serializeURL(this._url);\n  }\n\n  set href(v) {\n    const parsedURL = usm.basicURLParse(v);\n    if (parsedURL === \"failure\") {\n      throw new TypeError(\"Invalid URL\");\n    }\n\n    this._url = parsedURL;\n  }\n\n  get origin() {\n    return usm.serializeURLOrigin(this._url);\n  }\n\n  get protocol() {\n    return this._url.scheme + \":\";\n  }\n\n  set protocol(v) {\n    usm.basicURLParse(v + \":\", { url: this._url, stateOverride: \"scheme start\" });\n  }\n\n  get username() {\n    return this._url.username;\n  }\n\n  set username(v) {\n    if (usm.cannotHaveAUsernamePasswordPort(this._url)) {\n      return;\n    }\n\n    usm.setTheUsername(this._url, v);\n  }\n\n  get password() {\n    return this._url.password;\n  }\n\n  set password(v) {\n    if (usm.cannotHaveAUsernamePasswordPort(this._url)) {\n      return;\n    }\n\n    usm.setThePassword(this._url, v);\n  }\n\n  get host() {\n    const url = this._url;\n\n    if (url.host === null) {\n      return \"\";\n    }\n\n    if (url.port === null) {\n      return usm.serializeHost(url.host);\n    }\n\n    return usm.serializeHost(url.host) + \":\" + usm.serializeInteger(url.port);\n  }\n\n  set host(v) {\n    if (this._url.cannotBeABaseURL) {\n      return;\n    }\n\n    usm.basicURLParse(v, { url: this._url, stateOverride: \"host\" });\n  }\n\n  get hostname() {\n    if (this._url.host === null) {\n      return \"\";\n    }\n\n    return usm.serializeHost(this._url.host);\n  }\n\n  set hostname(v) {\n    if (this._url.cannotBeABaseURL) {\n      return;\n    }\n\n    usm.basicURLParse(v, { url: this._url, stateOverride: \"hostname\" });\n  }\n\n  get port() {\n    if (this._url.port === null) {\n      return \"\";\n    }\n\n    return usm.serializeInteger(this._url.port);\n  }\n\n  set port(v) {\n    if (usm.cannotHaveAUsernamePasswordPort(this._url)) {\n      return;\n    }\n\n    if (v === \"\") {\n      this._url.port = null;\n    } else {\n      usm.basicURLParse(v, { url: this._url, stateOverride: \"port\" });\n    }\n  }\n\n  get pathname() {\n    if (this._url.cannotBeABaseURL) {\n      return this._url.path[0];\n    }\n\n    if (this._url.path.length === 0) {\n      return \"\";\n    }\n\n    return \"/\" + this._url.path.join(\"/\");\n  }\n\n  set pathname(v) {\n    if (this._url.cannotBeABaseURL) {\n      return;\n    }\n\n    this._url.path = [];\n    usm.basicURLParse(v, { url: this._url, stateOverride: \"path start\" });\n  }\n\n  get search() {\n    if (this._url.query === null || this._url.query === \"\") {\n      return \"\";\n    }\n\n    return \"?\" + this._url.query;\n  }\n\n  set search(v) {\n    // TODO: query stuff\n\n    const url = this._url;\n\n    if (v === \"\") {\n      url.query = null;\n      return;\n    }\n\n    const input = v[0] === \"?\" ? v.substring(1) : v;\n    url.query = \"\";\n    usm.basicURLParse(input, { url, stateOverride: \"query\" });\n  }\n\n  get hash() {\n    if (this._url.fragment === null || this._url.fragment === \"\") {\n      return \"\";\n    }\n\n    return \"#\" + this._url.fragment;\n  }\n\n  set hash(v) {\n    if (v === \"\") {\n      this._url.fragment = null;\n      return;\n    }\n\n    const input = v[0] === \"#\" ? v.substring(1) : v;\n    this._url.fragment = \"\";\n    usm.basicURLParse(input, { url: this._url, stateOverride: \"fragment\" });\n  }\n\n  toJSON() {\n    return this.href;\n  }\n};\n","\"use strict\";\n\nexports.URL = require(\"./URL\").interface;\nexports.serializeURL = require(\"./url-state-machine\").serializeURL;\nexports.serializeURLOrigin = require(\"./url-state-machine\").serializeURLOrigin;\nexports.basicURLParse = require(\"./url-state-machine\").basicURLParse;\nexports.setTheUsername = require(\"./url-state-machine\").setTheUsername;\nexports.setThePassword = require(\"./url-state-machine\").setThePassword;\nexports.serializeHost = require(\"./url-state-machine\").serializeHost;\nexports.serializeInteger = require(\"./url-state-machine\").serializeInteger;\nexports.parseURL = require(\"./url-state-machine\").parseURL;\n","import Stream from 'stream';\nimport http from 'http';\nimport Url from 'url';\nimport whatwgUrl from 'whatwg-url';\nimport https from 'https';\nimport zlib from 'zlib';\n\n// Based on https://github.com/tmpvar/jsdom/blob/aa85b2abf07766ff7bf5c1f6daafb3726f2f2db5/lib/jsdom/living/blob.js\n\n// fix for \"Readable\" isn't a named export issue\nconst Readable = Stream.Readable;\n\nconst BUFFER = Symbol('buffer');\nconst TYPE = Symbol('type');\n\nclass Blob {\n\tconstructor() {\n\t\tthis[TYPE] = '';\n\n\t\tconst blobParts = arguments[0];\n\t\tconst options = arguments[1];\n\n\t\tconst buffers = [];\n\t\tlet size = 0;\n\n\t\tif (blobParts) {\n\t\t\tconst a = blobParts;\n\t\t\tconst length = Number(a.length);\n\t\t\tfor (let i = 0; i < length; i++) {\n\t\t\t\tconst element = a[i];\n\t\t\t\tlet buffer;\n\t\t\t\tif (element instanceof Buffer) {\n\t\t\t\t\tbuffer = element;\n\t\t\t\t} else if (ArrayBuffer.isView(element)) {\n\t\t\t\t\tbuffer = Buffer.from(element.buffer, element.byteOffset, element.byteLength);\n\t\t\t\t} else if (element instanceof ArrayBuffer) {\n\t\t\t\t\tbuffer = Buffer.from(element);\n\t\t\t\t} else if (element instanceof Blob) {\n\t\t\t\t\tbuffer = element[BUFFER];\n\t\t\t\t} else {\n\t\t\t\t\tbuffer = Buffer.from(typeof element === 'string' ? element : String(element));\n\t\t\t\t}\n\t\t\t\tsize += buffer.length;\n\t\t\t\tbuffers.push(buffer);\n\t\t\t}\n\t\t}\n\n\t\tthis[BUFFER] = Buffer.concat(buffers);\n\n\t\tlet type = options && options.type !== undefined && String(options.type).toLowerCase();\n\t\tif (type && !/[^\\u0020-\\u007E]/.test(type)) {\n\t\t\tthis[TYPE] = type;\n\t\t}\n\t}\n\tget size() {\n\t\treturn this[BUFFER].length;\n\t}\n\tget type() {\n\t\treturn this[TYPE];\n\t}\n\ttext() {\n\t\treturn Promise.resolve(this[BUFFER].toString());\n\t}\n\tarrayBuffer() {\n\t\tconst buf = this[BUFFER];\n\t\tconst ab = buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength);\n\t\treturn Promise.resolve(ab);\n\t}\n\tstream() {\n\t\tconst readable = new Readable();\n\t\treadable._read = function () {};\n\t\treadable.push(this[BUFFER]);\n\t\treadable.push(null);\n\t\treturn readable;\n\t}\n\ttoString() {\n\t\treturn '[object Blob]';\n\t}\n\tslice() {\n\t\tconst size = this.size;\n\n\t\tconst start = arguments[0];\n\t\tconst end = arguments[1];\n\t\tlet relativeStart, relativeEnd;\n\t\tif (start === undefined) {\n\t\t\trelativeStart = 0;\n\t\t} else if (start < 0) {\n\t\t\trelativeStart = Math.max(size + start, 0);\n\t\t} else {\n\t\t\trelativeStart = Math.min(start, size);\n\t\t}\n\t\tif (end === undefined) {\n\t\t\trelativeEnd = size;\n\t\t} else if (end < 0) {\n\t\t\trelativeEnd = Math.max(size + end, 0);\n\t\t} else {\n\t\t\trelativeEnd = Math.min(end, size);\n\t\t}\n\t\tconst span = Math.max(relativeEnd - relativeStart, 0);\n\n\t\tconst buffer = this[BUFFER];\n\t\tconst slicedBuffer = buffer.slice(relativeStart, relativeStart + span);\n\t\tconst blob = new Blob([], { type: arguments[2] });\n\t\tblob[BUFFER] = slicedBuffer;\n\t\treturn blob;\n\t}\n}\n\nObject.defineProperties(Blob.prototype, {\n\tsize: { enumerable: true },\n\ttype: { enumerable: true },\n\tslice: { enumerable: true }\n});\n\nObject.defineProperty(Blob.prototype, Symbol.toStringTag, {\n\tvalue: 'Blob',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\n/**\n * fetch-error.js\n *\n * FetchError interface for operational errors\n */\n\n/**\n * Create FetchError instance\n *\n * @param   String      message      Error message for human\n * @param   String      type         Error type for machine\n * @param   String      systemError  For Node.js system error\n * @return  FetchError\n */\nfunction FetchError(message, type, systemError) {\n  Error.call(this, message);\n\n  this.message = message;\n  this.type = type;\n\n  // when err.type is `system`, err.code contains system error code\n  if (systemError) {\n    this.code = this.errno = systemError.code;\n  }\n\n  // hide custom error implementation details from end-users\n  Error.captureStackTrace(this, this.constructor);\n}\n\nFetchError.prototype = Object.create(Error.prototype);\nFetchError.prototype.constructor = FetchError;\nFetchError.prototype.name = 'FetchError';\n\nlet convert;\ntry {\n\tconvert = require('encoding').convert;\n} catch (e) {}\n\nconst INTERNALS = Symbol('Body internals');\n\n// fix an issue where \"PassThrough\" isn't a named export for node <10\nconst PassThrough = Stream.PassThrough;\n\n/**\n * Body mixin\n *\n * Ref: https://fetch.spec.whatwg.org/#body\n *\n * @param   Stream  body  Readable stream\n * @param   Object  opts  Response options\n * @return  Void\n */\nfunction Body(body) {\n\tvar _this = this;\n\n\tvar _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n\t    _ref$size = _ref.size;\n\n\tlet size = _ref$size === undefined ? 0 : _ref$size;\n\tvar _ref$timeout = _ref.timeout;\n\tlet timeout = _ref$timeout === undefined ? 0 : _ref$timeout;\n\n\tif (body == null) {\n\t\t// body is undefined or null\n\t\tbody = null;\n\t} else if (isURLSearchParams(body)) {\n\t\t// body is a URLSearchParams\n\t\tbody = Buffer.from(body.toString());\n\t} else if (isBlob(body)) ; else if (Buffer.isBuffer(body)) ; else if (Object.prototype.toString.call(body) === '[object ArrayBuffer]') {\n\t\t// body is ArrayBuffer\n\t\tbody = Buffer.from(body);\n\t} else if (ArrayBuffer.isView(body)) {\n\t\t// body is ArrayBufferView\n\t\tbody = Buffer.from(body.buffer, body.byteOffset, body.byteLength);\n\t} else if (body instanceof Stream) ; else {\n\t\t// none of the above\n\t\t// coerce to string then buffer\n\t\tbody = Buffer.from(String(body));\n\t}\n\tthis[INTERNALS] = {\n\t\tbody,\n\t\tdisturbed: false,\n\t\terror: null\n\t};\n\tthis.size = size;\n\tthis.timeout = timeout;\n\n\tif (body instanceof Stream) {\n\t\tbody.on('error', function (err) {\n\t\t\tconst error = err.name === 'AbortError' ? err : new FetchError(`Invalid response body while trying to fetch ${_this.url}: ${err.message}`, 'system', err);\n\t\t\t_this[INTERNALS].error = error;\n\t\t});\n\t}\n}\n\nBody.prototype = {\n\tget body() {\n\t\treturn this[INTERNALS].body;\n\t},\n\n\tget bodyUsed() {\n\t\treturn this[INTERNALS].disturbed;\n\t},\n\n\t/**\n  * Decode response as ArrayBuffer\n  *\n  * @return  Promise\n  */\n\tarrayBuffer() {\n\t\treturn consumeBody.call(this).then(function (buf) {\n\t\t\treturn buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength);\n\t\t});\n\t},\n\n\t/**\n  * Return raw response as Blob\n  *\n  * @return Promise\n  */\n\tblob() {\n\t\tlet ct = this.headers && this.headers.get('content-type') || '';\n\t\treturn consumeBody.call(this).then(function (buf) {\n\t\t\treturn Object.assign(\n\t\t\t// Prevent copying\n\t\t\tnew Blob([], {\n\t\t\t\ttype: ct.toLowerCase()\n\t\t\t}), {\n\t\t\t\t[BUFFER]: buf\n\t\t\t});\n\t\t});\n\t},\n\n\t/**\n  * Decode response as json\n  *\n  * @return  Promise\n  */\n\tjson() {\n\t\tvar _this2 = this;\n\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\ttry {\n\t\t\t\treturn JSON.parse(buffer.toString());\n\t\t\t} catch (err) {\n\t\t\t\treturn Body.Promise.reject(new FetchError(`invalid json response body at ${_this2.url} reason: ${err.message}`, 'invalid-json'));\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n  * Decode response as text\n  *\n  * @return  Promise\n  */\n\ttext() {\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\treturn buffer.toString();\n\t\t});\n\t},\n\n\t/**\n  * Decode response as buffer (non-spec api)\n  *\n  * @return  Promise\n  */\n\tbuffer() {\n\t\treturn consumeBody.call(this);\n\t},\n\n\t/**\n  * Decode response as text, while automatically detecting the encoding and\n  * trying to decode to UTF-8 (non-spec api)\n  *\n  * @return  Promise\n  */\n\ttextConverted() {\n\t\tvar _this3 = this;\n\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\treturn convertBody(buffer, _this3.headers);\n\t\t});\n\t}\n};\n\n// In browsers, all properties are enumerable.\nObject.defineProperties(Body.prototype, {\n\tbody: { enumerable: true },\n\tbodyUsed: { enumerable: true },\n\tarrayBuffer: { enumerable: true },\n\tblob: { enumerable: true },\n\tjson: { enumerable: true },\n\ttext: { enumerable: true }\n});\n\nBody.mixIn = function (proto) {\n\tfor (const name of Object.getOwnPropertyNames(Body.prototype)) {\n\t\t// istanbul ignore else: future proof\n\t\tif (!(name in proto)) {\n\t\t\tconst desc = Object.getOwnPropertyDescriptor(Body.prototype, name);\n\t\t\tObject.defineProperty(proto, name, desc);\n\t\t}\n\t}\n};\n\n/**\n * Consume and convert an entire Body to a Buffer.\n *\n * Ref: https://fetch.spec.whatwg.org/#concept-body-consume-body\n *\n * @return  Promise\n */\nfunction consumeBody() {\n\tvar _this4 = this;\n\n\tif (this[INTERNALS].disturbed) {\n\t\treturn Body.Promise.reject(new TypeError(`body used already for: ${this.url}`));\n\t}\n\n\tthis[INTERNALS].disturbed = true;\n\n\tif (this[INTERNALS].error) {\n\t\treturn Body.Promise.reject(this[INTERNALS].error);\n\t}\n\n\tlet body = this.body;\n\n\t// body is null\n\tif (body === null) {\n\t\treturn Body.Promise.resolve(Buffer.alloc(0));\n\t}\n\n\t// body is blob\n\tif (isBlob(body)) {\n\t\tbody = body.stream();\n\t}\n\n\t// body is buffer\n\tif (Buffer.isBuffer(body)) {\n\t\treturn Body.Promise.resolve(body);\n\t}\n\n\t// istanbul ignore if: should never happen\n\tif (!(body instanceof Stream)) {\n\t\treturn Body.Promise.resolve(Buffer.alloc(0));\n\t}\n\n\t// body is stream\n\t// get ready to actually consume the body\n\tlet accum = [];\n\tlet accumBytes = 0;\n\tlet abort = false;\n\n\treturn new Body.Promise(function (resolve, reject) {\n\t\tlet resTimeout;\n\n\t\t// allow timeout on slow response body\n\t\tif (_this4.timeout) {\n\t\t\tresTimeout = setTimeout(function () {\n\t\t\t\tabort = true;\n\t\t\t\treject(new FetchError(`Response timeout while trying to fetch ${_this4.url} (over ${_this4.timeout}ms)`, 'body-timeout'));\n\t\t\t}, _this4.timeout);\n\t\t}\n\n\t\t// handle stream errors\n\t\tbody.on('error', function (err) {\n\t\t\tif (err.name === 'AbortError') {\n\t\t\t\t// if the request was aborted, reject with this Error\n\t\t\t\tabort = true;\n\t\t\t\treject(err);\n\t\t\t} else {\n\t\t\t\t// other errors, such as incorrect content-encoding\n\t\t\t\treject(new FetchError(`Invalid response body while trying to fetch ${_this4.url}: ${err.message}`, 'system', err));\n\t\t\t}\n\t\t});\n\n\t\tbody.on('data', function (chunk) {\n\t\t\tif (abort || chunk === null) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (_this4.size && accumBytes + chunk.length > _this4.size) {\n\t\t\t\tabort = true;\n\t\t\t\treject(new FetchError(`content size at ${_this4.url} over limit: ${_this4.size}`, 'max-size'));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\taccumBytes += chunk.length;\n\t\t\taccum.push(chunk);\n\t\t});\n\n\t\tbody.on('end', function () {\n\t\t\tif (abort) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tclearTimeout(resTimeout);\n\n\t\t\ttry {\n\t\t\t\tresolve(Buffer.concat(accum, accumBytes));\n\t\t\t} catch (err) {\n\t\t\t\t// handle streams that have accumulated too much data (issue #414)\n\t\t\t\treject(new FetchError(`Could not create Buffer from response body for ${_this4.url}: ${err.message}`, 'system', err));\n\t\t\t}\n\t\t});\n\t});\n}\n\n/**\n * Detect buffer encoding and convert to target encoding\n * ref: http://www.w3.org/TR/2011/WD-html5-20110113/parsing.html#determining-the-character-encoding\n *\n * @param   Buffer  buffer    Incoming buffer\n * @param   String  encoding  Target encoding\n * @return  String\n */\nfunction convertBody(buffer, headers) {\n\tif (typeof convert !== 'function') {\n\t\tthrow new Error('The package `encoding` must be installed to use the textConverted() function');\n\t}\n\n\tconst ct = headers.get('content-type');\n\tlet charset = 'utf-8';\n\tlet res, str;\n\n\t// header\n\tif (ct) {\n\t\tres = /charset=([^;]*)/i.exec(ct);\n\t}\n\n\t// no charset in content type, peek at response body for at most 1024 bytes\n\tstr = buffer.slice(0, 1024).toString();\n\n\t// html5\n\tif (!res && str) {\n\t\tres = /<meta.+?charset=(['\"])(.+?)\\1/i.exec(str);\n\t}\n\n\t// html4\n\tif (!res && str) {\n\t\tres = /<meta[\\s]+?http-equiv=(['\"])content-type\\1[\\s]+?content=(['\"])(.+?)\\2/i.exec(str);\n\t\tif (!res) {\n\t\t\tres = /<meta[\\s]+?content=(['\"])(.+?)\\1[\\s]+?http-equiv=(['\"])content-type\\3/i.exec(str);\n\t\t\tif (res) {\n\t\t\t\tres.pop(); // drop last quote\n\t\t\t}\n\t\t}\n\n\t\tif (res) {\n\t\t\tres = /charset=(.*)/i.exec(res.pop());\n\t\t}\n\t}\n\n\t// xml\n\tif (!res && str) {\n\t\tres = /<\\?xml.+?encoding=(['\"])(.+?)\\1/i.exec(str);\n\t}\n\n\t// found charset\n\tif (res) {\n\t\tcharset = res.pop();\n\n\t\t// prevent decode issues when sites use incorrect encoding\n\t\t// ref: https://hsivonen.fi/encoding-menu/\n\t\tif (charset === 'gb2312' || charset === 'gbk') {\n\t\t\tcharset = 'gb18030';\n\t\t}\n\t}\n\n\t// turn raw buffers into a single utf-8 buffer\n\treturn convert(buffer, 'UTF-8', charset).toString();\n}\n\n/**\n * Detect a URLSearchParams object\n * ref: https://github.com/bitinn/node-fetch/issues/296#issuecomment-307598143\n *\n * @param   Object  obj     Object to detect by type or brand\n * @return  String\n */\nfunction isURLSearchParams(obj) {\n\t// Duck-typing as a necessary condition.\n\tif (typeof obj !== 'object' || typeof obj.append !== 'function' || typeof obj.delete !== 'function' || typeof obj.get !== 'function' || typeof obj.getAll !== 'function' || typeof obj.has !== 'function' || typeof obj.set !== 'function') {\n\t\treturn false;\n\t}\n\n\t// Brand-checking and more duck-typing as optional condition.\n\treturn obj.constructor.name === 'URLSearchParams' || Object.prototype.toString.call(obj) === '[object URLSearchParams]' || typeof obj.sort === 'function';\n}\n\n/**\n * Check if `obj` is a W3C `Blob` object (which `File` inherits from)\n * @param  {*} obj\n * @return {boolean}\n */\nfunction isBlob(obj) {\n\treturn typeof obj === 'object' && typeof obj.arrayBuffer === 'function' && typeof obj.type === 'string' && typeof obj.stream === 'function' && typeof obj.constructor === 'function' && typeof obj.constructor.name === 'string' && /^(Blob|File)$/.test(obj.constructor.name) && /^(Blob|File)$/.test(obj[Symbol.toStringTag]);\n}\n\n/**\n * Clone body given Res/Req instance\n *\n * @param   Mixed  instance  Response or Request instance\n * @return  Mixed\n */\nfunction clone(instance) {\n\tlet p1, p2;\n\tlet body = instance.body;\n\n\t// don't allow cloning a used body\n\tif (instance.bodyUsed) {\n\t\tthrow new Error('cannot clone body after it is used');\n\t}\n\n\t// check that body is a stream and not form-data object\n\t// note: we can't clone the form-data object without having it as a dependency\n\tif (body instanceof Stream && typeof body.getBoundary !== 'function') {\n\t\t// tee instance body\n\t\tp1 = new PassThrough();\n\t\tp2 = new PassThrough();\n\t\tbody.pipe(p1);\n\t\tbody.pipe(p2);\n\t\t// set instance body to teed body and return the other teed body\n\t\tinstance[INTERNALS].body = p1;\n\t\tbody = p2;\n\t}\n\n\treturn body;\n}\n\n/**\n * Performs the operation \"extract a `Content-Type` value from |object|\" as\n * specified in the specification:\n * https://fetch.spec.whatwg.org/#concept-bodyinit-extract\n *\n * This function assumes that instance.body is present.\n *\n * @param   Mixed  instance  Any options.body input\n */\nfunction extractContentType(body) {\n\tif (body === null) {\n\t\t// body is null\n\t\treturn null;\n\t} else if (typeof body === 'string') {\n\t\t// body is string\n\t\treturn 'text/plain;charset=UTF-8';\n\t} else if (isURLSearchParams(body)) {\n\t\t// body is a URLSearchParams\n\t\treturn 'application/x-www-form-urlencoded;charset=UTF-8';\n\t} else if (isBlob(body)) {\n\t\t// body is blob\n\t\treturn body.type || null;\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\treturn null;\n\t} else if (Object.prototype.toString.call(body) === '[object ArrayBuffer]') {\n\t\t// body is ArrayBuffer\n\t\treturn null;\n\t} else if (ArrayBuffer.isView(body)) {\n\t\t// body is ArrayBufferView\n\t\treturn null;\n\t} else if (typeof body.getBoundary === 'function') {\n\t\t// detect form data input from form-data module\n\t\treturn `multipart/form-data;boundary=${body.getBoundary()}`;\n\t} else if (body instanceof Stream) {\n\t\t// body is stream\n\t\t// can't really do much about this\n\t\treturn null;\n\t} else {\n\t\t// Body constructor defaults other things to string\n\t\treturn 'text/plain;charset=UTF-8';\n\t}\n}\n\n/**\n * The Fetch Standard treats this as if \"total bytes\" is a property on the body.\n * For us, we have to explicitly get it with a function.\n *\n * ref: https://fetch.spec.whatwg.org/#concept-body-total-bytes\n *\n * @param   Body    instance   Instance of Body\n * @return  Number?            Number of bytes, or null if not possible\n */\nfunction getTotalBytes(instance) {\n\tconst body = instance.body;\n\n\n\tif (body === null) {\n\t\t// body is null\n\t\treturn 0;\n\t} else if (isBlob(body)) {\n\t\treturn body.size;\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\treturn body.length;\n\t} else if (body && typeof body.getLengthSync === 'function') {\n\t\t// detect form data input from form-data module\n\t\tif (body._lengthRetrievers && body._lengthRetrievers.length == 0 || // 1.x\n\t\tbody.hasKnownLength && body.hasKnownLength()) {\n\t\t\t// 2.x\n\t\t\treturn body.getLengthSync();\n\t\t}\n\t\treturn null;\n\t} else {\n\t\t// body is stream\n\t\treturn null;\n\t}\n}\n\n/**\n * Write a Body to a Node.js WritableStream (e.g. http.Request) object.\n *\n * @param   Body    instance   Instance of Body\n * @return  Void\n */\nfunction writeToStream(dest, instance) {\n\tconst body = instance.body;\n\n\n\tif (body === null) {\n\t\t// body is null\n\t\tdest.end();\n\t} else if (isBlob(body)) {\n\t\tbody.stream().pipe(dest);\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\tdest.write(body);\n\t\tdest.end();\n\t} else {\n\t\t// body is stream\n\t\tbody.pipe(dest);\n\t}\n}\n\n// expose Promise\nBody.Promise = global.Promise;\n\n/**\n * headers.js\n *\n * Headers class offers convenient helpers\n */\n\nconst invalidTokenRegex = /[^\\^_`a-zA-Z\\-0-9!#$%&'*+.|~]/;\nconst invalidHeaderCharRegex = /[^\\t\\x20-\\x7e\\x80-\\xff]/;\n\nfunction validateName(name) {\n\tname = `${name}`;\n\tif (invalidTokenRegex.test(name) || name === '') {\n\t\tthrow new TypeError(`${name} is not a legal HTTP header name`);\n\t}\n}\n\nfunction validateValue(value) {\n\tvalue = `${value}`;\n\tif (invalidHeaderCharRegex.test(value)) {\n\t\tthrow new TypeError(`${value} is not a legal HTTP header value`);\n\t}\n}\n\n/**\n * Find the key in the map object given a header name.\n *\n * Returns undefined if not found.\n *\n * @param   String  name  Header name\n * @return  String|Undefined\n */\nfunction find(map, name) {\n\tname = name.toLowerCase();\n\tfor (const key in map) {\n\t\tif (key.toLowerCase() === name) {\n\t\t\treturn key;\n\t\t}\n\t}\n\treturn undefined;\n}\n\nconst MAP = Symbol('map');\nclass Headers {\n\t/**\n  * Headers class\n  *\n  * @param   Object  headers  Response headers\n  * @return  Void\n  */\n\tconstructor() {\n\t\tlet init = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : undefined;\n\n\t\tthis[MAP] = Object.create(null);\n\n\t\tif (init instanceof Headers) {\n\t\t\tconst rawHeaders = init.raw();\n\t\t\tconst headerNames = Object.keys(rawHeaders);\n\n\t\t\tfor (const headerName of headerNames) {\n\t\t\t\tfor (const value of rawHeaders[headerName]) {\n\t\t\t\t\tthis.append(headerName, value);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\t// We don't worry about converting prop to ByteString here as append()\n\t\t// will handle it.\n\t\tif (init == null) ; else if (typeof init === 'object') {\n\t\t\tconst method = init[Symbol.iterator];\n\t\t\tif (method != null) {\n\t\t\t\tif (typeof method !== 'function') {\n\t\t\t\t\tthrow new TypeError('Header pairs must be iterable');\n\t\t\t\t}\n\n\t\t\t\t// sequence<sequence<ByteString>>\n\t\t\t\t// Note: per spec we have to first exhaust the lists then process them\n\t\t\t\tconst pairs = [];\n\t\t\t\tfor (const pair of init) {\n\t\t\t\t\tif (typeof pair !== 'object' || typeof pair[Symbol.iterator] !== 'function') {\n\t\t\t\t\t\tthrow new TypeError('Each header pair must be iterable');\n\t\t\t\t\t}\n\t\t\t\t\tpairs.push(Array.from(pair));\n\t\t\t\t}\n\n\t\t\t\tfor (const pair of pairs) {\n\t\t\t\t\tif (pair.length !== 2) {\n\t\t\t\t\t\tthrow new TypeError('Each header pair must be a name/value tuple');\n\t\t\t\t\t}\n\t\t\t\t\tthis.append(pair[0], pair[1]);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// record<ByteString, ByteString>\n\t\t\t\tfor (const key of Object.keys(init)) {\n\t\t\t\t\tconst value = init[key];\n\t\t\t\t\tthis.append(key, value);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthrow new TypeError('Provided initializer must be an object');\n\t\t}\n\t}\n\n\t/**\n  * Return combined header value given name\n  *\n  * @param   String  name  Header name\n  * @return  Mixed\n  */\n\tget(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key === undefined) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this[MAP][key].join(', ');\n\t}\n\n\t/**\n  * Iterate over all headers\n  *\n  * @param   Function  callback  Executed for each item with parameters (value, name, thisArg)\n  * @param   Boolean   thisArg   `this` context for callback function\n  * @return  Void\n  */\n\tforEach(callback) {\n\t\tlet thisArg = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\n\t\tlet pairs = getHeaders(this);\n\t\tlet i = 0;\n\t\twhile (i < pairs.length) {\n\t\t\tvar _pairs$i = pairs[i];\n\t\t\tconst name = _pairs$i[0],\n\t\t\t      value = _pairs$i[1];\n\n\t\t\tcallback.call(thisArg, value, name, this);\n\t\t\tpairs = getHeaders(this);\n\t\t\ti++;\n\t\t}\n\t}\n\n\t/**\n  * Overwrite header values given name\n  *\n  * @param   String  name   Header name\n  * @param   String  value  Header value\n  * @return  Void\n  */\n\tset(name, value) {\n\t\tname = `${name}`;\n\t\tvalue = `${value}`;\n\t\tvalidateName(name);\n\t\tvalidateValue(value);\n\t\tconst key = find(this[MAP], name);\n\t\tthis[MAP][key !== undefined ? key : name] = [value];\n\t}\n\n\t/**\n  * Append a value onto existing header\n  *\n  * @param   String  name   Header name\n  * @param   String  value  Header value\n  * @return  Void\n  */\n\tappend(name, value) {\n\t\tname = `${name}`;\n\t\tvalue = `${value}`;\n\t\tvalidateName(name);\n\t\tvalidateValue(value);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key !== undefined) {\n\t\t\tthis[MAP][key].push(value);\n\t\t} else {\n\t\t\tthis[MAP][name] = [value];\n\t\t}\n\t}\n\n\t/**\n  * Check for header name existence\n  *\n  * @param   String   name  Header name\n  * @return  Boolean\n  */\n\thas(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\treturn find(this[MAP], name) !== undefined;\n\t}\n\n\t/**\n  * Delete all header values given name\n  *\n  * @param   String  name  Header name\n  * @return  Void\n  */\n\tdelete(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key !== undefined) {\n\t\t\tdelete this[MAP][key];\n\t\t}\n\t}\n\n\t/**\n  * Return raw headers (non-spec api)\n  *\n  * @return  Object\n  */\n\traw() {\n\t\treturn this[MAP];\n\t}\n\n\t/**\n  * Get an iterator on keys.\n  *\n  * @return  Iterator\n  */\n\tkeys() {\n\t\treturn createHeadersIterator(this, 'key');\n\t}\n\n\t/**\n  * Get an iterator on values.\n  *\n  * @return  Iterator\n  */\n\tvalues() {\n\t\treturn createHeadersIterator(this, 'value');\n\t}\n\n\t/**\n  * Get an iterator on entries.\n  *\n  * This is the default iterator of the Headers object.\n  *\n  * @return  Iterator\n  */\n\t[Symbol.iterator]() {\n\t\treturn createHeadersIterator(this, 'key+value');\n\t}\n}\nHeaders.prototype.entries = Headers.prototype[Symbol.iterator];\n\nObject.defineProperty(Headers.prototype, Symbol.toStringTag, {\n\tvalue: 'Headers',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nObject.defineProperties(Headers.prototype, {\n\tget: { enumerable: true },\n\tforEach: { enumerable: true },\n\tset: { enumerable: true },\n\tappend: { enumerable: true },\n\thas: { enumerable: true },\n\tdelete: { enumerable: true },\n\tkeys: { enumerable: true },\n\tvalues: { enumerable: true },\n\tentries: { enumerable: true }\n});\n\nfunction getHeaders(headers) {\n\tlet kind = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'key+value';\n\n\tconst keys = Object.keys(headers[MAP]).sort();\n\treturn keys.map(kind === 'key' ? function (k) {\n\t\treturn k.toLowerCase();\n\t} : kind === 'value' ? function (k) {\n\t\treturn headers[MAP][k].join(', ');\n\t} : function (k) {\n\t\treturn [k.toLowerCase(), headers[MAP][k].join(', ')];\n\t});\n}\n\nconst INTERNAL = Symbol('internal');\n\nfunction createHeadersIterator(target, kind) {\n\tconst iterator = Object.create(HeadersIteratorPrototype);\n\titerator[INTERNAL] = {\n\t\ttarget,\n\t\tkind,\n\t\tindex: 0\n\t};\n\treturn iterator;\n}\n\nconst HeadersIteratorPrototype = Object.setPrototypeOf({\n\tnext() {\n\t\t// istanbul ignore if\n\t\tif (!this || Object.getPrototypeOf(this) !== HeadersIteratorPrototype) {\n\t\t\tthrow new TypeError('Value of `this` is not a HeadersIterator');\n\t\t}\n\n\t\tvar _INTERNAL = this[INTERNAL];\n\t\tconst target = _INTERNAL.target,\n\t\t      kind = _INTERNAL.kind,\n\t\t      index = _INTERNAL.index;\n\n\t\tconst values = getHeaders(target, kind);\n\t\tconst len = values.length;\n\t\tif (index >= len) {\n\t\t\treturn {\n\t\t\t\tvalue: undefined,\n\t\t\t\tdone: true\n\t\t\t};\n\t\t}\n\n\t\tthis[INTERNAL].index = index + 1;\n\n\t\treturn {\n\t\t\tvalue: values[index],\n\t\t\tdone: false\n\t\t};\n\t}\n}, Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));\n\nObject.defineProperty(HeadersIteratorPrototype, Symbol.toStringTag, {\n\tvalue: 'HeadersIterator',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\n/**\n * Export the Headers object in a form that Node.js can consume.\n *\n * @param   Headers  headers\n * @return  Object\n */\nfunction exportNodeCompatibleHeaders(headers) {\n\tconst obj = Object.assign({ __proto__: null }, headers[MAP]);\n\n\t// http.request() only supports string as Host header. This hack makes\n\t// specifying custom Host header possible.\n\tconst hostHeaderKey = find(headers[MAP], 'Host');\n\tif (hostHeaderKey !== undefined) {\n\t\tobj[hostHeaderKey] = obj[hostHeaderKey][0];\n\t}\n\n\treturn obj;\n}\n\n/**\n * Create a Headers object from an object of headers, ignoring those that do\n * not conform to HTTP grammar productions.\n *\n * @param   Object  obj  Object of headers\n * @return  Headers\n */\nfunction createHeadersLenient(obj) {\n\tconst headers = new Headers();\n\tfor (const name of Object.keys(obj)) {\n\t\tif (invalidTokenRegex.test(name)) {\n\t\t\tcontinue;\n\t\t}\n\t\tif (Array.isArray(obj[name])) {\n\t\t\tfor (const val of obj[name]) {\n\t\t\t\tif (invalidHeaderCharRegex.test(val)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (headers[MAP][name] === undefined) {\n\t\t\t\t\theaders[MAP][name] = [val];\n\t\t\t\t} else {\n\t\t\t\t\theaders[MAP][name].push(val);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (!invalidHeaderCharRegex.test(obj[name])) {\n\t\t\theaders[MAP][name] = [obj[name]];\n\t\t}\n\t}\n\treturn headers;\n}\n\nconst INTERNALS$1 = Symbol('Response internals');\n\n// fix an issue where \"STATUS_CODES\" aren't a named export for node <10\nconst STATUS_CODES = http.STATUS_CODES;\n\n/**\n * Response class\n *\n * @param   Stream  body  Readable stream\n * @param   Object  opts  Response options\n * @return  Void\n */\nclass Response {\n\tconstructor() {\n\t\tlet body = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\t\tlet opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\t\tBody.call(this, body, opts);\n\n\t\tconst status = opts.status || 200;\n\t\tconst headers = new Headers(opts.headers);\n\n\t\tif (body != null && !headers.has('Content-Type')) {\n\t\t\tconst contentType = extractContentType(body);\n\t\t\tif (contentType) {\n\t\t\t\theaders.append('Content-Type', contentType);\n\t\t\t}\n\t\t}\n\n\t\tthis[INTERNALS$1] = {\n\t\t\turl: opts.url,\n\t\t\tstatus,\n\t\t\tstatusText: opts.statusText || STATUS_CODES[status],\n\t\t\theaders,\n\t\t\tcounter: opts.counter\n\t\t};\n\t}\n\n\tget url() {\n\t\treturn this[INTERNALS$1].url || '';\n\t}\n\n\tget status() {\n\t\treturn this[INTERNALS$1].status;\n\t}\n\n\t/**\n  * Convenience property representing if the request ended normally\n  */\n\tget ok() {\n\t\treturn this[INTERNALS$1].status >= 200 && this[INTERNALS$1].status < 300;\n\t}\n\n\tget redirected() {\n\t\treturn this[INTERNALS$1].counter > 0;\n\t}\n\n\tget statusText() {\n\t\treturn this[INTERNALS$1].statusText;\n\t}\n\n\tget headers() {\n\t\treturn this[INTERNALS$1].headers;\n\t}\n\n\t/**\n  * Clone this response\n  *\n  * @return  Response\n  */\n\tclone() {\n\t\treturn new Response(clone(this), {\n\t\t\turl: this.url,\n\t\t\tstatus: this.status,\n\t\t\tstatusText: this.statusText,\n\t\t\theaders: this.headers,\n\t\t\tok: this.ok,\n\t\t\tredirected: this.redirected\n\t\t});\n\t}\n}\n\nBody.mixIn(Response.prototype);\n\nObject.defineProperties(Response.prototype, {\n\turl: { enumerable: true },\n\tstatus: { enumerable: true },\n\tok: { enumerable: true },\n\tredirected: { enumerable: true },\n\tstatusText: { enumerable: true },\n\theaders: { enumerable: true },\n\tclone: { enumerable: true }\n});\n\nObject.defineProperty(Response.prototype, Symbol.toStringTag, {\n\tvalue: 'Response',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nconst INTERNALS$2 = Symbol('Request internals');\nconst URL = Url.URL || whatwgUrl.URL;\n\n// fix an issue where \"format\", \"parse\" aren't a named export for node <10\nconst parse_url = Url.parse;\nconst format_url = Url.format;\n\n/**\n * Wrapper around `new URL` to handle arbitrary URLs\n *\n * @param  {string} urlStr\n * @return {void}\n */\nfunction parseURL(urlStr) {\n\t/*\n \tCheck whether the URL is absolute or not\n \t\tScheme: https://tools.ietf.org/html/rfc3986#section-3.1\n \tAbsolute URL: https://tools.ietf.org/html/rfc3986#section-4.3\n */\n\tif (/^[a-zA-Z][a-zA-Z\\d+\\-.]*:/.exec(urlStr)) {\n\t\turlStr = new URL(urlStr).toString();\n\t}\n\n\t// Fallback to old implementation for arbitrary URLs\n\treturn parse_url(urlStr);\n}\n\nconst streamDestructionSupported = 'destroy' in Stream.Readable.prototype;\n\n/**\n * Check if a value is an instance of Request.\n *\n * @param   Mixed   input\n * @return  Boolean\n */\nfunction isRequest(input) {\n\treturn typeof input === 'object' && typeof input[INTERNALS$2] === 'object';\n}\n\nfunction isAbortSignal(signal) {\n\tconst proto = signal && typeof signal === 'object' && Object.getPrototypeOf(signal);\n\treturn !!(proto && proto.constructor.name === 'AbortSignal');\n}\n\n/**\n * Request class\n *\n * @param   Mixed   input  Url or Request instance\n * @param   Object  init   Custom options\n * @return  Void\n */\nclass Request {\n\tconstructor(input) {\n\t\tlet init = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\t\tlet parsedURL;\n\n\t\t// normalize input\n\t\tif (!isRequest(input)) {\n\t\t\tif (input && input.href) {\n\t\t\t\t// in order to support Node.js' Url objects; though WHATWG's URL objects\n\t\t\t\t// will fall into this branch also (since their `toString()` will return\n\t\t\t\t// `href` property anyway)\n\t\t\t\tparsedURL = parseURL(input.href);\n\t\t\t} else {\n\t\t\t\t// coerce input to a string before attempting to parse\n\t\t\t\tparsedURL = parseURL(`${input}`);\n\t\t\t}\n\t\t\tinput = {};\n\t\t} else {\n\t\t\tparsedURL = parseURL(input.url);\n\t\t}\n\n\t\tlet method = init.method || input.method || 'GET';\n\t\tmethod = method.toUpperCase();\n\n\t\tif ((init.body != null || isRequest(input) && input.body !== null) && (method === 'GET' || method === 'HEAD')) {\n\t\t\tthrow new TypeError('Request with GET/HEAD method cannot have body');\n\t\t}\n\n\t\tlet inputBody = init.body != null ? init.body : isRequest(input) && input.body !== null ? clone(input) : null;\n\n\t\tBody.call(this, inputBody, {\n\t\t\ttimeout: init.timeout || input.timeout || 0,\n\t\t\tsize: init.size || input.size || 0\n\t\t});\n\n\t\tconst headers = new Headers(init.headers || input.headers || {});\n\n\t\tif (inputBody != null && !headers.has('Content-Type')) {\n\t\t\tconst contentType = extractContentType(inputBody);\n\t\t\tif (contentType) {\n\t\t\t\theaders.append('Content-Type', contentType);\n\t\t\t}\n\t\t}\n\n\t\tlet signal = isRequest(input) ? input.signal : null;\n\t\tif ('signal' in init) signal = init.signal;\n\n\t\tif (signal != null && !isAbortSignal(signal)) {\n\t\t\tthrow new TypeError('Expected signal to be an instanceof AbortSignal');\n\t\t}\n\n\t\tthis[INTERNALS$2] = {\n\t\t\tmethod,\n\t\t\tredirect: init.redirect || input.redirect || 'follow',\n\t\t\theaders,\n\t\t\tparsedURL,\n\t\t\tsignal\n\t\t};\n\n\t\t// node-fetch-only options\n\t\tthis.follow = init.follow !== undefined ? init.follow : input.follow !== undefined ? input.follow : 20;\n\t\tthis.compress = init.compress !== undefined ? init.compress : input.compress !== undefined ? input.compress : true;\n\t\tthis.counter = init.counter || input.counter || 0;\n\t\tthis.agent = init.agent || input.agent;\n\t}\n\n\tget method() {\n\t\treturn this[INTERNALS$2].method;\n\t}\n\n\tget url() {\n\t\treturn format_url(this[INTERNALS$2].parsedURL);\n\t}\n\n\tget headers() {\n\t\treturn this[INTERNALS$2].headers;\n\t}\n\n\tget redirect() {\n\t\treturn this[INTERNALS$2].redirect;\n\t}\n\n\tget signal() {\n\t\treturn this[INTERNALS$2].signal;\n\t}\n\n\t/**\n  * Clone this request\n  *\n  * @return  Request\n  */\n\tclone() {\n\t\treturn new Request(this);\n\t}\n}\n\nBody.mixIn(Request.prototype);\n\nObject.defineProperty(Request.prototype, Symbol.toStringTag, {\n\tvalue: 'Request',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nObject.defineProperties(Request.prototype, {\n\tmethod: { enumerable: true },\n\turl: { enumerable: true },\n\theaders: { enumerable: true },\n\tredirect: { enumerable: true },\n\tclone: { enumerable: true },\n\tsignal: { enumerable: true }\n});\n\n/**\n * Convert a Request to Node.js http request options.\n *\n * @param   Request  A Request instance\n * @return  Object   The options object to be passed to http.request\n */\nfunction getNodeRequestOptions(request) {\n\tconst parsedURL = request[INTERNALS$2].parsedURL;\n\tconst headers = new Headers(request[INTERNALS$2].headers);\n\n\t// fetch step 1.3\n\tif (!headers.has('Accept')) {\n\t\theaders.set('Accept', '*/*');\n\t}\n\n\t// Basic fetch\n\tif (!parsedURL.protocol || !parsedURL.hostname) {\n\t\tthrow new TypeError('Only absolute URLs are supported');\n\t}\n\n\tif (!/^https?:$/.test(parsedURL.protocol)) {\n\t\tthrow new TypeError('Only HTTP(S) protocols are supported');\n\t}\n\n\tif (request.signal && request.body instanceof Stream.Readable && !streamDestructionSupported) {\n\t\tthrow new Error('Cancellation of streamed requests with AbortSignal is not supported in node < 8');\n\t}\n\n\t// HTTP-network-or-cache fetch steps 2.4-2.7\n\tlet contentLengthValue = null;\n\tif (request.body == null && /^(POST|PUT)$/i.test(request.method)) {\n\t\tcontentLengthValue = '0';\n\t}\n\tif (request.body != null) {\n\t\tconst totalBytes = getTotalBytes(request);\n\t\tif (typeof totalBytes === 'number') {\n\t\t\tcontentLengthValue = String(totalBytes);\n\t\t}\n\t}\n\tif (contentLengthValue) {\n\t\theaders.set('Content-Length', contentLengthValue);\n\t}\n\n\t// HTTP-network-or-cache fetch step 2.11\n\tif (!headers.has('User-Agent')) {\n\t\theaders.set('User-Agent', 'node-fetch/1.0 (+https://github.com/bitinn/node-fetch)');\n\t}\n\n\t// HTTP-network-or-cache fetch step 2.15\n\tif (request.compress && !headers.has('Accept-Encoding')) {\n\t\theaders.set('Accept-Encoding', 'gzip,deflate');\n\t}\n\n\tlet agent = request.agent;\n\tif (typeof agent === 'function') {\n\t\tagent = agent(parsedURL);\n\t}\n\n\t// HTTP-network fetch step 4.2\n\t// chunked encoding is handled by Node.js\n\n\treturn Object.assign({}, parsedURL, {\n\t\tmethod: request.method,\n\t\theaders: exportNodeCompatibleHeaders(headers),\n\t\tagent\n\t});\n}\n\n/**\n * abort-error.js\n *\n * AbortError interface for cancelled requests\n */\n\n/**\n * Create AbortError instance\n *\n * @param   String      message      Error message for human\n * @return  AbortError\n */\nfunction AbortError(message) {\n  Error.call(this, message);\n\n  this.type = 'aborted';\n  this.message = message;\n\n  // hide custom error implementation details from end-users\n  Error.captureStackTrace(this, this.constructor);\n}\n\nAbortError.prototype = Object.create(Error.prototype);\nAbortError.prototype.constructor = AbortError;\nAbortError.prototype.name = 'AbortError';\n\nconst URL$1 = Url.URL || whatwgUrl.URL;\n\n// fix an issue where \"PassThrough\", \"resolve\" aren't a named export for node <10\nconst PassThrough$1 = Stream.PassThrough;\n\nconst isDomainOrSubdomain = function isDomainOrSubdomain(destination, original) {\n\tconst orig = new URL$1(original).hostname;\n\tconst dest = new URL$1(destination).hostname;\n\n\treturn orig === dest || orig[orig.length - dest.length - 1] === '.' && orig.endsWith(dest);\n};\n\n/**\n * isSameProtocol reports whether the two provided URLs use the same protocol.\n *\n * Both domains must already be in canonical form.\n * @param {string|URL} original\n * @param {string|URL} destination\n */\nconst isSameProtocol = function isSameProtocol(destination, original) {\n\tconst orig = new URL$1(original).protocol;\n\tconst dest = new URL$1(destination).protocol;\n\n\treturn orig === dest;\n};\n\n/**\n * Fetch function\n *\n * @param   Mixed    url   Absolute url or Request instance\n * @param   Object   opts  Fetch options\n * @return  Promise\n */\nfunction fetch(url, opts) {\n\n\t// allow custom promise\n\tif (!fetch.Promise) {\n\t\tthrow new Error('native promise missing, set fetch.Promise to your favorite alternative');\n\t}\n\n\tBody.Promise = fetch.Promise;\n\n\t// wrap http.request into fetch\n\treturn new fetch.Promise(function (resolve, reject) {\n\t\t// build request object\n\t\tconst request = new Request(url, opts);\n\t\tconst options = getNodeRequestOptions(request);\n\n\t\tconst send = (options.protocol === 'https:' ? https : http).request;\n\t\tconst signal = request.signal;\n\n\t\tlet response = null;\n\n\t\tconst abort = function abort() {\n\t\t\tlet error = new AbortError('The user aborted a request.');\n\t\t\treject(error);\n\t\t\tif (request.body && request.body instanceof Stream.Readable) {\n\t\t\t\tdestroyStream(request.body, error);\n\t\t\t}\n\t\t\tif (!response || !response.body) return;\n\t\t\tresponse.body.emit('error', error);\n\t\t};\n\n\t\tif (signal && signal.aborted) {\n\t\t\tabort();\n\t\t\treturn;\n\t\t}\n\n\t\tconst abortAndFinalize = function abortAndFinalize() {\n\t\t\tabort();\n\t\t\tfinalize();\n\t\t};\n\n\t\t// send request\n\t\tconst req = send(options);\n\t\tlet reqTimeout;\n\n\t\tif (signal) {\n\t\t\tsignal.addEventListener('abort', abortAndFinalize);\n\t\t}\n\n\t\tfunction finalize() {\n\t\t\treq.abort();\n\t\t\tif (signal) signal.removeEventListener('abort', abortAndFinalize);\n\t\t\tclearTimeout(reqTimeout);\n\t\t}\n\n\t\tif (request.timeout) {\n\t\t\treq.once('socket', function (socket) {\n\t\t\t\treqTimeout = setTimeout(function () {\n\t\t\t\t\treject(new FetchError(`network timeout at: ${request.url}`, 'request-timeout'));\n\t\t\t\t\tfinalize();\n\t\t\t\t}, request.timeout);\n\t\t\t});\n\t\t}\n\n\t\treq.on('error', function (err) {\n\t\t\treject(new FetchError(`request to ${request.url} failed, reason: ${err.message}`, 'system', err));\n\n\t\t\tif (response && response.body) {\n\t\t\t\tdestroyStream(response.body, err);\n\t\t\t}\n\n\t\t\tfinalize();\n\t\t});\n\n\t\tfixResponseChunkedTransferBadEnding(req, function (err) {\n\t\t\tif (signal && signal.aborted) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (response && response.body) {\n\t\t\t\tdestroyStream(response.body, err);\n\t\t\t}\n\t\t});\n\n\t\t/* c8 ignore next 18 */\n\t\tif (parseInt(process.version.substring(1)) < 14) {\n\t\t\t// Before Node.js 14, pipeline() does not fully support async iterators and does not always\n\t\t\t// properly handle when the socket close/end events are out of order.\n\t\t\treq.on('socket', function (s) {\n\t\t\t\ts.addListener('close', function (hadError) {\n\t\t\t\t\t// if a data listener is still present we didn't end cleanly\n\t\t\t\t\tconst hasDataListener = s.listenerCount('data') > 0;\n\n\t\t\t\t\t// if end happened before close but the socket didn't emit an error, do it now\n\t\t\t\t\tif (response && hasDataListener && !hadError && !(signal && signal.aborted)) {\n\t\t\t\t\t\tconst err = new Error('Premature close');\n\t\t\t\t\t\terr.code = 'ERR_STREAM_PREMATURE_CLOSE';\n\t\t\t\t\t\tresponse.body.emit('error', err);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\treq.on('response', function (res) {\n\t\t\tclearTimeout(reqTimeout);\n\n\t\t\tconst headers = createHeadersLenient(res.headers);\n\n\t\t\t// HTTP fetch step 5\n\t\t\tif (fetch.isRedirect(res.statusCode)) {\n\t\t\t\t// HTTP fetch step 5.2\n\t\t\t\tconst location = headers.get('Location');\n\n\t\t\t\t// HTTP fetch step 5.3\n\t\t\t\tlet locationURL = null;\n\t\t\t\ttry {\n\t\t\t\t\tlocationURL = location === null ? null : new URL$1(location, request.url).toString();\n\t\t\t\t} catch (err) {\n\t\t\t\t\t// error here can only be invalid URL in Location: header\n\t\t\t\t\t// do not throw when options.redirect == manual\n\t\t\t\t\t// let the user extract the errorneous redirect URL\n\t\t\t\t\tif (request.redirect !== 'manual') {\n\t\t\t\t\t\treject(new FetchError(`uri requested responds with an invalid redirect URL: ${location}`, 'invalid-redirect'));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// HTTP fetch step 5.5\n\t\t\t\tswitch (request.redirect) {\n\t\t\t\t\tcase 'error':\n\t\t\t\t\t\treject(new FetchError(`uri requested responds with a redirect, redirect mode is set to error: ${request.url}`, 'no-redirect'));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t\tcase 'manual':\n\t\t\t\t\t\t// node-fetch-specific step: make manual redirect a bit easier to use by setting the Location header value to the resolved URL.\n\t\t\t\t\t\tif (locationURL !== null) {\n\t\t\t\t\t\t\t// handle corrupted header\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\theaders.set('Location', locationURL);\n\t\t\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\t\t\t// istanbul ignore next: nodejs server prevent invalid response headers, we can't test this through normal request\n\t\t\t\t\t\t\t\treject(err);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'follow':\n\t\t\t\t\t\t// HTTP-redirect fetch step 2\n\t\t\t\t\t\tif (locationURL === null) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 5\n\t\t\t\t\t\tif (request.counter >= request.follow) {\n\t\t\t\t\t\t\treject(new FetchError(`maximum redirect reached at: ${request.url}`, 'max-redirect'));\n\t\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 6 (counter increment)\n\t\t\t\t\t\t// Create a new Request object.\n\t\t\t\t\t\tconst requestOpts = {\n\t\t\t\t\t\t\theaders: new Headers(request.headers),\n\t\t\t\t\t\t\tfollow: request.follow,\n\t\t\t\t\t\t\tcounter: request.counter + 1,\n\t\t\t\t\t\t\tagent: request.agent,\n\t\t\t\t\t\t\tcompress: request.compress,\n\t\t\t\t\t\t\tmethod: request.method,\n\t\t\t\t\t\t\tbody: request.body,\n\t\t\t\t\t\t\tsignal: request.signal,\n\t\t\t\t\t\t\ttimeout: request.timeout,\n\t\t\t\t\t\t\tsize: request.size\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tif (!isDomainOrSubdomain(request.url, locationURL) || !isSameProtocol(request.url, locationURL)) {\n\t\t\t\t\t\t\tfor (const name of ['authorization', 'www-authenticate', 'cookie', 'cookie2']) {\n\t\t\t\t\t\t\t\trequestOpts.headers.delete(name);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 9\n\t\t\t\t\t\tif (res.statusCode !== 303 && request.body && getTotalBytes(request) === null) {\n\t\t\t\t\t\t\treject(new FetchError('Cannot follow redirect with body being a readable stream', 'unsupported-redirect'));\n\t\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 11\n\t\t\t\t\t\tif (res.statusCode === 303 || (res.statusCode === 301 || res.statusCode === 302) && request.method === 'POST') {\n\t\t\t\t\t\t\trequestOpts.method = 'GET';\n\t\t\t\t\t\t\trequestOpts.body = undefined;\n\t\t\t\t\t\t\trequestOpts.headers.delete('content-length');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 15\n\t\t\t\t\t\tresolve(fetch(new Request(locationURL, requestOpts)));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// prepare response\n\t\t\tres.once('end', function () {\n\t\t\t\tif (signal) signal.removeEventListener('abort', abortAndFinalize);\n\t\t\t});\n\t\t\tlet body = res.pipe(new PassThrough$1());\n\n\t\t\tconst response_options = {\n\t\t\t\turl: request.url,\n\t\t\t\tstatus: res.statusCode,\n\t\t\t\tstatusText: res.statusMessage,\n\t\t\t\theaders: headers,\n\t\t\t\tsize: request.size,\n\t\t\t\ttimeout: request.timeout,\n\t\t\t\tcounter: request.counter\n\t\t\t};\n\n\t\t\t// HTTP-network fetch step 12.1.1.3\n\t\t\tconst codings = headers.get('Content-Encoding');\n\n\t\t\t// HTTP-network fetch step 12.1.1.4: handle content codings\n\n\t\t\t// in following scenarios we ignore compression support\n\t\t\t// 1. compression support is disabled\n\t\t\t// 2. HEAD request\n\t\t\t// 3. no Content-Encoding header\n\t\t\t// 4. no content response (204)\n\t\t\t// 5. content not modified response (304)\n\t\t\tif (!request.compress || request.method === 'HEAD' || codings === null || res.statusCode === 204 || res.statusCode === 304) {\n\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// For Node v6+\n\t\t\t// Be less strict when decoding compressed responses, since sometimes\n\t\t\t// servers send slightly invalid responses that are still accepted\n\t\t\t// by common browsers.\n\t\t\t// Always using Z_SYNC_FLUSH is what cURL does.\n\t\t\tconst zlibOptions = {\n\t\t\t\tflush: zlib.Z_SYNC_FLUSH,\n\t\t\t\tfinishFlush: zlib.Z_SYNC_FLUSH\n\t\t\t};\n\n\t\t\t// for gzip\n\t\t\tif (codings == 'gzip' || codings == 'x-gzip') {\n\t\t\t\tbody = body.pipe(zlib.createGunzip(zlibOptions));\n\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// for deflate\n\t\t\tif (codings == 'deflate' || codings == 'x-deflate') {\n\t\t\t\t// handle the infamous raw deflate response from old servers\n\t\t\t\t// a hack for old IIS and Apache servers\n\t\t\t\tconst raw = res.pipe(new PassThrough$1());\n\t\t\t\traw.once('data', function (chunk) {\n\t\t\t\t\t// see http://stackoverflow.com/questions/37519828\n\t\t\t\t\tif ((chunk[0] & 0x0F) === 0x08) {\n\t\t\t\t\t\tbody = body.pipe(zlib.createInflate());\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbody = body.pipe(zlib.createInflateRaw());\n\t\t\t\t\t}\n\t\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\t\tresolve(response);\n\t\t\t\t});\n\t\t\t\traw.on('end', function () {\n\t\t\t\t\t// some old IIS servers return zero-length OK deflate responses, so 'data' is never emitted.\n\t\t\t\t\tif (!response) {\n\t\t\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\t\t\tresolve(response);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// for br\n\t\t\tif (codings == 'br' && typeof zlib.createBrotliDecompress === 'function') {\n\t\t\t\tbody = body.pipe(zlib.createBrotliDecompress());\n\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// otherwise, use response as-is\n\t\t\tresponse = new Response(body, response_options);\n\t\t\tresolve(response);\n\t\t});\n\n\t\twriteToStream(req, request);\n\t});\n}\nfunction fixResponseChunkedTransferBadEnding(request, errorCallback) {\n\tlet socket;\n\n\trequest.on('socket', function (s) {\n\t\tsocket = s;\n\t});\n\n\trequest.on('response', function (response) {\n\t\tconst headers = response.headers;\n\n\t\tif (headers['transfer-encoding'] === 'chunked' && !headers['content-length']) {\n\t\t\tresponse.once('close', function (hadError) {\n\t\t\t\t// tests for socket presence, as in some situations the\n\t\t\t\t// the 'socket' event is not triggered for the request\n\t\t\t\t// (happens in deno), avoids `TypeError`\n\t\t\t\t// if a data listener is still present we didn't end cleanly\n\t\t\t\tconst hasDataListener = socket && socket.listenerCount('data') > 0;\n\n\t\t\t\tif (hasDataListener && !hadError) {\n\t\t\t\t\tconst err = new Error('Premature close');\n\t\t\t\t\terr.code = 'ERR_STREAM_PREMATURE_CLOSE';\n\t\t\t\t\terrorCallback(err);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t});\n}\n\nfunction destroyStream(stream, err) {\n\tif (stream.destroy) {\n\t\tstream.destroy(err);\n\t} else {\n\t\t// node < 8\n\t\tstream.emit('error', err);\n\t\tstream.end();\n\t}\n}\n\n/**\n * Redirect code matching\n *\n * @param   Number   code  Status code\n * @return  Boolean\n */\nfetch.isRedirect = function (code) {\n\treturn code === 301 || code === 302 || code === 303 || code === 307 || code === 308;\n};\n\n// expose Promise\nfetch.Promise = global.Promise;\n\nexport default fetch;\nexport { Headers, Request, Response, FetchError, AbortError };\n","'use strict';\n\nconst net = require('net');\nconst EventEmitter = require('events');\nconst fetch = require('node-fetch');\nconst { uuid } = require('../util');\n\nconst OPCodes = {\n  HANDSHAKE: 0,\n  FRAME: 1,\n  CLOSE: 2,\n  PING: 3,\n  PONG: 4,\n};\n\nfunction getIPCPath(id) {\n  if (process.platform === 'win32') {\n    return `\\\\\\\\?\\\\pipe\\\\discord-ipc-${id}`;\n  }\n  const { env: { XDG_RUNTIME_DIR, TMPDIR, TMP, TEMP } } = process;\n  const prefix = XDG_RUNTIME_DIR || TMPDIR || TMP || TEMP || '/tmp';\n  return `${prefix.replace(/\\/$/, '')}/discord-ipc-${id}`;\n}\n\nfunction getIPC(id = 0) {\n  return new Promise((resolve, reject) => {\n    const path = getIPCPath(id);\n    const onerror = () => {\n      if (id < 10) {\n        resolve(getIPC(id + 1));\n      } else {\n        reject(new Error('Could not connect'));\n      }\n    };\n    const sock = net.createConnection(path, () => {\n      sock.removeListener('error', onerror);\n      resolve(sock);\n    });\n    sock.once('error', onerror);\n  });\n}\n\nasync function findEndpoint(tries = 0) {\n  if (tries > 30) {\n    throw new Error('Could not find endpoint');\n  }\n  const endpoint = `http://127.0.0.1:${6463 + (tries % 10)}`;\n  try {\n    const r = await fetch(endpoint);\n    if (r.status === 404) {\n      return endpoint;\n    }\n    return findEndpoint(tries + 1);\n  } catch (e) {\n    return findEndpoint(tries + 1);\n  }\n}\n\nfunction encode(op, data) {\n  data = JSON.stringify(data);\n  const len = Buffer.byteLength(data);\n  const packet = Buffer.alloc(8 + len);\n  packet.writeInt32LE(op, 0);\n  packet.writeInt32LE(len, 4);\n  packet.write(data, 8, len);\n  return packet;\n}\n\nconst working = {\n  full: '',\n  op: undefined,\n};\n\nfunction decode(socket, callback) {\n  const packet = socket.read();\n  if (!packet) {\n    return;\n  }\n\n  let { op } = working;\n  let raw;\n  if (working.full === '') {\n    op = working.op = packet.readInt32LE(0);\n    const len = packet.readInt32LE(4);\n    raw = packet.slice(8, len + 8);\n  } else {\n    raw = packet.toString();\n  }\n\n  try {\n    const data = JSON.parse(working.full + raw);\n    callback({ op, data }); // eslint-disable-line callback-return\n    working.full = '';\n    working.op = undefined;\n  } catch (err) {\n    working.full += raw;\n  }\n\n  decode(socket, callback);\n}\n\nclass IPCTransport extends EventEmitter {\n  constructor(client) {\n    super();\n    this.client = client;\n    this.socket = null;\n  }\n\n  async connect() {\n    const socket = this.socket = await getIPC();\n    socket.on('close', this.onClose.bind(this));\n    socket.on('error', this.onClose.bind(this));\n    this.emit('open');\n    socket.write(encode(OPCodes.HANDSHAKE, {\n      v: 1,\n      client_id: this.client.clientId,\n    }));\n    socket.pause();\n    socket.on('readable', () => {\n      decode(socket, ({ op, data }) => {\n        switch (op) {\n          case OPCodes.PING:\n            this.send(data, OPCodes.PONG);\n            break;\n          case OPCodes.FRAME:\n            if (!data) {\n              return;\n            }\n            if (data.cmd === 'AUTHORIZE' && data.evt !== 'ERROR') {\n              findEndpoint()\n                .then((endpoint) => {\n                  this.client.request.endpoint = endpoint;\n                })\n                .catch((e) => {\n                  this.client.emit('error', e);\n                });\n            }\n            this.emit('message', data);\n            break;\n          case OPCodes.CLOSE:\n            this.emit('close', data);\n            break;\n          default:\n            break;\n        }\n      });\n    });\n  }\n\n  onClose(e) {\n    this.emit('close', e);\n  }\n\n  send(data, op = OPCodes.FRAME) {\n    this.socket.write(encode(op, data));\n  }\n\n  async close() {\n    return new Promise((r) => {\n      this.once('close', r);\n      this.send({}, OPCodes.CLOSE);\n      this.socket.end();\n    });\n  }\n\n  ping() {\n    this.send(uuid(), OPCodes.PING);\n  }\n}\n\nmodule.exports = IPCTransport;\nmodule.exports.encode = encode;\nmodule.exports.decode = decode;\n","'use strict';\n\nfunction keyMirror(arr) {\n  const tmp = {};\n  for (const value of arr) {\n    tmp[value] = value;\n  }\n  return tmp;\n}\n\n\nexports.browser = typeof window !== 'undefined';\n\nexports.RPCCommands = keyMirror([\n  'DISPATCH',\n  'AUTHORIZE',\n  'AUTHENTICATE',\n  'GET_GUILD',\n  'GET_GUILDS',\n  'GET_CHANNEL',\n  'GET_CHANNELS',\n  'CREATE_CHANNEL_INVITE',\n  'GET_RELATIONSHIPS',\n  'GET_USER',\n  'SUBSCRIBE',\n  'UNSUBSCRIBE',\n  'SET_USER_VOICE_SETTINGS',\n  'SET_USER_VOICE_SETTINGS_2',\n  'SELECT_VOICE_CHANNEL',\n  'GET_SELECTED_VOICE_CHANNEL',\n  'SELECT_TEXT_CHANNEL',\n  'GET_VOICE_SETTINGS',\n  'SET_VOICE_SETTINGS_2',\n  'SET_VOICE_SETTINGS',\n  'CAPTURE_SHORTCUT',\n  'SET_ACTIVITY',\n  'SEND_ACTIVITY_JOIN_INVITE',\n  'CLOSE_ACTIVITY_JOIN_REQUEST',\n  'ACTIVITY_INVITE_USER',\n  'ACCEPT_ACTIVITY_INVITE',\n  'INVITE_BROWSER',\n  'DEEP_LINK',\n  'CONNECTIONS_CALLBACK',\n  'BRAINTREE_POPUP_BRIDGE_CALLBACK',\n  'GIFT_CODE_BROWSER',\n  'GUILD_TEMPLATE_BROWSER',\n  'OVERLAY',\n  'BROWSER_HANDOFF',\n  'SET_CERTIFIED_DEVICES',\n  'GET_IMAGE',\n  'CREATE_LOBBY',\n  'UPDATE_LOBBY',\n  'DELETE_LOBBY',\n  'UPDATE_LOBBY_MEMBER',\n  'CONNECT_TO_LOBBY',\n  'DISCONNECT_FROM_LOBBY',\n  'SEND_TO_LOBBY',\n  'SEARCH_LOBBIES',\n  'CONNECT_TO_LOBBY_VOICE',\n  'DISCONNECT_FROM_LOBBY_VOICE',\n  'SET_OVERLAY_LOCKED',\n  'OPEN_OVERLAY_ACTIVITY_INVITE',\n  'OPEN_OVERLAY_GUILD_INVITE',\n  'OPEN_OVERLAY_VOICE_SETTINGS',\n  'VALIDATE_APPLICATION',\n  'GET_ENTITLEMENT_TICKET',\n  'GET_APPLICATION_TICKET',\n  'START_PURCHASE',\n  'GET_SKUS',\n  'GET_ENTITLEMENTS',\n  'GET_NETWORKING_CONFIG',\n  'NETWORKING_SYSTEM_METRICS',\n  'NETWORKING_PEER_METRICS',\n  'NETWORKING_CREATE_TOKEN',\n  'SET_USER_ACHIEVEMENT',\n  'GET_USER_ACHIEVEMENTS',\n]);\n\nexports.RPCEvents = keyMirror([\n  'CURRENT_USER_UPDATE',\n  'GUILD_STATUS',\n  'GUILD_CREATE',\n  'CHANNEL_CREATE',\n  'RELATIONSHIP_UPDATE',\n  'VOICE_CHANNEL_SELECT',\n  'VOICE_STATE_CREATE',\n  'VOICE_STATE_DELETE',\n  'VOICE_STATE_UPDATE',\n  'VOICE_SETTINGS_UPDATE',\n  'VOICE_SETTINGS_UPDATE_2',\n  'VOICE_CONNECTION_STATUS',\n  'SPEAKING_START',\n  'SPEAKING_STOP',\n  'GAME_JOIN',\n  'GAME_SPECTATE',\n  'ACTIVITY_JOIN',\n  'ACTIVITY_JOIN_REQUEST',\n  'ACTIVITY_SPECTATE',\n  'ACTIVITY_INVITE',\n  'NOTIFICATION_CREATE',\n  'MESSAGE_CREATE',\n  'MESSAGE_UPDATE',\n  'MESSAGE_DELETE',\n  'LOBBY_DELETE',\n  'LOBBY_UPDATE',\n  'LOBBY_MEMBER_CONNECT',\n  'LOBBY_MEMBER_DISCONNECT',\n  'LOBBY_MEMBER_UPDATE',\n  'LOBBY_MESSAGE',\n  'CAPTURE_SHORTCUT_CHANGE',\n  'OVERLAY',\n  'OVERLAY_UPDATE',\n  'ENTITLEMENT_CREATE',\n  'ENTITLEMENT_DELETE',\n  'USER_ACHIEVEMENT_UPDATE',\n  'READY',\n  'ERROR',\n]);\n\nexports.RPCErrors = {\n  CAPTURE_SHORTCUT_ALREADY_LISTENING: 5004,\n  GET_GUILD_TIMED_OUT: 5002,\n  INVALID_ACTIVITY_JOIN_REQUEST: 4012,\n  INVALID_ACTIVITY_SECRET: 5005,\n  INVALID_CHANNEL: 4005,\n  INVALID_CLIENTID: 4007,\n  INVALID_COMMAND: 4002,\n  INVALID_ENTITLEMENT: 4015,\n  INVALID_EVENT: 4004,\n  INVALID_GIFT_CODE: 4016,\n  INVALID_GUILD: 4003,\n  INVALID_INVITE: 4011,\n  INVALID_LOBBY: 4013,\n  INVALID_LOBBY_SECRET: 4014,\n  INVALID_ORIGIN: 4008,\n  INVALID_PAYLOAD: 4000,\n  INVALID_PERMISSIONS: 4006,\n  INVALID_TOKEN: 4009,\n  INVALID_USER: 4010,\n  LOBBY_FULL: 5007,\n  NO_ELIGIBLE_ACTIVITY: 5006,\n  OAUTH2_ERROR: 5000,\n  PURCHASE_CANCELED: 5008,\n  PURCHASE_ERROR: 5009,\n  RATE_LIMITED: 5011,\n  SELECT_CHANNEL_TIMED_OUT: 5001,\n  SELECT_VOICE_FORCE_REQUIRED: 5003,\n  SERVICE_UNAVAILABLE: 1001,\n  TRANSACTION_ABORTED: 1002,\n  UNAUTHORIZED_FOR_ACHIEVEMENT: 5010,\n  UNKNOWN_ERROR: 1000,\n};\n\nexports.RPCCloseCodes = {\n  CLOSE_NORMAL: 1000,\n  CLOSE_UNSUPPORTED: 1003,\n  CLOSE_ABNORMAL: 1006,\n  INVALID_CLIENTID: 4000,\n  INVALID_ORIGIN: 4001,\n  RATELIMITED: 4002,\n  TOKEN_REVOKED: 4003,\n  INVALID_VERSION: 4004,\n  INVALID_ENCODING: 4005,\n};\n\nexports.LobbyTypes = {\n  PRIVATE: 1,\n  PUBLIC: 2,\n};\n\nexports.RelationshipTypes = {\n  NONE: 0,\n  FRIEND: 1,\n  BLOCKED: 2,\n  PENDING_INCOMING: 3,\n  PENDING_OUTGOING: 4,\n  IMPLICIT: 5,\n};\n","'use strict';\n\nmodule.exports = {\n  BINARY_TYPES: ['nodebuffer', 'arraybuffer', 'fragments'],\n  GUID: '258EAFA5-E914-47DA-95CA-C5AB0DC85B11',\n  kStatusCode: Symbol('status-code'),\n  kWebSocket: Symbol('websocket'),\n  EMPTY_BUFFER: Buffer.alloc(0),\n  NOOP: () => {}\n};\n","const runtimeRequire = typeof __webpack_require__ === 'function' ? __non_webpack_require__ : require // eslint-disable-line\nif (typeof runtimeRequire.addon === 'function') { // if the platform supports native resolving prefer that\n  module.exports = runtimeRequire.addon.bind(runtimeRequire)\n} else { // else use the runtime version here\n  module.exports = require('./node-gyp-build.js')\n}\n","var fs = require('fs')\nvar path = require('path')\nvar os = require('os')\n\n// Workaround to fix webpack's build warnings: 'the request of a dependency is an expression'\nvar runtimeRequire = typeof __webpack_require__ === 'function' ? __non_webpack_require__ : require // eslint-disable-line\n\nvar vars = (process.config && process.config.variables) || {}\nvar prebuildsOnly = !!process.env.PREBUILDS_ONLY\nvar abi = process.versions.modules // TODO: support old node where this is undef\nvar runtime = isElectron() ? 'electron' : (isNwjs() ? 'node-webkit' : 'node')\n\nvar arch = process.env.npm_config_arch || os.arch()\nvar platform = process.env.npm_config_platform || os.platform()\nvar libc = process.env.LIBC || (isAlpine(platform) ? 'musl' : 'glibc')\nvar armv = process.env.ARM_VERSION || (arch === 'arm64' ? '8' : vars.arm_version) || ''\nvar uv = (process.versions.uv || '').split('.')[0]\n\nmodule.exports = load\n\nfunction load (dir) {\n  return runtimeRequire(load.resolve(dir))\n}\n\nload.resolve = load.path = function (dir) {\n  dir = path.resolve(dir || '.')\n\n  try {\n    var name = runtimeRequire(path.join(dir, 'package.json')).name.toUpperCase().replace(/-/g, '_')\n    if (process.env[name + '_PREBUILD']) dir = process.env[name + '_PREBUILD']\n  } catch (err) {}\n\n  if (!prebuildsOnly) {\n    var release = getFirst(path.join(dir, 'build/Release'), matchBuild)\n    if (release) return release\n\n    var debug = getFirst(path.join(dir, 'build/Debug'), matchBuild)\n    if (debug) return debug\n  }\n\n  var prebuild = resolve(dir)\n  if (prebuild) return prebuild\n\n  var nearby = resolve(path.dirname(process.execPath))\n  if (nearby) return nearby\n\n  var target = [\n    'platform=' + platform,\n    'arch=' + arch,\n    'runtime=' + runtime,\n    'abi=' + abi,\n    'uv=' + uv,\n    armv ? 'armv=' + armv : '',\n    'libc=' + libc,\n    'node=' + process.versions.node,\n    process.versions.electron ? 'electron=' + process.versions.electron : '',\n    typeof __webpack_require__ === 'function' ? 'webpack=true' : '' // eslint-disable-line\n  ].filter(Boolean).join(' ')\n\n  throw new Error('No native build was found for ' + target + '\\n    loaded from: ' + dir + '\\n')\n\n  function resolve (dir) {\n    // Find matching \"prebuilds/<platform>-<arch>\" directory\n    var tuples = readdirSync(path.join(dir, 'prebuilds')).map(parseTuple)\n    var tuple = tuples.filter(matchTuple(platform, arch)).sort(compareTuples)[0]\n    if (!tuple) return\n\n    // Find most specific flavor first\n    var prebuilds = path.join(dir, 'prebuilds', tuple.name)\n    var parsed = readdirSync(prebuilds).map(parseTags)\n    var candidates = parsed.filter(matchTags(runtime, abi))\n    var winner = candidates.sort(compareTags(runtime))[0]\n    if (winner) return path.join(prebuilds, winner.file)\n  }\n}\n\nfunction readdirSync (dir) {\n  try {\n    return fs.readdirSync(dir)\n  } catch (err) {\n    return []\n  }\n}\n\nfunction getFirst (dir, filter) {\n  var files = readdirSync(dir).filter(filter)\n  return files[0] && path.join(dir, files[0])\n}\n\nfunction matchBuild (name) {\n  return /\\.node$/.test(name)\n}\n\nfunction parseTuple (name) {\n  // Example: darwin-x64+arm64\n  var arr = name.split('-')\n  if (arr.length !== 2) return\n\n  var platform = arr[0]\n  var architectures = arr[1].split('+')\n\n  if (!platform) return\n  if (!architectures.length) return\n  if (!architectures.every(Boolean)) return\n\n  return { name, platform, architectures }\n}\n\nfunction matchTuple (platform, arch) {\n  return function (tuple) {\n    if (tuple == null) return false\n    if (tuple.platform !== platform) return false\n    return tuple.architectures.includes(arch)\n  }\n}\n\nfunction compareTuples (a, b) {\n  // Prefer single-arch prebuilds over multi-arch\n  return a.architectures.length - b.architectures.length\n}\n\nfunction parseTags (file) {\n  var arr = file.split('.')\n  var extension = arr.pop()\n  var tags = { file: file, specificity: 0 }\n\n  if (extension !== 'node') return\n\n  for (var i = 0; i < arr.length; i++) {\n    var tag = arr[i]\n\n    if (tag === 'node' || tag === 'electron' || tag === 'node-webkit') {\n      tags.runtime = tag\n    } else if (tag === 'napi') {\n      tags.napi = true\n    } else if (tag.slice(0, 3) === 'abi') {\n      tags.abi = tag.slice(3)\n    } else if (tag.slice(0, 2) === 'uv') {\n      tags.uv = tag.slice(2)\n    } else if (tag.slice(0, 4) === 'armv') {\n      tags.armv = tag.slice(4)\n    } else if (tag === 'glibc' || tag === 'musl') {\n      tags.libc = tag\n    } else {\n      continue\n    }\n\n    tags.specificity++\n  }\n\n  return tags\n}\n\nfunction matchTags (runtime, abi) {\n  return function (tags) {\n    if (tags == null) return false\n    if (tags.runtime && tags.runtime !== runtime && !runtimeAgnostic(tags)) return false\n    if (tags.abi && tags.abi !== abi && !tags.napi) return false\n    if (tags.uv && tags.uv !== uv) return false\n    if (tags.armv && tags.armv !== armv) return false\n    if (tags.libc && tags.libc !== libc) return false\n\n    return true\n  }\n}\n\nfunction runtimeAgnostic (tags) {\n  return tags.runtime === 'node' && tags.napi\n}\n\nfunction compareTags (runtime) {\n  // Precedence: non-agnostic runtime, abi over napi, then by specificity.\n  return function (a, b) {\n    if (a.runtime !== b.runtime) {\n      return a.runtime === runtime ? -1 : 1\n    } else if (a.abi !== b.abi) {\n      return a.abi ? -1 : 1\n    } else if (a.specificity !== b.specificity) {\n      return a.specificity > b.specificity ? -1 : 1\n    } else {\n      return 0\n    }\n  }\n}\n\nfunction isNwjs () {\n  return !!(process.versions && process.versions.nw)\n}\n\nfunction isElectron () {\n  if (process.versions && process.versions.electron) return true\n  if (process.env.ELECTRON_RUN_AS_NODE) return true\n  return typeof window !== 'undefined' && window.process && window.process.type === 'renderer'\n}\n\nfunction isAlpine (platform) {\n  return platform === 'linux' && fs.existsSync('/etc/alpine-release')\n}\n\n// Exposed for unit tests\n// TODO: move to lib\nload.parseTags = parseTags\nload.matchTags = matchTags\nload.compareTags = compareTags\nload.parseTuple = parseTuple\nload.matchTuple = matchTuple\nload.compareTuples = compareTuples\n","'use strict';\n\ntry {\n  module.exports = require('node-gyp-build')(__dirname);\n} catch (e) {\n  module.exports = require('./fallback');\n}\n","'use strict';\n\n/**\n * Masks a buffer using the given mask.\n *\n * @param {Buffer} source The buffer to mask\n * @param {Buffer} mask The mask to use\n * @param {Buffer} output The buffer where to store the result\n * @param {Number} offset The offset at which to start writing\n * @param {Number} length The number of bytes to mask.\n * @public\n */\nconst mask = (source, mask, output, offset, length) => {\n  for (var i = 0; i < length; i++) {\n    output[offset + i] = source[i] ^ mask[i & 3];\n  }\n};\n\n/**\n * Unmasks a buffer using the given mask.\n *\n * @param {Buffer} buffer The buffer to unmask\n * @param {Buffer} mask The mask to use\n * @public\n */\nconst unmask = (buffer, mask) => {\n  // Required until https://github.com/nodejs/node/issues/9006 is resolved.\n  const length = buffer.length;\n  for (var i = 0; i < length; i++) {\n    buffer[i] ^= mask[i & 3];\n  }\n};\n\nmodule.exports = { mask, unmask };\n","'use strict';\n\nconst { EMPTY_BUFFER } = require('./constants');\n\n/**\n * Merges an array of buffers into a new buffer.\n *\n * @param {Buffer[]} list The array of buffers to concat\n * @param {Number} totalLength The total length of buffers in the list\n * @return {Buffer} The resulting buffer\n * @public\n */\nfunction concat(list, totalLength) {\n  if (list.length === 0) return EMPTY_BUFFER;\n  if (list.length === 1) return list[0];\n\n  const target = Buffer.allocUnsafe(totalLength);\n  let offset = 0;\n\n  for (let i = 0; i < list.length; i++) {\n    const buf = list[i];\n    target.set(buf, offset);\n    offset += buf.length;\n  }\n\n  if (offset < totalLength) return target.slice(0, offset);\n\n  return target;\n}\n\n/**\n * Masks a buffer using the given mask.\n *\n * @param {Buffer} source The buffer to mask\n * @param {Buffer} mask The mask to use\n * @param {Buffer} output The buffer where to store the result\n * @param {Number} offset The offset at which to start writing\n * @param {Number} length The number of bytes to mask.\n * @public\n */\nfunction _mask(source, mask, output, offset, length) {\n  for (let i = 0; i < length; i++) {\n    output[offset + i] = source[i] ^ mask[i & 3];\n  }\n}\n\n/**\n * Unmasks a buffer using the given mask.\n *\n * @param {Buffer} buffer The buffer to unmask\n * @param {Buffer} mask The mask to use\n * @public\n */\nfunction _unmask(buffer, mask) {\n  // Required until https://github.com/nodejs/node/issues/9006 is resolved.\n  const length = buffer.length;\n  for (let i = 0; i < length; i++) {\n    buffer[i] ^= mask[i & 3];\n  }\n}\n\n/**\n * Converts a buffer to an `ArrayBuffer`.\n *\n * @param {Buffer} buf The buffer to convert\n * @return {ArrayBuffer} Converted buffer\n * @public\n */\nfunction toArrayBuffer(buf) {\n  if (buf.byteLength === buf.buffer.byteLength) {\n    return buf.buffer;\n  }\n\n  return buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength);\n}\n\n/**\n * Converts `data` to a `Buffer`.\n *\n * @param {*} data The data to convert\n * @return {Buffer} The buffer\n * @throws {TypeError}\n * @public\n */\nfunction toBuffer(data) {\n  toBuffer.readOnly = true;\n\n  if (Buffer.isBuffer(data)) return data;\n\n  let buf;\n\n  if (data instanceof ArrayBuffer) {\n    buf = Buffer.from(data);\n  } else if (ArrayBuffer.isView(data)) {\n    buf = Buffer.from(data.buffer, data.byteOffset, data.byteLength);\n  } else {\n    buf = Buffer.from(data);\n    toBuffer.readOnly = false;\n  }\n\n  return buf;\n}\n\ntry {\n  const bufferUtil = require('bufferutil');\n  const bu = bufferUtil.BufferUtil || bufferUtil;\n\n  module.exports = {\n    concat,\n    mask(source, mask, output, offset, length) {\n      if (length < 48) _mask(source, mask, output, offset, length);\n      else bu.mask(source, mask, output, offset, length);\n    },\n    toArrayBuffer,\n    toBuffer,\n    unmask(buffer, mask) {\n      if (buffer.length < 32) _unmask(buffer, mask);\n      else bu.unmask(buffer, mask);\n    }\n  };\n} catch (e) /* istanbul ignore next */ {\n  module.exports = {\n    concat,\n    mask: _mask,\n    toArrayBuffer,\n    toBuffer,\n    unmask: _unmask\n  };\n}\n","'use strict';\n\nconst zlib = require('zlib');\n\nconst bufferUtil = require('./buffer-util');\nconst Limiter = require('./limiter');\nconst { kStatusCode, NOOP } = require('./constants');\n\nconst TRAILER = Buffer.from([0x00, 0x00, 0xff, 0xff]);\nconst kPerMessageDeflate = Symbol('permessage-deflate');\nconst kTotalLength = Symbol('total-length');\nconst kCallback = Symbol('callback');\nconst kBuffers = Symbol('buffers');\nconst kError = Symbol('error');\n\n//\n// We limit zlib concurrency, which prevents severe memory fragmentation\n// as documented in https://github.com/nodejs/node/issues/8871#issuecomment-250915913\n// and https://github.com/websockets/ws/issues/1202\n//\n// Intentionally global; it's the global thread pool that's an issue.\n//\nlet zlibLimiter;\n\n/**\n * permessage-deflate implementation.\n */\nclass PerMessageDeflate {\n  /**\n   * Creates a PerMessageDeflate instance.\n   *\n   * @param {Object} [options] Configuration options\n   * @param {Boolean} [options.serverNoContextTakeover=false] Request/accept\n   *     disabling of server context takeover\n   * @param {Boolean} [options.clientNoContextTakeover=false] Advertise/\n   *     acknowledge disabling of client context takeover\n   * @param {(Boolean|Number)} [options.serverMaxWindowBits] Request/confirm the\n   *     use of a custom server window size\n   * @param {(Boolean|Number)} [options.clientMaxWindowBits] Advertise support\n   *     for, or request, a custom client window size\n   * @param {Object} [options.zlibDeflateOptions] Options to pass to zlib on\n   *     deflate\n   * @param {Object} [options.zlibInflateOptions] Options to pass to zlib on\n   *     inflate\n   * @param {Number} [options.threshold=1024] Size (in bytes) below which\n   *     messages should not be compressed\n   * @param {Number} [options.concurrencyLimit=10] The number of concurrent\n   *     calls to zlib\n   * @param {Boolean} [isServer=false] Create the instance in either server or\n   *     client mode\n   * @param {Number} [maxPayload=0] The maximum allowed message length\n   */\n  constructor(options, isServer, maxPayload) {\n    this._maxPayload = maxPayload | 0;\n    this._options = options || {};\n    this._threshold =\n      this._options.threshold !== undefined ? this._options.threshold : 1024;\n    this._isServer = !!isServer;\n    this._deflate = null;\n    this._inflate = null;\n\n    this.params = null;\n\n    if (!zlibLimiter) {\n      const concurrency =\n        this._options.concurrencyLimit !== undefined\n          ? this._options.concurrencyLimit\n          : 10;\n      zlibLimiter = new Limiter(concurrency);\n    }\n  }\n\n  /**\n   * @type {String}\n   */\n  static get extensionName() {\n    return 'permessage-deflate';\n  }\n\n  /**\n   * Create an extension negotiation offer.\n   *\n   * @return {Object} Extension parameters\n   * @public\n   */\n  offer() {\n    const params = {};\n\n    if (this._options.serverNoContextTakeover) {\n      params.server_no_context_takeover = true;\n    }\n    if (this._options.clientNoContextTakeover) {\n      params.client_no_context_takeover = true;\n    }\n    if (this._options.serverMaxWindowBits) {\n      params.server_max_window_bits = this._options.serverMaxWindowBits;\n    }\n    if (this._options.clientMaxWindowBits) {\n      params.client_max_window_bits = this._options.clientMaxWindowBits;\n    } else if (this._options.clientMaxWindowBits == null) {\n      params.client_max_window_bits = true;\n    }\n\n    return params;\n  }\n\n  /**\n   * Accept an extension negotiation offer/response.\n   *\n   * @param {Array} configurations The extension negotiation offers/reponse\n   * @return {Object} Accepted configuration\n   * @public\n   */\n  accept(configurations) {\n    configurations = this.normalizeParams(configurations);\n\n    this.params = this._isServer\n      ? this.acceptAsServer(configurations)\n      : this.acceptAsClient(configurations);\n\n    return this.params;\n  }\n\n  /**\n   * Releases all resources used by the extension.\n   *\n   * @public\n   */\n  cleanup() {\n    if (this._inflate) {\n      this._inflate.close();\n      this._inflate = null;\n    }\n\n    if (this._deflate) {\n      const callback = this._deflate[kCallback];\n\n      this._deflate.close();\n      this._deflate = null;\n\n      if (callback) {\n        callback(\n          new Error(\n            'The deflate stream was closed while data was being processed'\n          )\n        );\n      }\n    }\n  }\n\n  /**\n   *  Accept an extension negotiation offer.\n   *\n   * @param {Array} offers The extension negotiation offers\n   * @return {Object} Accepted configuration\n   * @private\n   */\n  acceptAsServer(offers) {\n    const opts = this._options;\n    const accepted = offers.find((params) => {\n      if (\n        (opts.serverNoContextTakeover === false &&\n          params.server_no_context_takeover) ||\n        (params.server_max_window_bits &&\n          (opts.serverMaxWindowBits === false ||\n            (typeof opts.serverMaxWindowBits === 'number' &&\n              opts.serverMaxWindowBits > params.server_max_window_bits))) ||\n        (typeof opts.clientMaxWindowBits === 'number' &&\n          !params.client_max_window_bits)\n      ) {\n        return false;\n      }\n\n      return true;\n    });\n\n    if (!accepted) {\n      throw new Error('None of the extension offers can be accepted');\n    }\n\n    if (opts.serverNoContextTakeover) {\n      accepted.server_no_context_takeover = true;\n    }\n    if (opts.clientNoContextTakeover) {\n      accepted.client_no_context_takeover = true;\n    }\n    if (typeof opts.serverMaxWindowBits === 'number') {\n      accepted.server_max_window_bits = opts.serverMaxWindowBits;\n    }\n    if (typeof opts.clientMaxWindowBits === 'number') {\n      accepted.client_max_window_bits = opts.clientMaxWindowBits;\n    } else if (\n      accepted.client_max_window_bits === true ||\n      opts.clientMaxWindowBits === false\n    ) {\n      delete accepted.client_max_window_bits;\n    }\n\n    return accepted;\n  }\n\n  /**\n   * Accept the extension negotiation response.\n   *\n   * @param {Array} response The extension negotiation response\n   * @return {Object} Accepted configuration\n   * @private\n   */\n  acceptAsClient(response) {\n    const params = response[0];\n\n    if (\n      this._options.clientNoContextTakeover === false &&\n      params.client_no_context_takeover\n    ) {\n      throw new Error('Unexpected parameter \"client_no_context_takeover\"');\n    }\n\n    if (!params.client_max_window_bits) {\n      if (typeof this._options.clientMaxWindowBits === 'number') {\n        params.client_max_window_bits = this._options.clientMaxWindowBits;\n      }\n    } else if (\n      this._options.clientMaxWindowBits === false ||\n      (typeof this._options.clientMaxWindowBits === 'number' &&\n        params.client_max_window_bits > this._options.clientMaxWindowBits)\n    ) {\n      throw new Error(\n        'Unexpected or invalid parameter \"client_max_window_bits\"'\n      );\n    }\n\n    return params;\n  }\n\n  /**\n   * Normalize parameters.\n   *\n   * @param {Array} configurations The extension negotiation offers/reponse\n   * @return {Array} The offers/response with normalized parameters\n   * @private\n   */\n  normalizeParams(configurations) {\n    configurations.forEach((params) => {\n      Object.keys(params).forEach((key) => {\n        let value = params[key];\n\n        if (value.length > 1) {\n          throw new Error(`Parameter \"${key}\" must have only a single value`);\n        }\n\n        value = value[0];\n\n        if (key === 'client_max_window_bits') {\n          if (value !== true) {\n            const num = +value;\n            if (!Number.isInteger(num) || num < 8 || num > 15) {\n              throw new TypeError(\n                `Invalid value for parameter \"${key}\": ${value}`\n              );\n            }\n            value = num;\n          } else if (!this._isServer) {\n            throw new TypeError(\n              `Invalid value for parameter \"${key}\": ${value}`\n            );\n          }\n        } else if (key === 'server_max_window_bits') {\n          const num = +value;\n          if (!Number.isInteger(num) || num < 8 || num > 15) {\n            throw new TypeError(\n              `Invalid value for parameter \"${key}\": ${value}`\n            );\n          }\n          value = num;\n        } else if (\n          key === 'client_no_context_takeover' ||\n          key === 'server_no_context_takeover'\n        ) {\n          if (value !== true) {\n            throw new TypeError(\n              `Invalid value for parameter \"${key}\": ${value}`\n            );\n          }\n        } else {\n          throw new Error(`Unknown parameter \"${key}\"`);\n        }\n\n        params[key] = value;\n      });\n    });\n\n    return configurations;\n  }\n\n  /**\n   * Decompress data. Concurrency limited.\n   *\n   * @param {Buffer} data Compressed data\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @public\n   */\n  decompress(data, fin, callback) {\n    zlibLimiter.add((done) => {\n      this._decompress(data, fin, (err, result) => {\n        done();\n        callback(err, result);\n      });\n    });\n  }\n\n  /**\n   * Compress data. Concurrency limited.\n   *\n   * @param {Buffer} data Data to compress\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @public\n   */\n  compress(data, fin, callback) {\n    zlibLimiter.add((done) => {\n      this._compress(data, fin, (err, result) => {\n        done();\n        callback(err, result);\n      });\n    });\n  }\n\n  /**\n   * Decompress data.\n   *\n   * @param {Buffer} data Compressed data\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @private\n   */\n  _decompress(data, fin, callback) {\n    const endpoint = this._isServer ? 'client' : 'server';\n\n    if (!this._inflate) {\n      const key = `${endpoint}_max_window_bits`;\n      const windowBits =\n        typeof this.params[key] !== 'number'\n          ? zlib.Z_DEFAULT_WINDOWBITS\n          : this.params[key];\n\n      this._inflate = zlib.createInflateRaw({\n        ...this._options.zlibInflateOptions,\n        windowBits\n      });\n      this._inflate[kPerMessageDeflate] = this;\n      this._inflate[kTotalLength] = 0;\n      this._inflate[kBuffers] = [];\n      this._inflate.on('error', inflateOnError);\n      this._inflate.on('data', inflateOnData);\n    }\n\n    this._inflate[kCallback] = callback;\n\n    this._inflate.write(data);\n    if (fin) this._inflate.write(TRAILER);\n\n    this._inflate.flush(() => {\n      const err = this._inflate[kError];\n\n      if (err) {\n        this._inflate.close();\n        this._inflate = null;\n        callback(err);\n        return;\n      }\n\n      const data = bufferUtil.concat(\n        this._inflate[kBuffers],\n        this._inflate[kTotalLength]\n      );\n\n      if (this._inflate._readableState.endEmitted) {\n        this._inflate.close();\n        this._inflate = null;\n      } else {\n        this._inflate[kTotalLength] = 0;\n        this._inflate[kBuffers] = [];\n\n        if (fin && this.params[`${endpoint}_no_context_takeover`]) {\n          this._inflate.reset();\n        }\n      }\n\n      callback(null, data);\n    });\n  }\n\n  /**\n   * Compress data.\n   *\n   * @param {Buffer} data Data to compress\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @private\n   */\n  _compress(data, fin, callback) {\n    const endpoint = this._isServer ? 'server' : 'client';\n\n    if (!this._deflate) {\n      const key = `${endpoint}_max_window_bits`;\n      const windowBits =\n        typeof this.params[key] !== 'number'\n          ? zlib.Z_DEFAULT_WINDOWBITS\n          : this.params[key];\n\n      this._deflate = zlib.createDeflateRaw({\n        ...this._options.zlibDeflateOptions,\n        windowBits\n      });\n\n      this._deflate[kTotalLength] = 0;\n      this._deflate[kBuffers] = [];\n\n      //\n      // An `'error'` event is emitted, only on Node.js < 10.0.0, if the\n      // `zlib.DeflateRaw` instance is closed while data is being processed.\n      // This can happen if `PerMessageDeflate#cleanup()` is called at the wrong\n      // time due to an abnormal WebSocket closure.\n      //\n      this._deflate.on('error', NOOP);\n      this._deflate.on('data', deflateOnData);\n    }\n\n    this._deflate[kCallback] = callback;\n\n    this._deflate.write(data);\n    this._deflate.flush(zlib.Z_SYNC_FLUSH, () => {\n      if (!this._deflate) {\n        //\n        // The deflate stream was closed while data was being processed.\n        //\n        return;\n      }\n\n      let data = bufferUtil.concat(\n        this._deflate[kBuffers],\n        this._deflate[kTotalLength]\n      );\n\n      if (fin) data = data.slice(0, data.length - 4);\n\n      //\n      // Ensure that the callback will not be called again in\n      // `PerMessageDeflate#cleanup()`.\n      //\n      this._deflate[kCallback] = null;\n\n      this._deflate[kTotalLength] = 0;\n      this._deflate[kBuffers] = [];\n\n      if (fin && this.params[`${endpoint}_no_context_takeover`]) {\n        this._deflate.reset();\n      }\n\n      callback(null, data);\n    });\n  }\n}\n\nmodule.exports = PerMessageDeflate;\n\n/**\n * The listener of the `zlib.DeflateRaw` stream `'data'` event.\n *\n * @param {Buffer} chunk A chunk of data\n * @private\n */\nfunction deflateOnData(chunk) {\n  this[kBuffers].push(chunk);\n  this[kTotalLength] += chunk.length;\n}\n\n/**\n * The listener of the `zlib.InflateRaw` stream `'data'` event.\n *\n * @param {Buffer} chunk A chunk of data\n * @private\n */\nfunction inflateOnData(chunk) {\n  this[kTotalLength] += chunk.length;\n\n  if (\n    this[kPerMessageDeflate]._maxPayload < 1 ||\n    this[kTotalLength] <= this[kPerMessageDeflate]._maxPayload\n  ) {\n    this[kBuffers].push(chunk);\n    return;\n  }\n\n  this[kError] = new RangeError('Max payload size exceeded');\n  this[kError].code = 'WS_ERR_UNSUPPORTED_MESSAGE_LENGTH';\n  this[kError][kStatusCode] = 1009;\n  this.removeListener('data', inflateOnData);\n  this.reset();\n}\n\n/**\n * The listener of the `zlib.InflateRaw` stream `'error'` event.\n *\n * @param {Error} err The emitted error\n * @private\n */\nfunction inflateOnError(err) {\n  //\n  // There is no need to call `Zlib#close()` as the handle is automatically\n  // closed when an error is emitted.\n  //\n  this[kPerMessageDeflate]._inflate = null;\n  err[kStatusCode] = 1007;\n  this[kCallback](err);\n}\n","'use strict';\n\nconst kDone = Symbol('kDone');\nconst kRun = Symbol('kRun');\n\n/**\n * A very simple job queue with adjustable concurrency. Adapted from\n * https://github.com/STRML/async-limiter\n */\nclass Limiter {\n  /**\n   * Creates a new `Limiter`.\n   *\n   * @param {Number} [concurrency=Infinity] The maximum number of jobs allowed\n   *     to run concurrently\n   */\n  constructor(concurrency) {\n    this[kDone] = () => {\n      this.pending--;\n      this[kRun]();\n    };\n    this.concurrency = concurrency || Infinity;\n    this.jobs = [];\n    this.pending = 0;\n  }\n\n  /**\n   * Adds a job to the queue.\n   *\n   * @param {Function} job The job to run\n   * @public\n   */\n  add(job) {\n    this.jobs.push(job);\n    this[kRun]();\n  }\n\n  /**\n   * Removes a job from the queue and runs it if possible.\n   *\n   * @private\n   */\n  [kRun]() {\n    if (this.pending === this.concurrency) return;\n\n    if (this.jobs.length) {\n      const job = this.jobs.shift();\n\n      this.pending++;\n      job(this[kDone]);\n    }\n  }\n}\n\nmodule.exports = Limiter;\n","'use strict';\n\ntry {\n  module.exports = require('node-gyp-build')(__dirname);\n} catch (e) {\n  module.exports = require('./fallback');\n}\n","'use strict';\n\n/**\n * Checks if a given buffer contains only correct UTF-8.\n * Ported from https://www.cl.cam.ac.uk/%7Emgk25/ucs/utf8_check.c by\n * Markus Kuhn.\n *\n * @param {Buffer} buf The buffer to check\n * @return {Boolean} `true` if `buf` contains only correct UTF-8, else `false`\n * @public\n */\nfunction isValidUTF8(buf) {\n  const len = buf.length;\n  let i = 0;\n\n  while (i < len) {\n    if ((buf[i] & 0x80) === 0x00) {  // 0xxxxxxx\n      i++;\n    } else if ((buf[i] & 0xe0) === 0xc0) {  // 110xxxxx 10xxxxxx\n      if (\n        i + 1 === len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i] & 0xfe) === 0xc0  // overlong\n      ) {\n        return false;\n      }\n\n      i += 2;\n    } else if ((buf[i] & 0xf0) === 0xe0) {  // 1110xxxx 10xxxxxx 10xxxxxx\n      if (\n        i + 2 >= len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i + 2] & 0xc0) !== 0x80 ||\n        buf[i] === 0xe0 && (buf[i + 1] & 0xe0) === 0x80 ||  // overlong\n        buf[i] === 0xed && (buf[i + 1] & 0xe0) === 0xa0  // surrogate (U+D800 - U+DFFF)\n      ) {\n        return false;\n      }\n\n      i += 3;\n    } else if ((buf[i] & 0xf8) === 0xf0) {  // 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx\n      if (\n        i + 3 >= len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i + 2] & 0xc0) !== 0x80 ||\n        (buf[i + 3] & 0xc0) !== 0x80 ||\n        buf[i] === 0xf0 && (buf[i + 1] & 0xf0) === 0x80 ||  // overlong\n        buf[i] === 0xf4 && buf[i + 1] > 0x8f || buf[i] > 0xf4  // > U+10FFFF\n      ) {\n        return false;\n      }\n\n      i += 4;\n    } else {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nmodule.exports = isValidUTF8;\n","'use strict';\n\n/**\n * Checks if a status code is allowed in a close frame.\n *\n * @param {Number} code The status code\n * @return {Boolean} `true` if the status code is valid, else `false`\n * @public\n */\nfunction isValidStatusCode(code) {\n  return (\n    (code >= 1000 &&\n      code <= 1014 &&\n      code !== 1004 &&\n      code !== 1005 &&\n      code !== 1006) ||\n    (code >= 3000 && code <= 4999)\n  );\n}\n\n/**\n * Checks if a given buffer contains only correct UTF-8.\n * Ported from https://www.cl.cam.ac.uk/%7Emgk25/ucs/utf8_check.c by\n * Markus Kuhn.\n *\n * @param {Buffer} buf The buffer to check\n * @return {Boolean} `true` if `buf` contains only correct UTF-8, else `false`\n * @public\n */\nfunction _isValidUTF8(buf) {\n  const len = buf.length;\n  let i = 0;\n\n  while (i < len) {\n    if ((buf[i] & 0x80) === 0) {\n      // 0xxxxxxx\n      i++;\n    } else if ((buf[i] & 0xe0) === 0xc0) {\n      // 110xxxxx 10xxxxxx\n      if (\n        i + 1 === len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i] & 0xfe) === 0xc0 // Overlong\n      ) {\n        return false;\n      }\n\n      i += 2;\n    } else if ((buf[i] & 0xf0) === 0xe0) {\n      // 1110xxxx 10xxxxxx 10xxxxxx\n      if (\n        i + 2 >= len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i + 2] & 0xc0) !== 0x80 ||\n        (buf[i] === 0xe0 && (buf[i + 1] & 0xe0) === 0x80) || // Overlong\n        (buf[i] === 0xed && (buf[i + 1] & 0xe0) === 0xa0) // Surrogate (U+D800 - U+DFFF)\n      ) {\n        return false;\n      }\n\n      i += 3;\n    } else if ((buf[i] & 0xf8) === 0xf0) {\n      // 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx\n      if (\n        i + 3 >= len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i + 2] & 0xc0) !== 0x80 ||\n        (buf[i + 3] & 0xc0) !== 0x80 ||\n        (buf[i] === 0xf0 && (buf[i + 1] & 0xf0) === 0x80) || // Overlong\n        (buf[i] === 0xf4 && buf[i + 1] > 0x8f) ||\n        buf[i] > 0xf4 // > U+10FFFF\n      ) {\n        return false;\n      }\n\n      i += 4;\n    } else {\n      return false;\n    }\n  }\n\n  return true;\n}\n\ntry {\n  let isValidUTF8 = require('utf-8-validate');\n\n  /* istanbul ignore if */\n  if (typeof isValidUTF8 === 'object') {\n    isValidUTF8 = isValidUTF8.Validation.isValidUTF8; // utf-8-validate@<3.0.0\n  }\n\n  module.exports = {\n    isValidStatusCode,\n    isValidUTF8(buf) {\n      return buf.length < 150 ? _isValidUTF8(buf) : isValidUTF8(buf);\n    }\n  };\n} catch (e) /* istanbul ignore next */ {\n  module.exports = {\n    isValidStatusCode,\n    isValidUTF8: _isValidUTF8\n  };\n}\n","'use strict';\n\nconst { Writable } = require('stream');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst {\n  BINARY_TYPES,\n  EMPTY_BUFFER,\n  kStatusCode,\n  kWebSocket\n} = require('./constants');\nconst { concat, toArrayBuffer, unmask } = require('./buffer-util');\nconst { isValidStatusCode, isValidUTF8 } = require('./validation');\n\nconst GET_INFO = 0;\nconst GET_PAYLOAD_LENGTH_16 = 1;\nconst GET_PAYLOAD_LENGTH_64 = 2;\nconst GET_MASK = 3;\nconst GET_DATA = 4;\nconst INFLATING = 5;\n\n/**\n * HyBi Receiver implementation.\n *\n * @extends Writable\n */\nclass Receiver extends Writable {\n  /**\n   * Creates a Receiver instance.\n   *\n   * @param {String} [binaryType=nodebuffer] The type for binary data\n   * @param {Object} [extensions] An object containing the negotiated extensions\n   * @param {Boolean} [isServer=false] Specifies whether to operate in client or\n   *     server mode\n   * @param {Number} [maxPayload=0] The maximum allowed message length\n   */\n  constructor(binaryType, extensions, isServer, maxPayload) {\n    super();\n\n    this._binaryType = binaryType || BINARY_TYPES[0];\n    this[kWebSocket] = undefined;\n    this._extensions = extensions || {};\n    this._isServer = !!isServer;\n    this._maxPayload = maxPayload | 0;\n\n    this._bufferedBytes = 0;\n    this._buffers = [];\n\n    this._compressed = false;\n    this._payloadLength = 0;\n    this._mask = undefined;\n    this._fragmented = 0;\n    this._masked = false;\n    this._fin = false;\n    this._opcode = 0;\n\n    this._totalPayloadLength = 0;\n    this._messageLength = 0;\n    this._fragments = [];\n\n    this._state = GET_INFO;\n    this._loop = false;\n  }\n\n  /**\n   * Implements `Writable.prototype._write()`.\n   *\n   * @param {Buffer} chunk The chunk of data to write\n   * @param {String} encoding The character encoding of `chunk`\n   * @param {Function} cb Callback\n   * @private\n   */\n  _write(chunk, encoding, cb) {\n    if (this._opcode === 0x08 && this._state == GET_INFO) return cb();\n\n    this._bufferedBytes += chunk.length;\n    this._buffers.push(chunk);\n    this.startLoop(cb);\n  }\n\n  /**\n   * Consumes `n` bytes from the buffered data.\n   *\n   * @param {Number} n The number of bytes to consume\n   * @return {Buffer} The consumed bytes\n   * @private\n   */\n  consume(n) {\n    this._bufferedBytes -= n;\n\n    if (n === this._buffers[0].length) return this._buffers.shift();\n\n    if (n < this._buffers[0].length) {\n      const buf = this._buffers[0];\n      this._buffers[0] = buf.slice(n);\n      return buf.slice(0, n);\n    }\n\n    const dst = Buffer.allocUnsafe(n);\n\n    do {\n      const buf = this._buffers[0];\n      const offset = dst.length - n;\n\n      if (n >= buf.length) {\n        dst.set(this._buffers.shift(), offset);\n      } else {\n        dst.set(new Uint8Array(buf.buffer, buf.byteOffset, n), offset);\n        this._buffers[0] = buf.slice(n);\n      }\n\n      n -= buf.length;\n    } while (n > 0);\n\n    return dst;\n  }\n\n  /**\n   * Starts the parsing loop.\n   *\n   * @param {Function} cb Callback\n   * @private\n   */\n  startLoop(cb) {\n    let err;\n    this._loop = true;\n\n    do {\n      switch (this._state) {\n        case GET_INFO:\n          err = this.getInfo();\n          break;\n        case GET_PAYLOAD_LENGTH_16:\n          err = this.getPayloadLength16();\n          break;\n        case GET_PAYLOAD_LENGTH_64:\n          err = this.getPayloadLength64();\n          break;\n        case GET_MASK:\n          this.getMask();\n          break;\n        case GET_DATA:\n          err = this.getData(cb);\n          break;\n        default:\n          // `INFLATING`\n          this._loop = false;\n          return;\n      }\n    } while (this._loop);\n\n    cb(err);\n  }\n\n  /**\n   * Reads the first two bytes of a frame.\n   *\n   * @return {(RangeError|undefined)} A possible error\n   * @private\n   */\n  getInfo() {\n    if (this._bufferedBytes < 2) {\n      this._loop = false;\n      return;\n    }\n\n    const buf = this.consume(2);\n\n    if ((buf[0] & 0x30) !== 0x00) {\n      this._loop = false;\n      return error(\n        RangeError,\n        'RSV2 and RSV3 must be clear',\n        true,\n        1002,\n        'WS_ERR_UNEXPECTED_RSV_2_3'\n      );\n    }\n\n    const compressed = (buf[0] & 0x40) === 0x40;\n\n    if (compressed && !this._extensions[PerMessageDeflate.extensionName]) {\n      this._loop = false;\n      return error(\n        RangeError,\n        'RSV1 must be clear',\n        true,\n        1002,\n        'WS_ERR_UNEXPECTED_RSV_1'\n      );\n    }\n\n    this._fin = (buf[0] & 0x80) === 0x80;\n    this._opcode = buf[0] & 0x0f;\n    this._payloadLength = buf[1] & 0x7f;\n\n    if (this._opcode === 0x00) {\n      if (compressed) {\n        this._loop = false;\n        return error(\n          RangeError,\n          'RSV1 must be clear',\n          true,\n          1002,\n          'WS_ERR_UNEXPECTED_RSV_1'\n        );\n      }\n\n      if (!this._fragmented) {\n        this._loop = false;\n        return error(\n          RangeError,\n          'invalid opcode 0',\n          true,\n          1002,\n          'WS_ERR_INVALID_OPCODE'\n        );\n      }\n\n      this._opcode = this._fragmented;\n    } else if (this._opcode === 0x01 || this._opcode === 0x02) {\n      if (this._fragmented) {\n        this._loop = false;\n        return error(\n          RangeError,\n          `invalid opcode ${this._opcode}`,\n          true,\n          1002,\n          'WS_ERR_INVALID_OPCODE'\n        );\n      }\n\n      this._compressed = compressed;\n    } else if (this._opcode > 0x07 && this._opcode < 0x0b) {\n      if (!this._fin) {\n        this._loop = false;\n        return error(\n          RangeError,\n          'FIN must be set',\n          true,\n          1002,\n          'WS_ERR_EXPECTED_FIN'\n        );\n      }\n\n      if (compressed) {\n        this._loop = false;\n        return error(\n          RangeError,\n          'RSV1 must be clear',\n          true,\n          1002,\n          'WS_ERR_UNEXPECTED_RSV_1'\n        );\n      }\n\n      if (this._payloadLength > 0x7d) {\n        this._loop = false;\n        return error(\n          RangeError,\n          `invalid payload length ${this._payloadLength}`,\n          true,\n          1002,\n          'WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH'\n        );\n      }\n    } else {\n      this._loop = false;\n      return error(\n        RangeError,\n        `invalid opcode ${this._opcode}`,\n        true,\n        1002,\n        'WS_ERR_INVALID_OPCODE'\n      );\n    }\n\n    if (!this._fin && !this._fragmented) this._fragmented = this._opcode;\n    this._masked = (buf[1] & 0x80) === 0x80;\n\n    if (this._isServer) {\n      if (!this._masked) {\n        this._loop = false;\n        return error(\n          RangeError,\n          'MASK must be set',\n          true,\n          1002,\n          'WS_ERR_EXPECTED_MASK'\n        );\n      }\n    } else if (this._masked) {\n      this._loop = false;\n      return error(\n        RangeError,\n        'MASK must be clear',\n        true,\n        1002,\n        'WS_ERR_UNEXPECTED_MASK'\n      );\n    }\n\n    if (this._payloadLength === 126) this._state = GET_PAYLOAD_LENGTH_16;\n    else if (this._payloadLength === 127) this._state = GET_PAYLOAD_LENGTH_64;\n    else return this.haveLength();\n  }\n\n  /**\n   * Gets extended payload length (7+16).\n   *\n   * @return {(RangeError|undefined)} A possible error\n   * @private\n   */\n  getPayloadLength16() {\n    if (this._bufferedBytes < 2) {\n      this._loop = false;\n      return;\n    }\n\n    this._payloadLength = this.consume(2).readUInt16BE(0);\n    return this.haveLength();\n  }\n\n  /**\n   * Gets extended payload length (7+64).\n   *\n   * @return {(RangeError|undefined)} A possible error\n   * @private\n   */\n  getPayloadLength64() {\n    if (this._bufferedBytes < 8) {\n      this._loop = false;\n      return;\n    }\n\n    const buf = this.consume(8);\n    const num = buf.readUInt32BE(0);\n\n    //\n    // The maximum safe integer in JavaScript is 2^53 - 1. An error is returned\n    // if payload length is greater than this number.\n    //\n    if (num > Math.pow(2, 53 - 32) - 1) {\n      this._loop = false;\n      return error(\n        RangeError,\n        'Unsupported WebSocket frame: payload length > 2^53 - 1',\n        false,\n        1009,\n        'WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH'\n      );\n    }\n\n    this._payloadLength = num * Math.pow(2, 32) + buf.readUInt32BE(4);\n    return this.haveLength();\n  }\n\n  /**\n   * Payload length has been read.\n   *\n   * @return {(RangeError|undefined)} A possible error\n   * @private\n   */\n  haveLength() {\n    if (this._payloadLength && this._opcode < 0x08) {\n      this._totalPayloadLength += this._payloadLength;\n      if (this._totalPayloadLength > this._maxPayload && this._maxPayload > 0) {\n        this._loop = false;\n        return error(\n          RangeError,\n          'Max payload size exceeded',\n          false,\n          1009,\n          'WS_ERR_UNSUPPORTED_MESSAGE_LENGTH'\n        );\n      }\n    }\n\n    if (this._masked) this._state = GET_MASK;\n    else this._state = GET_DATA;\n  }\n\n  /**\n   * Reads mask bytes.\n   *\n   * @private\n   */\n  getMask() {\n    if (this._bufferedBytes < 4) {\n      this._loop = false;\n      return;\n    }\n\n    this._mask = this.consume(4);\n    this._state = GET_DATA;\n  }\n\n  /**\n   * Reads data bytes.\n   *\n   * @param {Function} cb Callback\n   * @return {(Error|RangeError|undefined)} A possible error\n   * @private\n   */\n  getData(cb) {\n    let data = EMPTY_BUFFER;\n\n    if (this._payloadLength) {\n      if (this._bufferedBytes < this._payloadLength) {\n        this._loop = false;\n        return;\n      }\n\n      data = this.consume(this._payloadLength);\n      if (this._masked) unmask(data, this._mask);\n    }\n\n    if (this._opcode > 0x07) return this.controlMessage(data);\n\n    if (this._compressed) {\n      this._state = INFLATING;\n      this.decompress(data, cb);\n      return;\n    }\n\n    if (data.length) {\n      //\n      // This message is not compressed so its lenght is the sum of the payload\n      // length of all fragments.\n      //\n      this._messageLength = this._totalPayloadLength;\n      this._fragments.push(data);\n    }\n\n    return this.dataMessage();\n  }\n\n  /**\n   * Decompresses data.\n   *\n   * @param {Buffer} data Compressed data\n   * @param {Function} cb Callback\n   * @private\n   */\n  decompress(data, cb) {\n    const perMessageDeflate = this._extensions[PerMessageDeflate.extensionName];\n\n    perMessageDeflate.decompress(data, this._fin, (err, buf) => {\n      if (err) return cb(err);\n\n      if (buf.length) {\n        this._messageLength += buf.length;\n        if (this._messageLength > this._maxPayload && this._maxPayload > 0) {\n          return cb(\n            error(\n              RangeError,\n              'Max payload size exceeded',\n              false,\n              1009,\n              'WS_ERR_UNSUPPORTED_MESSAGE_LENGTH'\n            )\n          );\n        }\n\n        this._fragments.push(buf);\n      }\n\n      const er = this.dataMessage();\n      if (er) return cb(er);\n\n      this.startLoop(cb);\n    });\n  }\n\n  /**\n   * Handles a data message.\n   *\n   * @return {(Error|undefined)} A possible error\n   * @private\n   */\n  dataMessage() {\n    if (this._fin) {\n      const messageLength = this._messageLength;\n      const fragments = this._fragments;\n\n      this._totalPayloadLength = 0;\n      this._messageLength = 0;\n      this._fragmented = 0;\n      this._fragments = [];\n\n      if (this._opcode === 2) {\n        let data;\n\n        if (this._binaryType === 'nodebuffer') {\n          data = concat(fragments, messageLength);\n        } else if (this._binaryType === 'arraybuffer') {\n          data = toArrayBuffer(concat(fragments, messageLength));\n        } else {\n          data = fragments;\n        }\n\n        this.emit('message', data);\n      } else {\n        const buf = concat(fragments, messageLength);\n\n        if (!isValidUTF8(buf)) {\n          this._loop = false;\n          return error(\n            Error,\n            'invalid UTF-8 sequence',\n            true,\n            1007,\n            'WS_ERR_INVALID_UTF8'\n          );\n        }\n\n        this.emit('message', buf.toString());\n      }\n    }\n\n    this._state = GET_INFO;\n  }\n\n  /**\n   * Handles a control message.\n   *\n   * @param {Buffer} data Data to handle\n   * @return {(Error|RangeError|undefined)} A possible error\n   * @private\n   */\n  controlMessage(data) {\n    if (this._opcode === 0x08) {\n      this._loop = false;\n\n      if (data.length === 0) {\n        this.emit('conclude', 1005, '');\n        this.end();\n      } else if (data.length === 1) {\n        return error(\n          RangeError,\n          'invalid payload length 1',\n          true,\n          1002,\n          'WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH'\n        );\n      } else {\n        const code = data.readUInt16BE(0);\n\n        if (!isValidStatusCode(code)) {\n          return error(\n            RangeError,\n            `invalid status code ${code}`,\n            true,\n            1002,\n            'WS_ERR_INVALID_CLOSE_CODE'\n          );\n        }\n\n        const buf = data.slice(2);\n\n        if (!isValidUTF8(buf)) {\n          return error(\n            Error,\n            'invalid UTF-8 sequence',\n            true,\n            1007,\n            'WS_ERR_INVALID_UTF8'\n          );\n        }\n\n        this.emit('conclude', code, buf.toString());\n        this.end();\n      }\n    } else if (this._opcode === 0x09) {\n      this.emit('ping', data);\n    } else {\n      this.emit('pong', data);\n    }\n\n    this._state = GET_INFO;\n  }\n}\n\nmodule.exports = Receiver;\n\n/**\n * Builds an error object.\n *\n * @param {function(new:Error|RangeError)} ErrorCtor The error constructor\n * @param {String} message The error message\n * @param {Boolean} prefix Specifies whether or not to add a default prefix to\n *     `message`\n * @param {Number} statusCode The status code\n * @param {String} errorCode The exposed error code\n * @return {(Error|RangeError)} The error\n * @private\n */\nfunction error(ErrorCtor, message, prefix, statusCode, errorCode) {\n  const err = new ErrorCtor(\n    prefix ? `Invalid WebSocket frame: ${message}` : message\n  );\n\n  Error.captureStackTrace(err, error);\n  err.code = errorCode;\n  err[kStatusCode] = statusCode;\n  return err;\n}\n","/* eslint no-unused-vars: [\"error\", { \"varsIgnorePattern\": \"^net|tls$\" }] */\n\n'use strict';\n\nconst net = require('net');\nconst tls = require('tls');\nconst { randomFillSync } = require('crypto');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst { EMPTY_BUFFER } = require('./constants');\nconst { isValidStatusCode } = require('./validation');\nconst { mask: applyMask, toBuffer } = require('./buffer-util');\n\nconst mask = Buffer.alloc(4);\n\n/**\n * HyBi Sender implementation.\n */\nclass Sender {\n  /**\n   * Creates a Sender instance.\n   *\n   * @param {(net.Socket|tls.Socket)} socket The connection socket\n   * @param {Object} [extensions] An object containing the negotiated extensions\n   */\n  constructor(socket, extensions) {\n    this._extensions = extensions || {};\n    this._socket = socket;\n\n    this._firstFragment = true;\n    this._compress = false;\n\n    this._bufferedBytes = 0;\n    this._deflating = false;\n    this._queue = [];\n  }\n\n  /**\n   * Frames a piece of data according to the HyBi WebSocket protocol.\n   *\n   * @param {Buffer} data The data to frame\n   * @param {Object} options Options object\n   * @param {Number} options.opcode The opcode\n   * @param {Boolean} [options.readOnly=false] Specifies whether `data` can be\n   *     modified\n   * @param {Boolean} [options.fin=false] Specifies whether or not to set the\n   *     FIN bit\n   * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n   *     `data`\n   * @param {Boolean} [options.rsv1=false] Specifies whether or not to set the\n   *     RSV1 bit\n   * @return {Buffer[]} The framed data as a list of `Buffer` instances\n   * @public\n   */\n  static frame(data, options) {\n    const merge = options.mask && options.readOnly;\n    let offset = options.mask ? 6 : 2;\n    let payloadLength = data.length;\n\n    if (data.length >= 65536) {\n      offset += 8;\n      payloadLength = 127;\n    } else if (data.length > 125) {\n      offset += 2;\n      payloadLength = 126;\n    }\n\n    const target = Buffer.allocUnsafe(merge ? data.length + offset : offset);\n\n    target[0] = options.fin ? options.opcode | 0x80 : options.opcode;\n    if (options.rsv1) target[0] |= 0x40;\n\n    target[1] = payloadLength;\n\n    if (payloadLength === 126) {\n      target.writeUInt16BE(data.length, 2);\n    } else if (payloadLength === 127) {\n      target.writeUInt32BE(0, 2);\n      target.writeUInt32BE(data.length, 6);\n    }\n\n    if (!options.mask) return [target, data];\n\n    randomFillSync(mask, 0, 4);\n\n    target[1] |= 0x80;\n    target[offset - 4] = mask[0];\n    target[offset - 3] = mask[1];\n    target[offset - 2] = mask[2];\n    target[offset - 1] = mask[3];\n\n    if (merge) {\n      applyMask(data, mask, target, offset, data.length);\n      return [target];\n    }\n\n    applyMask(data, mask, data, 0, data.length);\n    return [target, data];\n  }\n\n  /**\n   * Sends a close message to the other peer.\n   *\n   * @param {Number} [code] The status code component of the body\n   * @param {String} [data] The message component of the body\n   * @param {Boolean} [mask=false] Specifies whether or not to mask the message\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  close(code, data, mask, cb) {\n    let buf;\n\n    if (code === undefined) {\n      buf = EMPTY_BUFFER;\n    } else if (typeof code !== 'number' || !isValidStatusCode(code)) {\n      throw new TypeError('First argument must be a valid error code number');\n    } else if (data === undefined || data === '') {\n      buf = Buffer.allocUnsafe(2);\n      buf.writeUInt16BE(code, 0);\n    } else {\n      const length = Buffer.byteLength(data);\n\n      if (length > 123) {\n        throw new RangeError('The message must not be greater than 123 bytes');\n      }\n\n      buf = Buffer.allocUnsafe(2 + length);\n      buf.writeUInt16BE(code, 0);\n      buf.write(data, 2);\n    }\n\n    if (this._deflating) {\n      this.enqueue([this.doClose, buf, mask, cb]);\n    } else {\n      this.doClose(buf, mask, cb);\n    }\n  }\n\n  /**\n   * Frames and sends a close message.\n   *\n   * @param {Buffer} data The message to send\n   * @param {Boolean} [mask=false] Specifies whether or not to mask `data`\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  doClose(data, mask, cb) {\n    this.sendFrame(\n      Sender.frame(data, {\n        fin: true,\n        rsv1: false,\n        opcode: 0x08,\n        mask,\n        readOnly: false\n      }),\n      cb\n    );\n  }\n\n  /**\n   * Sends a ping message to the other peer.\n   *\n   * @param {*} data The message to send\n   * @param {Boolean} [mask=false] Specifies whether or not to mask `data`\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  ping(data, mask, cb) {\n    const buf = toBuffer(data);\n\n    if (buf.length > 125) {\n      throw new RangeError('The data size must not be greater than 125 bytes');\n    }\n\n    if (this._deflating) {\n      this.enqueue([this.doPing, buf, mask, toBuffer.readOnly, cb]);\n    } else {\n      this.doPing(buf, mask, toBuffer.readOnly, cb);\n    }\n  }\n\n  /**\n   * Frames and sends a ping message.\n   *\n   * @param {Buffer} data The message to send\n   * @param {Boolean} [mask=false] Specifies whether or not to mask `data`\n   * @param {Boolean} [readOnly=false] Specifies whether `data` can be modified\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  doPing(data, mask, readOnly, cb) {\n    this.sendFrame(\n      Sender.frame(data, {\n        fin: true,\n        rsv1: false,\n        opcode: 0x09,\n        mask,\n        readOnly\n      }),\n      cb\n    );\n  }\n\n  /**\n   * Sends a pong message to the other peer.\n   *\n   * @param {*} data The message to send\n   * @param {Boolean} [mask=false] Specifies whether or not to mask `data`\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  pong(data, mask, cb) {\n    const buf = toBuffer(data);\n\n    if (buf.length > 125) {\n      throw new RangeError('The data size must not be greater than 125 bytes');\n    }\n\n    if (this._deflating) {\n      this.enqueue([this.doPong, buf, mask, toBuffer.readOnly, cb]);\n    } else {\n      this.doPong(buf, mask, toBuffer.readOnly, cb);\n    }\n  }\n\n  /**\n   * Frames and sends a pong message.\n   *\n   * @param {Buffer} data The message to send\n   * @param {Boolean} [mask=false] Specifies whether or not to mask `data`\n   * @param {Boolean} [readOnly=false] Specifies whether `data` can be modified\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  doPong(data, mask, readOnly, cb) {\n    this.sendFrame(\n      Sender.frame(data, {\n        fin: true,\n        rsv1: false,\n        opcode: 0x0a,\n        mask,\n        readOnly\n      }),\n      cb\n    );\n  }\n\n  /**\n   * Sends a data message to the other peer.\n   *\n   * @param {*} data The message to send\n   * @param {Object} options Options object\n   * @param {Boolean} [options.compress=false] Specifies whether or not to\n   *     compress `data`\n   * @param {Boolean} [options.binary=false] Specifies whether `data` is binary\n   *     or text\n   * @param {Boolean} [options.fin=false] Specifies whether the fragment is the\n   *     last one\n   * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n   *     `data`\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  send(data, options, cb) {\n    const buf = toBuffer(data);\n    const perMessageDeflate = this._extensions[PerMessageDeflate.extensionName];\n    let opcode = options.binary ? 2 : 1;\n    let rsv1 = options.compress;\n\n    if (this._firstFragment) {\n      this._firstFragment = false;\n      if (rsv1 && perMessageDeflate) {\n        rsv1 = buf.length >= perMessageDeflate._threshold;\n      }\n      this._compress = rsv1;\n    } else {\n      rsv1 = false;\n      opcode = 0;\n    }\n\n    if (options.fin) this._firstFragment = true;\n\n    if (perMessageDeflate) {\n      const opts = {\n        fin: options.fin,\n        rsv1,\n        opcode,\n        mask: options.mask,\n        readOnly: toBuffer.readOnly\n      };\n\n      if (this._deflating) {\n        this.enqueue([this.dispatch, buf, this._compress, opts, cb]);\n      } else {\n        this.dispatch(buf, this._compress, opts, cb);\n      }\n    } else {\n      this.sendFrame(\n        Sender.frame(buf, {\n          fin: options.fin,\n          rsv1: false,\n          opcode,\n          mask: options.mask,\n          readOnly: toBuffer.readOnly\n        }),\n        cb\n      );\n    }\n  }\n\n  /**\n   * Dispatches a data message.\n   *\n   * @param {Buffer} data The message to send\n   * @param {Boolean} [compress=false] Specifies whether or not to compress\n   *     `data`\n   * @param {Object} options Options object\n   * @param {Number} options.opcode The opcode\n   * @param {Boolean} [options.readOnly=false] Specifies whether `data` can be\n   *     modified\n   * @param {Boolean} [options.fin=false] Specifies whether or not to set the\n   *     FIN bit\n   * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n   *     `data`\n   * @param {Boolean} [options.rsv1=false] Specifies whether or not to set the\n   *     RSV1 bit\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  dispatch(data, compress, options, cb) {\n    if (!compress) {\n      this.sendFrame(Sender.frame(data, options), cb);\n      return;\n    }\n\n    const perMessageDeflate = this._extensions[PerMessageDeflate.extensionName];\n\n    this._bufferedBytes += data.length;\n    this._deflating = true;\n    perMessageDeflate.compress(data, options.fin, (_, buf) => {\n      if (this._socket.destroyed) {\n        const err = new Error(\n          'The socket was closed while data was being compressed'\n        );\n\n        if (typeof cb === 'function') cb(err);\n\n        for (let i = 0; i < this._queue.length; i++) {\n          const callback = this._queue[i][4];\n\n          if (typeof callback === 'function') callback(err);\n        }\n\n        return;\n      }\n\n      this._bufferedBytes -= data.length;\n      this._deflating = false;\n      options.readOnly = false;\n      this.sendFrame(Sender.frame(buf, options), cb);\n      this.dequeue();\n    });\n  }\n\n  /**\n   * Executes queued send operations.\n   *\n   * @private\n   */\n  dequeue() {\n    while (!this._deflating && this._queue.length) {\n      const params = this._queue.shift();\n\n      this._bufferedBytes -= params[1].length;\n      Reflect.apply(params[0], this, params.slice(1));\n    }\n  }\n\n  /**\n   * Enqueues a send operation.\n   *\n   * @param {Array} params Send operation parameters.\n   * @private\n   */\n  enqueue(params) {\n    this._bufferedBytes += params[1].length;\n    this._queue.push(params);\n  }\n\n  /**\n   * Sends a frame.\n   *\n   * @param {Buffer[]} list The frame to send\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  sendFrame(list, cb) {\n    if (list.length === 2) {\n      this._socket.cork();\n      this._socket.write(list[0]);\n      this._socket.write(list[1], cb);\n      this._socket.uncork();\n    } else {\n      this._socket.write(list[0], cb);\n    }\n  }\n}\n\nmodule.exports = Sender;\n","'use strict';\n\n//\n// Allowed token characters:\n//\n// '!', '#', '$', '%', '&', ''', '*', '+', '-',\n// '.', 0-9, A-Z, '^', '_', '`', a-z, '|', '~'\n//\n// tokenChars[32] === 0 // ' '\n// tokenChars[33] === 1 // '!'\n// tokenChars[34] === 0 // '\"'\n// ...\n//\n// prettier-ignore\nconst tokenChars = [\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // 0 - 15\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // 16 - 31\n  0, 1, 0, 1, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1, 1, 0, // 32 - 47\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, // 48 - 63\n  0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, // 64 - 79\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 1, 1, // 80 - 95\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, // 96 - 111\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 0 // 112 - 127\n];\n\n/**\n * Adds an offer to the map of extension offers or a parameter to the map of\n * parameters.\n *\n * @param {Object} dest The map of extension offers or parameters\n * @param {String} name The extension or parameter name\n * @param {(Object|Boolean|String)} elem The extension parameters or the\n *     parameter value\n * @private\n */\nfunction push(dest, name, elem) {\n  if (dest[name] === undefined) dest[name] = [elem];\n  else dest[name].push(elem);\n}\n\n/**\n * Parses the `Sec-WebSocket-Extensions` header into an object.\n *\n * @param {String} header The field value of the header\n * @return {Object} The parsed object\n * @public\n */\nfunction parse(header) {\n  const offers = Object.create(null);\n\n  if (header === undefined || header === '') return offers;\n\n  let params = Object.create(null);\n  let mustUnescape = false;\n  let isEscaping = false;\n  let inQuotes = false;\n  let extensionName;\n  let paramName;\n  let start = -1;\n  let end = -1;\n  let i = 0;\n\n  for (; i < header.length; i++) {\n    const code = header.charCodeAt(i);\n\n    if (extensionName === undefined) {\n      if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (code === 0x20 /* ' ' */ || code === 0x09 /* '\\t' */) {\n        if (end === -1 && start !== -1) end = i;\n      } else if (code === 0x3b /* ';' */ || code === 0x2c /* ',' */) {\n        if (start === -1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n\n        if (end === -1) end = i;\n        const name = header.slice(start, end);\n        if (code === 0x2c) {\n          push(offers, name, params);\n          params = Object.create(null);\n        } else {\n          extensionName = name;\n        }\n\n        start = end = -1;\n      } else {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n    } else if (paramName === undefined) {\n      if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (code === 0x20 || code === 0x09) {\n        if (end === -1 && start !== -1) end = i;\n      } else if (code === 0x3b || code === 0x2c) {\n        if (start === -1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n\n        if (end === -1) end = i;\n        push(params, header.slice(start, end), true);\n        if (code === 0x2c) {\n          push(offers, extensionName, params);\n          params = Object.create(null);\n          extensionName = undefined;\n        }\n\n        start = end = -1;\n      } else if (code === 0x3d /* '=' */ && start !== -1 && end === -1) {\n        paramName = header.slice(start, i);\n        start = end = -1;\n      } else {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n    } else {\n      //\n      // The value of a quoted-string after unescaping must conform to the\n      // token ABNF, so only token characters are valid.\n      // Ref: https://tools.ietf.org/html/rfc6455#section-9.1\n      //\n      if (isEscaping) {\n        if (tokenChars[code] !== 1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n        if (start === -1) start = i;\n        else if (!mustUnescape) mustUnescape = true;\n        isEscaping = false;\n      } else if (inQuotes) {\n        if (tokenChars[code] === 1) {\n          if (start === -1) start = i;\n        } else if (code === 0x22 /* '\"' */ && start !== -1) {\n          inQuotes = false;\n          end = i;\n        } else if (code === 0x5c /* '\\' */) {\n          isEscaping = true;\n        } else {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n      } else if (code === 0x22 && header.charCodeAt(i - 1) === 0x3d) {\n        inQuotes = true;\n      } else if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (start !== -1 && (code === 0x20 || code === 0x09)) {\n        if (end === -1) end = i;\n      } else if (code === 0x3b || code === 0x2c) {\n        if (start === -1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n\n        if (end === -1) end = i;\n        let value = header.slice(start, end);\n        if (mustUnescape) {\n          value = value.replace(/\\\\/g, '');\n          mustUnescape = false;\n        }\n        push(params, paramName, value);\n        if (code === 0x2c) {\n          push(offers, extensionName, params);\n          params = Object.create(null);\n          extensionName = undefined;\n        }\n\n        paramName = undefined;\n        start = end = -1;\n      } else {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n    }\n  }\n\n  if (start === -1 || inQuotes) {\n    throw new SyntaxError('Unexpected end of input');\n  }\n\n  if (end === -1) end = i;\n  const token = header.slice(start, end);\n  if (extensionName === undefined) {\n    push(offers, token, params);\n  } else {\n    if (paramName === undefined) {\n      push(params, token, true);\n    } else if (mustUnescape) {\n      push(params, paramName, token.replace(/\\\\/g, ''));\n    } else {\n      push(params, paramName, token);\n    }\n    push(offers, extensionName, params);\n  }\n\n  return offers;\n}\n\n/**\n * Builds the `Sec-WebSocket-Extensions` header field value.\n *\n * @param {Object} extensions The map of extensions and parameters to format\n * @return {String} A string representing the given object\n * @public\n */\nfunction format(extensions) {\n  return Object.keys(extensions)\n    .map((extension) => {\n      let configurations = extensions[extension];\n      if (!Array.isArray(configurations)) configurations = [configurations];\n      return configurations\n        .map((params) => {\n          return [extension]\n            .concat(\n              Object.keys(params).map((k) => {\n                let values = params[k];\n                if (!Array.isArray(values)) values = [values];\n                return values\n                  .map((v) => (v === true ? k : `${k}=${v}`))\n                  .join('; ');\n              })\n            )\n            .join('; ');\n        })\n        .join(', ');\n    })\n    .join(', ');\n}\n\nmodule.exports = { format, parse };\n","/* eslint no-unused-vars: [\"error\", { \"varsIgnorePattern\": \"^Readable$\" }] */\n\n'use strict';\n\nconst EventEmitter = require('events');\nconst https = require('https');\nconst http = require('http');\nconst net = require('net');\nconst tls = require('tls');\nconst { randomBytes, createHash } = require('crypto');\nconst { Readable } = require('stream');\nconst { URL } = require('url');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst Receiver = require('./receiver');\nconst Sender = require('./sender');\nconst {\n  BINARY_TYPES,\n  EMPTY_BUFFER,\n  GUID,\n  kStatusCode,\n  kWebSocket,\n  NOOP\n} = require('./constants');\nconst { addEventListener, removeEventListener } = require('./event-target');\nconst { format, parse } = require('./extension');\nconst { toBuffer } = require('./buffer-util');\n\nconst readyStates = ['CONNECTING', 'OPEN', 'CLOSING', 'CLOSED'];\nconst protocolVersions = [8, 13];\nconst closeTimeout = 30 * 1000;\n\n/**\n * Class representing a WebSocket.\n *\n * @extends EventEmitter\n */\nclass WebSocket extends EventEmitter {\n  /**\n   * Create a new `WebSocket`.\n   *\n   * @param {(String|URL)} address The URL to which to connect\n   * @param {(String|String[])} [protocols] The subprotocols\n   * @param {Object} [options] Connection options\n   */\n  constructor(address, protocols, options) {\n    super();\n\n    this._binaryType = BINARY_TYPES[0];\n    this._closeCode = 1006;\n    this._closeFrameReceived = false;\n    this._closeFrameSent = false;\n    this._closeMessage = '';\n    this._closeTimer = null;\n    this._extensions = {};\n    this._protocol = '';\n    this._readyState = WebSocket.CONNECTING;\n    this._receiver = null;\n    this._sender = null;\n    this._socket = null;\n\n    if (address !== null) {\n      this._bufferedAmount = 0;\n      this._isServer = false;\n      this._redirects = 0;\n\n      if (Array.isArray(protocols)) {\n        protocols = protocols.join(', ');\n      } else if (typeof protocols === 'object' && protocols !== null) {\n        options = protocols;\n        protocols = undefined;\n      }\n\n      initAsClient(this, address, protocols, options);\n    } else {\n      this._isServer = true;\n    }\n  }\n\n  /**\n   * This deviates from the WHATWG interface since ws doesn't support the\n   * required default \"blob\" type (instead we define a custom \"nodebuffer\"\n   * type).\n   *\n   * @type {String}\n   */\n  get binaryType() {\n    return this._binaryType;\n  }\n\n  set binaryType(type) {\n    if (!BINARY_TYPES.includes(type)) return;\n\n    this._binaryType = type;\n\n    //\n    // Allow to change `binaryType` on the fly.\n    //\n    if (this._receiver) this._receiver._binaryType = type;\n  }\n\n  /**\n   * @type {Number}\n   */\n  get bufferedAmount() {\n    if (!this._socket) return this._bufferedAmount;\n\n    return this._socket._writableState.length + this._sender._bufferedBytes;\n  }\n\n  /**\n   * @type {String}\n   */\n  get extensions() {\n    return Object.keys(this._extensions).join();\n  }\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onclose() {\n    return undefined;\n  }\n\n  /* istanbul ignore next */\n  set onclose(listener) {}\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onerror() {\n    return undefined;\n  }\n\n  /* istanbul ignore next */\n  set onerror(listener) {}\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onopen() {\n    return undefined;\n  }\n\n  /* istanbul ignore next */\n  set onopen(listener) {}\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onmessage() {\n    return undefined;\n  }\n\n  /* istanbul ignore next */\n  set onmessage(listener) {}\n\n  /**\n   * @type {String}\n   */\n  get protocol() {\n    return this._protocol;\n  }\n\n  /**\n   * @type {Number}\n   */\n  get readyState() {\n    return this._readyState;\n  }\n\n  /**\n   * @type {String}\n   */\n  get url() {\n    return this._url;\n  }\n\n  /**\n   * Set up the socket and the internal resources.\n   *\n   * @param {(net.Socket|tls.Socket)} socket The network socket between the\n   *     server and client\n   * @param {Buffer} head The first packet of the upgraded stream\n   * @param {Number} [maxPayload=0] The maximum allowed message size\n   * @private\n   */\n  setSocket(socket, head, maxPayload) {\n    const receiver = new Receiver(\n      this.binaryType,\n      this._extensions,\n      this._isServer,\n      maxPayload\n    );\n\n    this._sender = new Sender(socket, this._extensions);\n    this._receiver = receiver;\n    this._socket = socket;\n\n    receiver[kWebSocket] = this;\n    socket[kWebSocket] = this;\n\n    receiver.on('conclude', receiverOnConclude);\n    receiver.on('drain', receiverOnDrain);\n    receiver.on('error', receiverOnError);\n    receiver.on('message', receiverOnMessage);\n    receiver.on('ping', receiverOnPing);\n    receiver.on('pong', receiverOnPong);\n\n    socket.setTimeout(0);\n    socket.setNoDelay();\n\n    if (head.length > 0) socket.unshift(head);\n\n    socket.on('close', socketOnClose);\n    socket.on('data', socketOnData);\n    socket.on('end', socketOnEnd);\n    socket.on('error', socketOnError);\n\n    this._readyState = WebSocket.OPEN;\n    this.emit('open');\n  }\n\n  /**\n   * Emit the `'close'` event.\n   *\n   * @private\n   */\n  emitClose() {\n    if (!this._socket) {\n      this._readyState = WebSocket.CLOSED;\n      this.emit('close', this._closeCode, this._closeMessage);\n      return;\n    }\n\n    if (this._extensions[PerMessageDeflate.extensionName]) {\n      this._extensions[PerMessageDeflate.extensionName].cleanup();\n    }\n\n    this._receiver.removeAllListeners();\n    this._readyState = WebSocket.CLOSED;\n    this.emit('close', this._closeCode, this._closeMessage);\n  }\n\n  /**\n   * Start a closing handshake.\n   *\n   *          +----------+   +-----------+   +----------+\n   *     - - -|ws.close()|-->|close frame|-->|ws.close()|- - -\n   *    |     +----------+   +-----------+   +----------+     |\n   *          +----------+   +-----------+         |\n   * CLOSING  |ws.close()|<--|close frame|<--+-----+       CLOSING\n   *          +----------+   +-----------+   |\n   *    |           |                        |   +---+        |\n   *                +------------------------+-->|fin| - - - -\n   *    |         +---+                      |   +---+\n   *     - - - - -|fin|<---------------------+\n   *              +---+\n   *\n   * @param {Number} [code] Status code explaining why the connection is closing\n   * @param {String} [data] A string explaining why the connection is closing\n   * @public\n   */\n  close(code, data) {\n    if (this.readyState === WebSocket.CLOSED) return;\n    if (this.readyState === WebSocket.CONNECTING) {\n      const msg = 'WebSocket was closed before the connection was established';\n      return abortHandshake(this, this._req, msg);\n    }\n\n    if (this.readyState === WebSocket.CLOSING) {\n      if (\n        this._closeFrameSent &&\n        (this._closeFrameReceived || this._receiver._writableState.errorEmitted)\n      ) {\n        this._socket.end();\n      }\n\n      return;\n    }\n\n    this._readyState = WebSocket.CLOSING;\n    this._sender.close(code, data, !this._isServer, (err) => {\n      //\n      // This error is handled by the `'error'` listener on the socket. We only\n      // want to know if the close frame has been sent here.\n      //\n      if (err) return;\n\n      this._closeFrameSent = true;\n\n      if (\n        this._closeFrameReceived ||\n        this._receiver._writableState.errorEmitted\n      ) {\n        this._socket.end();\n      }\n    });\n\n    //\n    // Specify a timeout for the closing handshake to complete.\n    //\n    this._closeTimer = setTimeout(\n      this._socket.destroy.bind(this._socket),\n      closeTimeout\n    );\n  }\n\n  /**\n   * Send a ping.\n   *\n   * @param {*} [data] The data to send\n   * @param {Boolean} [mask] Indicates whether or not to mask `data`\n   * @param {Function} [cb] Callback which is executed when the ping is sent\n   * @public\n   */\n  ping(data, mask, cb) {\n    if (this.readyState === WebSocket.CONNECTING) {\n      throw new Error('WebSocket is not open: readyState 0 (CONNECTING)');\n    }\n\n    if (typeof data === 'function') {\n      cb = data;\n      data = mask = undefined;\n    } else if (typeof mask === 'function') {\n      cb = mask;\n      mask = undefined;\n    }\n\n    if (typeof data === 'number') data = data.toString();\n\n    if (this.readyState !== WebSocket.OPEN) {\n      sendAfterClose(this, data, cb);\n      return;\n    }\n\n    if (mask === undefined) mask = !this._isServer;\n    this._sender.ping(data || EMPTY_BUFFER, mask, cb);\n  }\n\n  /**\n   * Send a pong.\n   *\n   * @param {*} [data] The data to send\n   * @param {Boolean} [mask] Indicates whether or not to mask `data`\n   * @param {Function} [cb] Callback which is executed when the pong is sent\n   * @public\n   */\n  pong(data, mask, cb) {\n    if (this.readyState === WebSocket.CONNECTING) {\n      throw new Error('WebSocket is not open: readyState 0 (CONNECTING)');\n    }\n\n    if (typeof data === 'function') {\n      cb = data;\n      data = mask = undefined;\n    } else if (typeof mask === 'function') {\n      cb = mask;\n      mask = undefined;\n    }\n\n    if (typeof data === 'number') data = data.toString();\n\n    if (this.readyState !== WebSocket.OPEN) {\n      sendAfterClose(this, data, cb);\n      return;\n    }\n\n    if (mask === undefined) mask = !this._isServer;\n    this._sender.pong(data || EMPTY_BUFFER, mask, cb);\n  }\n\n  /**\n   * Send a data message.\n   *\n   * @param {*} data The message to send\n   * @param {Object} [options] Options object\n   * @param {Boolean} [options.compress] Specifies whether or not to compress\n   *     `data`\n   * @param {Boolean} [options.binary] Specifies whether `data` is binary or\n   *     text\n   * @param {Boolean} [options.fin=true] Specifies whether the fragment is the\n   *     last one\n   * @param {Boolean} [options.mask] Specifies whether or not to mask `data`\n   * @param {Function} [cb] Callback which is executed when data is written out\n   * @public\n   */\n  send(data, options, cb) {\n    if (this.readyState === WebSocket.CONNECTING) {\n      throw new Error('WebSocket is not open: readyState 0 (CONNECTING)');\n    }\n\n    if (typeof options === 'function') {\n      cb = options;\n      options = {};\n    }\n\n    if (typeof data === 'number') data = data.toString();\n\n    if (this.readyState !== WebSocket.OPEN) {\n      sendAfterClose(this, data, cb);\n      return;\n    }\n\n    const opts = {\n      binary: typeof data !== 'string',\n      mask: !this._isServer,\n      compress: true,\n      fin: true,\n      ...options\n    };\n\n    if (!this._extensions[PerMessageDeflate.extensionName]) {\n      opts.compress = false;\n    }\n\n    this._sender.send(data || EMPTY_BUFFER, opts, cb);\n  }\n\n  /**\n   * Forcibly close the connection.\n   *\n   * @public\n   */\n  terminate() {\n    if (this.readyState === WebSocket.CLOSED) return;\n    if (this.readyState === WebSocket.CONNECTING) {\n      const msg = 'WebSocket was closed before the connection was established';\n      return abortHandshake(this, this._req, msg);\n    }\n\n    if (this._socket) {\n      this._readyState = WebSocket.CLOSING;\n      this._socket.destroy();\n    }\n  }\n}\n\n/**\n * @constant {Number} CONNECTING\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'CONNECTING', {\n  enumerable: true,\n  value: readyStates.indexOf('CONNECTING')\n});\n\n/**\n * @constant {Number} CONNECTING\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'CONNECTING', {\n  enumerable: true,\n  value: readyStates.indexOf('CONNECTING')\n});\n\n/**\n * @constant {Number} OPEN\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'OPEN', {\n  enumerable: true,\n  value: readyStates.indexOf('OPEN')\n});\n\n/**\n * @constant {Number} OPEN\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'OPEN', {\n  enumerable: true,\n  value: readyStates.indexOf('OPEN')\n});\n\n/**\n * @constant {Number} CLOSING\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'CLOSING', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSING')\n});\n\n/**\n * @constant {Number} CLOSING\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'CLOSING', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSING')\n});\n\n/**\n * @constant {Number} CLOSED\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'CLOSED', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSED')\n});\n\n/**\n * @constant {Number} CLOSED\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'CLOSED', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSED')\n});\n\n[\n  'binaryType',\n  'bufferedAmount',\n  'extensions',\n  'protocol',\n  'readyState',\n  'url'\n].forEach((property) => {\n  Object.defineProperty(WebSocket.prototype, property, { enumerable: true });\n});\n\n//\n// Add the `onopen`, `onerror`, `onclose`, and `onmessage` attributes.\n// See https://html.spec.whatwg.org/multipage/comms.html#the-websocket-interface\n//\n['open', 'error', 'close', 'message'].forEach((method) => {\n  Object.defineProperty(WebSocket.prototype, `on${method}`, {\n    enumerable: true,\n    get() {\n      const listeners = this.listeners(method);\n      for (let i = 0; i < listeners.length; i++) {\n        if (listeners[i]._listener) return listeners[i]._listener;\n      }\n\n      return undefined;\n    },\n    set(listener) {\n      const listeners = this.listeners(method);\n      for (let i = 0; i < listeners.length; i++) {\n        //\n        // Remove only the listeners added via `addEventListener`.\n        //\n        if (listeners[i]._listener) this.removeListener(method, listeners[i]);\n      }\n      this.addEventListener(method, listener);\n    }\n  });\n});\n\nWebSocket.prototype.addEventListener = addEventListener;\nWebSocket.prototype.removeEventListener = removeEventListener;\n\nmodule.exports = WebSocket;\n\n/**\n * Initialize a WebSocket client.\n *\n * @param {WebSocket} websocket The client to initialize\n * @param {(String|URL)} address The URL to which to connect\n * @param {String} [protocols] The subprotocols\n * @param {Object} [options] Connection options\n * @param {(Boolean|Object)} [options.perMessageDeflate=true] Enable/disable\n *     permessage-deflate\n * @param {Number} [options.handshakeTimeout] Timeout in milliseconds for the\n *     handshake request\n * @param {Number} [options.protocolVersion=13] Value of the\n *     `Sec-WebSocket-Version` header\n * @param {String} [options.origin] Value of the `Origin` or\n *     `Sec-WebSocket-Origin` header\n * @param {Number} [options.maxPayload=104857600] The maximum allowed message\n *     size\n * @param {Boolean} [options.followRedirects=false] Whether or not to follow\n *     redirects\n * @param {Number} [options.maxRedirects=10] The maximum number of redirects\n *     allowed\n * @private\n */\nfunction initAsClient(websocket, address, protocols, options) {\n  const opts = {\n    protocolVersion: protocolVersions[1],\n    maxPayload: 100 * 1024 * 1024,\n    perMessageDeflate: true,\n    followRedirects: false,\n    maxRedirects: 10,\n    ...options,\n    createConnection: undefined,\n    socketPath: undefined,\n    hostname: undefined,\n    protocol: undefined,\n    timeout: undefined,\n    method: undefined,\n    host: undefined,\n    path: undefined,\n    port: undefined\n  };\n\n  if (!protocolVersions.includes(opts.protocolVersion)) {\n    throw new RangeError(\n      `Unsupported protocol version: ${opts.protocolVersion} ` +\n        `(supported versions: ${protocolVersions.join(', ')})`\n    );\n  }\n\n  let parsedUrl;\n\n  if (address instanceof URL) {\n    parsedUrl = address;\n    websocket._url = address.href;\n  } else {\n    parsedUrl = new URL(address);\n    websocket._url = address;\n  }\n\n  const isUnixSocket = parsedUrl.protocol === 'ws+unix:';\n\n  if (!parsedUrl.host && (!isUnixSocket || !parsedUrl.pathname)) {\n    const err = new Error(`Invalid URL: ${websocket.url}`);\n\n    if (websocket._redirects === 0) {\n      throw err;\n    } else {\n      emitErrorAndClose(websocket, err);\n      return;\n    }\n  }\n\n  const isSecure =\n    parsedUrl.protocol === 'wss:' || parsedUrl.protocol === 'https:';\n  const defaultPort = isSecure ? 443 : 80;\n  const key = randomBytes(16).toString('base64');\n  const get = isSecure ? https.get : http.get;\n  let perMessageDeflate;\n\n  opts.createConnection = isSecure ? tlsConnect : netConnect;\n  opts.defaultPort = opts.defaultPort || defaultPort;\n  opts.port = parsedUrl.port || defaultPort;\n  opts.host = parsedUrl.hostname.startsWith('[')\n    ? parsedUrl.hostname.slice(1, -1)\n    : parsedUrl.hostname;\n  opts.headers = {\n    'Sec-WebSocket-Version': opts.protocolVersion,\n    'Sec-WebSocket-Key': key,\n    Connection: 'Upgrade',\n    Upgrade: 'websocket',\n    ...opts.headers\n  };\n  opts.path = parsedUrl.pathname + parsedUrl.search;\n  opts.timeout = opts.handshakeTimeout;\n\n  if (opts.perMessageDeflate) {\n    perMessageDeflate = new PerMessageDeflate(\n      opts.perMessageDeflate !== true ? opts.perMessageDeflate : {},\n      false,\n      opts.maxPayload\n    );\n    opts.headers['Sec-WebSocket-Extensions'] = format({\n      [PerMessageDeflate.extensionName]: perMessageDeflate.offer()\n    });\n  }\n  if (protocols) {\n    opts.headers['Sec-WebSocket-Protocol'] = protocols;\n  }\n  if (opts.origin) {\n    if (opts.protocolVersion < 13) {\n      opts.headers['Sec-WebSocket-Origin'] = opts.origin;\n    } else {\n      opts.headers.Origin = opts.origin;\n    }\n  }\n  if (parsedUrl.username || parsedUrl.password) {\n    opts.auth = `${parsedUrl.username}:${parsedUrl.password}`;\n  }\n\n  if (isUnixSocket) {\n    const parts = opts.path.split(':');\n\n    opts.socketPath = parts[0];\n    opts.path = parts[1];\n  }\n\n  if (opts.followRedirects) {\n    if (websocket._redirects === 0) {\n      websocket._originalUnixSocket = isUnixSocket;\n      websocket._originalSecure = isSecure;\n      websocket._originalHostOrSocketPath = isUnixSocket\n        ? opts.socketPath\n        : parsedUrl.host;\n\n      const headers = options && options.headers;\n\n      //\n      // Shallow copy the user provided options so that headers can be changed\n      // without mutating the original object.\n      //\n      options = { ...options, headers: {} };\n\n      if (headers) {\n        for (const [key, value] of Object.entries(headers)) {\n          options.headers[key.toLowerCase()] = value;\n        }\n      }\n    } else {\n      const isSameHost = isUnixSocket\n        ? websocket._originalUnixSocket\n          ? opts.socketPath === websocket._originalHostOrSocketPath\n          : false\n        : websocket._originalUnixSocket\n        ? false\n        : parsedUrl.host === websocket._originalHostOrSocketPath;\n\n      if (!isSameHost || (websocket._originalSecure && !isSecure)) {\n        //\n        // Match curl 7.77.0 behavior and drop the following headers. These\n        // headers are also dropped when following a redirect to a subdomain.\n        //\n        delete opts.headers.authorization;\n        delete opts.headers.cookie;\n\n        if (!isSameHost) delete opts.headers.host;\n\n        opts.auth = undefined;\n      }\n    }\n\n    //\n    // Match curl 7.77.0 behavior and make the first `Authorization` header win.\n    // If the `Authorization` header is set, then there is nothing to do as it\n    // will take precedence.\n    //\n    if (opts.auth && !options.headers.authorization) {\n      options.headers.authorization =\n        'Basic ' + Buffer.from(opts.auth).toString('base64');\n    }\n  }\n\n  let req = (websocket._req = get(opts));\n\n  if (opts.timeout) {\n    req.on('timeout', () => {\n      abortHandshake(websocket, req, 'Opening handshake has timed out');\n    });\n  }\n\n  req.on('error', (err) => {\n    if (req === null || req.aborted) return;\n\n    req = websocket._req = null;\n    emitErrorAndClose(websocket, err);\n  });\n\n  req.on('response', (res) => {\n    const location = res.headers.location;\n    const statusCode = res.statusCode;\n\n    if (\n      location &&\n      opts.followRedirects &&\n      statusCode >= 300 &&\n      statusCode < 400\n    ) {\n      if (++websocket._redirects > opts.maxRedirects) {\n        abortHandshake(websocket, req, 'Maximum redirects exceeded');\n        return;\n      }\n\n      req.abort();\n\n      let addr;\n\n      try {\n        addr = new URL(location, address);\n      } catch (err) {\n        emitErrorAndClose(websocket, err);\n        return;\n      }\n\n      initAsClient(websocket, addr, protocols, options);\n    } else if (!websocket.emit('unexpected-response', req, res)) {\n      abortHandshake(\n        websocket,\n        req,\n        `Unexpected server response: ${res.statusCode}`\n      );\n    }\n  });\n\n  req.on('upgrade', (res, socket, head) => {\n    websocket.emit('upgrade', res);\n\n    //\n    // The user may have closed the connection from a listener of the `upgrade`\n    // event.\n    //\n    if (websocket.readyState !== WebSocket.CONNECTING) return;\n\n    req = websocket._req = null;\n\n    const upgrade = res.headers.upgrade;\n\n    if (upgrade === undefined || upgrade.toLowerCase() !== 'websocket') {\n      abortHandshake(websocket, socket, 'Invalid Upgrade header');\n      return;\n    }\n\n    const digest = createHash('sha1')\n      .update(key + GUID)\n      .digest('base64');\n\n    if (res.headers['sec-websocket-accept'] !== digest) {\n      abortHandshake(websocket, socket, 'Invalid Sec-WebSocket-Accept header');\n      return;\n    }\n\n    const serverProt = res.headers['sec-websocket-protocol'];\n    const protList = (protocols || '').split(/, */);\n    let protError;\n\n    if (!protocols && serverProt) {\n      protError = 'Server sent a subprotocol but none was requested';\n    } else if (protocols && !serverProt) {\n      protError = 'Server sent no subprotocol';\n    } else if (serverProt && !protList.includes(serverProt)) {\n      protError = 'Server sent an invalid subprotocol';\n    }\n\n    if (protError) {\n      abortHandshake(websocket, socket, protError);\n      return;\n    }\n\n    if (serverProt) websocket._protocol = serverProt;\n\n    const secWebSocketExtensions = res.headers['sec-websocket-extensions'];\n\n    if (secWebSocketExtensions !== undefined) {\n      if (!perMessageDeflate) {\n        const message =\n          'Server sent a Sec-WebSocket-Extensions header but no extension ' +\n          'was requested';\n        abortHandshake(websocket, socket, message);\n        return;\n      }\n\n      let extensions;\n\n      try {\n        extensions = parse(secWebSocketExtensions);\n      } catch (err) {\n        const message = 'Invalid Sec-WebSocket-Extensions header';\n        abortHandshake(websocket, socket, message);\n        return;\n      }\n\n      const extensionNames = Object.keys(extensions);\n\n      if (extensionNames.length) {\n        if (\n          extensionNames.length !== 1 ||\n          extensionNames[0] !== PerMessageDeflate.extensionName\n        ) {\n          const message =\n            'Server indicated an extension that was not requested';\n          abortHandshake(websocket, socket, message);\n          return;\n        }\n\n        try {\n          perMessageDeflate.accept(extensions[PerMessageDeflate.extensionName]);\n        } catch (err) {\n          const message = 'Invalid Sec-WebSocket-Extensions header';\n          abortHandshake(websocket, socket, message);\n          return;\n        }\n\n        websocket._extensions[PerMessageDeflate.extensionName] =\n          perMessageDeflate;\n      }\n    }\n\n    websocket.setSocket(socket, head, opts.maxPayload);\n  });\n}\n\n/**\n * Emit the `'error'` and `'close'` event.\n *\n * @param {WebSocket} websocket The WebSocket instance\n * @param {Error} The error to emit\n * @private\n */\nfunction emitErrorAndClose(websocket, err) {\n  websocket._readyState = WebSocket.CLOSING;\n  websocket.emit('error', err);\n  websocket.emitClose();\n}\n\n/**\n * Create a `net.Socket` and initiate a connection.\n *\n * @param {Object} options Connection options\n * @return {net.Socket} The newly created socket used to start the connection\n * @private\n */\nfunction netConnect(options) {\n  options.path = options.socketPath;\n  return net.connect(options);\n}\n\n/**\n * Create a `tls.TLSSocket` and initiate a connection.\n *\n * @param {Object} options Connection options\n * @return {tls.TLSSocket} The newly created socket used to start the connection\n * @private\n */\nfunction tlsConnect(options) {\n  options.path = undefined;\n\n  if (!options.servername && options.servername !== '') {\n    options.servername = net.isIP(options.host) ? '' : options.host;\n  }\n\n  return tls.connect(options);\n}\n\n/**\n * Abort the handshake and emit an error.\n *\n * @param {WebSocket} websocket The WebSocket instance\n * @param {(http.ClientRequest|net.Socket|tls.Socket)} stream The request to\n *     abort or the socket to destroy\n * @param {String} message The error message\n * @private\n */\nfunction abortHandshake(websocket, stream, message) {\n  websocket._readyState = WebSocket.CLOSING;\n\n  const err = new Error(message);\n  Error.captureStackTrace(err, abortHandshake);\n\n  if (stream.setHeader) {\n    stream.abort();\n\n    if (stream.socket && !stream.socket.destroyed) {\n      //\n      // On Node.js >= 14.3.0 `request.abort()` does not destroy the socket if\n      // called after the request completed. See\n      // https://github.com/websockets/ws/issues/1869.\n      //\n      stream.socket.destroy();\n    }\n\n    stream.once('abort', websocket.emitClose.bind(websocket));\n    websocket.emit('error', err);\n  } else {\n    stream.destroy(err);\n    stream.once('error', websocket.emit.bind(websocket, 'error'));\n    stream.once('close', websocket.emitClose.bind(websocket));\n  }\n}\n\n/**\n * Handle cases where the `ping()`, `pong()`, or `send()` methods are called\n * when the `readyState` attribute is `CLOSING` or `CLOSED`.\n *\n * @param {WebSocket} websocket The WebSocket instance\n * @param {*} [data] The data to send\n * @param {Function} [cb] Callback\n * @private\n */\nfunction sendAfterClose(websocket, data, cb) {\n  if (data) {\n    const length = toBuffer(data).length;\n\n    //\n    // The `_bufferedAmount` property is used only when the peer is a client and\n    // the opening handshake fails. Under these circumstances, in fact, the\n    // `setSocket()` method is not called, so the `_socket` and `_sender`\n    // properties are set to `null`.\n    //\n    if (websocket._socket) websocket._sender._bufferedBytes += length;\n    else websocket._bufferedAmount += length;\n  }\n\n  if (cb) {\n    const err = new Error(\n      `WebSocket is not open: readyState ${websocket.readyState} ` +\n        `(${readyStates[websocket.readyState]})`\n    );\n    cb(err);\n  }\n}\n\n/**\n * The listener of the `Receiver` `'conclude'` event.\n *\n * @param {Number} code The status code\n * @param {String} reason The reason for closing\n * @private\n */\nfunction receiverOnConclude(code, reason) {\n  const websocket = this[kWebSocket];\n\n  websocket._closeFrameReceived = true;\n  websocket._closeMessage = reason;\n  websocket._closeCode = code;\n\n  if (websocket._socket[kWebSocket] === undefined) return;\n\n  websocket._socket.removeListener('data', socketOnData);\n  process.nextTick(resume, websocket._socket);\n\n  if (code === 1005) websocket.close();\n  else websocket.close(code, reason);\n}\n\n/**\n * The listener of the `Receiver` `'drain'` event.\n *\n * @private\n */\nfunction receiverOnDrain() {\n  this[kWebSocket]._socket.resume();\n}\n\n/**\n * The listener of the `Receiver` `'error'` event.\n *\n * @param {(RangeError|Error)} err The emitted error\n * @private\n */\nfunction receiverOnError(err) {\n  const websocket = this[kWebSocket];\n\n  if (websocket._socket[kWebSocket] !== undefined) {\n    websocket._socket.removeListener('data', socketOnData);\n\n    //\n    // On Node.js < 14.0.0 the `'error'` event is emitted synchronously. See\n    // https://github.com/websockets/ws/issues/1940.\n    //\n    process.nextTick(resume, websocket._socket);\n\n    websocket.close(err[kStatusCode]);\n  }\n\n  websocket.emit('error', err);\n}\n\n/**\n * The listener of the `Receiver` `'finish'` event.\n *\n * @private\n */\nfunction receiverOnFinish() {\n  this[kWebSocket].emitClose();\n}\n\n/**\n * The listener of the `Receiver` `'message'` event.\n *\n * @param {(String|Buffer|ArrayBuffer|Buffer[])} data The message\n * @private\n */\nfunction receiverOnMessage(data) {\n  this[kWebSocket].emit('message', data);\n}\n\n/**\n * The listener of the `Receiver` `'ping'` event.\n *\n * @param {Buffer} data The data included in the ping frame\n * @private\n */\nfunction receiverOnPing(data) {\n  const websocket = this[kWebSocket];\n\n  websocket.pong(data, !websocket._isServer, NOOP);\n  websocket.emit('ping', data);\n}\n\n/**\n * The listener of the `Receiver` `'pong'` event.\n *\n * @param {Buffer} data The data included in the pong frame\n * @private\n */\nfunction receiverOnPong(data) {\n  this[kWebSocket].emit('pong', data);\n}\n\n/**\n * Resume a readable stream\n *\n * @param {Readable} stream The readable stream\n * @private\n */\nfunction resume(stream) {\n  stream.resume();\n}\n\n/**\n * The listener of the `net.Socket` `'close'` event.\n *\n * @private\n */\nfunction socketOnClose() {\n  const websocket = this[kWebSocket];\n\n  this.removeListener('close', socketOnClose);\n  this.removeListener('data', socketOnData);\n  this.removeListener('end', socketOnEnd);\n\n  websocket._readyState = WebSocket.CLOSING;\n\n  let chunk;\n\n  //\n  // The close frame might not have been received or the `'end'` event emitted,\n  // for example, if the socket was destroyed due to an error. Ensure that the\n  // `receiver` stream is closed after writing any remaining buffered data to\n  // it. If the readable side of the socket is in flowing mode then there is no\n  // buffered data as everything has been already written and `readable.read()`\n  // will return `null`. If instead, the socket is paused, any possible buffered\n  // data will be read as a single chunk.\n  //\n  if (\n    !this._readableState.endEmitted &&\n    !websocket._closeFrameReceived &&\n    !websocket._receiver._writableState.errorEmitted &&\n    (chunk = websocket._socket.read()) !== null\n  ) {\n    websocket._receiver.write(chunk);\n  }\n\n  websocket._receiver.end();\n\n  this[kWebSocket] = undefined;\n\n  clearTimeout(websocket._closeTimer);\n\n  if (\n    websocket._receiver._writableState.finished ||\n    websocket._receiver._writableState.errorEmitted\n  ) {\n    websocket.emitClose();\n  } else {\n    websocket._receiver.on('error', receiverOnFinish);\n    websocket._receiver.on('finish', receiverOnFinish);\n  }\n}\n\n/**\n * The listener of the `net.Socket` `'data'` event.\n *\n * @param {Buffer} chunk A chunk of data\n * @private\n */\nfunction socketOnData(chunk) {\n  if (!this[kWebSocket]._receiver.write(chunk)) {\n    this.pause();\n  }\n}\n\n/**\n * The listener of the `net.Socket` `'end'` event.\n *\n * @private\n */\nfunction socketOnEnd() {\n  const websocket = this[kWebSocket];\n\n  websocket._readyState = WebSocket.CLOSING;\n  websocket._receiver.end();\n  this.end();\n}\n\n/**\n * The listener of the `net.Socket` `'error'` event.\n *\n * @private\n */\nfunction socketOnError() {\n  const websocket = this[kWebSocket];\n\n  this.removeListener('error', socketOnError);\n  this.on('error', NOOP);\n\n  if (websocket) {\n    websocket._readyState = WebSocket.CLOSING;\n    this.destroy();\n  }\n}\n","'use strict';\n\n/**\n * Class representing an event.\n *\n * @private\n */\nclass Event {\n  /**\n   * Create a new `Event`.\n   *\n   * @param {String} type The name of the event\n   * @param {Object} target A reference to the target to which the event was\n   *     dispatched\n   */\n  constructor(type, target) {\n    this.target = target;\n    this.type = type;\n  }\n}\n\n/**\n * Class representing a message event.\n *\n * @extends Event\n * @private\n */\nclass MessageEvent extends Event {\n  /**\n   * Create a new `MessageEvent`.\n   *\n   * @param {(String|Buffer|ArrayBuffer|Buffer[])} data The received data\n   * @param {WebSocket} target A reference to the target to which the event was\n   *     dispatched\n   */\n  constructor(data, target) {\n    super('message', target);\n\n    this.data = data;\n  }\n}\n\n/**\n * Class representing a close event.\n *\n * @extends Event\n * @private\n */\nclass CloseEvent extends Event {\n  /**\n   * Create a new `CloseEvent`.\n   *\n   * @param {Number} code The status code explaining why the connection is being\n   *     closed\n   * @param {String} reason A human-readable string explaining why the\n   *     connection is closing\n   * @param {WebSocket} target A reference to the target to which the event was\n   *     dispatched\n   */\n  constructor(code, reason, target) {\n    super('close', target);\n\n    this.wasClean = target._closeFrameReceived && target._closeFrameSent;\n    this.reason = reason;\n    this.code = code;\n  }\n}\n\n/**\n * Class representing an open event.\n *\n * @extends Event\n * @private\n */\nclass OpenEvent extends Event {\n  /**\n   * Create a new `OpenEvent`.\n   *\n   * @param {WebSocket} target A reference to the target to which the event was\n   *     dispatched\n   */\n  constructor(target) {\n    super('open', target);\n  }\n}\n\n/**\n * Class representing an error event.\n *\n * @extends Event\n * @private\n */\nclass ErrorEvent extends Event {\n  /**\n   * Create a new `ErrorEvent`.\n   *\n   * @param {Object} error The error that generated this event\n   * @param {WebSocket} target A reference to the target to which the event was\n   *     dispatched\n   */\n  constructor(error, target) {\n    super('error', target);\n\n    this.message = error.message;\n    this.error = error;\n  }\n}\n\n/**\n * This provides methods for emulating the `EventTarget` interface. It's not\n * meant to be used directly.\n *\n * @mixin\n */\nconst EventTarget = {\n  /**\n   * Register an event listener.\n   *\n   * @param {String} type A string representing the event type to listen for\n   * @param {Function} listener The listener to add\n   * @param {Object} [options] An options object specifies characteristics about\n   *     the event listener\n   * @param {Boolean} [options.once=false] A `Boolean`` indicating that the\n   *     listener should be invoked at most once after being added. If `true`,\n   *     the listener would be automatically removed when invoked.\n   * @public\n   */\n  addEventListener(type, listener, options) {\n    if (typeof listener !== 'function') return;\n\n    function onMessage(data) {\n      listener.call(this, new MessageEvent(data, this));\n    }\n\n    function onClose(code, message) {\n      listener.call(this, new CloseEvent(code, message, this));\n    }\n\n    function onError(error) {\n      listener.call(this, new ErrorEvent(error, this));\n    }\n\n    function onOpen() {\n      listener.call(this, new OpenEvent(this));\n    }\n\n    const method = options && options.once ? 'once' : 'on';\n\n    if (type === 'message') {\n      onMessage._listener = listener;\n      this[method](type, onMessage);\n    } else if (type === 'close') {\n      onClose._listener = listener;\n      this[method](type, onClose);\n    } else if (type === 'error') {\n      onError._listener = listener;\n      this[method](type, onError);\n    } else if (type === 'open') {\n      onOpen._listener = listener;\n      this[method](type, onOpen);\n    } else {\n      this[method](type, listener);\n    }\n  },\n\n  /**\n   * Remove an event listener.\n   *\n   * @param {String} type A string representing the event type to remove\n   * @param {Function} listener The listener to remove\n   * @public\n   */\n  removeEventListener(type, listener) {\n    const listeners = this.listeners(type);\n\n    for (let i = 0; i < listeners.length; i++) {\n      if (listeners[i] === listener || listeners[i]._listener === listener) {\n        this.removeListener(type, listeners[i]);\n      }\n    }\n  }\n};\n\nmodule.exports = EventTarget;\n","/* eslint no-unused-vars: [\"error\", { \"varsIgnorePattern\": \"^net|tls|https$\" }] */\n\n'use strict';\n\nconst EventEmitter = require('events');\nconst http = require('http');\nconst https = require('https');\nconst net = require('net');\nconst tls = require('tls');\nconst { createHash } = require('crypto');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst WebSocket = require('./websocket');\nconst { format, parse } = require('./extension');\nconst { GUID, kWebSocket } = require('./constants');\n\nconst keyRegex = /^[+/0-9A-Za-z]{22}==$/;\n\nconst RUNNING = 0;\nconst CLOSING = 1;\nconst CLOSED = 2;\n\n/**\n * Class representing a WebSocket server.\n *\n * @extends EventEmitter\n */\nclass WebSocketServer extends EventEmitter {\n  /**\n   * Create a `WebSocketServer` instance.\n   *\n   * @param {Object} options Configuration options\n   * @param {Number} [options.backlog=511] The maximum length of the queue of\n   *     pending connections\n   * @param {Boolean} [options.clientTracking=true] Specifies whether or not to\n   *     track clients\n   * @param {Function} [options.handleProtocols] A hook to handle protocols\n   * @param {String} [options.host] The hostname where to bind the server\n   * @param {Number} [options.maxPayload=104857600] The maximum allowed message\n   *     size\n   * @param {Boolean} [options.noServer=false] Enable no server mode\n   * @param {String} [options.path] Accept only connections matching this path\n   * @param {(Boolean|Object)} [options.perMessageDeflate=false] Enable/disable\n   *     permessage-deflate\n   * @param {Number} [options.port] The port where to bind the server\n   * @param {(http.Server|https.Server)} [options.server] A pre-created HTTP/S\n   *     server to use\n   * @param {Function} [options.verifyClient] A hook to reject connections\n   * @param {Function} [callback] A listener for the `listening` event\n   */\n  constructor(options, callback) {\n    super();\n\n    options = {\n      maxPayload: 100 * 1024 * 1024,\n      perMessageDeflate: false,\n      handleProtocols: null,\n      clientTracking: true,\n      verifyClient: null,\n      noServer: false,\n      backlog: null, // use default (511 as implemented in net.js)\n      server: null,\n      host: null,\n      path: null,\n      port: null,\n      ...options\n    };\n\n    if (\n      (options.port == null && !options.server && !options.noServer) ||\n      (options.port != null && (options.server || options.noServer)) ||\n      (options.server && options.noServer)\n    ) {\n      throw new TypeError(\n        'One and only one of the \"port\", \"server\", or \"noServer\" options ' +\n          'must be specified'\n      );\n    }\n\n    if (options.port != null) {\n      this._server = http.createServer((req, res) => {\n        const body = http.STATUS_CODES[426];\n\n        res.writeHead(426, {\n          'Content-Length': body.length,\n          'Content-Type': 'text/plain'\n        });\n        res.end(body);\n      });\n      this._server.listen(\n        options.port,\n        options.host,\n        options.backlog,\n        callback\n      );\n    } else if (options.server) {\n      this._server = options.server;\n    }\n\n    if (this._server) {\n      const emitConnection = this.emit.bind(this, 'connection');\n\n      this._removeListeners = addListeners(this._server, {\n        listening: this.emit.bind(this, 'listening'),\n        error: this.emit.bind(this, 'error'),\n        upgrade: (req, socket, head) => {\n          this.handleUpgrade(req, socket, head, emitConnection);\n        }\n      });\n    }\n\n    if (options.perMessageDeflate === true) options.perMessageDeflate = {};\n    if (options.clientTracking) this.clients = new Set();\n    this.options = options;\n    this._state = RUNNING;\n  }\n\n  /**\n   * Returns the bound address, the address family name, and port of the server\n   * as reported by the operating system if listening on an IP socket.\n   * If the server is listening on a pipe or UNIX domain socket, the name is\n   * returned as a string.\n   *\n   * @return {(Object|String|null)} The address of the server\n   * @public\n   */\n  address() {\n    if (this.options.noServer) {\n      throw new Error('The server is operating in \"noServer\" mode');\n    }\n\n    if (!this._server) return null;\n    return this._server.address();\n  }\n\n  /**\n   * Close the server.\n   *\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  close(cb) {\n    if (cb) this.once('close', cb);\n\n    if (this._state === CLOSED) {\n      process.nextTick(emitClose, this);\n      return;\n    }\n\n    if (this._state === CLOSING) return;\n    this._state = CLOSING;\n\n    //\n    // Terminate all associated clients.\n    //\n    if (this.clients) {\n      for (const client of this.clients) client.terminate();\n    }\n\n    const server = this._server;\n\n    if (server) {\n      this._removeListeners();\n      this._removeListeners = this._server = null;\n\n      //\n      // Close the http server if it was internally created.\n      //\n      if (this.options.port != null) {\n        server.close(emitClose.bind(undefined, this));\n        return;\n      }\n    }\n\n    process.nextTick(emitClose, this);\n  }\n\n  /**\n   * See if a given request should be handled by this server instance.\n   *\n   * @param {http.IncomingMessage} req Request object to inspect\n   * @return {Boolean} `true` if the request is valid, else `false`\n   * @public\n   */\n  shouldHandle(req) {\n    if (this.options.path) {\n      const index = req.url.indexOf('?');\n      const pathname = index !== -1 ? req.url.slice(0, index) : req.url;\n\n      if (pathname !== this.options.path) return false;\n    }\n\n    return true;\n  }\n\n  /**\n   * Handle a HTTP Upgrade request.\n   *\n   * @param {http.IncomingMessage} req The request object\n   * @param {(net.Socket|tls.Socket)} socket The network socket between the\n   *     server and client\n   * @param {Buffer} head The first packet of the upgraded stream\n   * @param {Function} cb Callback\n   * @public\n   */\n  handleUpgrade(req, socket, head, cb) {\n    socket.on('error', socketOnError);\n\n    const key =\n      req.headers['sec-websocket-key'] !== undefined\n        ? req.headers['sec-websocket-key'].trim()\n        : false;\n    const upgrade = req.headers.upgrade;\n    const version = +req.headers['sec-websocket-version'];\n    const extensions = {};\n\n    if (\n      req.method !== 'GET' ||\n      upgrade === undefined ||\n      upgrade.toLowerCase() !== 'websocket' ||\n      !key ||\n      !keyRegex.test(key) ||\n      (version !== 8 && version !== 13) ||\n      !this.shouldHandle(req)\n    ) {\n      return abortHandshake(socket, 400);\n    }\n\n    if (this.options.perMessageDeflate) {\n      const perMessageDeflate = new PerMessageDeflate(\n        this.options.perMessageDeflate,\n        true,\n        this.options.maxPayload\n      );\n\n      try {\n        const offers = parse(req.headers['sec-websocket-extensions']);\n\n        if (offers[PerMessageDeflate.extensionName]) {\n          perMessageDeflate.accept(offers[PerMessageDeflate.extensionName]);\n          extensions[PerMessageDeflate.extensionName] = perMessageDeflate;\n        }\n      } catch (err) {\n        return abortHandshake(socket, 400);\n      }\n    }\n\n    //\n    // Optionally call external client verification handler.\n    //\n    if (this.options.verifyClient) {\n      const info = {\n        origin:\n          req.headers[`${version === 8 ? 'sec-websocket-origin' : 'origin'}`],\n        secure: !!(req.socket.authorized || req.socket.encrypted),\n        req\n      };\n\n      if (this.options.verifyClient.length === 2) {\n        this.options.verifyClient(info, (verified, code, message, headers) => {\n          if (!verified) {\n            return abortHandshake(socket, code || 401, message, headers);\n          }\n\n          this.completeUpgrade(key, extensions, req, socket, head, cb);\n        });\n        return;\n      }\n\n      if (!this.options.verifyClient(info)) return abortHandshake(socket, 401);\n    }\n\n    this.completeUpgrade(key, extensions, req, socket, head, cb);\n  }\n\n  /**\n   * Upgrade the connection to WebSocket.\n   *\n   * @param {String} key The value of the `Sec-WebSocket-Key` header\n   * @param {Object} extensions The accepted extensions\n   * @param {http.IncomingMessage} req The request object\n   * @param {(net.Socket|tls.Socket)} socket The network socket between the\n   *     server and client\n   * @param {Buffer} head The first packet of the upgraded stream\n   * @param {Function} cb Callback\n   * @throws {Error} If called more than once with the same socket\n   * @private\n   */\n  completeUpgrade(key, extensions, req, socket, head, cb) {\n    //\n    // Destroy the socket if the client has already sent a FIN packet.\n    //\n    if (!socket.readable || !socket.writable) return socket.destroy();\n\n    if (socket[kWebSocket]) {\n      throw new Error(\n        'server.handleUpgrade() was called more than once with the same ' +\n          'socket, possibly due to a misconfiguration'\n      );\n    }\n\n    if (this._state > RUNNING) return abortHandshake(socket, 503);\n\n    const digest = createHash('sha1')\n      .update(key + GUID)\n      .digest('base64');\n\n    const headers = [\n      'HTTP/1.1 101 Switching Protocols',\n      'Upgrade: websocket',\n      'Connection: Upgrade',\n      `Sec-WebSocket-Accept: ${digest}`\n    ];\n\n    const ws = new WebSocket(null);\n    let protocol = req.headers['sec-websocket-protocol'];\n\n    if (protocol) {\n      protocol = protocol.split(',').map(trim);\n\n      //\n      // Optionally call external protocol selection handler.\n      //\n      if (this.options.handleProtocols) {\n        protocol = this.options.handleProtocols(protocol, req);\n      } else {\n        protocol = protocol[0];\n      }\n\n      if (protocol) {\n        headers.push(`Sec-WebSocket-Protocol: ${protocol}`);\n        ws._protocol = protocol;\n      }\n    }\n\n    if (extensions[PerMessageDeflate.extensionName]) {\n      const params = extensions[PerMessageDeflate.extensionName].params;\n      const value = format({\n        [PerMessageDeflate.extensionName]: [params]\n      });\n      headers.push(`Sec-WebSocket-Extensions: ${value}`);\n      ws._extensions = extensions;\n    }\n\n    //\n    // Allow external modification/inspection of handshake headers.\n    //\n    this.emit('headers', headers, req);\n\n    socket.write(headers.concat('\\r\\n').join('\\r\\n'));\n    socket.removeListener('error', socketOnError);\n\n    ws.setSocket(socket, head, this.options.maxPayload);\n\n    if (this.clients) {\n      this.clients.add(ws);\n      ws.on('close', () => this.clients.delete(ws));\n    }\n\n    cb(ws, req);\n  }\n}\n\nmodule.exports = WebSocketServer;\n\n/**\n * Add event listeners on an `EventEmitter` using a map of <event, listener>\n * pairs.\n *\n * @param {EventEmitter} server The event emitter\n * @param {Object.<String, Function>} map The listeners to add\n * @return {Function} A function that will remove the added listeners when\n *     called\n * @private\n */\nfunction addListeners(server, map) {\n  for (const event of Object.keys(map)) server.on(event, map[event]);\n\n  return function removeListeners() {\n    for (const event of Object.keys(map)) {\n      server.removeListener(event, map[event]);\n    }\n  };\n}\n\n/**\n * Emit a `'close'` event on an `EventEmitter`.\n *\n * @param {EventEmitter} server The event emitter\n * @private\n */\nfunction emitClose(server) {\n  server._state = CLOSED;\n  server.emit('close');\n}\n\n/**\n * Handle premature socket errors.\n *\n * @private\n */\nfunction socketOnError() {\n  this.destroy();\n}\n\n/**\n * Close the connection when preconditions are not fulfilled.\n *\n * @param {(net.Socket|tls.Socket)} socket The socket of the upgrade request\n * @param {Number} code The HTTP response status code\n * @param {String} [message] The HTTP response body\n * @param {Object} [headers] Additional HTTP response headers\n * @private\n */\nfunction abortHandshake(socket, code, message, headers) {\n  if (socket.writable) {\n    message = message || http.STATUS_CODES[code];\n    headers = {\n      Connection: 'close',\n      'Content-Type': 'text/html',\n      'Content-Length': Buffer.byteLength(message),\n      ...headers\n    };\n\n    socket.write(\n      `HTTP/1.1 ${code} ${http.STATUS_CODES[code]}\\r\\n` +\n        Object.keys(headers)\n          .map((h) => `${h}: ${headers[h]}`)\n          .join('\\r\\n') +\n        '\\r\\n\\r\\n' +\n        message\n    );\n  }\n\n  socket.removeListener('error', socketOnError);\n  socket.destroy();\n}\n\n/**\n * Remove whitespace characters from both ends of a string.\n *\n * @param {String} str The string\n * @return {String} A new string representing `str` stripped of whitespace\n *     characters from both its beginning and end\n * @private\n */\nfunction trim(str) {\n  return str.trim();\n}\n","'use strict';\n\nconst WebSocket = require('./lib/websocket');\n\nWebSocket.createWebSocketStream = require('./lib/stream');\nWebSocket.Server = require('./lib/websocket-server');\nWebSocket.Receiver = require('./lib/receiver');\nWebSocket.Sender = require('./lib/sender');\n\nmodule.exports = WebSocket;\n","'use strict';\n\nconst { Duplex } = require('stream');\n\n/**\n * Emits the `'close'` event on a stream.\n *\n * @param {Duplex} stream The stream.\n * @private\n */\nfunction emitClose(stream) {\n  stream.emit('close');\n}\n\n/**\n * The listener of the `'end'` event.\n *\n * @private\n */\nfunction duplexOnEnd() {\n  if (!this.destroyed && this._writableState.finished) {\n    this.destroy();\n  }\n}\n\n/**\n * The listener of the `'error'` event.\n *\n * @param {Error} err The error\n * @private\n */\nfunction duplexOnError(err) {\n  this.removeListener('error', duplexOnError);\n  this.destroy();\n  if (this.listenerCount('error') === 0) {\n    // Do not suppress the throwing behavior.\n    this.emit('error', err);\n  }\n}\n\n/**\n * Wraps a `WebSocket` in a duplex stream.\n *\n * @param {WebSocket} ws The `WebSocket` to wrap\n * @param {Object} [options] The options for the `Duplex` constructor\n * @return {Duplex} The duplex stream\n * @public\n */\nfunction createWebSocketStream(ws, options) {\n  let resumeOnReceiverDrain = true;\n  let terminateOnDestroy = true;\n\n  function receiverOnDrain() {\n    if (resumeOnReceiverDrain) ws._socket.resume();\n  }\n\n  if (ws.readyState === ws.CONNECTING) {\n    ws.once('open', function open() {\n      ws._receiver.removeAllListeners('drain');\n      ws._receiver.on('drain', receiverOnDrain);\n    });\n  } else {\n    ws._receiver.removeAllListeners('drain');\n    ws._receiver.on('drain', receiverOnDrain);\n  }\n\n  const duplex = new Duplex({\n    ...options,\n    autoDestroy: false,\n    emitClose: false,\n    objectMode: false,\n    writableObjectMode: false\n  });\n\n  ws.on('message', function message(msg) {\n    if (!duplex.push(msg)) {\n      resumeOnReceiverDrain = false;\n      ws._socket.pause();\n    }\n  });\n\n  ws.once('error', function error(err) {\n    if (duplex.destroyed) return;\n\n    // Prevent `ws.terminate()` from being called by `duplex._destroy()`.\n    //\n    // - If the `'error'` event is emitted before the `'open'` event, then\n    //   `ws.terminate()` is a noop as no socket is assigned.\n    // - Otherwise, the error is re-emitted by the listener of the `'error'`\n    //   event of the `Receiver` object. The listener already closes the\n    //   connection by calling `ws.close()`. This allows a close frame to be\n    //   sent to the other peer. If `ws.terminate()` is called right after this,\n    //   then the close frame might not be sent.\n    terminateOnDestroy = false;\n    duplex.destroy(err);\n  });\n\n  ws.once('close', function close() {\n    if (duplex.destroyed) return;\n\n    duplex.push(null);\n  });\n\n  duplex._destroy = function (err, callback) {\n    if (ws.readyState === ws.CLOSED) {\n      callback(err);\n      process.nextTick(emitClose, duplex);\n      return;\n    }\n\n    let called = false;\n\n    ws.once('error', function error(err) {\n      called = true;\n      callback(err);\n    });\n\n    ws.once('close', function close() {\n      if (!called) callback(err);\n      process.nextTick(emitClose, duplex);\n    });\n\n    if (terminateOnDestroy) ws.terminate();\n  };\n\n  duplex._final = function (callback) {\n    if (ws.readyState === ws.CONNECTING) {\n      ws.once('open', function open() {\n        duplex._final(callback);\n      });\n      return;\n    }\n\n    // If the value of the `_socket` property is `null` it means that `ws` is a\n    // client websocket and the handshake failed. In fact, when this happens, a\n    // socket is never assigned to the websocket. Wait for the `'error'` event\n    // that will be emitted by the websocket.\n    if (ws._socket === null) return;\n\n    if (ws._socket._writableState.finished) {\n      callback();\n      if (duplex._readableState.endEmitted) duplex.destroy();\n    } else {\n      ws._socket.once('finish', function finish() {\n        // `duplex` is not destroyed here because the `'end'` event will be\n        // emitted on `duplex` after this `'finish'` event. The EOF signaling\n        // `null` chunk is, in fact, pushed when the websocket emits `'close'`.\n        callback();\n      });\n      ws.close();\n    }\n  };\n\n  duplex._read = function () {\n    if (\n      (ws.readyState === ws.OPEN || ws.readyState === ws.CLOSING) &&\n      !resumeOnReceiverDrain\n    ) {\n      resumeOnReceiverDrain = true;\n      if (!ws._receiver._writableState.needDrain) ws._socket.resume();\n    }\n  };\n\n  duplex._write = function (chunk, encoding, callback) {\n    if (ws.readyState === ws.CONNECTING) {\n      ws.once('open', function open() {\n        duplex._write(chunk, encoding, callback);\n      });\n      return;\n    }\n\n    ws.send(chunk, callback);\n  };\n\n  duplex.on('end', duplexOnEnd);\n  duplex.on('error', duplexOnError);\n  return duplex;\n}\n\nmodule.exports = createWebSocketStream;\n","'use strict';\n\nconst EventEmitter = require('events');\nconst { browser } = require('../constants');\n\n// eslint-disable-next-line\nconst WebSocket = browser ? window.WebSocket : require('ws');\n\nconst pack = (d) => JSON.stringify(d);\nconst unpack = (s) => JSON.parse(s);\n\nclass WebSocketTransport extends EventEmitter {\n  constructor(client) {\n    super();\n    this.client = client;\n    this.ws = null;\n    this.tries = 0;\n  }\n\n  async connect() {\n    const port = 6463 + (this.tries % 10);\n    this.tries += 1;\n\n    this.ws = new WebSocket(\n      `ws://127.0.0.1:${port}/?v=1&client_id=${this.client.clientId}`,\n      browser ? undefined : { origin: this.client.options.origin },\n    );\n    this.ws.onopen = this.onOpen.bind(this);\n    this.ws.onclose = this.onClose.bind(this);\n    this.ws.onerror = this.onError.bind(this);\n    this.ws.onmessage = this.onMessage.bind(this);\n  }\n\n  onOpen() {\n    this.emit('open');\n  }\n\n  onClose(event) {\n    if (!event.wasClean) {\n      return;\n    }\n    this.emit('close', event);\n  }\n\n  onError(event) {\n    try {\n      this.ws.close();\n    } catch {} // eslint-disable-line no-empty\n\n    if (this.tries > 20) {\n      this.emit('error', event.error);\n    } else {\n      setTimeout(() => {\n        this.connect();\n      }, 250);\n    }\n  }\n\n  onMessage(event) {\n    this.emit('message', unpack(event.data));\n  }\n\n  send(data) {\n    this.ws.send(pack(data));\n  }\n\n  ping() {} // eslint-disable-line no-empty-function\n\n  close() {\n    return new Promise((r) => {\n      this.once('close', r);\n      this.ws.close();\n    });\n  }\n}\n\nmodule.exports = WebSocketTransport;\n","'use strict';\n\nconst EventEmitter = require('events');\nconst { setTimeout, clearTimeout } = require('timers');\nconst fetch = require('node-fetch');\nconst transports = require('./transports');\nconst { RPCCommands, RPCEvents, RelationshipTypes } = require('./constants');\nconst { pid: getPid, uuid } = require('./util');\n\nfunction subKey(event, args) {\n  return `${event}${JSON.stringify(args)}`;\n}\n\n/**\n * @typedef {RPCClientOptions}\n * @extends {ClientOptions}\n * @prop {string} transport RPC transport. one of `ipc` or `websocket`\n */\n\n/**\n * The main hub for interacting with Discord RPC\n * @extends {BaseClient}\n */\nclass RPCClient extends EventEmitter {\n  /**\n   * @param {RPCClientOptions} [options] Options for the client.\n   * You must provide a transport\n   */\n  constructor(options = {}) {\n    super();\n\n    this.options = options;\n\n    this.accessToken = null;\n    this.clientId = null;\n\n    /**\n     * Application used in this client\n     * @type {?ClientApplication}\n     */\n    this.application = null;\n\n    /**\n     * User used in this application\n     * @type {?User}\n     */\n    this.user = null;\n\n    const Transport = transports[options.transport];\n    if (!Transport) {\n      throw new TypeError('RPC_INVALID_TRANSPORT', options.transport);\n    }\n\n    this.fetch = (method, path, { data, query } = {}) =>\n      fetch(`${this.fetch.endpoint}${path}${query ? new URLSearchParams(query) : ''}`, {\n        method,\n        body: data,\n        headers: {\n          Authorization: `Bearer ${this.accessToken}`,\n        },\n      }).then(async (r) => {\n        const body = await r.json();\n        if (!r.ok) {\n          const e = new Error(r.status);\n          e.body = body;\n          throw e;\n        }\n        return body;\n      });\n\n    this.fetch.endpoint = 'https://discord.com/api';\n\n    /**\n     * Raw transport userd\n     * @type {RPCTransport}\n     * @private\n     */\n    this.transport = new Transport(this);\n    this.transport.on('message', this._onRpcMessage.bind(this));\n\n    /**\n     * Map of nonces being expected from the transport\n     * @type {Map}\n     * @private\n     */\n    this._expecting = new Map();\n\n    this._connectPromise = undefined;\n  }\n\n  /**\n   * Search and connect to RPC\n   */\n  connect(clientId) {\n    if (this._connectPromise) {\n      return this._connectPromise;\n    }\n    this._connectPromise = new Promise((resolve, reject) => {\n      this.clientId = clientId;\n      const timeout = setTimeout(() => reject(new Error('RPC_CONNECTION_TIMEOUT')), 10e3);\n      timeout.unref();\n      this.once('connected', () => {\n        clearTimeout(timeout);\n        resolve(this);\n      });\n      this.transport.once('close', () => {\n        this._expecting.forEach((e) => {\n          e.reject(new Error('connection closed'));\n        });\n        this.emit('disconnected');\n        reject(new Error('connection closed'));\n      });\n      this.transport.connect().catch(reject);\n    });\n    return this._connectPromise;\n  }\n\n  /**\n   * @typedef {RPCLoginOptions}\n   * @param {string} clientId Client ID\n   * @param {string} [clientSecret] Client secret\n   * @param {string} [accessToken] Access token\n   * @param {string} [rpcToken] RPC token\n   * @param {string} [tokenEndpoint] Token endpoint\n   * @param {string[]} [scopes] Scopes to authorize with\n   */\n\n  /**\n   * Performs authentication flow. Automatically calls Client#connect if needed.\n   * @param {RPCLoginOptions} options Options for authentication.\n   * At least one property must be provided to perform login.\n   * @example client.login({ clientId: '1234567', clientSecret: 'abcdef123' });\n   * @returns {Promise<RPCClient>}\n   */\n  async login(options = {}) {\n    let { clientId, accessToken } = options;\n    await this.connect(clientId);\n    if (!options.scopes) {\n      this.emit('ready');\n      return this;\n    }\n    if (!accessToken) {\n      accessToken = await this.authorize(options);\n    }\n    return this.authenticate(accessToken);\n  }\n\n  /**\n   * Request\n   * @param {string} cmd Command\n   * @param {Object} [args={}] Arguments\n   * @param {string} [evt] Event\n   * @returns {Promise}\n   * @private\n   */\n  request(cmd, args, evt) {\n    return new Promise((resolve, reject) => {\n      const nonce = uuid();\n      this.transport.send({ cmd, args, evt, nonce });\n      this._expecting.set(nonce, { resolve, reject });\n    });\n  }\n\n  /**\n   * Message handler\n   * @param {Object} message message\n   * @private\n   */\n  _onRpcMessage(message) {\n    if (message.cmd === RPCCommands.DISPATCH && message.evt === RPCEvents.READY) {\n      if (message.data.user) {\n        this.user = message.data.user;\n      }\n      this.emit('connected');\n    } else if (this._expecting.has(message.nonce)) {\n      const { resolve, reject } = this._expecting.get(message.nonce);\n      if (message.evt === 'ERROR') {\n        const e = new Error(message.data.message);\n        e.code = message.data.code;\n        e.data = message.data;\n        reject(e);\n      } else {\n        resolve(message.data);\n      }\n      this._expecting.delete(message.nonce);\n    } else {\n      this.emit(message.evt, message.data);\n    }\n  }\n\n  /**\n   * Authorize\n   * @param {Object} options options\n   * @returns {Promise}\n   * @private\n   */\n  async authorize({ scopes, clientSecret, rpcToken, redirectUri, prompt } = {}) {\n    if (clientSecret && rpcToken === true) {\n      const body = await this.fetch('POST', '/oauth2/token/rpc', {\n        data: new URLSearchParams({\n          client_id: this.clientId,\n          client_secret: clientSecret,\n        }),\n      });\n      rpcToken = body.rpc_token;\n    }\n\n    const { code } = await this.request('AUTHORIZE', {\n      scopes,\n      client_id: this.clientId,\n      prompt,\n      rpc_token: rpcToken,\n    });\n\n    const response = await this.fetch('POST', '/oauth2/token', {\n      data: new URLSearchParams({\n        client_id: this.clientId,\n        client_secret: clientSecret,\n        code,\n        grant_type: 'authorization_code',\n        redirect_uri: redirectUri,\n      }),\n    });\n\n    return response.access_token;\n  }\n\n  /**\n   * Authenticate\n   * @param {string} accessToken access token\n   * @returns {Promise}\n   * @private\n   */\n  authenticate(accessToken) {\n    return this.request('AUTHENTICATE', { access_token: accessToken })\n      .then(({ application, user }) => {\n        this.accessToken = accessToken;\n        this.application = application;\n        this.user = user;\n        this.emit('ready');\n        return this;\n      });\n  }\n\n\n  /**\n   * Fetch a guild\n   * @param {Snowflake} id Guild ID\n   * @param {number} [timeout] Timeout request\n   * @returns {Promise<Guild>}\n   */\n  getGuild(id, timeout) {\n    return this.request(RPCCommands.GET_GUILD, { guild_id: id, timeout });\n  }\n\n  /**\n   * Fetch all guilds\n   * @param {number} [timeout] Timeout request\n   * @returns {Promise<Collection<Snowflake, Guild>>}\n   */\n  getGuilds(timeout) {\n    return this.request(RPCCommands.GET_GUILDS, { timeout });\n  }\n\n  /**\n   * Get a channel\n   * @param {Snowflake} id Channel ID\n   * @param {number} [timeout] Timeout request\n   * @returns {Promise<Channel>}\n   */\n  getChannel(id, timeout) {\n    return this.request(RPCCommands.GET_CHANNEL, { channel_id: id, timeout });\n  }\n\n  /**\n   * Get all channels\n   * @param {Snowflake} [id] Guild ID\n   * @param {number} [timeout] Timeout request\n   * @returns {Promise<Collection<Snowflake, Channel>>}\n   */\n  async getChannels(id, timeout) {\n    const { channels } = await this.request(RPCCommands.GET_CHANNELS, {\n      timeout,\n      guild_id: id,\n    });\n    return channels;\n  }\n\n  /**\n   * @typedef {CertifiedDevice}\n   * @prop {string} type One of `AUDIO_INPUT`, `AUDIO_OUTPUT`, `VIDEO_INPUT`\n   * @prop {string} uuid This device's Windows UUID\n   * @prop {object} vendor Vendor information\n   * @prop {string} vendor.name Vendor's name\n   * @prop {string} vendor.url Vendor's url\n   * @prop {object} model Model information\n   * @prop {string} model.name Model's name\n   * @prop {string} model.url Model's url\n   * @prop {string[]} related Array of related product's Windows UUIDs\n   * @prop {boolean} echoCancellation If the device has echo cancellation\n   * @prop {boolean} noiseSuppression If the device has noise suppression\n   * @prop {boolean} automaticGainControl If the device has automatic gain control\n   * @prop {boolean} hardwareMute If the device has a hardware mute\n   */\n\n  /**\n   * Tell discord which devices are certified\n   * @param {CertifiedDevice[]} devices Certified devices to send to discord\n   * @returns {Promise}\n   */\n  setCertifiedDevices(devices) {\n    return this.request(RPCCommands.SET_CERTIFIED_DEVICES, {\n      devices: devices.map((d) => ({\n        type: d.type,\n        id: d.uuid,\n        vendor: d.vendor,\n        model: d.model,\n        related: d.related,\n        echo_cancellation: d.echoCancellation,\n        noise_suppression: d.noiseSuppression,\n        automatic_gain_control: d.automaticGainControl,\n        hardware_mute: d.hardwareMute,\n      })),\n    });\n  }\n\n  /**\n   * @typedef {UserVoiceSettings}\n   * @prop {Snowflake} id ID of the user these settings apply to\n   * @prop {?Object} [pan] Pan settings, an object with `left` and `right` set between\n   * 0.0 and 1.0, inclusive\n   * @prop {?number} [volume=100] The volume\n   * @prop {bool} [mute] If the user is muted\n   */\n\n  /**\n   * Set the voice settings for a user, by id\n   * @param {Snowflake} id ID of the user to set\n   * @param {UserVoiceSettings} settings Settings\n   * @returns {Promise}\n   */\n  setUserVoiceSettings(id, settings) {\n    return this.request(RPCCommands.SET_USER_VOICE_SETTINGS, {\n      user_id: id,\n      pan: settings.pan,\n      mute: settings.mute,\n      volume: settings.volume,\n    });\n  }\n\n  /**\n   * Move the user to a voice channel\n   * @param {Snowflake} id ID of the voice channel\n   * @param {Object} [options] Options\n   * @param {number} [options.timeout] Timeout for the command\n   * @param {boolean} [options.force] Force this move. This should only be done if you\n   * have explicit permission from the user.\n   * @returns {Promise}\n   */\n  selectVoiceChannel(id, { timeout, force = false } = {}) {\n    return this.request(RPCCommands.SELECT_VOICE_CHANNEL, { channel_id: id, timeout, force });\n  }\n\n  /**\n   * Move the user to a text channel\n   * @param {Snowflake} id ID of the voice channel\n   * @param {Object} [options] Options\n   * @param {number} [options.timeout] Timeout for the command\n   * have explicit permission from the user.\n   * @returns {Promise}\n   */\n  selectTextChannel(id, { timeout } = {}) {\n    return this.request(RPCCommands.SELECT_TEXT_CHANNEL, { channel_id: id, timeout });\n  }\n\n  /**\n   * Get current voice settings\n   * @returns {Promise}\n   */\n  getVoiceSettings() {\n    return this.request(RPCCommands.GET_VOICE_SETTINGS)\n      .then((s) => ({\n        automaticGainControl: s.automatic_gain_control,\n        echoCancellation: s.echo_cancellation,\n        noiseSuppression: s.noise_suppression,\n        qos: s.qos,\n        silenceWarning: s.silence_warning,\n        deaf: s.deaf,\n        mute: s.mute,\n        input: {\n          availableDevices: s.input.available_devices,\n          device: s.input.device_id,\n          volume: s.input.volume,\n        },\n        output: {\n          availableDevices: s.output.available_devices,\n          device: s.output.device_id,\n          volume: s.output.volume,\n        },\n        mode: {\n          type: s.mode.type,\n          autoThreshold: s.mode.auto_threshold,\n          threshold: s.mode.threshold,\n          shortcut: s.mode.shortcut,\n          delay: s.mode.delay,\n        },\n      }));\n  }\n\n  /**\n   * Set current voice settings, overriding the current settings until this session disconnects.\n   * This also locks the settings for any other rpc sessions which may be connected.\n   * @param {Object} args Settings\n   * @returns {Promise}\n   */\n  setVoiceSettings(args) {\n    return this.request(RPCCommands.SET_VOICE_SETTINGS, {\n      automatic_gain_control: args.automaticGainControl,\n      echo_cancellation: args.echoCancellation,\n      noise_suppression: args.noiseSuppression,\n      qos: args.qos,\n      silence_warning: args.silenceWarning,\n      deaf: args.deaf,\n      mute: args.mute,\n      input: args.input ? {\n        device_id: args.input.device,\n        volume: args.input.volume,\n      } : undefined,\n      output: args.output ? {\n        device_id: args.output.device,\n        volume: args.output.volume,\n      } : undefined,\n      mode: args.mode ? {\n        type: args.mode.type,\n        auto_threshold: args.mode.autoThreshold,\n        threshold: args.mode.threshold,\n        shortcut: args.mode.shortcut,\n        delay: args.mode.delay,\n      } : undefined,\n    });\n  }\n\n  /**\n   * Capture a shortcut using the client\n   * The callback takes (key, stop) where `stop` is a function that will stop capturing.\n   * This `stop` function must be called before disconnecting or else the user will have\n   * to restart their client.\n   * @param {Function} callback Callback handling keys\n   * @returns {Promise<Function>}\n   */\n  captureShortcut(callback) {\n    const subid = subKey(RPCEvents.CAPTURE_SHORTCUT_CHANGE);\n    const stop = () => {\n      this._subscriptions.delete(subid);\n      return this.request(RPCCommands.CAPTURE_SHORTCUT, { action: 'STOP' });\n    };\n    this._subscriptions.set(subid, ({ shortcut }) => {\n      callback(shortcut, stop);\n    });\n    return this.request(RPCCommands.CAPTURE_SHORTCUT, { action: 'START' })\n      .then(() => stop);\n  }\n\n  /**\n   * Sets the presence for the logged in user.\n   * @param {object} args The rich presence to pass.\n   * @param {number} [pid] The application's process ID. Defaults to the executing process' PID.\n   * @returns {Promise}\n   */\n  setActivity(args = {}, pid = getPid()) {\n    let timestamps;\n    let assets;\n    let party;\n    let secrets;\n    if (args.startTimestamp || args.endTimestamp) {\n      timestamps = {\n        start: args.startTimestamp,\n        end: args.endTimestamp,\n      };\n      if (timestamps.start instanceof Date) {\n        timestamps.start = Math.round(timestamps.start.getTime());\n      }\n      if (timestamps.end instanceof Date) {\n        timestamps.end = Math.round(timestamps.end.getTime());\n      }\n      if (timestamps.start > 2147483647000) {\n        throw new RangeError('timestamps.start must fit into a unix timestamp');\n      }\n      if (timestamps.end > 2147483647000) {\n        throw new RangeError('timestamps.end must fit into a unix timestamp');\n      }\n    }\n    if (\n      args.largeImageKey || args.largeImageText\n      || args.smallImageKey || args.smallImageText\n    ) {\n      assets = {\n        large_image: args.largeImageKey,\n        large_text: args.largeImageText,\n        small_image: args.smallImageKey,\n        small_text: args.smallImageText,\n      };\n    }\n    if (args.partySize || args.partyId || args.partyMax) {\n      party = { id: args.partyId };\n      if (args.partySize || args.partyMax) {\n        party.size = [args.partySize, args.partyMax];\n      }\n    }\n    if (args.matchSecret || args.joinSecret || args.spectateSecret) {\n      secrets = {\n        match: args.matchSecret,\n        join: args.joinSecret,\n        spectate: args.spectateSecret,\n      };\n    }\n\n    return this.request(RPCCommands.SET_ACTIVITY, {\n      pid,\n      activity: {\n        state: args.state,\n        details: args.details,\n        timestamps,\n        assets,\n        party,\n        secrets,\n        buttons: args.buttons,\n        instance: !!args.instance,\n      },\n    });\n  }\n\n  /**\n   * Clears the currently set presence, if any. This will hide the \"Playing X\" message\n   * displayed below the user's name.\n   * @param {number} [pid] The application's process ID. Defaults to the executing process' PID.\n   * @returns {Promise}\n   */\n  clearActivity(pid = getPid()) {\n    return this.request(RPCCommands.SET_ACTIVITY, {\n      pid,\n    });\n  }\n\n  /**\n   * Invite a user to join the game the RPC user is currently playing\n   * @param {User} user The user to invite\n   * @returns {Promise}\n   */\n  sendJoinInvite(user) {\n    return this.request(RPCCommands.SEND_ACTIVITY_JOIN_INVITE, {\n      user_id: user.id || user,\n    });\n  }\n\n  /**\n   * Request to join the game the user is playing\n   * @param {User} user The user whose game you want to request to join\n   * @returns {Promise}\n   */\n  sendJoinRequest(user) {\n    return this.request(RPCCommands.SEND_ACTIVITY_JOIN_REQUEST, {\n      user_id: user.id || user,\n    });\n  }\n\n  /**\n   * Reject a join request from a user\n   * @param {User} user The user whose request you wish to reject\n   * @returns {Promise}\n   */\n  closeJoinRequest(user) {\n    return this.request(RPCCommands.CLOSE_ACTIVITY_JOIN_REQUEST, {\n      user_id: user.id || user,\n    });\n  }\n\n  createLobby(type, capacity, metadata) {\n    return this.request(RPCCommands.CREATE_LOBBY, {\n      type,\n      capacity,\n      metadata,\n    });\n  }\n\n  updateLobby(lobby, { type, owner, capacity, metadata } = {}) {\n    return this.request(RPCCommands.UPDATE_LOBBY, {\n      id: lobby.id || lobby,\n      type,\n      owner_id: (owner && owner.id) || owner,\n      capacity,\n      metadata,\n    });\n  }\n\n  deleteLobby(lobby) {\n    return this.request(RPCCommands.DELETE_LOBBY, {\n      id: lobby.id || lobby,\n    });\n  }\n\n  connectToLobby(id, secret) {\n    return this.request(RPCCommands.CONNECT_TO_LOBBY, {\n      id,\n      secret,\n    });\n  }\n\n  sendToLobby(lobby, data) {\n    return this.request(RPCCommands.SEND_TO_LOBBY, {\n      id: lobby.id || lobby,\n      data,\n    });\n  }\n\n  disconnectFromLobby(lobby) {\n    return this.request(RPCCommands.DISCONNECT_FROM_LOBBY, {\n      id: lobby.id || lobby,\n    });\n  }\n\n  updateLobbyMember(lobby, user, metadata) {\n    return this.request(RPCCommands.UPDATE_LOBBY_MEMBER, {\n      lobby_id: lobby.id || lobby,\n      user_id: user.id || user,\n      metadata,\n    });\n  }\n\n  getRelationships() {\n    const types = Object.keys(RelationshipTypes);\n    return this.request(RPCCommands.GET_RELATIONSHIPS)\n      .then((o) => o.relationships.map((r) => ({\n        ...r,\n        type: types[r.type],\n      })));\n  }\n\n  /**\n   * Subscribe to an event\n   * @param {string} event Name of event e.g. `MESSAGE_CREATE`\n   * @param {Object} [args] Args for event e.g. `{ channel_id: '1234' }`\n   * @returns {Promise<Object>}\n   */\n  async subscribe(event, args) {\n    await this.request(RPCCommands.SUBSCRIBE, args, event);\n    return {\n      unsubscribe: () => this.request(RPCCommands.UNSUBSCRIBE, args, event),\n    };\n  }\n\n  /**\n   * Destroy the client\n   */\n  async destroy() {\n    await this.transport.close();\n  }\n}\n\nmodule.exports = RPCClient;\n","'use strict';\n\nmodule.exports = {\n  ipc: require('./ipc'),\n  websocket: require('./websocket'),\n};\n","'use strict';\n\nconst util = require('./util');\n\nmodule.exports = {\n  Client: require('./client'),\n  register(id) {\n    return util.register(`discord-${id}`);\n  },\n};\n","import { Client } from \"discord-rpc\";\nimport { productName } from \"../../../package.json\";\n\nconst ActivityType = {\n  Game: 0,\n  Streaming: 1,\n  Listening: 2,\n  Watching: 3,\n  Custom: 4,\n  Competing: 5,\n};\n\ntype IActivity = {\n  timestamps?: {\n    start?: number;\n    end?: number;\n  };\n  details?: string;\n  state?: string;\n  assets?: {\n    large_image?: string;\n    large_text?: string;\n    small_image?: string;\n    small_text?: string;\n  };\n  instance?: boolean;\n  type?: number;\n};\n\nexport type PayloadType = {\n  pid: number;\n  activity: IActivity | null;\n};\n\nexport const DEFAULT_LARGE_IMAGE = \"icon\";\nexport const DEFAULT_SMALL_IMAGE = \"song_icon\";\n\nconst defaultPayload: PayloadType = {\n  pid: process.pid,\n  activity: {\n    timestamps: {\n      start: Date.now(),\n    },\n    details: productName,\n    assets: {\n      large_image: DEFAULT_LARGE_IMAGE,\n      small_image: DEFAULT_SMALL_IMAGE,\n    },\n    instance: true,\n    type: ActivityType.Listening,\n  },\n};\n\nlet discord: Client | null = null;\nlet lastPayload: PayloadType | null = null;\n\nfunction init() {\n  if (discord) return;\n\n  discord = new Client({ transport: \"ipc\" });\n\n  discord.on(\"ready\", async () => {\n    // @ts-expect-error raw request\n    discord.request(\"SET_ACTIVITY\", lastPayload ?? defaultPayload);\n  });\n\n  discord.on(\"disconnected\", () => {\n    setTimeout(() => loginRPC(), 1000).unref();\n  });\n  loginRPC();\n}\n\nfunction loginRPC() {\n  if (!discord) return;\n\n  const DISCORD_CLIENT_ID = import.meta.env.MAIN_VITE_DISCORD_CLIENT_ID;\n\n  if (!DISCORD_CLIENT_ID) {\n    console.log(\"Discord Client ID not found.\");\n    return;\n  }\n\n  discord.login({ clientId: DISCORD_CLIENT_ID }).catch(() => {\n    setTimeout(() => loginRPC(), 5000).unref();\n  });\n}\n\nfunction set(data: IActivity | null) {\n  if (!discord || !discord.user) return;\n\n  if (data) {\n    data.instance = true;\n    data.type = ActivityType.Listening;\n  }\n  const payload = {\n    pid: process.pid,\n    activity: data,\n  };\n  lastPayload = payload;\n\n  // @ts-expect-error raw request\n  discord.request(\"SET_ACTIVITY\", payload);\n}\n\nexport const RPC = {\n  init,\n  set,\n};\n","import { AonsokuStore } from \"./store\";\n\nexport interface ISettingPayload {\n  minimizeToTray: boolean;\n}\n\nconst settingsStore = new AonsokuStore<ISettingPayload>({\n  name: \"settings\",\n  defaults: {\n    minimizeToTray: true,\n  },\n});\n\nexport function saveAppSettings(payload: ISettingPayload) {\n  try {\n    settingsStore.set(payload);\n  } catch (error) {\n    console.log(\"Unable to save app settings to store.\", error);\n  }\n}\n\nexport function getAppSetting<T extends keyof ISettingPayload>(\n  item: T,\n): ISettingPayload[T] {\n  return settingsStore.get(item);\n}\n","export const DEFAULT_TITLE_BAR_COLOR = \"#ff000000\";\nexport const DEFAULT_TITLE_BAR_HEIGHT = 43;\n\nexport const titleBarOverlay: Electron.TitleBarOverlay = {\n  color: DEFAULT_TITLE_BAR_COLOR,\n  symbolColor: \"#ffffff\",\n  height: DEFAULT_TITLE_BAR_HEIGHT,\n};\n","import { is, platform } from \"@electron-toolkit/utils\";\nimport { BrowserWindow, ipcMain, nativeTheme, shell } from \"electron\";\nimport {\n  IpcChannels,\n  OverlayColors,\n  PlayerStatePayload,\n} from \"../../preload/types\";\nimport { tray, updateTray } from \"../tray\";\nimport { colorsState } from \"./colors\";\nimport {\n  clearDiscordRpcActivity,\n  RpcPayload,\n  setDiscordRpcActivity,\n} from \"./discordRpc\";\nimport { playerState } from \"./playerState\";\nimport { getAppSetting, ISettingPayload, saveAppSettings } from \"./settings\";\nimport { setTaskbarButtons } from \"./taskbar\";\nimport { DEFAULT_TITLE_BAR_HEIGHT } from \"./titleBarOverlay\";\n\nexport function setupEvents(window: BrowserWindow | null) {\n  if (!window) return;\n\n  window.on(\"ready-to-show\", async () => {\n    window.show();\n  });\n\n  window.on(\"show\", () => {\n    setTaskbarButtons();\n    updateTray();\n  });\n\n  window.on(\"hide\", () => {\n    updateTray();\n  });\n\n  window.webContents.once(\"did-finish-load\", () => {\n    nativeTheme.on(\"updated\", () => {\n      setTaskbarButtons();\n    });\n  });\n\n  window.webContents.setWindowOpenHandler((details) => {\n    shell.openExternal(details.url);\n    return { action: \"deny\" };\n  });\n\n  window.on(\"enter-full-screen\", () => {\n    window.webContents.send(IpcChannels.FullscreenStatus, true);\n  });\n\n  window.on(\"leave-full-screen\", () => {\n    window.webContents.send(IpcChannels.FullscreenStatus, false);\n  });\n\n  window.on(\"maximize\", () => {\n    window.webContents.send(IpcChannels.MaximizedStatus, true);\n  });\n\n  window.on(\"unmaximize\", () => {\n    window.webContents.send(IpcChannels.MaximizedStatus, false);\n  });\n\n  window.on(\"close\", (event) => {\n    if (is.dev || !getAppSetting(\"minimizeToTray\")) {\n      if (tray && !tray.isDestroyed()) tray.destroy();\n      return;\n    }\n\n    event.preventDefault();\n    window.hide();\n  });\n\n  window.on(\"page-title-updated\", (_, title) => {\n    updateTray(title);\n  });\n}\n\nexport function setupIpcEvents(window: BrowserWindow | null) {\n  if (!window) return;\n\n  ipcMain.removeAllListeners();\n\n  ipcMain.on(IpcChannels.ToggleFullscreen, (_, isFullscreen: boolean) => {\n    window.setFullScreen(isFullscreen);\n  });\n\n  ipcMain.removeHandler(IpcChannels.IsFullScreen);\n  ipcMain.handle(IpcChannels.IsFullScreen, () => {\n    return window.isFullScreen();\n  });\n\n  ipcMain.removeHandler(IpcChannels.IsMaximized);\n  ipcMain.handle(IpcChannels.IsMaximized, () => {\n    return window.isMaximized();\n  });\n\n  ipcMain.on(IpcChannels.ToggleMaximize, (_, isMaximized: boolean) => {\n    if (isMaximized) {\n      window.unmaximize();\n    } else {\n      window.maximize();\n    }\n  });\n\n  ipcMain.on(IpcChannels.ToggleMinimize, () => {\n    window.minimize();\n  });\n\n  ipcMain.on(IpcChannels.CloseWindow, () => {\n    window.close();\n  });\n\n  ipcMain.on(IpcChannels.ThemeChanged, (_, colors: OverlayColors) => {\n    const { color, symbol, bgColor } = colors;\n\n    if (bgColor) {\n      colorsState.set(\"bgColor\", bgColor);\n    }\n\n    if (platform.isMacOS || platform.isLinux) return;\n\n    window.setTitleBarOverlay({\n      color,\n      height: DEFAULT_TITLE_BAR_HEIGHT,\n      symbolColor: symbol,\n    });\n  });\n\n  ipcMain.on(IpcChannels.UpdateNativeTheme, (_, isDark: boolean) => {\n    nativeTheme.themeSource = isDark ? \"dark\" : \"light\";\n  });\n\n  ipcMain.on(\n    IpcChannels.UpdatePlayerState,\n    (_, payload: PlayerStatePayload) => {\n      playerState.setAll(payload);\n\n      setTimeout(() => {\n        setTaskbarButtons();\n        updateTray();\n      }, 150);\n    },\n  );\n\n  ipcMain.on(IpcChannels.SetDiscordRpcActivity, (_, payload: RpcPayload) => {\n    setDiscordRpcActivity(payload);\n  });\n\n  ipcMain.on(IpcChannels.ClearDiscordRpcActivity, () => {\n    clearDiscordRpcActivity();\n  });\n\n  ipcMain.on(IpcChannels.SaveAppSettings, (_, payload: ISettingPayload) => {\n    saveAppSettings(payload);\n  });\n}\n","import { DEFAULT_LARGE_IMAGE, DEFAULT_SMALL_IMAGE, RPC } from \"./discord\";\n\nexport type RpcPayload = {\n  trackName: string;\n  albumName: string;\n  artist: string;\n  startTime: number;\n  endTime: number;\n  duration: number;\n};\n\nexport async function setDiscordRpcActivity(payload: RpcPayload) {\n  try {\n    RPC.init();\n    RPC.set({\n      details: payload.trackName,\n      state: `${payload.artist}  ${payload.albumName}`,\n      timestamps: {\n        start: payload.startTime,\n        end: payload.endTime,\n      },\n      assets: {\n        large_image: DEFAULT_LARGE_IMAGE,\n        small_image: DEFAULT_SMALL_IMAGE,\n      },\n    });\n  } catch {}\n}\n\nexport function clearDiscordRpcActivity() {\n  RPC.set(null);\n}\n","import { platform } from \"@electron-toolkit/utils\";\nimport { nativeImage } from \"electron\";\nimport { join } from \"path\";\nimport { resourcesPath } from \"./taskbar\";\n\nexport function appIcon() {\n  let icon = \"icon.png\";\n\n  if (platform.isWindows) icon = \"icon.ico\";\n  if (platform.isMacOS) icon = \"icon.icns\";\n\n  const iconImage = join(resourcesPath, \"icons\", icon);\n\n  return nativeImage.createFromPath(iconImage);\n}\n\nexport function getAsset(name: string) {\n  const asset = join(resourcesPath, \"assets\", name);\n\n  return nativeImage.createFromPath(asset);\n}\n","import {\n  BrowserWindow,\n  BrowserWindowConstructorOptions,\n  Rectangle,\n  screen,\n} from \"electron\";\nimport { electron } from \"../../../package.json\";\nimport { AonsokuStore } from \"./store\";\n\ninterface ExtraOptions {\n  /** Should we automatically maximize the window, if it was last closed maximized. Defaults to `true`. */\n  supportMaximize?: boolean;\n}\n\ninterface State {\n  displayBounds?: Rectangle;\n  /** The saved height of loaded state. `defaultHeight` if the state has not been saved yet. */\n  height: number;\n  /** `true` if the window state was saved while the window was maximized. `undefined` if the state has not been saved yet. */\n  isMaximized?: boolean;\n  /** The saved width of loaded state. `defaultWidth` if the state has not been saved yet. */\n  width: number;\n  /** The saved x coordinate of the loaded state. `undefined` if the state has not been saved yet. */\n  x?: number;\n  /** The saved y coordinate of the loaded state. `undefined` if the state has not been saved yet. */\n  y?: number;\n}\n\nconst { defaultWidth, defaultHeight } = electron.window;\n\nconst windowStore = new AonsokuStore<State>({\n  name: \"window\",\n  defaults: {\n    width: defaultWidth,\n    height: defaultHeight,\n    x: 0,\n    y: 0,\n  },\n});\n\nconst eventHandlingDelay = 100;\n\nfunction hasBounds(state: State) {\n  return (\n    state &&\n    Number.isInteger(state.x) &&\n    Number.isInteger(state.y) &&\n    Number.isInteger(state.width) &&\n    state.width > 0 &&\n    Number.isInteger(state.height) &&\n    state.height > 0\n  );\n}\n\nfunction validateState(state: State) {\n  const isValid = state && (hasBounds(state) || state.isMaximized);\n  if (!isValid) {\n    return null;\n  }\n\n  if (hasBounds(state) && state.displayBounds) {\n    return ensureWindowVisibleOnSomeDisplay(state);\n  }\n\n  return state;\n}\n\nfunction ensureWindowVisibleOnSomeDisplay(state: State) {\n  const visible = screen.getAllDisplays().some((display) => {\n    return windowWithinBounds(state, display.bounds);\n  });\n\n  if (!visible) {\n    // Window is partially or fully not visible now.\n    // Reset it to safe defaults.\n    return null;\n  }\n\n  // for multi monitor support and scaling (devicePixelRatio)\n  const display = screen.getDisplayMatching({\n    x: state.x!,\n    y: state.y!,\n    width: state.displayBounds!.width,\n    height: state.displayBounds!.height,\n  });\n\n  const newWidth = ~~(state.width / display.scaleFactor);\n  const newHeight = ~~(state.height / display.scaleFactor);\n\n  return { ...state, width: newWidth, height: newHeight };\n}\n\nfunction windowWithinBounds(state: State, bounds: Rectangle) {\n  return (\n    state.x! >= bounds.x &&\n    state.y! >= bounds.y &&\n    state.x! + state.width <= bounds.x + bounds.width &&\n    state.y! + state.height <= bounds.y + bounds.height\n  );\n}\n\nfunction refineOptionsAndState(\n  options: BrowserWindowConstructorOptions & ExtraOptions,\n): BrowserWindowConstructorOptions & { isMaximized?: boolean } {\n  const { ...restOriginalOptions } = options;\n\n  let savedState: State | null = null;\n\n  try {\n    savedState = windowStore.store;\n  } catch {}\n\n  if (!savedState) return restOriginalOptions;\n\n  savedState = validateState(savedState);\n\n  if (!savedState) return restOriginalOptions;\n\n  const { x, y, width, height, isMaximized } = savedState;\n\n  return { ...restOriginalOptions, x, y, width, height, isMaximized };\n}\n\nexport class StatefulBrowserWindow extends BrowserWindow {\n  private stateChangeTimer?: ReturnType<typeof setTimeout>;\n\n  private state: State | null = null;\n\n  constructor(options: BrowserWindowConstructorOptions & ExtraOptions) {\n    const { supportMaximize } = options;\n\n    const newOptions = refineOptionsAndState(options);\n\n    super(newOptions);\n\n    const {\n      x,\n      y,\n      width = defaultWidth,\n      height = defaultHeight,\n      isMaximized,\n    } = newOptions;\n\n    this.state = { x, y, width, height, isMaximized };\n\n    this.manage(supportMaximize);\n  }\n\n  private manage(supportMaximize?: boolean) {\n    if (supportMaximize && this.state?.isMaximized) {\n      this.maximize();\n    }\n\n    this.on(\"resize\", this.stateChangeHandler);\n    this.on(\"move\", this.stateChangeHandler);\n    this.on(\"close\", this.closeHandler);\n    this.on(\"closed\", this.closedHandler);\n  }\n\n  private unmanage() {\n    clearTimeout(this.stateChangeTimer);\n\n    this.removeListener(\"resize\", this.stateChangeHandler);\n    this.removeListener(\"move\", this.stateChangeHandler);\n    this.removeListener(\"close\", this.closeHandler);\n    this.removeListener(\"closed\", this.closedHandler);\n  }\n\n  private stateChangeHandler() {\n    // Handles both 'resize' and 'move'\n    clearTimeout(this.stateChangeTimer);\n    this.stateChangeTimer = setTimeout(() => {\n      this.updateState();\n      this.saveState();\n    }, eventHandlingDelay);\n  }\n\n  private closedHandler() {\n    // Unregister listeners and save state\n    this.unmanage();\n    this.saveState();\n  }\n\n  private closeHandler() {\n    this.updateState();\n  }\n\n  private updateState() {\n    try {\n      const winBounds = this.getBounds();\n      if (this.isNormal()) {\n        this.state!.x = winBounds.x;\n        this.state!.y = winBounds.y;\n        this.state!.width = winBounds.width;\n        this.state!.height = winBounds.height;\n      }\n      this.state!.isMaximized = this.isMaximized();\n      this.state!.displayBounds = screen.getDisplayMatching(winBounds).bounds;\n    } catch {}\n  }\n\n  private saveState() {\n    try {\n      if (!this.state) return;\n\n      windowStore.set({ ...this.state });\n    } catch (error) {\n      console.log(\"Unable to save window position to store.\", error);\n    }\n  }\n}\n","import { is, platform } from \"@electron-toolkit/utils\";\nimport { BrowserWindow } from \"electron\";\nimport { join } from \"path\";\nimport { electron } from \"../../package.json\";\nimport { colorsState } from \"./core/colors\";\nimport { setupDownloads } from \"./core/downloads\";\nimport { setupEvents, setupIpcEvents } from \"./core/events\";\nimport { appIcon } from \"./core/icon\";\nimport { titleBarOverlay } from \"./core/titleBarOverlay\";\nimport { StatefulBrowserWindow } from \"./core/windowPosition\";\nimport { createTray } from \"./tray\";\n\nexport let mainWindow: BrowserWindow | null = null;\n\nconst { defaultWidth, defaultHeight, defaultBgColor } = electron.window;\n\nexport function createWindow(): void {\n  const backgroundColor = colorsState.get(\"bgColor\") ?? defaultBgColor;\n\n  mainWindow = new StatefulBrowserWindow({\n    width: defaultWidth,\n    height: defaultHeight,\n    minWidth: defaultWidth,\n    minHeight: defaultHeight,\n    backgroundColor,\n    supportMaximize: true,\n    show: false,\n    autoHideMenuBar: true,\n    titleBarStyle: \"hidden\",\n    visualEffectState: \"followWindow\",\n    roundedCorners: true,\n    frame: false,\n    ...(platform.isWindows ? { titleBarOverlay } : {}),\n    trafficLightPosition: { x: 15, y: 14 },\n    icon: appIcon(),\n    webPreferences: {\n      preload: join(__dirname, \"../preload/index.mjs\"),\n      sandbox: false,\n    },\n  });\n\n  createTray();\n  setupEvents(mainWindow);\n  setupIpcEvents(mainWindow);\n  setupDownloads(mainWindow);\n\n  // HMR for renderer base on electron-vite cli.\n  // Load the remote URL for development or the local html file for production.\n  if (is.dev && process.env.ELECTRON_RENDERER_URL) {\n    mainWindow.loadURL(process.env.ELECTRON_RENDERER_URL);\n  } else {\n    mainWindow.loadFile(join(__dirname, \"../renderer/index.html\"), {\n      hash: \"/\",\n    });\n  }\n}\n","/**\n * LAN Control Server Manager\n * Manages the lifecycle of the LAN control server\n */\n\nimport { BrowserWindow, ipcMain } from \"electron\";\nimport { networkInterfaces } from \"os\";\nimport type {\n  LanControlConfig,\n  LanControlServerInfo,\n  PlayerStateData,\n  CurrentSongData,\n  QueueData,\n  LanControlMessage,\n} from \"./lanControlTypes\";\nimport type { LanControlServer as LanControlServerType } from \"./lanControlServer\";\n\n// Import will be done dynamically when server starts\nlet LanControlServer: typeof LanControlServerType | null = null;\n\nexport class LanControlManager {\n  private server: LanControlServerType | null = null;\n  private mainWindow: BrowserWindow | null = null;\n  private config: LanControlConfig | null = null;\n\n  constructor(mainWindow: BrowserWindow) {\n    this.mainWindow = mainWindow;\n    this.setupIpcHandlers();\n  }\n\n  private getAllAddresses(/* port: number */): string[] {\n    const interfaces = networkInterfaces();\n    const addresses: string[] = [];\n\n    for (const interfaceName in interfaces) {\n      const interfaceInfo = interfaces[interfaceName];\n      if (!interfaceInfo) continue;\n\n      for (const info of interfaceInfo) {\n        // Only IPv4 addresses, exclude internal and loopback\n        if (info.family === 'IPv4' && !info.internal) {\n          addresses.push(`${info.address}`);\n        }\n      }\n    }\n\n    return addresses;\n  }\n\n  private setupIpcHandlers(): void {\n    // Start server\n    ipcMain.handle(\n      \"lan-control:start\",\n      async (_event, config: LanControlConfig) => {\n        return await this.start(config);\n      },\n    );\n\n    // Stop server\n    ipcMain.handle(\"lan-control:stop\", async () => {\n      return await this.stop();\n    });\n\n    // Get server info\n    ipcMain.handle(\"lan-control:get-info\", async () => {\n      return this.getInfo();\n    });\n\n    // Update config\n    ipcMain.handle(\n      \"lan-control:update-config\",\n      async (_event, config: LanControlConfig) => {\n        return await this.updateConfig(config);\n      },\n    );\n\n    // Broadcast state\n    ipcMain.on(\n      \"lan-control:broadcast-state\",\n      (_event, state: PlayerStateData) => {\n        this.broadcastState(state);\n      },\n    );\n\n    // Broadcast song\n    ipcMain.on(\n      \"lan-control:broadcast-song\",\n      (_event, song: CurrentSongData) => {\n        this.broadcastSong(song);\n      },\n    );\n\n    // Broadcast queue\n    ipcMain.on(\"lan-control:broadcast-queue\", (_event, queue: QueueData) => {\n      this.broadcastQueue(queue);\n    });\n  }\n\n  async start(config: LanControlConfig): Promise<LanControlServerInfo> {\n    try {\n      this.config = config;\n\n      // Dynamically import the server class\n      if (!LanControlServer) {\n        const module = await import(\"./lanControlServer.js\");\n        LanControlServer = module.LanControlServer;\n      }\n\n      if (this.server) {\n        await this.stop();\n      }\n\n      if (!this.mainWindow) {\n        return {\n          running: false,\n          port: config.port,\n          error: \"Main window not available\",\n        };\n      }\n\n      this.server = new LanControlServer(config, this.mainWindow);\n      const result = await this.server.start();\n\n      return {\n        running: result.success,\n        port: result.port || config.port,\n        address: result.success ? `http://localhost:${result.port}` : undefined,\n        error: result.error,\n      };\n    } catch (error) {\n      console.error(\"[LAN Control Manager] Failed to start server:\", error);\n      return {\n        running: false,\n        port: config.port,\n        error: error instanceof Error ? error.message : \"Unknown error\",\n      };\n    }\n  }\n\n  async stop(): Promise<void> {\n    if (this.server) {\n      await this.server.stop();\n      this.server = null;\n    }\n  }\n\n  getInfo(): LanControlServerInfo {\n    if (!this.server || !this.config) {\n      return {\n        running: false,\n        port: 5299,\n      };\n    }\n\n    const port = this.server.getPort();\n    const addresses = this.getAllAddresses(/* port */);\n\n    return {\n      running: this.server.isRunning(),\n      port,\n      address: this.server.isRunning()\n        ? `http://localhost:${port}`\n        : undefined,\n      addresses: this.server.isRunning() ? addresses : undefined,\n    };\n  }\n\n  async updateConfig(config: LanControlConfig): Promise<void> {\n    this.config = config;\n\n    if (this.server) {\n      this.server.updateConfig(config);\n\n      // If port changed and server is running, restart\n      if (config.enabled && this.server.getPort() !== config.port) {\n        await this.stop();\n        await this.start(config);\n      }\n    }\n  }\n\n  broadcastState(state: PlayerStateData): void {\n    if (this.server && this.server.isRunning()) {\n      this.server.broadcastStateUpdate(state);\n    }\n  }\n\n  broadcastSong(song: CurrentSongData): void {\n    if (this.server && this.server.isRunning()) {\n      this.server.broadcastCurrentSong(song);\n    }\n  }\n\n  broadcastQueue(queue: QueueData): void {\n    if (this.server && this.server.isRunning()) {\n      this.server.broadcastQueue(queue);\n    }\n  }\n\n  // Handle messages from renderer to forward to clients\n  handleMessage(_message: LanControlMessage): void {\n    // This would be used to send responses back to connected clients\n    // For now, the server handles this internally\n  }\n\n  cleanup(): void {\n    if (this.server) {\n      this.stop();\n    }\n  }\n}\n","import { electronApp, optimizer } from \"@electron-toolkit/utils\";\nimport { app, globalShortcut } from \"electron\";\nimport { createAppMenu } from \"./core/menu\";\nimport { createWindow, mainWindow } from \"./window\";\nimport { LanControlManager } from \"./core/lanControlManager\";\n\nlet lanControlManager: LanControlManager | null = null;\n\nconst instanceLock = app.requestSingleInstanceLock();\n\nif (!instanceLock) {\n  app.quit();\n} else {\n  createAppMenu();\n\n  app.on(\"second-instance\", () => {\n    if (!mainWindow || mainWindow.isDestroyed()) return;\n\n    if (mainWindow.isMinimized()) mainWindow.restore();\n\n    mainWindow.focus();\n  });\n\n  app.whenReady().then(() => {\n    electronApp.setAppUserModelId(\"com.victoralvesf.aonsoku\");\n\n    createWindow();\n\n    // Initialize LAN Control Manager after window is created\n    if (mainWindow) {\n      lanControlManager = new LanControlManager(mainWindow);\n    }\n  });\n\n  app.on(\"activate\", function () {\n    if (!mainWindow || mainWindow.isDestroyed()) {\n      createWindow();\n\n      // Re-initialize LAN Control Manager if needed\n      if (mainWindow && !lanControlManager) {\n        lanControlManager = new LanControlManager(mainWindow);\n      }\n      return;\n    }\n\n    if (mainWindow.isMinimized()) {\n      mainWindow.restore();\n    } else if (!mainWindow.isVisible()) {\n      mainWindow.show();\n    }\n\n    mainWindow.focus();\n  });\n\n  app.on(\"browser-window-created\", (_, window) => {\n    optimizer.watchWindowShortcuts(window);\n    globalShortcut.register(\"F11\", () => {});\n  });\n\n  app.on(\"window-all-closed\", () => {\n    // Cleanup LAN Control Manager\n    if (lanControlManager) {\n      lanControlManager.cleanup();\n      lanControlManager = null;\n    }\n    app.quit();\n  });\n\n  app.on(\"before-quit\", () => {\n    // Ensure LAN Control server is stopped before quitting\n    if (lanControlManager) {\n      lanControlManager.cleanup();\n    }\n  });\n}\n","import { platform } from \"@electron-toolkit/utils\";\nimport { app, Menu, shell } from \"electron\";\nimport { repository } from \"../../../package.json\";\nimport { aboutDialog } from \"./about\";\n\nexport function createAppMenu() {\n  if (!platform.isMacOS) return;\n\n  const template = [\n    {\n      label: app.name,\n      submenu: [\n        {\n          label: `About ${app.name}`,\n          click: () => aboutDialog(),\n        },\n        { type: \"separator\" },\n        { role: \"services\" },\n        { type: \"separator\" },\n        { role: \"hide\" },\n        { role: \"hideOthers\" },\n        { role: \"unhide\" },\n        { type: \"separator\" },\n        { role: \"quit\" },\n      ],\n    },\n    {\n      label: \"File\",\n      submenu: [{ role: \"close\" }],\n    },\n    {\n      label: \"Edit\",\n      submenu: [\n        { role: \"undo\" },\n        { role: \"redo\" },\n        { type: \"separator\" },\n        { role: \"cut\" },\n        { role: \"copy\" },\n        { role: \"paste\" },\n        { role: \"delete\" },\n        { role: \"selectAll\" },\n        { type: \"separator\" },\n        {\n          label: \"Speech\",\n          submenu: [{ role: \"startSpeaking\" }, { role: \"stopSpeaking\" }],\n        },\n      ],\n    },\n    {\n      label: \"View\",\n      submenu: [\n        { role: \"reload\" },\n        { role: \"forceReload\" },\n        { role: \"toggleDevTools\" },\n        { type: \"separator\" },\n        { role: \"resetZoom\" },\n        { role: \"zoomIn\" },\n        { role: \"zoomOut\" },\n        { type: \"separator\" },\n        { role: \"togglefullscreen\" },\n      ],\n    },\n    {\n      label: \"Window\",\n      submenu: [\n        { role: \"minimize\" },\n        { role: \"zoom\" },\n        { type: \"separator\" },\n        { role: \"front\" },\n        { type: \"separator\" },\n        { role: \"window\" },\n      ],\n    },\n    {\n      role: \"help\",\n      submenu: [\n        {\n          label: \"Github\",\n          click: async () => {\n            await shell.openExternal(repository.url);\n          },\n        },\n      ],\n    },\n  ];\n\n  // @ts-expect-error set only roles for menu\n  const menu = Menu.buildFromTemplate(template);\n\n  Menu.setApplicationMenu(menu);\n}\n","import { dialog } from \"electron\";\nimport os from \"os\";\nimport { description, productName, version } from \"../../../package.json\";\nimport { mainWindow } from \"../window\";\n\nexport function aboutDialog() {\n  if (!mainWindow || mainWindow.isDestroyed()) return;\n\n  const detail = [\n    `${description} \\n`,\n    `Version: v${version} \\n`,\n    `Electron: ${process.versions.electron}`,\n    `Chrome: ${process.versions.chrome}`,\n    `Node: ${process.versions.node}`,\n    `V8: ${process.versions.v8}`,\n    `OS: ${os.type()} ${os.arch()} ${os.release()}`,\n  ].join(\"\\n\");\n\n  dialog.showMessageBoxSync(mainWindow, {\n    title: productName,\n    message: productName,\n    type: \"info\",\n    detail,\n  });\n}\n"],"names":["is","app","isPackaged","platform","process","electronApp","setAppUserModelId","id","execPath","setAutoLaunch","auto","isOpenAtLogin","getLoginItemSettings","openAtLogin","setLoginItemSettings","skipProxy","session","defaultSession","setProxy","mode","optimizer","watchWindowShortcuts","window","shortcutOptions","webContents","escToCloseWindow","zoom","on","event","input","type","code","isDevToolsOpened","closeDevTools","openDevTools","console","log","control","meta","preventDefault","alt","shift","key","close","registerFramelessWindowIpc","ipcMain","action","win","BrowserWindow","fromWebContents","sender","show","showInactive","minimize","isMaximized","unmaximize","maximize","isObject","value","disallowedKeys","Set","digits","getPathSegments","path","parts","currentSegment","currentPart","isIgnoring","character","Error","has","push","Number","parseInt","isStringIndex","object","Array","isArray","index","isInteger","assertNotStringIndex","setProperty","root","pathArray","length","homedir","os","tmpdir","env","envPaths","name","suffix","TypeError","library","join","data","config","cache","temp","macos","appData","APPDATA","localAppData","LOCALAPPDATA","windows","username","basename","XDG_DATA_HOME","XDG_CONFIG_HOME","XDG_CACHE_HOME","XDG_STATE_HOME","linux","attemptifyAsync","fn","options","onError","args","apply","catch","attemptifySync","error","retryifyAsync","isRetriable","timeout","interval","timestamp","Date","now","attempt","delay","Math","round","random","Promise","resolve","setTimeout","then","retryifySync","Handlers","isChangeErrorOk","isNodeError","IS_USER_ROOT","isRetriableError","onChangeError","ATTEMPTIFY_CHANGE_ERROR_OPTIONS","ATTEMPTIFY_NOOP_OPTIONS","getuid","RETRYIFY_OPTIONS","FS","chmod","promisify","fs","chown","fsync","mkdir","realpath","stat","unlink","chmodSync","chownSync","closeSync","existsSync","fsyncSync","mkdirSync","realpathSync","statSync","unlinkSync","retry","open","readFile","rename","write","writeFile","openSync","readFileSync","renameSync","writeSync","writeFileSync","DEFAULT_WRITE_OPTIONS","DEFAULT_USER_UID","geteuid","DEFAULT_USER_GID","getegid","IS_POSIX","isString","isUndefined","IS_LINUX","IS_WINDOWS","Signals","whenExit","constructor","this","callbacks","exited","exit","signal","callback","kill","pid","hook","once","register","add","delete","Temp","store","create","filePath","randomness","floor","toString","slice","get","creator","purge","tempPath","truncate","purgeSync","purgeSyncAll","truncable","exec","truncationLength","encoding","retryOptions","tempDisposer","fd","filePathReal","filePathExists","tmpCreate","tmpPurge","useStatChown","useStatMode","stats","uid","gid","parentPath","dirname","recursive","tmpCreated","fsyncWait","Object","defineProperty","exports","regexpCode","getEsmExportName","getProperty","safeStringify","stringify","addCodeArg","str","_","nil","_Code","Name","IDENTIFIER","_CodeOrName","s","super","test","emptyStr","names","_items","item","_a","_str","reduce","c","_names","strs","i","plus","expr","res","mergeExprItems","splice","optimize","arg","x","a","b","JSON","replace","strConcat","c1","c2","rx","ValueScope","ValueScopeName","Scope","varKinds","UsedValueState","code_1","require$$0","ValueError","const","let","var","prefixes","parent","_prefixes","_parent","toName","nameOrPrefix","prefix","_newName","_nameGroup","_b","nameStr","setValue","property","itemIndex","scopePath","line","opts","_values","_scope","scope","_n","lines","ref","valueKey","vs","_name","Map","set","getValue","keyOrRef","scopeRefs","scopeName","values","_reduceValues","scopeCode","usedValues","getCode","valueCode","nameSet","forEach","Started","def","es5","Completed","or","not","CodeGen","operators","scope_1","require$$1","code_2","enumerable","scope_2","GT","GTE","LT","LTE","EQ","NEQ","NOT","OR","AND","ADD","Node","optimizeNodes","optimizeNames","_constants","Def","varKind","rhs","render","constants","optimizeExpr","Assign","lhs","sideEffects","addExprNames","AssignOp","op","Label","label","Break","Throw","AnyCode","ParentNode","nodes","n","subtractNames","addNames","BlockNode","Root","Else","kind","If","condition","else","cond","e","ns","For","ForLoop","iteration","ForRange","from","to","ForIter","loop","iterable","Func","async","Return","Try","finally","Catch","Finally","replaceName","some","items","par","extScope","_blockStarts","_extScope","_nodes","_root","scopeValue","prefixOrName","getScopeValue","_def","constant","_leafNode","_constant","assign","keyValues","thenBody","elseBody","_blockNode","endIf","elseIf","_elseNode","_endBlockNode","_for","node","forBody","endFor","forRange","forOf","arr","forIn","obj","ownProperties","tryBody","catchCode","finallyCode","_currNode","block","body","nodeCount","endBlock","len","pop","toClose","func","funcBody","endFunc","N1","N2","andCode","mappend","and","orCode","y","util","checkStrictMode","getErrorPath","Type","setEvaluated","evaluatedPropsToName","mergeEvaluated","eachItem","escapeJsonPointer","escapeFragment","unescapeFragment","schemaRefOrVal","schemaHasRules","checkUnknownRules","alwaysValidSchema","toHash","codegen_1","it","schema","self","strictSchema","rules","RULES","keywords","unescapeJsonPointer","makeMergeEvaluated","mergeNames","mergeToName","mergeValues","resultToName","gen","ps","props","keys","p","hash","all","schemaHasRulesButRef","topSchemaRef","schemaPath","keyword","$data","decodeURIComponent","encodeURIComponent","xs","f","if","max","snippets","msg","logger","warn","useFunc","dataProp","dataPropType","jsPropertySyntax","isNumber","Num","names_1","valCxt","instancePath","parentData","parentDataProperty","rootData","dynamicAnchors","vErrors","errors","json","jsonPos","jsonLen","jsonPart","default","extendErrors","reportExtraError","reportError","keyword$DataError","keywordError","util_1","require$$2","addError","errObj","err","returnErrors","errs","validateName","schemaEnv","$async","throw","ValidationError","return","message","schemaType","cxt","errorPaths","overrideAllErrors","compositeRule","allErrors","errorObjectCode","resetErrorsCount","errsCount","schemaValue","errorPath","errSchemaPath","verbose","E","params","propertyName","parentSchema","createErrors","errorInstancePath","errorSchemaPath","messages","extraErrorProps","errorObject","instPath","Str","schPath","getRules","isJSONType","jsonTypes","groups","number","string","array","types","integer","boolean","null","post","shouldUseGroup","group","rule","shouldUseRule","definition","implements","kwd","applicability","schemaHasRulesForType","dataType","reportTypeError","checkDataTypes","checkDataType","coerceAndCheckDataType","getJSONTypes","getSchemaTypes","DataType","rules_1","applicability_1","errors_1","require$$3","require$$4","ts","every","includes","nullable","coerceTo","coerceTypes","filter","t","COERCIBLE","coerceToTypes","checkTypes","wrongType","strictNumbers","Wrong","coerced","coerceSpecificType","assignParentData","coerceData","strictNums","correct","Correct","numCond","_cond","dataTypes","notObj","typeError","schemaCode","getTypeErrorContext","validateUnion","validateArray","usePattern","callValidateCode","schemaProperties","allSchemaProperties","noPropertyInData","isOwnProperty","hasPropFunc","reportMissingProp","checkMissingProp","checkReportMissingProp","util_2","prototype","hasOwnProperty","schemaMap","prop","setParams","missingProperty","properties","missing","map","propertyInData","context","passSchema","dataAndSchema","dynamicRef","newRegExp","pattern","u","unicodeRegExp","regExp","valid","validArr","validateItems","break","notValid","subschema","sch","unevaluated","schValid","_sch","schCxt","schemaProp","mergeValidEvaluated","result","reset","validateKeywordUsage","funcKeywordCode","macroKeywordCode","modifyData","useKeyword","macroSchema","macro","call","schemaRef","validateSchema","pass","checkAsyncKeyword","validate","compile","validateRef","assignValid","_await","passCxt","passContext","modifying","reportErrs","block$data","ruleErrs","try","validateAsync","validateErrs","validateSync","addErrs","ok","validSchemaType","allowUndefined","st","deps","dependencies","errorsText","fastDeepEqual","equal","RegExp","source","flags","valueOf","traverse","jsonSchemaTraverseModule","cb","_traverse","pre","jsonPtr","rootSchema","parentJsonPtr","parentKeyword","keyIndex","arrayKeywords","propsKeywords","escapeJsonPtr","allKeys","skipKeywords","additionalItems","contains","additionalProperties","propertyNames","allOf","anyOf","oneOf","$defs","definitions","patternProperties","enum","required","maximum","minimum","exclusiveMaximum","exclusiveMinimum","multipleOf","maxLength","minLength","format","maxItems","minItems","uniqueItems","maxProperties","minProperties","getSchemaRefs","resolveUrl","normalizeId","_getFullPath","getFullPath","inlineRef","SIMPLE_INLINED","limit","hasRef","countKeys","REF_KEYWORDS","count","Infinity","resolver","normalize","parse","serialize","split","TRAILING_SLASH_HASH","baseId","ANCHOR","schemaId","uriResolver","schId","baseIds","pathPrefix","localRefs","schemaRefs","fullPath","innerBaseId","addRef","_resolve","ambiguos","schOrRef","refs","checkAmbiguosRef","addAnchor","anchor","$anchor","$dynamicAnchor","sch1","sch2","getData","KeywordCxt","validateFunctionCode","boolSchema_1","boolSchema","boolOrEmptySchema","topBoolOrEmptySchema","boolError","falseSchemaError","dataType_1","dataType_2","defaults_1","defaults","assignDefaults","assignDefault","defaultValue","childData","useDefaults","ty","keyword_1","subschema_1","extendSubschemaMode","extendSubschemaData","getSubschema","dpType","dataPathArr","dataContextProps","_nextData","dataLevel","definedProperties","dataNames","jtdDiscriminator","jtdMetadata","require$$5","require$$6","require$$7","resolve_1","require$$8","require$$9","require$$10","validateFunction","funcSourceUrl","destructureValCxtES5","destructureValCxt","subschemaCode","isSchemaObj","checkKeywords","schemaCxtHasRules","$comment","commentKeyword","updateContext","checkAsyncSchema","typeAndKeywords","subSchemaObjCode","$ref","ignoreKeywordsWithRef","checkRefsAndKeywords","jtd","schemaKeywords","rootName","typeErrors","groupKeywords","iterateKeywords","strictTypes","includesType","strictTypesError","withTypes","narrowSchemaTypes","checkContextTypes","allowUnionTypes","checkMultipleTypes","hasApplicableType","checkKeywordTypes","checkStrictTypes","keywordCode","schTs","kwdT","checkNoDefault","evaluated","resetEvaluated","assignEvaluated","returnResults","topSchemaObjCode","trackErrors","successAction","failAction","failResult","fail","fail$data","invalid$data","append","errorParams","_error","$dataError","codeBlock","$dataValid","check$data","wrong$DataType","validateSchemaRef","invalid$DataSchema","appl","nextContext","schemaCxt","ruleType","JSON_POINTER","RELATIVE_JSON_POINTER","jsonPointer","matches","up","errorMsg","segments","segment","pointerType","validation_error","ajv","validation","ref_error","MissingRefError","missingRef","missingSchema","resolveSchema","getCompilingSchema","resolveRef","SchemaEnv","validation_error_1","validate_1","compileSchema","rootId","_ValidationError","sourceCode","_compilations","validateCode","Function","makeValidate","scopeValues","dynamicProps","dynamicItems","inlineOrCompile","inlineRefs","schEnv","sameSchemaEnv","s1","s2","schemas","refPath","getJsonPointer","schOrFunc","PREVENT_SCOPE_CHANGE","parsedRef","fragment","part","partSchema","isUUID","bind","isIPv4","stringArrayToHexStripped","acc","charCodeAt","nonSimpleDomain","consumeIsZone","buffer","consumeHextets","address","output","hex","normalizeIPv6","host","token","ind","findToken","isIPV6","ipv6","tokenCount","zone","endipv6Encountered","endIpv6","consume","cursor","getIPV6","newHost","escapedHost","utils","recomposeAuthority","component","uriTokens","userinfo","unescape","ipV6res","port","String","normalizeComponentEncoding","esc","escape","scheme","query","removeDotSegments","nextSlash","indexOf","SCHEMES","getSchemeHandler","URN_REG","supportedSchemeNames","wsIsSecure","wsComponent","secure","httpParse","httpSerialize","toLowerCase","http","domainHost","ws","resourceName","https","wss","urn","urnComponent","match","nid","nss","schemeHandler","uriComponent","skipEscape","skipNormalize","uuidComponent","uuid","tolerant","setPrototypeOf","schemes","isValidSchemeName","resolveComponent","base","relative","skipNormalization","target","lastIndexOf","cmpts","reference","authority","absolutePath","URI_PARSE","uri","parsed","isIP","isNaN","ipv6result","unicodeSupport","URL","domainToASCII","encodeURI","fastUri","baseURI","relativeURI","schemelessOptions","resolved","uriA","uriB","fastUriModule","ref_error_1","compile_1","codegen_2","$dataRefSchema","uri_1","defaultRegExp","META_IGNORE_OPTIONS","EXT_SCOPE_NAMES","removedOptions","errorDataPath","jsonPointers","extendRefs","missingRefs","processCode","strictDefaults","strictKeywords","unknownFormats","ajvErrors","deprecatedOptions","unicode","requiredOptions","o","_c","_d","_e","_f","_g","_h","_j","_k","_l","_m","_o","_p","_q","_r","_s","_t","_u","_v","_w","_x","_y","_z","_0","strict","_optz","strictTuples","strictRequired","loopRequired","loopEnum","addUsedSchema","validateFormats","int32range","Ajv","formats","_loading","_cache","noLogs","getLogger","formatOpt","checkOptions","_metaOpts","getMetaSchemaOptions","addInitialFormats","_addVocabularies","_addDefaultMetaSchema","addInitialKeywords","addMetaSchema","addInitialSchemas","addKeyword","_dataRefSchema","$id","defaultMeta","schemaKeyRef","v","getSchema","_meta","_addSchema","_compileSchemaEnv","compileAsync","loadSchema","runCompileAsync","_schema","loadMetaSchema","$schema","_compileAsync","checkLoaded","loadMissingSchema","_loadSchema","addSchema","_validateSchema","_checkUnique","throwOrLogError","keyRef","getSchEnv","removeSchema","_removeAllSchemas","clear","cacheKey","addVocabulary","kwdOrDef","checkKeyword","addRule","keywordMetaschema","k","getKeyword","removeKeyword","findIndex","addFormat","separator","dataVar","text","$dataMetaSchema","metaSchema","keywordsJsonPointers","seg","schemaOrData","regex","startsWith","_compileMetaSchema","currentOpts","checkOpts","opt","optsSchemas","defs","metaOpts","KEYWORD_NAME","ruleGroup","find","before","addBeforeRule","_rule","$dataRef","callRef","getValidate","callRootRef","schOrEnv","callValidate","schName","inlineRefSchema","addErrorsFrom","addEvaluatedFrom","schEvaluated","callAsyncRef","core_1","id_1","ref_1","core","limitLength","ucs2length_1","ucs2length","pos","comp","useLoop","loopAllRequired","allErrorsMode","loopUntilMissing","exitOnErrorMode","requiredKey","equal_1","j","itemTypes","loopN","indices","for","loopN2","eql","outer","_enum","getEql","vSchema","equalCode","validation_1","limitNumber_1","limitNumber","ops","KWDs","okStr","multipleOf_1","prec","multipleOfPrecision","invalid","limitLength_1","pattern_1","limitProperties_1","limitProperties","required_1","limitItems_1","limitItems","uniqueItems_1","const_1","_const","enum_1","validateAdditionalItems","validateTuple","extraItems","schArr","l","fullTuple","checkStrictTuple","min","minContains","maxContains","next","validateItemsWithCount","checkLimits","_valid","validateSchemaDeps","validatePropertyDeps","depsCount","property_ies","propDeps","schDeps","propertyDeps","schemaDeps","splitDependencies","hasProperty","depProp","additionalProperty","removeAdditional","patProps","deleteAdditional","additionalPropertyCode","applyAdditionalSchema","definedProp","propsSchema","isAdditional","applicator","additionalItems_1","prefixItems_1","prefixItems","items_1","items2020_1","items2020","contains_1","dependencies_1","propertyNames_1","additionalProperties_1","properties_1","allProps","hasDefault","applyPropertySchema","patternProperties_1","patterns","alwaysValidPatterns","checkProperties","allowMatchingProperties","checkMatchingProperties","pat","validateProperties","alwaysValid","validatePatternProperties","not_1","anyOf_1","require$$11","oneOf_1","passing","discriminator","require$$12","allOf_1","require$$13","if_1","_if","ifClause","hasThen","hasSchema","hasElse","validateIf","validateClause","require$$14","thenElse_1","thenElse","require$$15","draft2020","dynamicAnchor_1","dynamicAnchor","_getValidate","dynamicRef_1","_dynamicRef","_callRef","dynamic_1","recursiveAnchor_1","recursiveAnchor","recursiveRef_1","recursiveRef","dynamic","next_1","dependentRequired_1","dependentRequired","dependentSchemas_1","dependentSchemas","limitContains_1","limitContains","unevaluatedProperties","unevaluatedProperty","unevaluatedPropCode","evaluatedProps","unevaluatedDynamic","unevaluatedStatic","unevaluatedItems","format_2","format_1","fmts","fDef","fType","callFormat","validData","invalidFmt","validate$DataFormat","formatDef","unknownMsg","unknownFormat","fmtType","fmtRef","fmtDef","fmt","getFormat","validCondition","validateFormat","metadata","contentVocabulary","metadataVocabulary","applicator_1","unevaluated_1","unevaluatedProperties_1","unevaluatedItems_1","metadata_1","draft2020Vocabularies","types_1","DiscrError","discrError","tagName","Tag","tag","mapping","applyTagSchema","oneOfMapping","topRequired","hasRequired","tagRequired","propSch","addMappings","addMapping","tagValue","getMapping","Mapping","validateMapping","Ajv2020","draft2020_1","discriminator_1","json_schema_2020_12_1","jsonSchema202012","content","META_SUPPORT_DATA","with$data","META_SCHEMA_ID","module","draft7_1","draft7","draft7Vocabularies","draft7MetaSchema","formats_1","compare","formatNames","fastFormats","fullFormats","date","compareDate","time","getTime","compareTime","getDateTime","compareDateTime","compareIsoTime","compareIsoDateTime","duration","NOT_URI_FRAGMENT","URI","url","email","hostname","ipv4","Z_ANCHOR","byte","BYTE","lastIndex","int32","MAX_INT32","MIN_INT32","int64","float","validateNumber","double","password","binary","DATE","DAYS","year","month","day","isLeapYear","d1","d2","TIME","strictTimeZone","hr","sec","tz","tzSign","tzH","tzM","utcMin","utcHr","t1","t2","a1","a2","DATE_TIME_SEPARATOR","dateTime","dt1","dt2","limit_1","formatLimitDefinition","ajv_1","formatMaximum","formatMinimum","formatExclusiveMaximum","formatExclusiveMinimum","fCxt","compareCode","fullName","fastName","formatsPlugin","addFormats","exportName","list","copyProperty","ignoreNonConfigurable","toDescriptor","getOwnPropertyDescriptor","fromDescriptor","canCopyProperty","configurable","writable","wrappedToString","withName","fromBody","toStringDescriptor","toStringName","mimicFunction","Reflect","ownKeys","fromPrototype","getPrototypeOf","changePrototype","trim","newToString","changeToString","debounceFunction","inputFunction","wait","maxWait","POSITIVE_INFINITY","after","RangeError","maxTimeout","debouncedFunction","arguments_","maxLater","clearTimeout","shouldCallNow","cancel","MAX_SAFE_INTEGER","MAX_LENGTH","MAX_SAFE_COMPONENT_LENGTH","MAX_SAFE_BUILD_LENGTH","RELEASE_TYPES","SEMVER_SPEC_VERSION","FLAG_INCLUDE_PRERELEASE","FLAG_LOOSE","debug","NODE_DEBUG","debug_1","re","safeRe","src","safeSrc","R","LETTERDASHNUMBER","safeRegexReplacements","createToken","isGlobal","safe","makeSafeRegex","NUMERICIDENTIFIER","NUMERICIDENTIFIERLOOSE","NONNUMERICIDENTIFIER","PRERELEASEIDENTIFIER","PRERELEASEIDENTIFIERLOOSE","BUILDIDENTIFIER","MAINVERSION","PRERELEASE","BUILD","FULLPLAIN","MAINVERSIONLOOSE","PRERELEASELOOSE","LOOSEPLAIN","XRANGEIDENTIFIER","XRANGEIDENTIFIERLOOSE","GTLT","XRANGEPLAIN","XRANGEPLAINLOOSE","COERCEPLAIN","COERCE","COERCEFULL","LONETILDE","tildeTrimReplace","LONECARET","caretTrimReplace","comparatorTrimReplace","looseOption","freeze","loose","emptyOpts","parseOptions_1","numeric","compareIdentifiers","anum","bnum","identifiers","rcompareIdentifiers","parseOptions","SemVer","version","includePrerelease","m","LOOSE","FULL","raw","major","minor","patch","prerelease","num","build","other","compareMain","comparePre","compareBuild","inc","release","identifier","identifierBase","semver","parse_1","throwErrors","er","compare_1","compareBuild_1","versionA","versionB","gt_1","lt_1","eq_1","neq_1","gte_1","lte_1","eq","neq","gt","gte","lt","lte","cmp_1","SPACE_CHARACTERS","Range","range","Comparator","formatted","r","parseRange","first","isNullSet","isAny","comps","memoKey","cached","HYPHENRANGELOOSE","HYPHENRANGE","hyphenReplace","COMPARATORTRIM","TILDETRIM","CARETTRIM","rangeList","parseComparator","replaceGTE0","COMPARATORLOOSE","rangeMap","comparators","size","intersects","thisComparators","isSatisfiable","rangeComparators","thisComparator","rangeComparator","testSet","lrucache","firstKey","remainingComparators","testComparator","otherComparator","replaceCarets","replaceTildes","replaceXRanges","replaceStars","isX","replaceTilde","TILDELOOSE","TILDE","M","pr","ret","replaceCaret","CARETLOOSE","CARET","z","replaceXRange","XRANGELOOSE","XRANGE","gtlt","xM","xm","xp","anyX","STAR","GTE0PRE","GTE0","incPr","$0","fM","fm","fp","fpr","fb","tM","tm","tp","tpr","ANY","allowed","Symbol","operator","COMPARATOR","cmp","comparator","satisfies_1","satisfies","outside_1","hilo","gtfn","ltefn","ltfn","ecomp","high","low","internalRe","valid_1","clean","clean_1","inc_1","diff","diff_1","version1","version2","v1","v2","comparison","v1Higher","highVersion","lowVersion","highHasPre","major_1","minor_1","patch_1","prerelease_1","rcompare","rcompare_1","compareLoose","compareLoose_1","require$$16","sort","sort_1","require$$17","rsort","rsort_1","require$$18","require$$19","require$$20","require$$21","require$$22","require$$23","require$$24","require$$25","coerce","coerce_1","rtl","coerceRtlRegex","COERCERTLFULL","COERCERTL","require$$26","require$$27","require$$28","require$$29","toComparators","toComparators_1","require$$30","maxSatisfying","maxSatisfying_1","versions","maxSV","rangeObj","require$$31","minSatisfying","minSatisfying_1","minSV","require$$32","minVersion","minVersion_1","minver","setMin","compver","require$$33","validRange","require$$34","outside","require$$35","gtr","gtr_1","require$$36","ltr","ltr_1","require$$37","intersects_1","r1","r2","require$$38","simplifyRange","simplify","prev","ranges","simplified","original","require$$39","subset","minimumVersionWithPreRelease","minimumVersion","simpleSubset","sub","dom","eqSet","gtltComp","higher","lower","hasDomLT","hasDomGT","higherGT","lowerLT","needDomLTPre","needDomGTPre","subset_1","sawNonNull","OUTER","simpleSub","simpleDom","isSub","require$$40","tokens","objectToString","isType","typeConstructor","typeStringified","isUint8Array","Uint8Array","isUint8ArrayOrArrayBuffer","ArrayBuffer","isArrayBuffer","assertUint8Array","concatUint8Arrays","arrays","totalLength","accumulator","currentValue","returnValue","offset","cachedDecoders","utf8","globalThis","TextDecoder","uint8ArrayToString","assertUint8ArrayOrArrayBuffer","decode","cachedEncoder","TextEncoder","stringToUint8Array","assertString","encode","padStart","ajvFormats","ajvFormatsModule","encryptionAlgorithm","createPlainObject","isExist","INTERNAL_KEY","MIGRATION_KEY","Conf","events","validator","encryptionKey","defaultValues","partialOptions","configName","fileExtension","projectSuffix","clearInvalidConfig","accessPropertiesByDotNotation","configFileMode","cwd","projectName","ajvOptions","entries","_serialize","deserialize","_deserialize","EventTarget","fileStore","migrations","projectVersion","_migrate","beforeEachMigration","_validate","assert","deepEqual","watch","_watch","_get","_containsReservedKey","checkValueType","deleteProperty","onDidChange","_handleChange","onDidAnyChange","dataString","_encryptData","deserializedData","_ensureDirectory","_write","dispatchEvent","Event","iterator","initializationVector","crypto","pbkdf2Sync","decipher","createDecipheriv","dataUpdate","update","final","getter","onChange","oldValue","newValue","isDeepStrictEqual","addEventListener","removeEventListener","randomBytes","cipher","createCipheriv","SNAP","atomicWriteFileSync","persistent","debounceFn","watchFile","versionToMigrate","previousMigratedVersion","newerVersions","candidateVersion","_shouldPerformMigration","storeBackup","fromVersion","toVersion","finalVersion","migration","_set","_isVersionInRangeFormat","shell","electron","isInitialized","initDataListener","defaultCwd","getPath","appVersion","getVersion","ElectronStore","ipcRenderer","sendSync","isAbsolute","initRenderer","openInEditor","openPath","AonsokuStore","Store","colorsStore","bgColor","defaultBgColor","colorsState","status","pathExistsSync","accessSync","MaxTryError","originalPath","lastTriedPath","parenthesesIncrementer","inputFilename","extension","filename","incrementPath","incrementer","ext","extname","originalFilename","incrementedFilename","_htmlEscape","MissingValueError","MissingFilterError","filterName","pupa","template","ignoreMissing","transform","filters","placeholder","keyWithFilters","filterChain","parseKeyPath","transformedValue","keyWithFiltersPattern","doubleBraceRegex","singleBraceRegex","strings","htmlEscape","mimeDb","extList","val","extensions","isPlainObj","sortKeys","deep","seenInput","seenOutput","seenIndex","sortKeysLength","desc","asc","extNameModule","exts","endsWith","mime","CancelError","registerListener","downloadItems","receivedBytes","completedBytes","totalBytes","activeDownloadItems","progressDownloadItems","showBadge","showProgressBar","listener","getTotalBytes","window_","directory","getFilename","extName","getFilenameFromMime","getMimeType","overwrite","maxTries","tries","unusedPath","unusedFilenameSync","errorMessage","saveAs","setSaveDialogOptions","defaultPath","dialogOptions","setSavePath","getReceivedBytes","badgeCount","isDestroyed","setProgressBar","onProgress","itemTransferredBytes","itemTotalBytes","percent","transferredBytes","onTotalProgress","state","unregisterWhenDone","removeListener","onCancel","savePath","getSavePath","dock","downloadFinished","openFolderWhenDone","showItemInFolder","onCompleted","fileName","fileSize","mimeType","getURL","onStarted","IpcChannels","setupDownloads","HandleDownloads","payload","fileId","downloadsPath","reject","downloadURL","download","send","DownloadCompleted","DownloadFailed","NativeIconVariant","Size16","scaleFactor","Size32","Size48","Size256","NativeIconVariants","sendPlayerEvents","mainWindow","PlayerStateListener","playerStore","isPlaying","hasSonglist","hasPrevious","hasNext","playerState","setAll","resourcesPath","getAppPath","taskbarIconsPath","buttons","previous","pause","play","getTaskbarIcon","icon","themeFolder","nativeTheme","shouldUseDarkColors","iconPath","nativeImage","createFromPath","setTaskbarButtons","isVisible","setThumbarButtons","click","mediaIcons","shuffle","repeat","repeatOne","getMacOsMediaIconPath","getMacOsMediaIcon","image","createEmpty","variant","addRepresentation","width","height","setTemplateImage","traySpacer","tray","getTrayIconPath","dirName","getTrayIcon","getVariantForScaleFactor","scaleFactors","screen","getAllDisplays","display","isFinite","getDisplaysMaxScaleFactor","createFromBuffer","updateTray","title","trayIcon","trayTooltip","contextMenu","Menu","buildFromTemplate","productName","sublabel","enabled","accelerator","hide","destroy","quit","setToolTip","setContextMenu","fileURLToPath","sep","fileUriToPath_1","substring","rest","decodeURI","firstSlash","exists","arrow","NODE_BINDINGS_ARROW","compiled","NODE_BINDINGS_COMPILED_DIR","arch","nodePreGyp","modules","bindings","module_root","getRoot","getFileName","requireFunc","__webpack_require__","__non_webpack_require__","require","calling_file","origPST","prepareStackTrace","origSTL","stackTraceLimit","dummy","__filename","captureStackTrace","file","dir","setAsDefaultProtocolClient","registerScheme","registerProtocolHandler","conversions","sign","createNumberConversion","bitLength","typeOpts","unsigned","lowerBound","pow","upperBound","moduloVal","moduloBitLength","moduloBound","V","enforceRange","abs","clamp","evenRound","lib","treatNullAsEmptyString","codePointAt","S","U","fromCodePoint","d","punycode","mappingTable","PROCESSING_OPTIONS","TRANSITIONAL","NONTRANSITIONAL","findStatus","start","end","mid","regexAstralSymbols","countSymbols","combiningMarksRegex","validateLabel","processing_option","substr","toUnicode","search","processing","domain_name","useSTD3","hasError","processed","codePoint","mapChars","labels","tr46","toASCII","verifyDnsLength","total","domain","specialSchemes","ftp","gopher","failure","ucs2","at","idx","isASCIIDigit","isASCIIAlpha","isASCIIHex","isSingleDot","isWindowsDriveLetterString","isSpecialScheme","isSpecial","percentEncode","toUpperCase","isC0ControlPercentEncode","extraPathPercentEncodeSet","isPathPercentEncode","extraUserinfoPercentEncodeSet","isUserinfoPercentEncode","percentEncodeChar","encodeSetPredicate","cStr","buf","Buffer","utf8PercentEncode","parseIPv4Number","charAt","parseHost","isSpecialArg","pieceIndex","compress","pointer","numbersSeen","ipv4Piece","swaps","parseIPv6","decoded","parseOpaqueHost","utf8PercentDecode","asciiDomain","ipv4Host","numbers","counter","parseIPv4","serializeHost","serializeIPv4","maxIdx","maxLen","currStart","currLen","findLongestZeroSequence","ignore0","serializeIPv6","shortenPath","includesCredentials","URLStateMachine","encodingOverride","stateOverride","parseError","cannotBeABaseURL","trimControlChars","trimTabAndNewline","atFlag","arrFlag","passwordTokenSeenFlag","isASCIIAlphanumeric","encodedCodePoints","fileOtherwiseCodePoints","cp1","cp2","serializeURL","excludeFragment","serializeURLOrigin","parseURL","tuple","serializeOrigin","basicURLParse","usm","baseURL","setTheUsername","setThePassword","cannotHaveAUsernamePasswordPort","serializeInteger","mixin","getOwnPropertyNames","wrapperSymbol","implSymbol","wrapperForImpl","impl","implForWrapper","wrapper","Impl","URLImpl_1","implementation","constructorArgs","parsedBase","parsedURL","_url","href","origin","protocol","pathname","toJSON","arguments","setup","privateData","interface","expose","Window","Worker","publicApi","Readable","Stream","BUFFER","TYPE","Blob","blobParts","buffers","element","isView","byteOffset","byteLength","concat","arrayBuffer","ab","stream","readable","_read","relativeStart","relativeEnd","span","slicedBuffer","blob","FetchError","systemError","errno","convert","defineProperties","toStringTag","INTERNALS","PassThrough","Body","_this","_ref","_ref$size","_ref$timeout","isURLSearchParams","isBlob","isBuffer","disturbed","consumeBody","_this4","alloc","accum","accumBytes","abort","resTimeout","chunk","getAll","clone","instance","p1","p2","bodyUsed","getBoundary","pipe","extractContentType","getLengthSync","_lengthRetrievers","hasKnownLength","ct","headers","_this2","textConverted","_this3","charset","convertBody","mixIn","proto","global","invalidTokenRegex","invalidHeaderCharRegex","validateValue","MAP","Headers","init","rawHeaders","headerNames","headerName","method","pairs","pair","thisArg","getHeaders","_pairs$i","createHeadersIterator","INTERNAL","HeadersIteratorPrototype","_INTERNAL","done","exportNodeCompatibleHeaders","__proto__","hostHeaderKey","INTERNALS$1","STATUS_CODES","Response","contentType","statusText","redirected","INTERNALS$2","Url","whatwgUrl","parse_url","format_url","urlStr","streamDestructionSupported","isRequest","Request","inputBody","isAbortSignal","redirect","follow","agent","AbortError","URL$1","PassThrough$1","fetch","request","contentLengthValue","getNodeRequestOptions","response","destroyStream","emit","aborted","abortAndFinalize","finalize","req","reqTimeout","socket","errorCallback","hadError","listenerCount","fixResponseChunkedTransferBadEnding","addListener","hasDataListener","createHeadersLenient","isRedirect","statusCode","location","locationURL","requestOpts","destination","orig","dest","isDomainOrSubdomain","response_options","statusMessage","codings","zlibOptions","flush","zlib","Z_SYNC_FLUSH","finishFlush","createGunzip","createInflate","createInflateRaw","createBrotliDecompress","writeToStream","net","EventEmitter","OPCodes","getIPC","XDG_RUNTIME_DIR","TMPDIR","TMP","TEMP","getIPCPath","onerror","sock","createConnection","findEndpoint","endpoint","packet","writeInt32LE","working","full","read","readInt32LE","ipcModule","client","connect","onClose","client_id","clientId","cmd","evt","ping","keyMirror","tmp","browser","RPCCommands","RPCEvents","RPCErrors","CAPTURE_SHORTCUT_ALREADY_LISTENING","GET_GUILD_TIMED_OUT","INVALID_ACTIVITY_JOIN_REQUEST","INVALID_ACTIVITY_SECRET","INVALID_CHANNEL","INVALID_CLIENTID","INVALID_COMMAND","INVALID_ENTITLEMENT","INVALID_EVENT","INVALID_GIFT_CODE","INVALID_GUILD","INVALID_INVITE","INVALID_LOBBY","INVALID_LOBBY_SECRET","INVALID_ORIGIN","INVALID_PAYLOAD","INVALID_PERMISSIONS","INVALID_TOKEN","INVALID_USER","LOBBY_FULL","NO_ELIGIBLE_ACTIVITY","OAUTH2_ERROR","PURCHASE_CANCELED","PURCHASE_ERROR","RATE_LIMITED","SELECT_CHANNEL_TIMED_OUT","SELECT_VOICE_FORCE_REQUIRED","SERVICE_UNAVAILABLE","TRANSACTION_ABORTED","UNAUTHORIZED_FOR_ACHIEVEMENT","UNKNOWN_ERROR","RPCCloseCodes","CLOSE_NORMAL","CLOSE_UNSUPPORTED","CLOSE_ABNORMAL","RATELIMITED","TOKEN_REVOKED","INVALID_VERSION","INVALID_ENCODING","LobbyTypes","PRIVATE","PUBLIC","RelationshipTypes","NONE","FRIEND","BLOCKED","PENDING_INCOMING","PENDING_OUTGOING","IMPLICIT","BINARY_TYPES","GUID","kStatusCode","kWebSocket","EMPTY_BUFFER","NOOP","runtimeRequire","addon","nodeGypBuildModule","vars","variables","prebuildsOnly","PREBUILDS_ONLY","abi","runtime","ELECTRON_RUN_AS_NODE","nw","npm_config_arch","npm_config_platform","libc","LIBC","armv","ARM_VERSION","arm_version","uv","load","readdirSync","getFirst","files","matchBuild","parseTuple","architectures","Boolean","matchTuple","compareTuples","parseTags","tags","specificity","napi","matchTags","runtimeAgnostic","compareTags","nodeGypBuild","prebuild","nearby","prebuilds","winner","bufferutilModule","__dirname","fallback","mask","unmask","allocUnsafe","_mask","_unmask","toArrayBuffer","toBuffer","readOnly","bufferUtil","bu","BufferUtil","bufferUtilModule","Limiter","kDone","kRun","limiter","concurrency","pending","jobs","job","TRAILER","kPerMessageDeflate","kTotalLength","kCallback","kBuffers","kError","zlibLimiter","deflateOnData","inflateOnData","_maxPayload","inflateOnError","_inflate","permessageDeflate","isServer","maxPayload","_options","_threshold","threshold","_isServer","_deflate","concurrencyLimit","extensionName","offer","serverNoContextTakeover","server_no_context_takeover","clientNoContextTakeover","client_no_context_takeover","serverMaxWindowBits","server_max_window_bits","clientMaxWindowBits","client_max_window_bits","accept","configurations","normalizeParams","acceptAsServer","acceptAsClient","cleanup","offers","accepted","decompress","fin","_decompress","_compress","windowBits","Z_DEFAULT_WINDOWBITS","zlibInflateOptions","_readableState","endEmitted","createDeflateRaw","zlibDeflateOptions","utf8ValidateModule","isValidStatusCode","_isValidUTF8","isValidUTF8","Validation","validationModule","Writable","PerMessageDeflate","ErrorCtor","errorCode","receiver","binaryType","_binaryType","_extensions","_bufferedBytes","_buffers","_compressed","_payloadLength","_fragmented","_masked","_fin","_opcode","_totalPayloadLength","_messageLength","_fragments","_state","_loop","startLoop","dst","getInfo","getPayloadLength16","getPayloadLength64","getMask","compressed","haveLength","readUInt16BE","readUInt32BE","controlMessage","dataMessage","messageLength","fragments","randomFillSync","applyMask","Sender","_socket","_firstFragment","_deflating","_queue","frame","merge","payloadLength","opcode","rsv1","writeUInt16BE","writeUInt32BE","enqueue","doClose","sendFrame","doPing","pong","doPong","perMessageDeflate","dispatch","destroyed","dequeue","cork","uncork","tokenChars","elem","header","paramName","mustUnescape","isEscaping","inQuotes","SyntaxError","tls","createHash","Receiver","MessageEvent","CloseEvent","reason","wasClean","_closeFrameReceived","_closeFrameSent","OpenEvent","ErrorEvent","eventTarget","onMessage","onOpen","_listener","listeners","readyStates","protocolVersions","WebSocket","protocols","_closeCode","_closeMessage","_closeTimer","_protocol","_readyState","CONNECTING","_receiver","_sender","_bufferedAmount","_redirects","initAsClient","bufferedAmount","_writableState","onclose","onopen","onmessage","readyState","setSocket","head","receiverOnConclude","receiverOnDrain","receiverOnError","receiverOnMessage","receiverOnPing","receiverOnPong","setNoDelay","unshift","socketOnClose","socketOnData","socketOnEnd","socketOnError","OPEN","emitClose","CLOSED","removeAllListeners","abortHandshake","_req","CLOSING","errorEmitted","sendAfterClose","terminate","websocket","protocolVersion","followRedirects","maxRedirects","socketPath","parsedUrl","isUnixSocket","emitErrorAndClose","isSecure","defaultPort","tlsConnect","netConnect","Connection","Upgrade","handshakeTimeout","Origin","auth","_originalUnixSocket","_originalSecure","_originalHostOrSocketPath","isSameHost","authorization","cookie","addr","upgrade","digest","serverProt","protList","protError","secWebSocketExtensions","extensionNames","servername","setHeader","nextTick","resume","receiverOnFinish","finished","keyRegex","server","h","websocketServer","handleProtocols","clientTracking","verifyClient","noServer","backlog","_server","createServer","writeHead","listen","emitConnection","_removeListeners","addListeners","listening","handleUpgrade","clients","shouldHandle","info","authorized","encrypted","verified","completeUpgrade","createWebSocketStream","Duplex","duplexOnEnd","duplexOnError","resumeOnReceiverDrain","terminateOnDestroy","duplex","autoDestroy","objectMode","writableObjectMode","_destroy","called","_final","needDrain","Server","transports","ipc","getPid","accessToken","application","user","Transport","transport","URLSearchParams","Authorization","_onRpcMessage","_expecting","_connectPromise","unref","login","scopes","authorize","authenticate","nonce","DISPATCH","READY","clientSecret","rpcToken","redirectUri","prompt","client_secret","rpc_token","grant_type","redirect_uri","access_token","getGuild","GET_GUILD","guild_id","getGuilds","GET_GUILDS","getChannel","GET_CHANNEL","channel_id","getChannels","channels","GET_CHANNELS","setCertifiedDevices","devices","SET_CERTIFIED_DEVICES","vendor","model","related","echo_cancellation","echoCancellation","noise_suppression","noiseSuppression","automatic_gain_control","automaticGainControl","hardware_mute","hardwareMute","setUserVoiceSettings","settings","SET_USER_VOICE_SETTINGS","user_id","pan","mute","volume","selectVoiceChannel","force","SELECT_VOICE_CHANNEL","selectTextChannel","SELECT_TEXT_CHANNEL","getVoiceSettings","GET_VOICE_SETTINGS","qos","silenceWarning","silence_warning","deaf","availableDevices","available_devices","device","device_id","autoThreshold","auto_threshold","shortcut","setVoiceSettings","SET_VOICE_SETTINGS","captureShortcut","subid","CAPTURE_SHORTCUT_CHANGE","stop","_subscriptions","CAPTURE_SHORTCUT","setActivity","timestamps","assets","party","secrets","startTimestamp","endTimestamp","largeImageKey","largeImageText","smallImageKey","smallImageText","large_image","large_text","small_image","small_text","partySize","partyId","partyMax","matchSecret","joinSecret","spectateSecret","spectate","SET_ACTIVITY","activity","details","clearActivity","sendJoinInvite","SEND_ACTIVITY_JOIN_INVITE","sendJoinRequest","SEND_ACTIVITY_JOIN_REQUEST","closeJoinRequest","CLOSE_ACTIVITY_JOIN_REQUEST","createLobby","capacity","CREATE_LOBBY","updateLobby","lobby","owner","UPDATE_LOBBY","owner_id","deleteLobby","DELETE_LOBBY","connectToLobby","secret","CONNECT_TO_LOBBY","sendToLobby","SEND_TO_LOBBY","disconnectFromLobby","DISCONNECT_FROM_LOBBY","updateLobbyMember","UPDATE_LOBBY_MEMBER","lobby_id","getRelationships","GET_RELATIONSHIPS","relationships","subscribe","SUBSCRIBE","unsubscribe","UNSUBSCRIBE","Client","ActivityType","DEFAULT_LARGE_IMAGE","DEFAULT_SMALL_IMAGE","defaultPayload","discord","lastPayload","loginRPC","RPC","settingsStore","minimizeToTray","titleBarOverlay","color","symbolColor","setupEvents","setWindowOpenHandler","openExternal","FullscreenStatus","MaximizedStatus","setupIpcEvents","ToggleFullscreen","isFullscreen","setFullScreen","removeHandler","IsFullScreen","handle","isFullScreen","IsMaximized","ToggleMaximize","ToggleMinimize","CloseWindow","ThemeChanged","colors","symbol","setTitleBarOverlay","UpdateNativeTheme","isDark","themeSource","UpdatePlayerState","SetDiscordRpcActivity","trackName","artist","albumName","startTime","endTime","setDiscordRpcActivity","ClearDiscordRpcActivity","SaveAppSettings","saveAppSettings","appIcon","iconImage","defaultWidth","defaultHeight","windowStore","hasBounds","validateState","displayBounds","visible","bounds","windowWithinBounds","getDisplayMatching","newWidth","newHeight","ensureWindowVisibleOnSomeDisplay","StatefulBrowserWindow","stateChangeTimer","supportMaximize","newOptions","restOriginalOptions","savedState","refineOptionsAndState","manage","stateChangeHandler","closeHandler","closedHandler","unmanage","updateState","saveState","winBounds","getBounds","isNormal","createWindow","backgroundColor","minWidth","minHeight","autoHideMenuBar","titleBarStyle","visualEffectState","roundedCorners","trafficLightPosition","webPreferences","preload","sandbox","Tray","popUpContextMenu","createTray","ELECTRON_RENDERER_URL","loadURL","loadFile","LanControlServer","LanControlManager","setupIpcHandlers","getAllAddresses","interfaces","networkInterfaces","addresses","interfaceName","interfaceInfo","family","internal","_event","updateConfig","broadcastState","song","broadcastSong","queue","broadcastQueue","import","running","success","getPort","isRunning","broadcastStateUpdate","broadcastCurrentSong","handleMessage","_message","lanControlManager","requestSingleInstanceLock","submenu","detail","chrome","v8","dialog","showMessageBoxSync","aboutDialog","role","repository","menu","setApplicationMenu","createAppMenu","isMinimized","restore","focus","whenReady","globalShortcut"],"mappings":"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CnCf,IACGx3E,KAAMy3E,IACLl0E,KAAK00E,OAAO9D,QAAQsD,SAAWA,IAEhC34E,MAAOoR,IACN3M,KAAK00E,OAAOzD,KAAK,QAAStkE,KAGhC3M,KAAKixE,KAAK,UAAWj3E,GACrB,MACF,KAAKu5E,EACHvzE,KAAKixE,KAAK,QAASj3E,OAO/B,CAEE,OAAA46E,CAAQjoE,GACN3M,KAAKixE,KAAK,QAAStkE,EACvB,CAEE,IAAAirD,CAAK59D,EAAMwR,EAAK+nE,GACdvzE,KAAKuxE,OAAO3yE,MAAM8qD,EAAOl+C,EAAIxR,GACjC,CAEE,WAAMpD,GACJ,OAAO,IAAI0F,QAASi/C,IAClBv7C,KAAKS,KAAK,QAAS86C,GACnBv7C,KAAK43D,KAAK,GAAI2b,GACdvzE,KAAKuxE,OAAOvQ,OAElB,CAEE,IAAAiU,GACEj1E,KAAK43D,KAAK1iC,IAAQq+C,EACtB,GAIAkB,GAAAtxE,QAAAumD,OAAwBA,EACxB+qB,GAAAtxE,QAAAkmD,OAAwBA,wDC1KxB,SAAS6rB,EAAUtlE,GACjB,MAAMulE,EAAM,CAAA,EACZ,IAAA,MAAWx9E,KAASiY,EAClBulE,EAAIx9E,GAASA,EAEf,OAAOw9E,CACT,aAGAlqE,GAAAmqE,QAAoC,oBAAX7/E,OAEzB0V,GAAAoqE,YAAsBH,EAAU,CAC9B,WACA,YACA,eACA,YACA,aACA,cACA,eACA,wBACA,oBACA,WACA,YACA,cACA,0BACA,4BACA,uBACA,6BACA,sBACA,qBACA,uBACA,qBACA,mBACA,eACA,4BACA,8BACA,uBACA,yBACA,iBACA,YACA,uBACA,kCACA,oBACA,yBACA,UACA,kBACA,wBACA,YACA,eACA,eACA,eACA,sBACA,mBACA,wBACA,gBACA,iBACA,yBACA,8BACA,qBACA,+BACA,4BACA,8BACA,uBACA,yBACA,yBACA,iBACA,WACA,mBACA,wBACA,4BACA,0BACA,0BACA,uBACA,0BAGFjqE,GAAAqqE,UAAoBJ,EAAU,CAC5B,sBACA,eACA,eACA,iBACA,sBACA,uBACA,qBACA,qBACA,qBACA,wBACA,0BACA,0BAC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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,155,156,157,158,159,160,161,162,163,164,165,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210]}