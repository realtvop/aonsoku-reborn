{"version":3,"file":"index.mjs","sources":["../../node_modules/.pnpm/@electron-toolkit+preload@3.0.2_electron@36.9.5/node_modules/@electron-toolkit/preload/dist/index.mjs","../../electron/preload/types.ts","../../electron/preload/index.ts"],"sourcesContent":["import { webUtils, webFrame, ipcRenderer, contextBridge } from 'electron';\n\nconst electronAPI = {\n    ipcRenderer: {\n        send(channel, ...args) {\n            ipcRenderer.send(channel, ...args);\n        },\n        sendTo(webContentsId, channel, ...args) {\n            const electronVer = process.versions.electron;\n            const electronMajorVer = electronVer ? parseInt(electronVer.split('.')[0]) : 0;\n            if (electronMajorVer >= 28) {\n                throw new Error('\"sendTo\" method has been removed since Electron 28.');\n            }\n            else {\n                ipcRenderer.sendTo(webContentsId, channel, ...args);\n            }\n        },\n        sendSync(channel, ...args) {\n            return ipcRenderer.sendSync(channel, ...args);\n        },\n        sendToHost(channel, ...args) {\n            ipcRenderer.sendToHost(channel, ...args);\n        },\n        postMessage(channel, message, transfer) {\n            ipcRenderer.postMessage(channel, message, transfer);\n        },\n        invoke(channel, ...args) {\n            return ipcRenderer.invoke(channel, ...args);\n        },\n        on(channel, listener) {\n            ipcRenderer.on(channel, listener);\n            return () => {\n                ipcRenderer.removeListener(channel, listener);\n            };\n        },\n        once(channel, listener) {\n            ipcRenderer.once(channel, listener);\n            return () => {\n                ipcRenderer.removeListener(channel, listener);\n            };\n        },\n        removeListener(channel, listener) {\n            ipcRenderer.removeListener(channel, listener);\n            return this;\n        },\n        removeAllListeners(channel) {\n            ipcRenderer.removeAllListeners(channel);\n        }\n    },\n    webFrame: {\n        insertCSS(css) {\n            return webFrame.insertCSS(css);\n        },\n        setZoomFactor(factor) {\n            if (typeof factor === 'number' && factor > 0) {\n                webFrame.setZoomFactor(factor);\n            }\n        },\n        setZoomLevel(level) {\n            if (typeof level === 'number') {\n                webFrame.setZoomLevel(level);\n            }\n        }\n    },\n    webUtils: {\n        getPathForFile(file) {\n            return webUtils.getPathForFile(file);\n        }\n    },\n    process: {\n        get platform() {\n            return process.platform;\n        },\n        get versions() {\n            return process.versions;\n        },\n        get env() {\n            return { ...process.env };\n        }\n    }\n};\n/**\n * Expose Electron APIs from your preload script, the API\n * will be accessible from the website on `window.electron`.\n */\nfunction exposeElectronAPI() {\n    if (process.contextIsolated) {\n        try {\n            contextBridge.exposeInMainWorld('electron', electronAPI);\n        }\n        catch (error) {\n            console.error(error);\n        }\n    }\n    else {\n        // @ts-ignore (need dts)\n        window.electron = electronAPI;\n    }\n}\n\nexport { electronAPI, exposeElectronAPI };\n","import { RpcPayload } from '../main/core/discordRpc'\nimport { IDownloadPayload } from '../main/core/downloads'\nimport { ISettingPayload } from '../main/core/settings'\n\nexport enum IpcChannels {\n  FullscreenStatus = 'fullscreen-status',\n  ToggleFullscreen = 'toggle-fullscreen',\n  IsFullScreen = 'is-fullscreen',\n  IsMaximized = 'is-maximized',\n  MaximizedStatus = 'maximized-status',\n  ToggleMaximize = 'toggle-maximize',\n  ToggleMinimize = 'toggle-minimize',\n  CloseWindow = 'close-window',\n  ThemeChanged = 'theme-changed',\n  UpdateNativeTheme = 'update-native-theme',\n  HandleDownloads = 'handle-downloads',\n  DownloadCompleted = 'download-completed',\n  DownloadFailed = 'download-failed',\n  UpdatePlayerState = 'update-player-state',\n  PlayerStateListener = 'player-state-listener',\n  SetDiscordRpcActivity = 'set-discord-rpc-activity',\n  ClearDiscordRpcActivity = 'clear-discord-rpc-activity',\n  SaveAppSettings = 'save-app-settings',\n}\n\nexport type OverlayColors = {\n  color: string\n  symbol: string\n  bgColor: string\n}\n\nexport type PlayerStatePayload = {\n  isPlaying: boolean\n  hasPrevious: boolean\n  hasNext: boolean\n  hasSonglist: boolean\n}\n\nexport type PlayerStateListenerActions =\n  | 'togglePlayPause'\n  | 'skipBackwards'\n  | 'skipForward'\n  | 'toggleShuffle'\n  | 'toggleRepeat'\n\nexport interface IAonsokuAPI {\n  enterFullScreen: () => void\n  exitFullScreen: () => void\n  isFullScreen: () => Promise<boolean>\n  fullscreenStatusListener: (func: (status: boolean) => void) => void\n  removeFullscreenStatusListener: () => void\n  isMaximized: () => Promise<boolean>\n  maximizedStatusListener: (func: (status: boolean) => void) => void\n  removeMaximizedStatusListener: () => void\n  toggleMaximize: (isMaximized: boolean) => void\n  toggleMinimize: () => void\n  closeWindow: () => void\n  setTitleBarOverlayColors: (colors: OverlayColors) => void\n  setNativeTheme: (isDark: boolean) => void\n  downloadFile: (payload: IDownloadPayload) => void\n  downloadCompletedListener: (func: (fileId: string) => void) => void\n  downloadFailedListener: (func: (fileId: string) => void) => void\n  updatePlayerState: (payload: PlayerStatePayload) => void\n  playerStateListener: (\n    func: (action: PlayerStateListenerActions) => void,\n  ) => void\n  setDiscordRpcActivity: (payload: RpcPayload) => void\n  clearDiscordRpcActivity: () => void\n  saveAppSettings: (payload: ISettingPayload) => void\n}\n","import { electronAPI } from '@electron-toolkit/preload'\nimport { contextBridge, ipcRenderer } from 'electron'\nimport { IAonsokuAPI, IpcChannels, PlayerStateListenerActions } from './types'\n\n// Custom APIs for renderer\nconst api: IAonsokuAPI = {\n  enterFullScreen: () => ipcRenderer.send(IpcChannels.ToggleFullscreen, true),\n  exitFullScreen: () => ipcRenderer.send(IpcChannels.ToggleFullscreen, false),\n  isFullScreen: () => ipcRenderer.invoke(IpcChannels.IsFullScreen),\n  fullscreenStatusListener: (func) => {\n    ipcRenderer.on(IpcChannels.FullscreenStatus, (_, status: boolean) =>\n      func(status),\n    )\n  },\n  removeFullscreenStatusListener: () => {\n    ipcRenderer.removeAllListeners(IpcChannels.FullscreenStatus)\n  },\n  isMaximized: () => ipcRenderer.invoke(IpcChannels.IsMaximized),\n  maximizedStatusListener: (func) => {\n    ipcRenderer.on(IpcChannels.MaximizedStatus, (_, status: boolean) =>\n      func(status),\n    )\n  },\n  removeMaximizedStatusListener: () => {\n    ipcRenderer.removeAllListeners(IpcChannels.MaximizedStatus)\n  },\n  toggleMaximize: (isMaximized) =>\n    ipcRenderer.send(IpcChannels.ToggleMaximize, isMaximized),\n  toggleMinimize: () => ipcRenderer.send(IpcChannels.ToggleMinimize),\n  closeWindow: () => ipcRenderer.send(IpcChannels.CloseWindow),\n  setTitleBarOverlayColors: (color) =>\n    ipcRenderer.send(IpcChannels.ThemeChanged, color),\n  setNativeTheme: (isDark) =>\n    ipcRenderer.send(IpcChannels.UpdateNativeTheme, isDark),\n  downloadFile: (payload) =>\n    ipcRenderer.send(IpcChannels.HandleDownloads, payload),\n  downloadCompletedListener: (func) => {\n    ipcRenderer.once(IpcChannels.DownloadCompleted, (_, fileId: string) =>\n      func(fileId),\n    )\n  },\n  downloadFailedListener: (func) => {\n    ipcRenderer.once(IpcChannels.DownloadFailed, (_, fileId: string) =>\n      func(fileId),\n    )\n  },\n  updatePlayerState: (payload) => {\n    ipcRenderer.send(IpcChannels.UpdatePlayerState, payload)\n  },\n  playerStateListener: (func) => {\n    ipcRenderer.on(\n      IpcChannels.PlayerStateListener,\n      (_, state: PlayerStateListenerActions) => func(state),\n    )\n  },\n  setDiscordRpcActivity: (payload) => {\n    ipcRenderer.send(IpcChannels.SetDiscordRpcActivity, payload)\n  },\n  clearDiscordRpcActivity: () => {\n    ipcRenderer.send(IpcChannels.ClearDiscordRpcActivity)\n  },\n  saveAppSettings: (payload) => {\n    ipcRenderer.send(IpcChannels.SaveAppSettings, payload)\n  },\n}\n\n// Use `contextBridge` APIs to expose Electron APIs to\n// renderer only if context isolation is enabled, otherwise\n// just add to the DOM global.\nif (process.contextIsolated) {\n  try {\n    contextBridge.exposeInMainWorld('electron', electronAPI)\n    contextBridge.exposeInMainWorld('api', api)\n  } catch (error) {\n    console.error(error)\n  }\n} else {\n  // @ts-expect-error (define in dts)\n  window.electron = electronAPI\n  // @ts-expect-error (define in dts)\n  window.api = api\n}\n"],"names":["electronAPI","ipcRenderer","send","channel","args","sendTo","webContentsId","electronVer","process","versions","electron","parseInt","split","Error","sendSync","sendToHost","postMessage","message","transfer","invoke","on","listener","removeListener","once","this","removeAllListeners","webFrame","insertCSS","css","setZoomFactor","factor","setZoomLevel","level","webUtils","getPathForFile","file","platform","env","IpcChannels","api","enterFullScreen","ToggleFullscreen","exitFullScreen","isFullScreen","IsFullScreen","fullscreenStatusListener","func","FullscreenStatus","_","status","removeFullscreenStatusListener","isMaximized","IsMaximized","maximizedStatusListener","MaximizedStatus","removeMaximizedStatusListener","toggleMaximize","ToggleMaximize","toggleMinimize","ToggleMinimize","closeWindow","CloseWindow","setTitleBarOverlayColors","color","ThemeChanged","setNativeTheme","isDark","UpdateNativeTheme","downloadFile","payload","HandleDownloads","downloadCompletedListener","DownloadCompleted","fileId","downloadFailedListener","DownloadFailed","updatePlayerState","UpdatePlayerState","playerStateListener","PlayerStateListener","state","setDiscordRpcActivity","SetDiscordRpcActivity","clearDiscordRpcActivity","ClearDiscordRpcActivity","saveAppSettings","SaveAppSettings","contextIsolated","contextBridge","exposeInMainWorld","error","console","window"],"mappings":"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","x_google_ignoreList":[0]}